var h5_advperfcharts;!function(t){h5=h5||{},h5.advperfcharts={angularModule:angular.module("com.vmware.opsmgmt.client.advperfcharts",["com.vmware.vsphere.client.commonModule","com.vmware.platform.ui"])},angular.module("com.vmware.opsmgmt.client.advperfcharts").run([function(){var t={"vsphere.core.performance.chart.export.png.action":"image/png","vsphere.core.performance.chart.export.jpeg.action":"image/jpeg","vsphere.core.performance.chart.export.svg.action":"image/svg+xml"};_.each(t,function(t,e){h5.actions[e]=function(){var e=$("#renderedGraph").highcharts();e.exportChartLocal({type:t})}}),h5.actions["vsphere.core.performance.chart.export.csv.action"]=function(){var t=$("#renderedGraph").highcharts();t.downloadCSV()}}]).run(["vxZoneService","i18nService","chartExportAsCsvService",function(t,e,r){t.runOutsideAngular(function(){Highcharts.dateFormats={_ISO:function(t){return new Date(t).toISOString()}},Highcharts.setOptions({global:{useUTC:!1},lang:{resetZoom:e.getString("AdvperfchartsUi","advPerfChartsView.label.resetZoom")},exporting:{enabled:!1,fallbackToExportServer:!1,filename:e.getString("AdvperfchartsUi","advPerfChartsView.export.filename"),csv:{columnHeaderFormatter:function(t){return r.getHeaderText(t)},dateFormat:"%_ISO"}}})})}])}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e){this.$timeout=t,this.i18nService=e,this.loadingMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.retrievingData"),this.loadingSlowMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.retrievingData.long"),this.isLoadingSlow=!1}return t.prototype.$onChanges=function(e){var r=this;if(e&&e.isLoading){var a=e.isLoading.currentValue&&(e.isLoading.isFirstChange()||!e.isLoading.previousValue),i=e.isLoading.previousValue&&!e.isLoading.currentValue;a?(this.resetLoadingTracking(),this.loadingPromise=this.$timeout(function(){r.isLoadingSlow=!0},t.SLOW_LOADING_THRESHOLD_MS)):i&&this.resetLoadingTracking()}},t.prototype.$onDestroy=function(){this.resetLoadingTracking()},t.prototype.resetLoadingTracking=function(){this.isLoadingSlow=!1,this.$timeout.cancel(this.loadingPromise)},t.SLOW_LOADING_THRESHOLD_MS=1e4,t.$inject=["$timeout","i18nService"],t}(),r="advperfcharts-ui/resources/h5-advperfcharts",a={controller:e,templateUrl:r+"/components/chartSpinner.html",bindings:{isLoading:"<"}};angular.module("com.vmware.opsmgmt.client.advperfcharts").component("chartSpinner",a)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(e,r,a,i,s){this.$rootScope=e,this.$log=r,this.numberFormatterService=a,this.i18nService=i,this.chartThemeService=s,this.isDestroyed=!1,this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataformetrics"),this.resizeChart=_.throttle(this.reflowChart,t.REFLOW_INTERVAL)}return t.prototype.$onInit=function(){var t=this;this.themeUpdateSubscription=this.chartThemeService.subscribeToThemeChanged(function(){t.renderChart()})},t.prototype.$onChanges=function(t){this.renderChart()},t.prototype.$onDestroy=function(){this.isDestroyed=!0,this.themeUpdateSubscription&&this.themeUpdateSubscription.unsubscribe(),this.destroyChart()},t.prototype.renderChart=function(){this.isDestroyed||this.onChartDataChanged()},t.prototype.destroyChart=function(){this.chart&&this.chart.destroy&&this.chart.destroy()},t.prototype.onChartDataChanged=function(){if(this.chartData.errorCode){if("RESTRICTED_BY_ADMINISTRATOR"===this.chartData.errorCode)return void(this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.restrictedbyadministrator"))}else this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataformetrics");this.createOrUpdateChart()},t.prototype.createOrUpdateChart=function(){var t=this;this.chart&&this.chart.series&&this.chart.series.length>0?this.chart.update(this.createChartOptions()):(this.highChartOptions=this.createChartOptions(),setTimeout(function(){try{t.destroyChart(),t.chart=Highcharts.chart(t.chartData.highchartsContainerId,t.highChartOptions)}catch(e){t.$log.debug(e)}}))},t.prototype.reflowChart=function(){this.chart&&!this.isDestroyed&&this.chart.reflow()},t.prototype.createChartOptions=function(){var t="GB",e="Auto",r=this.numberFormatterService,a={chart:{plotShadow:!1,type:"column"},credits:{enabled:!1},title:{align:"center"},tooltip:{formatter:function(){var a="";if(this.points)for(var i=0,s=this.points;i<s.length;i++){var n=s[i],o=r.formatStorage(n.y,t,e,2),c=r.format(n.percentage.toFixed(2));a+="<span>"+n.series.name+"</span>: <b>"+o+"</b> ("+c+" %)<br/>"}return a},shared:!0},xAxis:{type:"category"},yAxis:{title:{text:this.i18nService.getString("AdvperfchartsUi","unit.gb")},labels:{formatter:function(){return r.formatStorage(this.value,t,e,0)}},allowDecimals:!1},plotOptions:{column:{animation:!1,allowPointSelect:!1,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0,stacking:"normal",maxPointWidth:100}},legend:{layout:"vertical",align:"right",width:200}};a.title.text=this.chartData.name,a.series=this.chartData.data;var i=this.chartThemeService.getTheme();return angular.merge(a,i),a},t.REFLOW_INTERVAL=500,t.$inject=["$rootScope","$log","numberFormatterService","i18nService","chartThemeService"],t}(),r="advperfcharts-ui/resources/h5-advperfcharts",a={controller:e,templateUrl:r+"/components/columnChart.html",bindings:{chartData:"<"}};angular.module("com.vmware.opsmgmt.client.advperfcharts").component("columnChart",a)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(e,r,a,i,s,n,o,c,h){this.$scope=e,this.chartDataService=r,this.chartConfiguratorService=a,this.chartThemeService=i,this.$element=s,this.chartConstants=n,this.i18nService=o,this.vxZoneService=c,this.$q=h,this.isViewDestroyed=!1,this.hasChartData=!1,this.resizeChart=_.throttle(this.reflowChart,t.REFLOW_INTERVAL)}return t.prototype.reflowChart=function(){this.chartConfigurator&&!this.isViewDestroyed&&this.chartConfigurator.reflowChart()},t.prototype.$onInit=function(){var t=this;this.themeUpdateSubscription=this.chartThemeService.subscribeToThemeChanged(function(){t.showPerformanceStats()}),this.chartId=this.chartData.highchartsContainerId,this.showPerformanceStats()},t.prototype.$onDestroy=function(){this.isViewDestroyed=!0,this.themeUpdateSubscription&&this.themeUpdateSubscription.unsubscribe(),this.chartConfigurator&&this.chartConfigurator.destroyChart()},t.prototype.$onChanges=function(t){this.showPerformanceStats()},t.prototype.showPerformanceStats=function(){var t=this;if(this.performanceStats=this.chartData.counters,this.hasChartData=this.chartDataService.hasPerformanceStats(this.performanceStats),this.chartData.errorCode){if("RESTRICTED_BY_ADMINISTRATOR"===this.chartData.errorCode)return this.hasChartData=!1,void(this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.restrictedbyadministrator"));if("LOW_STATISTICS_LEVEL"===this.chartData.errorCode)return this.hasChartData=!1,void(this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.lowstatisticslevel",this.chartData.error))}return this.hasChartData?void(this.chartConfigurator?this.chartConfigurator.setStats(this.performanceStats,this.chartConstants.graphTypes.LINE_GRAPH,this.chartData.min,this.chartData.max):setTimeout(function(){if(!t.isViewDestroyed){var e=t.chartData.type===t.chartConstants.graphTypes.STACKED_GRAPH?"area":"line",r={chart:{renderTo:t.chartId,reflow:!1,type:e},legend:{enabled:!0,labelFormatter:function(){return this.options.legendItem.name},maxHeight:40},title:{text:t.chartData.name},plotOptions:{area:{stacking:"normal",animation:!1},line:{animation:!1}},xAxis:{min:t.chartData.min,max:t.chartData.max},serieColors:t.serieColors};t.chartConfigurator=t.chartConfiguratorService.createChartConfigurator(t.performanceStats,t.chartConstants.graphTypes.LINE_GRAPH,r)}},0)):void(this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataformetrics"))},t.$inject=["$scope","chartDataService","chartConfiguratorService","chartThemeService","$element","chartConstants","i18nService","vxZoneService","$q"],t.REFLOW_INTERVAL=500,t}(),r={controller:e,templateUrl:"advperfcharts-ui/resources/h5-advperfcharts/components/overviewData.html",bindings:{chartData:"<",serieColors:"<"}};angular.module("com.vmware.opsmgmt.client.advperfcharts").component("overviewData",r)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a,i,s,n,o,c,h,p,d){this.$scope=t,this.overviewChartsService=e,this.chartConstants=r,this.contextObjectService=a,this.i18nService=i,this.clarityModalService=s,this.performanceCounterGroupsService=n,this.dataService=o,this.visibilityMonitorService=c,this.$q=h,this.$element=p,this.vxZoneService=d,this.refreshTimeoutId=null,this.visibilitySubscriberId=null,this.customTimespan={type:this.chartConstants.periods.CUSTOM},this.overviewData=[],this.changeCustomLabel="",this.title="",this.serieColors={},this.overviewChartViewMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.loading")}return t.prototype.$onInit=function(){var t=this;this.resetRefreshTimeout(),this.objectId=this.contextObjectService.getSelection()[0],this.overviewChartsService.getChartsViews(this.objectId).then(function(e){t.chartsViews=e,t.updateChartsViewsSelect()}),this.visibilitySubscriberId=this.visibilityMonitorService.subscribeForVisibilityChange(this.$element,function(e){e&&null===t.refreshTimeoutId&&t.resetRefreshTimeout()});var e=moment().subtract(1,"days").toDate(),r=moment().toDate();this.customTimespan.startDate=e,this.customTimespan.endDate=r,this.watchForObjects=[this.objectId],this.liveRefreshProperties=["name"]},t.prototype.refreshStats=function(){return this.clearRefreshTimeout(),this.visibilityMonitorService.getVisibilityStatus(this.$element)[0]===!1?this.$q.resolve(null):(this.onTimespanChange(),this.$q.resolve(null))},t.prototype.refreshViews=function(){var t=this;return this.clearRefreshTimeout(),this.visibilityMonitorService.getVisibilityStatus(this.$element)[0]===!1?this.$q.resolve(null):(this.overviewChartsService.getChartsViews(this.objectId).then(function(e){t.chartsViews=e,t.updateChartsViewsSelect()}),this.$q.resolve(null))},t.prototype.resetRefreshTimeout=function(){var t=this;this.clearRefreshTimeout(),this.selectedTimespan&&this.selectedTimespan.type===this.chartConstants.intervals.REALTIME&&this.vxZoneService.runOutsideAngular(function(){t.refreshTimeoutId=setTimeout(t.refreshStats.bind(t),t.getNextRoundRefreshInterval())})},t.prototype.getNextRoundRefreshInterval=function(){var e=(new Date).getSeconds(),r=t.REFRESH_INTERVAL-e%t.REFRESH_INTERVAL;return 1e3*r},t.prototype.clearRefreshTimeout=function(){null!==this.refreshTimeoutId&&(clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=null)},t.prototype.updateTimespansSelect=function(t){var e=this;this.timespansDropdownOptions=[],t.hasRealtimeStats&&this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.REALTIME)),t.hasHistoricalStats&&(this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_DAY)),this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_WEEK)),this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_MONTH)),this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_YEAR)),this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.CUSTOM)));var r=!this.selectedTimespan||this.timespansDropdownOptions.some(function(t){return t.id===e.selectedTimespan.type});!(this.timespansDropdownOptions.length>0)||this.selectedTimespan&&r||(this.selectedTimespan={type:this.timespansDropdownOptions[0].id}),this.selectedTimespan&&this.onTimespanChange()},t.prototype.updateChartsViewsSelect=function(){!this.selectedChartsViewId&&this.chartsViews.length>0&&(this.selectedChartsViewId=this.chartsViews[0].id),this.selectedChartsViewId&&this.onChartsViewChange()},t.prototype.getTimespanSelectItem=function(t){return{id:t,label:this.i18nService.getString("AdvperfchartsUi","advPerfChart.timeInterval."+t)}},t.prototype.onTimespanChange=function(){this.selectedTimespan.type===this.chartConstants.periods.CUSTOM?(this.changeCustomLabel=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.change.custom.label"),this.selectedTimespan=angular.copy(this.customTimespan),this.drawCharts()):(this.changeCustomLabel="",delete this.selectedTimespan.startDate,delete this.selectedTimespan.endDate,this.drawCharts())},t.prototype.onChartsViewChange=function(){var t=this;this.selectedChartsView=this.chartsViews.filter(function(e){return e.id===t.selectedChartsViewId})[0],this.selectedChartsView.getTimeRanges().then(function(e){t.updateTimespansSelect(e)})},t.prototype.openChartOptionsDialog=function(){var t=this;this.selectedTimespan.startDate=moment().subtract(1,"days").toDate(),this.selectedTimespan.endDate=moment().toDate(),this.$scope.dialogData={inputStartDate:this.customTimespan.startDate,inputEndDate:this.customTimespan.endDate},this.clarityModalService.openOkCancelModal({title:this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.lblTimeRange.text"),subTitle:{objectId:this.objectId},defaultButton:"submit",contentTemplate:"advperfcharts-ui/resources/h5-advperfcharts/views/chartTimeRangeView.html",modalClass:"overview-charts-dialog",size:"s",dialogData:this.$scope.dialogData}),this.$scope.$watch("dialogData.outputStartDate",function(e){void 0!==e&&(t.customTimespan.startDate=e,t.customTimespan.endDate=t.$scope.dialogData.outputEndDate,t.selectedTimespan=angular.copy(t.customTimespan),t.drawCharts())})},t.prototype.drawCharts=function(){for(var t=this,e=this.selectedChartsView.getChartsInfo(),r=0,a=e;r<a.length;r++){var i=a[r];i.isLoading=!0}this.title="",this.overviewData=e;var s=Date.now();this.lastRequestTimestamp=s,this.overviewChartViewMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataavailable");var n=this.selectedChartsView.getChartsData(angular.copy(this.selectedTimespan));n.forEach(function(e,r,a){a[r].then(function(e){s===t.lastRequestTimestamp&&t.processChartDataResult(e)},function(){s===t.lastRequestTimestamp&&t.processChartDataError()})}),this.$q.all(n).then(function(){t.resetRefreshTimeout()})},t.prototype.processChartDataResult=function(t){var e=this;this.selectedChartsView.getTitle(t).then(function(t){e.title||(e.title=t)});for(var r=function(t){t.isLoading=!1;var e=!1;a.overviewData&&(a.overviewData.forEach(function(r,a,i){r.highchartsContainerId===t.highchartsContainerId&&(i[a]=t,e=!0)}),e||a.overviewData.push(t))},a=this,i=0,s=t;i<s.length;i++){var n=s[i];r(n)}},t.prototype.processChartDataError=function(){this.overviewData&&this.overviewData.forEach(function(t,e,r){r[e].isLoading=!1})},t.$inject=["$scope","overviewChartsService","chartConstants","contextObjectService","i18nService","clarityModalService","performanceCounterGroupsService","dataService","visibilityMonitorService","$q","$element","vxZoneService"],t.REFRESH_INTERVAL=60,t}(),r={controller:e,templateUrl:"advperfcharts-ui/resources/h5-advperfcharts/components/overviewPerfchartsView.html"};angular.module("com.vmware.opsmgmt.client.advperfcharts").component("overviewPerfchartsView",r)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(e,r,a,i,s){this.$rootScope=e,this.$log=r,this.chartThemeService=a,this.numberFormatterService=i,this.i18nService=s,this.chartLegendWidth=200,this.isDestroyed=!1,this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataformetrics"),this.resizeChart=_.throttle(this.reflowChart,t.REFLOW_INTERVAL)}return t.prototype.$onInit=function(){var t=this;this.themeUpdateSubscription=this.chartThemeService.subscribeToThemeChanged(function(){t.renderChart()})},t.prototype.$onChanges=function(t){this.renderChart()},t.prototype.$onDestroy=function(){this.isDestroyed=!0,this.themeUpdateSubscription&&this.themeUpdateSubscription.unsubscribe(),this.destroyChart()},t.prototype.renderChart=function(){this.isDestroyed||this.onChartDataChanged()},t.prototype.destroyChart=function(){this.chart&&this.chart.destroy&&this.chart.destroy()},t.prototype.onChartDataChanged=function(){if(this.chartData.errorCode){if("RESTRICTED_BY_ADMINISTRATOR"===this.chartData.errorCode)return void(this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.restrictedbyadministrator"))}else this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataformetrics");this.createOrUpdateChart()},t.prototype.createOrUpdateChart=function(){var t=this;if(this.chart&&this.chart.series&&this.chart.series.length>0){var e=this.getOptions(this.numberFormatterService);this.chart.update(e,!0)}else this.highChartOptions=this.createChartOptions(),setTimeout(function(){try{t.destroyChart(),t.chart=Highcharts.chart(t.chartData.highchartsContainerId,t.highChartOptions)}catch(e){t.$log.debug(e)}})},t.prototype.reflowChart=function(){this.chart&&!this.isDestroyed&&this.chart.reflow()},t.prototype.createChartOptions=function(){var t=this.getOptions(this.numberFormatterService);return t},t.prototype.getOptions=function(t){var e=this,r={chart:{plotShadow:!1,type:"pie"},credits:{enabled:!1},title:{align:"center"},tooltip:{formatter:function(){var r=e.escapeHtml(this.point.name);return r+"<br/>"+t.format(this.percentage.toFixed(2))+"%"}},plotOptions:{pie:{animation:!1,allowPointSelect:!1,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{layout:"vertical",align:"right",width:this.chartLegendWidth}};r.title.text=this.chartData.name,r.series=[{data:this.chartData.data}];var a=this.chartThemeService.getTheme();return angular.merge(r,a),r},t.prototype.escapeHtml=function(t){return $("<div>").text(t).html()},t.REFLOW_INTERVAL=500,t.$inject=["$rootScope","$log","chartThemeService","numberFormatterService","i18nService"],t}(),r="advperfcharts-ui/resources/h5-advperfcharts",a={controller:e,templateUrl:r+"/components/pieChart.html",bindings:{chartData:"<"}};angular.module("com.vmware.opsmgmt.client.advperfcharts").component("pieChart",a)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a,i){this.$window=t,this.$document=e,this.$location=r,this.i18nService=a,this.dataService=i}return t.prototype.$onInit=function(){var e=this;h5.isPerfChartPopUpWindow=!0,this.$window.addEventListener("resize",t.onWindowResize);var r=this.$location.search(),a=String(r.objectId);this.dataService.getProperties(a,["name"]).then(function(t){t&&(e.$document[0].title=e.i18nService.getString("AdvperfchartsUi","advPerfChartsView.popUpChart.title.format",t.name))})},t.prototype.$onDestroy=function(){this.$window.removeEventListener("resize",t.onWindowResize),delete h5.isPerfChartPopUpWindow},t.onWindowResize=function(){kendo.resize($(document),!1)},t.$inject=["$window","$document","$location","i18nService","dataService"],t}(),r={controller:e,templateUrl:"advperfcharts-ui/resources/h5-advperfcharts/components/popUpChart.html"};angular.module("com.vmware.opsmgmt.client.advperfcharts").component("popUpChart",r)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a,i){this.$log=t,this.vxZoneService=e,this.timeFormatterService=r,this.browserLanguage=a,this.chartThemeService=i}return t.prototype.createChartConfigurator=function(t,e,a){var i=new r(t,this.$log,this.vxZoneService,this.timeFormatterService,this.browserLanguage,e,this.chartThemeService,a);return i},t.$inject=["$log","vxZoneService","timeFormatterService","browserLanguage","chartThemeService"],t}();t.ChartConfiguratorService=e;var r=function(){function t(t,e,r,a,i,s,n,o){this.performanceStats=t,this.$log=e,this.vxZoneService=r,this.timeFormatterService=a,this.browserLanguage=i,this.chartType=s,this.chartThemeService=n,this.extendedChartOptions=o,this.createChart()}return t.prototype.createChart=function(){var t=this;this.timeFormatterService.getUserTimeFormatPreference().then(function(e){t.dateTimeFormat=e,t.vxZoneService.runOutsideAngular(function(){try{var r=t.getChartOptions(t.performanceStats,t.chartType,t.extendedChartOptions),a=t;t.destroyChart(),t.chart=Highcharts.chart(r),t.chart.options.tooltip.useHTML=!0,t.chart.options.tooltip.formatter=function(){var t=a.escapeHtml(this.series.options.legendItem.relatedDeviceName),r=a.escapeHtml(this.series.name);return'<div class="chart-tooltip">\n                                          <b>'+t+"</b><br/>\n                                          <b>\n                                             "+a.timeFormatterService.timestampToText(this.x,e)+"\n                                          </b><br/>\n                                          "+r+": "+this.y.toLocaleString(a.browserLanguage.get(),{maximumFractionDigits:20})+"\n                                          </div>"}}catch(i){t.$log.debug(i)}})})},t.prototype.setStats=function(e,r,a,i){var s=this;this.timeFormatterService.getUserTimeFormatPreference().then(function(n){if(s.dateTimeFormat=n,s.chart&&s.chart.options&&s.chart.xAxis){var o=t.getXAxisOptions(s.timeFormatterService,s.dateTimeFormat,s.chartThemeService);o.min=a,o.max=i;var c=t.getYAxisOptions(e,r,s.chartThemeService);if(s.chart){s.chart.xAxis&&s.chart.xAxis.length>0&&s.chart.xAxis[0].remove(!1),s.chart.addAxis(o,!0,!1);for(var h=s.chart.yAxis.length-1;h>=0;h--)s.chart.yAxis[h].remove(!1);for(var p=0,d=c;p<d.length;p++){var u=d[p];s.chart.addAxis(u,!1,!1)}for(var m=t.getSeriesOptions(e,s.extendedChartOptions.serieColors),h=s.chart.series.length-1;h>=0;h--)s.chart.series[h].remove(!1);for(var l=0,v=m;l<v.length;l++){var g=v[l];s.chart.addSeries(g,!1)}var S=s.chartThemeService.getTheme();s.chart.update(S,!0)}}})},t.prototype.updateTheme=function(){if(this.chart&&this.chart.options&&this.chart.xAxis&&this.chart){var t=this.chartThemeService.getTheme();this.chart.update(t,!0)}},t.prototype.hasChart=function(){return void 0!==this.chart},t.prototype.getSeries=function(){return this.chart.series},t.prototype.reflowChart=function(){this.chart&&this.chart.reflow()},t.prototype.destroyChart=function(){this.chart&&this.chart.destroy()},t.prototype.escapeHtml=function(t){return $("<div>").text(t).html()},t.prototype.getChartOptions=function(e,r,a){var i=t.getXAxisOptions(this.timeFormatterService,this.dateTimeFormat,this.chartThemeService),s=t.getYAxisOptions(e,r,this.chartThemeService),n=t.getSeriesOptions(e,a.serieColors),o={chart:{animation:!1,type:"line",zoomType:"xy",reflow:!1,renderTo:""},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{series:{marker:{enabled:!1},lineWidth:1.5,turboThreshold:0}},series:n,title:{text:void 0},xAxis:i,yAxis:s},c=this.chartThemeService.getTheme();return angular.merge(o,a,c),o},t.getXAxisOptions=function(t,e,r){return{dateTimeLabelFormats:{millisecond:{hour:"numeric",minute:"numeric",second:"numeric"},second:{hour:"numeric",minute:"numeric",second:"numeric"},minute:{hour:"numeric",minute:"numeric"},hour:{hour:"numeric",minute:"numeric"},day:{month:"short",day:"2-digit"},week:{month:"short",day:"2-digit"},month:{month:"short",year:"numeric"},year:{year:"numeric"}},labels:{padding:30,formatter:function(){return t.timestampToText(this.value,e,this.dateTimeLabelFormat)},style:{color:r.getAxisColor()}},type:"datetime",minTickInterval:2e4,gridLineWidth:.5}},t.getYAxisOptions=function(t,e,r){var a=_.indexBy(t,"yAxis"),i=_.map(_.values(a),function(t,a){return{title:{text:t.legendItem.units,style:{color:r.getAxisTitleColor()}},id:t.yAxis,min:"percent"===t.yAxis?0:void 0,max:"percent"===t.yAxis&&"LINE_GRAPH"===e?100:void 0,gridLineWidth:.5,opposite:a%2!==0,reversedStacks:!1,labels:{style:{color:r.getAxisColor()}}}});return i},t.getSeriesOptions=function(e,r){var a=angular.copy(e),i=Highcharts.defaultOptions.colors,s=[];if(!r)return a.forEach(function(t,e){t.color=i[e%i.length]}),a;a.forEach(function(e){var a=t.getSerieId(e);r[a]&&s.push(r[a])});var n=i.filter(function(t){return s.indexOf(t)===-1});return a.forEach(function(e,a){var s=t.getSerieId(e);r[s]||(0!==n.length?r[s]=n.pop():r[s]=i[a%i.length]),e.color=r[s]}),a},t.getSerieId=function(t){return t.entityId+t.legendItem.name},t}();t.ChartConfigurator=r,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartConfiguratorService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){angular.module("com.vmware.opsmgmt.client.advperfcharts").constant("chartConstants",{intervals:{REALTIME:"REALTIME",HISTORICAL:"HISTORICAL_STATS"},periods:{REALTIME:"REALTIME",LAST_DAY:"LAST_DAY",LAST_WEEK:"LAST_WEEK",LAST_MONTH:"LAST_MONTH",LAST_YEAR:"LAST_YEAR",CUSTOM:"CUSTOM"},customTimeTypes:{LAST:"LAST",PERIOD:"PERIOD"},customPeriodUnits:{HOUR:"HOUR",DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH"},graphTypes:{LINE_GRAPH:"LINE_GRAPH",STACKED_GRAPH:"STACKED_GRAPH",STACKED_GRAPH_PER_VM:"STACKED_GRAPH_PER_VM",COLUMN_CHART:"COLUMN_CHART",PIE_CHART:"PIE_CHART"},SAVED_CHART_SETTINGS_KEY:"advperfcharts.saved.options.names",datastoreTypes:{VMFS:"VMFS",NFS:"NFS",NFS41:"NFS41"}})}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r){this.dataService=t,this.$q=e,this.chartConstants=r}return t.prototype.getPerformanceCounterGroups=function(t){return this.dataService.getProperties(t,["performanceCounterGroups"]).then(function(t){return t.performanceCounterGroups})},t.prototype.getCompositeStatsObjects=function(t){return this.dataService.getPropertiesByRelation(t,"host","VirtualMachine",["name"])},t.prototype.getPerformanceStats=function(t,e,r){var a=this,i=this.buildPerfQuerySpec(t,e,r);return this.dataService.getProperties(t.objectId,["performanceStats"],{propertyParams:[{_type:"com.vmware.vise.mvc.model.data.ParamSpec",propertyName:"performanceStats",parameterType:"com.vmware.opsmgmt.client.advperfcharts.PerformanceInfoQuerySpec",parameter:i}]}).then(function(t){var e=t.performanceStats;return null!==e.errorCode&&void 0!==e.errorCode?a.$q.reject(e.errorCode):e.queriedPerformanceStats})},t.prototype.getTopNStats=function(t,e,r){if(0===r.length)return this.$q.when([]);var a=this.buildTopNQuery(r,e);return this.dataService.getProperties(t,["topNStats"],{propertyParams:[{_type:"com.vmware.vise.mvc.model.data.ParamSpec",propertyName:"topNStats",parameterType:"com.vmware.opsmgmt.client.advperfcharts.topn.TopNQuery",parameter:a}]}).then(function(t){var e=t.topNStats;return e})},t.prototype.getTopNPerfChartStats=function(t,e,r){if(!r)return this.$q.when(null);var a=this.buildTopNQuery([r],e);return this.dataService.getProperties(t,["topNPerfChartsStats"],{propertyParams:[{_type:"com.vmware.vise.mvc.model.data.ParamSpec",propertyName:"topNPerfChartsStats",parameterType:"com.vmware.opsmgmt.client.advperfcharts.topn.TopNQuery",parameter:a}]}).then(function(t){var e=t.topNPerfChartsStats;return e})},t.prototype.hasPerformanceStats=function(t){return _.some(t,function(t){return!!t.data&&t.data.length>0})},t.prototype.buildPerfQuerySpec=function(t,e,r){var a=r.map(function(t){return t.id}),i=this.buildTimeRange(e),s={interval:i.interval,customPeriodUnits:i.customPeriodUnits,customPeriodUnitsCount:i.customPeriodUnitsCount,startDate:i.startDate,endDate:i.endDate,relatedDeviceIds:t.relatedDeviceIds,counterIds:_.uniq(a),chartType:t.type,availableCounters:r,format:"csv"};return s},t.prototype.buildTopNQuery=function(t,e){var r={reportIds:t.map(function(t){return t.chartId}),timeRange:this.buildTimeRange(e)};return r},t.prototype.buildTimeRange=function(t){var e={interval:t.type};return t.type===this.chartConstants.periods.CUSTOM&&(t.customPeriodType===this.chartConstants.customTimeTypes.LAST?(e.customPeriodUnits=t.customPeriodUnits,e.customPeriodUnitsCount=t.customPeriodUnitsCount):(e.startDate=t.startDate?t.startDate.toISOString():void 0,e.endDate=t.endDate?t.endDate.toISOString():void 0)),e},t.$inject=["dataService","$q","chartConstants"],t}();t.ChartDataService=e,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartDataService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t){this.i18nService=t}return t.prototype.getHeaderText=function(t){if(t&&t instanceof Highcharts.Axis)return t.isDatetimeAxis?this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.label.timeTitle"):this.i18nService.getString("AdvperfchartsUi","series.valuenotavailable");if(t&&t.options){var e=t.options.legendItem;return t.options.legendItem?this.i18nService.getString("AdvperfchartsUi","series.displaynameformat",e.measurement,e.relatedDeviceName):this.i18nService.getString("AdvperfchartsUi","series.valuenotavailable")}return this.i18nService.getString("AdvperfchartsUi","series.valuenotavailable")},t.$inject=["i18nService"],t}();t.ChartExportAsCsvService=e,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartExportAsCsvService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e){this.actionsService=t,this.browserService=e,this.menuId=this.browserService.isEdge?"vise.menus.chart.export.edge":"vise.menus.chart.export"}return t.prototype.showExportMenu=function(t,e){var r=t.clientX-100,a=t.clientY;this.actionsService.showActionsMenu(t,this.menuId,e,[],r,a)},t.$inject=["actionsService","browserService"],t}();t.ChartExportMenuService=e,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartExportMenuService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a){this.i18nService=t,this.vuiConstants=e,this.chartConstants=r,this.managedEntityConstants=a,this.getString=_.bind(this.i18nService.getString,this.i18nService,"AdvperfchartsUi"),this.defaultChartSettingsByObjectType={VirtualMachine:[{name:this.getString("chart.settings.cpu.usage.average.name"),counters:[{counterGroup:"cpu",counterKey:"usage.average"},{counterGroup:"cpu",counterKey:"readiness.average"}]},{name:this.getString("chart.settings.cpu.usagemhz.average.name"),counters:[{counterGroup:"cpu",counterKey:"usagemhz.average"}]},{name:this.getString("chart.settings.cpu.ready.summation.name"),counters:[{counterGroup:"cpu",counterKey:"ready.summation"}]},{name:this.getString("chart.settings.datastore.name"),counters:[{counterGroup:"datastore",counterKey:"totalReadLatency.average"},{counterGroup:"datastore",counterKey:"totalWriteLatency.average"}]},{name:this.getString("chart.settings.disk.name"),counters:[{counterGroup:"disk",counterKey:"read.average"},{counterGroup:"disk",counterKey:"write.average"},{counterGroup:"disk",counterKey:"usage.average"}]},{name:this.getString("chart.settings.memory.name"),counters:[{counterGroup:"mem",counterKey:"active.average"},{counterGroup:"mem",counterKey:"vmmemctl.average"},{counterGroup:"mem",counterKey:"consumed.average"},{counterGroup:"mem",counterKey:"granted.average"}]},{name:this.getString("chart.settings.network.name"),counters:[{counterGroup:"net",counterKey:"received.average"},{counterGroup:"net",counterKey:"transmitted.average"},{counterGroup:"net",counterKey:"usage.average"}]},{name:this.getString("chart.settings.host.power.name"),counters:[{counterGroup:"power",counterKey:"power.average"}]},{name:this.getString("chart.settings.vm.virtualDisk.name"),counters:[{counterGroup:"virtualDisk",counterKey:"totalReadLatency.average"},{counterGroup:"virtualDisk",counterKey:"totalWriteLatency.average"}]}],HostSystem:[{name:this.getString("chart.settings.cpu.usage.average.name"),counters:[{counterGroup:"cpu",counterKey:"usage.average"}]},{name:this.getString("chart.settings.datastore.name"),
counters:[{counterGroup:"datastore",counterKey:"totalReadLatency.average"},{counterGroup:"datastore",counterKey:"totalWriteLatency.average"}]},{name:this.getString("chart.settings.memory.name"),counters:[{counterGroup:"mem",counterKey:"active.average"},{counterGroup:"mem",counterKey:"vmmemctl.average"},{counterGroup:"mem",counterKey:"consumed.average"},{counterGroup:"mem",counterKey:"granted.average"},{counterGroup:"mem",counterKey:"sharedcommon.average"},{counterGroup:"mem",counterKey:"swapused.average"}]},{name:this.getString("chart.settings.disk.name"),counters:[{counterGroup:"disk",counterKey:"read.average"},{counterGroup:"disk",counterKey:"write.average"},{counterGroup:"disk",counterKey:"usage.average"}]},{name:this.getString("chart.settings.network.name"),counters:[{counterGroup:"net",counterKey:"received.average"},{counterGroup:"net",counterKey:"transmitted.average"},{counterGroup:"net",counterKey:"usage.average"}]},{name:this.getString("chart.settings.host.power.name"),counters:[{counterGroup:"power",counterKey:"power.average"}]},{name:this.getString("chart.settings.host.storageAdapter.name"),counters:[{counterGroup:"storageAdapter",counterKey:"totalReadLatency.average"},{counterGroup:"storageAdapter",counterKey:"totalWriteLatency.average"}]},{name:this.getString("chart.settings.host.storagePath.name"),counters:[{counterGroup:"storagePath",counterKey:"totalReadLatency.average"},{counterGroup:"storagePath",counterKey:"totalWriteLatency.average"}]},{name:this.getString("chart.settings.host.system.name"),counters:[{counterGroup:"sys",counterKey:"resourceCpuUsage.average"}]},{name:this.getString("chart.settings.host.vsphereReplication.name"),counters:[{counterGroup:"hbr",counterKey:"hbrNetRx.average"},{counterGroup:"hbr",counterKey:"hbrNetTx.average"}]}],ClusterComputeResource:[{name:this.getString("chart.settings.cpu.usage.average.name"),counters:[{counterGroup:"cpu",counterKey:"usage.average"}]},{name:this.getString("chart.settings.cluster.clusterServices.name"),counters:[{counterGroup:"clusterServices",counterKey:"effectivecpu.average"},{counterGroup:"clusterServices",counterKey:"effectivemem.average"}]},{name:this.getString("chart.settings.memory.name"),counters:[{counterGroup:"mem",counterKey:"active.average"},{counterGroup:"mem",counterKey:"vmmemctl.average"},{counterGroup:"mem",counterKey:"consumed.average"},{counterGroup:"mem",counterKey:"granted.average"},{counterGroup:"mem",counterKey:"swapped.average"},{counterGroup:"mem",counterKey:"shared.average"},{counterGroup:"mem",counterKey:"compressed.average"}]},{name:this.getString("chart.settings.cluster.virtualMachineOperations.name"),counters:[{counterGroup:"vmop",counterKey:"numVMotion.latest"},{counterGroup:"vmop",counterKey:"numSVMotion.latest"},{counterGroup:"vmop",counterKey:"numPoweron.latest"},{counterGroup:"vmop",counterKey:"numPoweroff.latest"}]}],Datacenter:[{name:this.getString("chart.settings.datacenter.virtualMachineOperations.name"),counters:[{counterGroup:"vmop",counterKey:"numVMotion.latest"},{counterGroup:"vmop",counterKey:"numSVMotion.latest"},{counterGroup:"vmop",counterKey:"numPoweron.latest"},{counterGroup:"vmop",counterKey:"numPoweroff.latest"}]}],ResourcePool:[{name:this.getString("chart.settings.cpu.usage.average.name"),counters:[{counterGroup:"cpu",counterKey:"usage.average"}]},{name:this.getString("chart.settings.cpu.usagemhz.average.name"),counters:[{counterGroup:"cpu",counterKey:"usagemhz.average"}]},{name:this.getString("chart.settings.memory.name"),counters:[{counterGroup:"mem",counterKey:"active.average"},{counterGroup:"mem",counterKey:"vmmemctl.average"},{counterGroup:"mem",counterKey:"consumed.average"},{counterGroup:"mem",counterKey:"granted.average"}]}],VirtualApp:[{name:this.getString("chart.settings.cpu.usage.average.name"),counters:[{counterGroup:"cpu",counterKey:"usage.average"}]},{name:this.getString("chart.settings.cpu.usagemhz.average.name"),counters:[{counterGroup:"cpu",counterKey:"usagemhz.average"}]},{name:this.getString("chart.settings.memory.name"),counters:[{counterGroup:"mem",counterKey:"active.average"},{counterGroup:"mem",counterKey:"vmmemctl.average"},{counterGroup:"mem",counterKey:"consumed.average"},{counterGroup:"mem",counterKey:"granted.average"}]}]}}return t.prototype.getAvailableSettings=function(t,e){var r=this.defaultChartSettingsByObjectType[e];return r.filter(function(e){var r={counters:e.counters};return 0!==t.getCounters(r).length})},t.prototype.getGroupGridOptions=function(){return{columnDefs:[{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.chartMetrics"),field:"name",template:"#:name#"}],pageConfig:{hidePager:!0},data:[],selectionMode:this.vuiConstants.grid.selectionMode.SINGLE,showCheckboxesOnMultiSelection:!1,selectedItems:[],height:"100%",sortMode:this.vuiConstants.grid.sortMode.NONE,searchable:!1}},t.prototype.getCounterGridOptions=function(){var t=this;return{columnDefs:[{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.counters"),field:"name",width:"180px",template:"#:name#"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.rollups"),field:"rollupType",width:"100px",template:function(e){return t.localizeRollupType(e.rollupType)}},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.units"),field:"statsUnitName",width:"80px",template:"#:statsUnitName#"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.internalName"),field:"nameKey",width:"140px",template:"#:nameKey#"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.statType"),field:"statsType",width:"100px",template:function(e){return e.statsType?t.localizeStatType(e.statsType):""}},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.description"),field:"description",template:'<span title="#:description#">#:description#</span>'}],pageConfig:{hidePager:!0},data:[],selectionMode:this.vuiConstants.grid.selectionMode.MULTI,showCheckboxesOnMultiSelection:!0,searchable:!1,resizable:!0,selectedItems:[],height:"100%"}},t.prototype.getObjectGridOptions=function(){return{columnDefs:[{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.header.targetObjects"),field:"name",template:"#:name#"}],pageConfig:{hidePager:!0},data:[],selectionMode:this.vuiConstants.grid.selectionMode.MULTI,showCheckboxesOnMultiSelection:!0,searchable:!1,selectedItems:[],height:"100%"}},t.prototype.isCompositeChartTypeSupported=function(t){return this.managedEntityConstants.HOST===t},t.prototype.getCounterObjects=function(t){if(!t||0===t.length)return[];var e=_(t).chain().pluck("relatedDevices").flatten().uniq(function(t){return t.id}).value();return e.sort(this.compareAlphanumericValues)},t.prototype.compareAlphanumericValues=function(t,e){if(""===t.relatedDeviceId)return-1;if(""===e.relatedDeviceId)return 1;for(var r=t.relatedDeviceName?t.relatedDeviceName:"",a=e.relatedDeviceName?e.relatedDeviceName:"",i="",s=0;s<r.length&&r[s]===a[s];s++)i+=r[s];for(var s=i.length-1;s>=0&&!isNaN(i[s]);s--)i=i.substring(0,s-1);var n=r.substring(i.length),o=a.substring(i.length);return isNaN(n)||isNaN(o)?r.localeCompare(a):Number(n)-Number(o)},t.prototype.getTimespanSelectItem=function(t){return{id:t,label:this.i18nService.getString("AdvperfchartsUi","advPerfChart.timeInterval."+t)}},t.prototype.getTimespanUnitOptions=function(){return[this.getTimespanPeriodUnitSelectItem(this.chartConstants.customPeriodUnits.HOUR),this.getTimespanPeriodUnitSelectItem(this.chartConstants.customPeriodUnits.DAY),this.getTimespanPeriodUnitSelectItem(this.chartConstants.customPeriodUnits.WEEK),this.getTimespanPeriodUnitSelectItem(this.chartConstants.customPeriodUnits.MONTH)]},t.prototype.getChartTypeOptions=function(t){var e=[this.getChartTypeSelectItem(this.chartConstants.graphTypes.LINE_GRAPH),this.getChartTypeSelectItem(this.chartConstants.graphTypes.STACKED_GRAPH)];return this.isCompositeChartTypeSupported(t)&&e.push(this.getChartTypeSelectItem(this.chartConstants.graphTypes.STACKED_GRAPH_PER_VM)),e},t.prototype.getDefaultTimespanSettings=function(t){return{type:t,customPeriodType:this.chartConstants.customTimeTypes.LAST,customPeriodUnitsCount:1,customPeriodUnits:this.chartConstants.customPeriodUnits.HOUR}},t.prototype.getTimespanInterval=function(t){return t===this.chartConstants.periods.REALTIME?this.chartConstants.intervals.REALTIME:this.chartConstants.intervals.HISTORICAL},t.prototype.compareSelectedChartSettings=function(t,e){return e.selectedGroup.key===t.selectedGroupKey&&(!!_.isEqual(_.sortBy(this.getCounterKeys(e.selectedCounters)),_.sortBy(this.getCounterKeys(t.customCounters)))&&(e.selectedChartType===t.selectedChartType&&(e.selectedTimespan.customPeriodType===t.selectedTimespan.customPeriodType&&(e.selectedTimespan.customPeriodUnits===t.selectedTimespan.customPeriodUnits&&(e.selectedTimespan.customPeriodUnitsCount===t.selectedTimespan.customPeriodUnitsCount&&(e.selectedTimespan.type===t.selectedTimespan.type&&(e.selectedTimespan.startDate===t.selectedTimespan.startDate&&e.selectedTimespan.endDate===t.selectedTimespan.endDate)))))))},t.prototype.uniqueArray=function(t,e){var r=[],a=[];return angular.forEach(t,function(t){var i=t[e];a.indexOf(i)===-1&&(a.push(i),r.push(t))}),r},t.prototype.removeSavedChartNames=function(t,e){var r=t;return e&&_.each(r,function(t){if(t){var a=r.indexOf(t);e.indexOf(t.name)!==-1&&r.splice(a,1)}}),r},t.prototype.localizeRollupType=function(t){return this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.rollup."+t)},t.prototype.localizeStatType=function(t){return this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.statsType."+t)},t.prototype.getTimespanPeriodUnitSelectItem=function(t){return{id:t,label:this.i18nService.getString("AdvperfchartsUi","advPergChartsConfig.customLastTimeInterval."+t)}},t.prototype.getChartTypeSelectItem=function(t){var e="";return t===this.chartConstants.graphTypes.LINE_GRAPH?e="advPerfChartsConfig.chartTypes.LINE_GRAPH":t===this.chartConstants.graphTypes.STACKED_GRAPH?e="advPerfChartsConfig.chartTypes.STACKED_GRAPH":t===this.chartConstants.graphTypes.STACKED_GRAPH_PER_VM&&(e="advPerfChartsConfig.chartTypes.STACKED_GRAPH_PER_VM"),{id:t,label:this.i18nService.getString("AdvperfchartsUi",e)}},t.prototype.getCounterKeys=function(t){return _.pluck(t,"counterKey")},t.$inject=["i18nService","vuiConstants","chartConstants","managedEntityConstants"],t}();t.ChartOptionsService=e,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartOptionsService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(){}return t.get=function(e){return t.hasOwnProperty(e)?t[e]:null},t.dark={background:"#22343C",title:"#E9ECEF",subtitle:"#ADBBC4",axisTitle:"#ADBBC4",axisLabel:"#ADBBC4",legend:"#ADBBC4",colors:["#318700","#E62700","#C41261","#781DA0","#343DAC","#0065AB","#006690","#00968B","#DFA100","#D36000","#EE4A08"]},t.light={background:"#ffffff",title:"#000000",subtitle:"#000000",axisTitle:"#707070",axisLabel:"#6D869F",legend:"#333333",colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},t}();t.ColorPalettes=e;var r=function(){function t(t,e){var r=this;this.$rootScope=t,this.themeService=e,this.currentTheme=this.themeService.getCurrentTheme();var a=this.themeService.subscribeToThemeChanged(function(t){r.currentTheme=t});this.$rootScope.$on("$destroy",function(){a&&a.unsubscribe()})}return t.prototype.getCurrentThemeName=function(){return this.currentTheme},t.prototype.getTheme=function(){var t=this.themeService.getCurrentTheme(),r=e.get(t);if(null===r)return{};var a={colors:r.colors,chart:{backgroundColor:r.background},title:{style:{color:r.title}},subtitle:{style:{color:r.subtitle}},legend:{itemStyle:{color:r.legend},itemHoverStyle:{color:r.legend}},yAxis:{title:{style:{color:r.axisTitle}},labels:{style:{color:r.axisLabel}}},xAxis:{labels:{style:{color:r.axisLabel}}}};return a},t.prototype.getAxisColor=function(){var t=this.themeService.getCurrentTheme(),r=e.get(t);if(null!==r)return r.axisLabel},t.prototype.getAxisTitleColor=function(){var t=this.themeService.getCurrentTheme(),r=e.get(t);if(null!==r)return r.axisTitle},t.prototype.subscribeToThemeChanged=function(t){return this.themeService.subscribeToThemeChanged(t)},t.$inject=["$rootScope","themeService"],t}();t.ChartThemeService=r,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartThemeService",r)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(){}return t.prototype.createChartDateTime=function(t){if(!(t&&t instanceof Date))throw new Error("Invalid dateTime");var e=moment(t);if(!e.isValid())throw new Error("Invalid dateTime");return{date:e.format("YYYY-MM-DD"),time:e.format("HH:mm:ss")}},t.prototype.validateChartDateTime=function(t){return t&&"string"==typeof t.date&&"string"==typeof t.time&&moment(t.date,"YYYY-MM-DD",!0).isValid()&&moment(t.time,"HH:mm:ss",!0).isValid()?"":"advPerfChartsConfig.warning.timeTitle"},t.prototype.parseChartDateTime=function(t){var e=this.validateChartDateTime(t);if(e)throw new Error(e);return moment(t.date+" "+t.time,"YYYY-MM-DD HH:mm:ss",!0).toDate()},t.prototype.validateChartDateTimeInterval=function(t,e){var r=this.validateChartDateTime(t);if(r)return r;var a=this.validateChartDateTime(e);if(a)return a;var i=moment(this.parseChartDateTime(t)),s=moment(this.parseChartDateTime(e)),n=moment();return i.isSameOrAfter(s)?"advPerfChartsConfig.warning.dateToBeforeFrom":s.isAfter(n)?"advPerfChartsConfig.warning.dateInFuture":i.isAfter(s.subtract(1,"hours"))?"advPerfChartsConfig.warning.intervalLessThan1h":""},t.$inject=[],t}();t.ChartTimespanOptionsService=e,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartTimespanOptionsService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r){this.i18nService=t,this.timeFormatterService=e,this.$q=r}return t.prototype.getTitle=function(t,e,r){var a=_.min(t,"pointStart").pointStart,i=_.max(t,"pointEnd").pointEnd;return this.createTitle(a,i,e,r)},t.prototype.createTitle=function(t,e,r,a){var i=this,s=this.timeFormatterService.formatDate(t),n=this.timeFormatterService.formatDate(e);return r?this.$q.all([s,n]).then(function(t){var e="";return t&&t[0]&&t[1]&&(e=i.i18nService.getString("AdvperfchartsUi","overviewPerfChart.title.format.no.timespan",t[0],t[1])),e}):this.$q.all([s,n]).then(function(t){var e="";return t&&t[0]&&t[1]&&a&&(e=i.i18nService.getString("AdvperfchartsUi","advPerfChartsView.title.format.no.timespan",a,t[0],t[1])),e})},t.$inject=["i18nService","timeFormatterService","$q"],t}();t.ChartTitleService=e,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("chartTitleService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a,i,s,n,o,c,h){this.id=t,this.label=e,this.objectId=r,this.overviewConfigs=a,this.performanceCounterGroupsManagerPromise=i,this.chartConstants=s,this.chartDataService=n,this.chartTitleService=o,this.$q=c,this.i18nService=h}return t.prototype.getTitle=function(t){if(!t||0===t.length)return this.$q.when("");for(var e=0,r=t;e<r.length;e++){var a=r[e],i=a.counters;if(i&&0!==i.length)return this.chartTitleService.getTitle(i,!0)}return this.$q.when("")},t.prototype.getChartsInfo=function(){for(var t=[],e=0,r=this.overviewConfigs;e<r.length;e++){var a=r[e];t.push({highchartsContainerId:a.chartId,name:"",type:"LINE_GRAPH"})}return t},t.prototype.getChartsData=function(t){var e=this;return[this.performanceCounterGroupsManagerPromise.then(function(r){return e.getOverviewDataByObjectType(e.objectId,t,e.overviewConfigs,r)})]},t.prototype.getTimeRanges=function(){var t=this;return this.performanceCounterGroupsManagerPromise.then(function(e){var r=t.overviewConfigs.map(function(t){return t.counterKeys.map(function(e){return{counterGroup:t.counterGroup,counterKey:e}})}).reduce(function(t,e){return t.concat(e)}),a={counters:r,timespan:{type:t.chartConstants.intervals.REALTIME}},i=e.getCounters(a),s=0!==i.length;a.timespan.type=t.chartConstants.intervals.HISTORICAL;var n=e.getCounters(a),o=0!==n.length;return{hasHistoricalStats:o,hasRealtimeStats:s}})},t.prototype.getOverviewDataByObjectType=function(t,e,r,a){var i=this,s=[],n=[],o=[];return _.each(r,function(r){var n=i.buildOverviewDataItem(t,r,e,a);s.push(n),o.push.apply(o,n.counterIds)}),this.chartDataService.getPerformanceStats(s[0].chartOptions,e,o).then(function(t){return n=i.buildOverviewData(t,s,e),i.$q.resolve(n)})["catch"](function(t){return n=i.buildOverviewData([],s,e),_.each(n,function(e){e.errorCode=t}),i.$q.resolve(n)})},t.prototype.buildOverviewDataItem=function(t,e,r,a){var i=r.type;r.type!==this.chartConstants.periods.REALTIME&&(i=this.chartConstants.intervals.HISTORICAL);var s=_.map(e.counterKeys,function(t){return{counterGroup:e.counterGroup,counterKey:t}}),n={counters:s,timespan:{type:i}},o={counterIds:a.getCounters(n),counterGroupId:e.counterGroup,name:this.i18nService.getString("AdvperfchartsUi",e.chartNameKey),chartOptions:this.buildChartOptions(t,e.deviceIds),highchartsContainerId:e.chartId};return o},t.prototype.buildChartOptions=function(t,e){return void 0===e&&(e=["*"]),{objectId:t,type:this.chartConstants.graphTypes.LINE_GRAPH,relatedDeviceIds:e}},t.prototype.buildOverviewData=function(t,e,r){var a=this;return _.map(e,function(e){var i=r.type,s=_.filter(t,function(t){return e.counterGroupId===t.groupId&&e.counterIds.some(function(e){return e.nameKey===t.legendItem.nameKey&&e.rollupType===t.legendItem.rollupType})});return _.each(s,function(t){t.legendItem.name=a.i18nService.getString("AdvperfchartsUi","overviewPerfChart.legend."+t.legendItem.nameKey,t.legendItem.relatedDeviceName),t&&"ready"===t.legendItem.nameKey&&(void 0!==t.data&&(t.data=_.map(t.data,function(t){return a.convertData(t,i)})),t.legendItem.units="%",t.yAxis="percent"),t&&"totalmb"===t.legendItem.nameKey&&(void 0!==t.data&&(t.data=_.map(t.data,function(t){return 1024*t})),t.legendItem.units="KB",t.yAxis="kiloBytes")}),{name:e.name,type:a.chartConstants.graphTypes.LINE_GRAPH,counters:s,highchartsContainerId:e.highchartsContainerId}})},t.prototype.convertData=function(t,e){var r;return r=e===this.chartConstants.periods.REALTIME?t/200:e===this.chartConstants.periods.LAST_DAY?t/3e3:e===this.chartConstants.periods.LAST_WEEK?t/18e3:e===this.chartConstants.periods.LAST_MONTH?t/72e3:e===this.chartConstants.periods.LAST_YEAR?t/864e3:0,Number(r.toFixed(2))},t}(),r=function(){function t(t,e,r,a,i,s,n,o,c){this.id=t,this.label=e,this.hasHistoricalStats=r,this.hasRealtimeStats=a,this.objectId=i,this.charts=s,this.chartDataService=n,this.chartTitleService=o,this.$q=c}return t.prototype.getTitle=function(t){if(!t||0===t.length)return this.$q.when("");for(var e=0,r=t;e<r.length;e++){var a=r[e],i=a.counters;if(i&&0!==i.length)return this.chartTitleService.getTitle(i,!0)}return this.$q.when("")},t.prototype.getChartsInfo=function(){for(var t=[],e=0,r=this.charts;e<r.length;e++){var a=r[e];t.push(this.buildChartData(a))}return t},t.prototype.getChartsData=function(t){var e=this,r=this.chartDataService.getTopNStats(this.objectId,t,this.charts).then(function(t){var r=e.buildTopNOverviewData(e.charts,t);return r});return[r]},t.prototype.buildTopNOverviewData=function(t,e){var r=this,a=_.indexBy(e,"reportId");return _.map(t,function(t){var e=a[t.chartId],i=r.buildChartData(t);return e&&(_.each(e.series,function(t){t.name=t.legendItem.relatedDeviceName,t.legendItem.name=t.legendItem.relatedDeviceName}),i.counters=e.series,e.errorCode&&(i.errorCode=e.errorCode),e.requiredLevel&&(i.errorCode="LOW_STATISTICS_LEVEL",i.error=e.requiredLevel)),i})},t.prototype.buildChartData=function(t){return{highchartsContainerId:t.chartId,name:t.name,type:t.type,counters:[]}},t.prototype.getTimeRanges=function(){return this.$q.when({hasHistoricalStats:this.hasHistoricalStats,hasRealtimeStats:this.hasRealtimeStats})},t}(),a=function(){function t(t,e,r,a,i){this.objectId=t,this.i18nService=e,this.dataService=r,this.$q=a,this.charts=i,this.id="datastoreSpaceUtilization",this.label=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datastoreSpaceUtilization.label")}return t.prototype.getTitle=function(t){return this.$q.when("")},t.prototype.getChartsInfo=function(){for(var e=[],r=0,a=this.charts;r<a.length;r++){var i=a[r],s={type:"PIE_CHART",highchartsContainerId:t.PROPERTY_BY_TYPE[i.by],name:this.i18nService.getString("AdvperfchartsUi",t.NAME_KEY_BY_TYPE[i.by])};e.push(s)}return e},t.prototype.getChartsData=function(e){var r=this,a=this.charts.map(function(e){return t.PROPERTY_BY_TYPE[e.by]});a.push("name");var i=this.dataService.getProperties(this.objectId,a).then(function(e){var a=[];if(e.hasOwnProperty("spaceUtilizationByType")){r.processSpaceUtilizationByType(e);var i={type:"PIE_CHART",highchartsContainerId:t.PROPERTY_BY_TYPE.FILE_TYPE,name:e.name?r.i18nService.getString("AdvperfchartsUi","chart.datastore.utilization.title",e.name):"",data:e.spaceUtilizationByType.data,errorCode:e.spaceUtilizationByType.errorCode};a.push(i)}if(e.hasOwnProperty("spaceUtilizationByDatastore")){r.processSpaceUtilizationByEntity(e.spaceUtilizationByDatastore.data);var i={type:"PIE_CHART",highchartsContainerId:t.PROPERTY_BY_TYPE.DATASTORE,name:e.name?r.i18nService.getString("AdvperfchartsUi","chart.datastore.utilization.by.datastore.title",e.name):"",data:e.spaceUtilizationByDatastore.data,errorCode:e.spaceUtilizationByDatastore.errorCode};a.push(i)}if(e.hasOwnProperty("spaceUtilizationByVm")){r.processSpaceUtilizationByEntity(e.spaceUtilizationByVm.data);var i={type:"PIE_CHART",highchartsContainerId:t.PROPERTY_BY_TYPE.VM,name:e.name?r.i18nService.getString("AdvperfchartsUi","chart.datastore.utilization.by.vm.title",e.name):"",data:e.spaceUtilizationByVm.data,errorCode:e.spaceUtilizationByVm.errorCode};a.push(i)}return a});return[i]},t.prototype.processSpaceUtilizationByType=function(e){_.map(e.spaceUtilizationByType.data,function(e){var r=t.METRIC_CONFIGS[e.ID];e.color=r.color,e.order=r.order,"CAPACITY"!==e.ID&&"TOTAL_USED"!==e.ID||(e.y=null)}),e.spaceUtilizationByType.data=_.sortBy(e.spaceUtilizationByType.data,"order")},t.prototype.processSpaceUtilizationByEntity=function(e){_.map(e,function(e){if("TOTAL_USED"===e.ID){e.y=null;var r=t.METRIC_CONFIGS[e.ID];e.color=r.color}})},t.prototype.getTimeRanges=function(){return this.$q.when({hasHistoricalStats:!1,hasRealtimeStats:!0})},t.METRIC_CONFIGS={DISKFILE:{color:"#004A70",order:1},SWAPFILE:{color:"#FFF899",order:4},DELTAFILE:{color:"#853FB3",order:3},OTHERFILE:{color:"#0094D2",order:2},OTHER:{color:"#89CBDF",order:5},FREE:{color:"#CCCCCC",order:6},CAPACITY:{color:"transparent",order:7},TOTAL_USED:{color:"transparent",order:8}},t.PROPERTY_BY_TYPE={FILE_TYPE:"spaceUtilizationByType",DATASTORE:"spaceUtilizationByDatastore",VM:"spaceUtilizationByVm"},t.NAME_KEY_BY_TYPE={FILE_TYPE:"chart.datastore.utilization.title.initial",DATASTORE:"chart.datastore.utilization.by.datastore.title.initial",VM:"chart.datastore.utilization.by.vm.title.initial"},t}(),i=function(){function t(t,e,r,a){this.objectId=t,this.i18nService=e,this.dataService=r,this.$q=a,this.id="topDatastoresBySpaceUtilization",this.label=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datastoreSpaceUtilization.label")}return t.prototype.getTitle=function(t){return this.$q.when("")},t.prototype.getChartsInfo=function(){return[{type:"COLUMN_CHART",highchartsContainerId:"topSpaceUtilizationByType",name:this.i18nService.getString("AdvperfchartsUi","chart.datastore.utilization.title.initial")}]},t.prototype.getChartsData=function(t){var e=this,r=this.dataService.getProperties(this.objectId,["topSpaceUtilizationByType","name"]).then(function(t){t.topSpaceUtilizationByType&&t.topSpaceUtilizationByType.data&&t.topSpaceUtilizationByType.data.length>0&&e.processChartData(t);var r="";t.name&&(r=e.i18nService.getString("AdvperfchartsUi","chart.datastore.utilization.title",t.name));var a={type:"COLUMN_CHART",highchartsContainerId:"topSpaceUtilizationByType",name:r,data:t.topSpaceUtilizationByType.data,errorCode:t.topSpaceUtilizationByType.errorCode};return[a]});return[r]},t.prototype.processChartData=function(e){_.map(e.topSpaceUtilizationByType.data,function(e){var r=t.METRIC_CONFIGS[e.ID];e.color=r.color,e.order=r.order}),e.topSpaceUtilizationByType.data=_.sortBy(e.topSpaceUtilizationByType.data,"order")},t.prototype.getTimeRanges=function(){return this.$q.when({hasHistoricalStats:!1,hasRealtimeStats:!0})},t.METRIC_CONFIGS={DISKFILE:{color:"#004A70",order:6},OTHERFILE:{color:"#0094D2",order:5},DELTAFILE:{color:"#853FB3",order:4},SWAPFILE:{color:"#FFF899",order:3},OTHER:{color:"#89CBDF",order:2},FREE:{color:"#CCCCCC",order:1}},t}(),s=function(){function t(t,e,r,a,i,s,n,o,c){this.id=t,this.label=e,this.hasHistoricalStats=r,this.hasRealtimeStats=a,this.objectId=i,this.charts=s,this.chartDataService=n,this.chartTitleService=o,this.$q=c}return t.prototype.getTitle=function(t){if(!t||0===t.length)return this.$q.when("");for(var e=0,r=t;e<r.length;e++){var a=r[e],i=a;if(i.min&&i.max)return this.chartTitleService.createTitle(i.min,i.max,!0)}return this.$q.when("")},t.prototype.getChartsInfo=function(){for(var t=[],e=0,r=this.charts;e<r.length;e++){var a=r[e];t.push(this.buildChartData(a))}return t},t.prototype.getChartsData=function(t){for(var e=this,r=[],a=function(a){var s=i.chartDataService.getTopNPerfChartStats(i.objectId,t,a).then(function(t){var r=e.buildTopNOverviewData(a,t);return[r]});r.push(s)},i=this,s=0,n=this.charts;s<n.length;s++){var o=n[s];a(o)}return r},t.prototype.buildChartData=function(t){return{highchartsContainerId:t.chartId,name:t.name,type:t.type,counters:[]}},t.prototype.buildTopNOverviewData=function(t,e){return e?(_.each(e.series,function(t){t.name=t.legendItem.relatedDeviceName,t.legendItem.name=t.legendItem.relatedDeviceName}),{highchartsContainerId:t.chartId,name:t.name,type:t.type,counters:e.series,min:e.intervalStartTimestamp,max:e.intervalEndTimestamp,errorCode:e.errorCode}):this.buildChartData(t)},t.prototype.getTimeRanges=function(){return this.$q.when({hasHistoricalStats:this.hasHistoricalStats,hasRealtimeStats:this.hasRealtimeStats})},t}(),n=function(){function t(t,e,r,a,i,s,n,o,c,h){this.defaultUriSchemeUtil=t,this.chartConstants=e,this.chartDataService=r,this.chartTitleService=a,this.performanceCounterGroupsService=i,this.i18nService=s,this.dataService=n,this.managedEntityConstants=o,this.$q=c,this.featureFlagsService=h}return t.prototype.getChartsViews=function(t){var r=this.defaultUriSchemeUtil.getEntityType(t);if(r===this.managedEntityConstants.DATACENTER)return this.$q.when(this.getDatacenterChartsViews(t));if(r===this.managedEntityConstants.STORAGE_POD)return this.getStoragePodChartsViews(t);var a=this.performanceCounterGroupsService.getPerformanceCounterGroupsManager(t),i=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.overview.label"),s=this.getOverviewCharts(t),n=new e("overview",i,t,s,a,this.chartConstants,this.chartDataService,this.chartTitleService,this.$q,this.i18nService);return r===this.managedEntityConstants.HOST?this.$q.when([n].concat(this.getHostChartsViews(t))):r===this.managedEntityConstants.CLUSTER?this.$q.when([n].concat(this.getClusterChartsViews(t))):r===this.managedEntityConstants.DATASTORE?this.getDatastoreChartsViews(t).then(function(t){return[n].concat(t)}):r===this.managedEntityConstants.VIRTUAL_MACHINE?this.getVmChartsViews(t,a).then(function(t){return[n].concat(t)}):r===this.managedEntityConstants.V_APP?this.$q.when([n].concat(this.getVAppChartsViews(t))):r===this.managedEntityConstants.RESOURCE_POOL?this.$q.when([n].concat(this.getRpChartsViews(t))):this.$q.when([n])},t.prototype.getDatacenterChartsViews=function(t){var e=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datacenterClusters.label"),a=this.getDatacenterClustersChartIds(),n=new r("datacenterClusters",e,(!0),(!1),t,a,this.chartDataService,this.chartTitleService,this.$q),o=new i(t,this.i18nService,this.dataService,this.$q),c=[n,o],h=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datastores.label"),p=this.getDatacenterDatastoresChartIds(),d=new s("datacenterDatastores",h,(!0),(!1),t,p,this.chartDataService,this.chartTitleService,this.$q);return c.push(d),c},t.prototype.getDatacenterClustersChartIds=function(){return[{chartId:"datacenterCpuUsageReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datacenterCpuUsageReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"datacenterMemReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datacenterMemReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH}]},t.prototype.getStoragePodChartsViews=function(t){var e=this,a=new i(t,this.i18nService,this.dataService,this.$q),n=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.storagePodSioc.label"),o=new r("storagePodSioc",n,(!0),(!0),t,this.getStoragePodSiocChartIds(),this.chartDataService,this.chartTitleService,this.$q),c=[a,o],h=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datastores.label"),p=this.geDatastoresInPodChartIds(),d=new s("datastoresInPod",h,(!0),(!1),t,p,this.chartDataService,this.chartTitleService,this.$q);c.push(d);var u="podStorageDrsEntry.storageDrsConfig.podConfig.enabled";return this.dataService.getProperties(t,[u]).then(function(a){if(a[u]){var i=e.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.storagePodVirtualMachines.label"),s=e.getStorageVirtualMachinesChartIds(),n=new r("storagePodVirtualMachines",i,(!0),(!0),t,s,e.chartDataService,e.chartTitleService,e.$q);c.push(n)}return c})},t.prototype.getFtChartsView=function(t){var e=this;return this.dataService.getProperties(t,["runtime.faultToleranceState"]).then(function(a){if(a["runtime.faultToleranceState"]&&"notConfigured"!==a["runtime.faultToleranceState"]){var i=e.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.vmFaultTolerance.label"),s=e.getFtChartIds(),n=new r("vmFt",i,(!0),(!0),t,s,e.chartDataService,e.chartTitleService,e.$q);return n}return null})},t.prototype.getDatastoreVirtualMachinesView=function(t){var e=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datastoreVirtualMachines.label"),a=this.getStorageVirtualMachinesChartIds(),i=new r("datastoreVirtualMachines",e,(!0),(!0),t,a,this.chartDataService,this.chartTitleService,this.$q);return i},t.prototype.getStorageVirtualMachinesChartIds=function(){return[{chartId:"vmDiskReadLatencyReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmDiskReadLatencyReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmDiskWriteLatencyReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmDiskWriteLatencyReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmDiskNumberReadReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmDiskNumberReadReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmDiskNumberWriteReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmDiskNumberWriteReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getOverviewCharts=function(t){var e=this.defaultUriSchemeUtil.getEntityType(t);return e===this.managedEntityConstants.VIRTUAL_MACHINE?[{counterGroup:"cpu",counterKeys:["ready.summation","usage.average","usagemhz.average"],chartNameKey:"overviewPerfChart.cpu.title",chartId:"cpuVmOverviewChartId",deviceIds:[""]},{counterGroup:"mem",counterKeys:["consumed.average","granted.average","vmmemctltarget.average","swapped.average","shared.average","vmmemctl.average","active.average","usage.average"],chartNameKey:"overviewPerfChart.memory.title",
chartId:"memoryVmOverviewChartId",deviceIds:[""]},{counterGroup:"mem",counterKeys:["swapinRate.average","swapoutRate.average"],chartNameKey:"overviewPerfChart.vmMemRatesReport.title",chartId:"vmMemRatesReport",deviceIds:[""]},{counterGroup:"disk",counterKeys:["maxTotalLatency.latest","usage.average"],chartNameKey:"overviewPerfChart.disk.title",chartId:"diskVmOverviewChartId",deviceIds:[""]},{counterGroup:"net",counterKeys:["usage.average"],chartNameKey:"overviewPerfChart.network.title",chartId:"networkVmOverviewChartId",deviceIds:[""]}]:e===this.managedEntityConstants.HOST?[{counterGroup:"cpu",counterKeys:["usage.average","usagemhz.average"],chartNameKey:"overviewPerfChart.cpu.title",chartId:"cpuHostOverviewChartId"},{counterGroup:"mem",counterKeys:["active.average","swapused.average","granted.average","sharedcommon.average","vmmemctl.average","usage.average","consumed.average"],chartNameKey:"overviewPerfChart.memory.title",chartId:"memoryHostOverviewChartId"},{counterGroup:"mem",counterKeys:["swapinRate.average","swapoutRate.average"],chartNameKey:"overviewPerfChart.hostMemRatesReport.title",chartId:"hostMemRatesReport"},{counterGroup:"disk",counterKeys:["maxTotalLatency.latest","usage.average"],chartNameKey:"overviewPerfChart.disk.title",chartId:"diskHostOverviewChartId"},{counterGroup:"net",counterKeys:["usage.average"],chartNameKey:"overviewPerfChart.network.title",chartId:"hostNetUsageReport"}]:e===this.managedEntityConstants.DATASTORE?[{counterGroup:"disk",counterKeys:["provisioned.latest","used.latest","capacity.latest"],chartNameKey:"overviewPerfChart.datastoreDiskUsageReport.title",chartId:"datastoreDiskUsageReport",deviceIds:[""]}]:e===this.managedEntityConstants.CLUSTER?[{counterGroup:"cpu",counterKeys:["usagemhz.average","totalmhz.average"],chartNameKey:"overviewPerfChart.cpu.title",chartId:"clusterCpuTotalAndUsagemhzReport"},{counterGroup:"mem",counterKeys:["active.average","consumed.average","granted.average","vmmemctl.average","swapused.average","shared.average","totalmb.average"],chartNameKey:"overviewPerfChart.memory.title",chartId:"clusterAllMemReport"},{counterGroup:"vmop",counterKeys:["numCreate.latest","numClone.latest","numPoweron.latest","numVMotion.latest","numSVMotion.latest"],chartNameKey:"overviewPerfChart.vmop.title",chartId:"vmCountsClusterOverviewChartId"}]:e===this.managedEntityConstants.V_APP||e===this.managedEntityConstants.RESOURCE_POOL?[{counterGroup:"cpu",counterKeys:["usagemhz.average"],chartNameKey:"overviewPerfChart.cpu.title",chartId:"cpuRpOverviewChartId",deviceIds:[""]},{counterGroup:"mem",counterKeys:["active.average","consumed.average","granted.average","shared.average","vmmemctl.average","swapped.average"],chartNameKey:"overviewPerfChart.memory.title",chartId:"memoryRpOverviewChartId",deviceIds:[""]}]:[]},t.prototype.getDatastoreHostsCharts=function(t){var e=this;return this.dataService.getProperties(t,["summary.type"]).then(function(t){var r=t["summary.type"];return r===e.chartConstants.datastoreTypes.NFS||r===e.chartConstants.datastoreTypes.NFS41?e.getNfsDatastoreHostsChartIds():r===e.chartConstants.datastoreTypes.VMFS?e.getVmfsDatastoreHostsChartIds():null})},t.prototype.getVmfsDatastoreHostsChartIds=function(){return[{chartId:"datastoreLatencyByHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreLatencyByHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreMaxQueueDepthByHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreMaxQueueDepthByHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreReadByHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreReadByHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreWriteByHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreWriteByHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getNfsDatastoreHostsChartIds=function(){return[{chartId:"datastoreReadLatencyByNfsHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreReadLatencyByNfsHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreWriteLatencyByNfsHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreWriteLatencyByNfsHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreReadByNfsHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreReadByNfsHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreWriteByNfsHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreWriteByNfsHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreMaxQueueDepthByNfsHostReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreMaxQueueDepthByNfsHostReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getVmNetworkAdaptersChartIds=function(){return[{chartId:"vmNetReceivedTransmittedMbpsReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmNetReceivedTransmittedMbpsReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmNetReceivedTransmittedPacketsReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmNetReceivedTransmittedPacketsReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getVmDisksChartIds=function(){return[{chartId:"vmDiskReadWriteReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmDiskReadWriteReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmDiskReadWriteNumberReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmDiskReadWriteNumberReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmVirtualDiskReadWriteReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmVirtualDiskReadWriteReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmVirtualDiskReadWriteNumberReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmVirtualDiskReadWriteNumberReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getHostNetworkAdaptersChartIds=function(){return[{chartId:"hostNetPacketsReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.hostNetPacketsReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"hostNetBytesReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.hostNetBytesReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getHostDisksChartIds=function(){return[{chartId:"hostDiskUsageReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.hostDiskUsageReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"hostDiskReadWriteNumberReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.hostDiskReadWriteNumberReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"hostMaxQueueDepthReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.hostMaxQueueDepthReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getDatastoreSiocChartIds=function(){return[{chartId:"datastoreOverallLatencyReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreOverallLatencyReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreOveralIOPSReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreOveralIOPSReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"datastoreSIOCActivityReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datastoreSIOCActivityReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getStoragePodSiocChartIds=function(){return[{chartId:"storagePodOverallLatencyReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.storagePodOverallLatencyReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"storagePodOveralIOPSReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.storagePodOveralIOPSReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"storagePodSIOCActivityReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.storagePodSIOCActivityReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"storagePodVMObservedLatencyReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.storagePodVMObservedLatencyReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getFtChartIds=function(){return[{chartId:"vmCpuUsedPercentReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmCpuUsedPercentReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmCpuSystemPercentReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmCpuSystemPercentReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmCpuUsageMegahertzReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmCpuUsageMegahertzReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmMemActiveMbReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmMemActiveMbReport"),type:this.chartConstants.graphTypes.LINE_GRAPH},{chartId:"vmMemSwapOutMbReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.vmMemSwapOutMbReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.getVmSpaceCharts=function(){return[{counterGroup:"disk",counterKeys:["provisioned.latest","used.latest","unshared.latest"],chartNameKey:"overviewPerfChart.vmDiskSpaceGbReport.title",chartId:"vmDiskSpaceGbReport",deviceIds:[""]}]},t.prototype.getClusterChartsViews=function(t){var e=[],r=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.clusterHosts.label"),a=this.getClusterHostsChartIds(),i=new s("clusterHosts",r,(!0),(!1),t,a,this.chartDataService,this.chartTitleService,this.$q),n=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.topRpsAndVms.label"),o=this.getClusterRpVmChartIds(),c=new s("clusterRpVm",n,(!0),(!1),t,o,this.chartDataService,this.chartTitleService,this.$q);return e.push(c),e.push(i),e},t.prototype.getDatastoreChartsViews=function(t){var e=this,i=[{by:"FILE_TYPE"},{by:"VM"}],s=new a(t,this.i18nService,this.dataService,this.$q,i),n=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datastoreSioc.label"),o=new r("datastoreSioc",n,(!0),(!0),t,this.getDatastoreSiocChartIds(),this.chartDataService,this.chartTitleService,this.$q),c=[s,o];return this.getDatastoreHostsCharts(t).then(function(a){if(null!==a){var i=e.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.datastoreHosts.label"),s=new r("datastoreHosts",i,(!0),(!0),t,a,e.chartDataService,e.chartTitleService,e.$q);c.push(s),c.push(e.getDatastoreVirtualMachinesView(t))}return c})},t.prototype.getVmChartsViews=function(t,i){var s=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.vmSpace.label"),n=new e("vmSpace",s,t,this.getVmSpaceCharts(),i,this.chartConstants,this.chartDataService,this.chartTitleService,this.$q,this.i18nService),o=[{by:"FILE_TYPE"},{by:"DATASTORE"}],c=new a(t,this.i18nService,this.dataService,this.$q,o),h=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.vmNetworkAdapters.label"),p=new r("vmNetworkAdapters",h,(!0),(!0),t,this.getVmNetworkAdaptersChartIds(),this.chartDataService,this.chartTitleService,this.$q),d=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.vmDisks.label"),u=new r("vmDisks",d,(!0),(!0),t,this.getVmDisksChartIds(),this.chartDataService,this.chartTitleService,this.$q),m=[n,c,p,u];return this.getFtChartsView(t).then(function(t){return null!==t?m.concat(t):m})},t.prototype.getHostChartsViews=function(t){var e=[],a=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.hostNetworkAdapters.label"),i=new r("hostNetworkAdapters",a,(!0),(!0),t,this.getHostNetworkAdaptersChartIds(),this.chartDataService,this.chartTitleService,this.$q);e.push(i);var n=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.hostDisks.label"),o=new r("hostDisks",n,(!0),(!0),t,this.getHostDisksChartIds(),this.chartDataService,this.chartTitleService,this.$q);e.push(o);var c=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.hostVms.label"),h=this.getHostVmsChartIds(),p=new s("hostVms",c,(!0),(!0),t,h,this.chartDataService,this.chartTitleService,this.$q);return e.push(p),e},t.prototype.getVAppChartsViews=function(t){var e=[],r=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.topRpsAndVms.label"),a=this.getVappRpVmChartIds(),i=new s("vAppRpVm",r,(!0),(!1),t,a,this.chartDataService,this.chartTitleService,this.$q);return e.push(i),e},t.prototype.getRpChartsViews=function(t){var e=[],r=this.i18nService.getString("AdvperfchartsUi","overviewPerfChart.view.topRpsAndVms.label"),a=this.getRpRpVmChartIds(),i=new s("rpRpVm",r,(!0),(!1),t,a,this.chartDataService,this.chartTitleService,this.$q);return e.push(i),e},t.prototype.getRpRpVmChartIds=function(){return[{chartId:"resourcePoolCpuUsagemhzHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.cpuReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"resourcePoolMemUsageHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.memConsumedReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH}]},t.prototype.getDatacenterDatastoresChartIds=function(){return[{chartId:"datacenterDiskIOReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.datacenterDiskIOReport"),type:this.chartConstants.graphTypes.LINE_GRAPH}]},t.prototype.geDatastoresInPodChartIds=function(){return[{chartId:"storagePodDiskProvisionedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.storagePodDiskProvisionedReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"storagePodDiskCapacityReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.storagePodDiskCapacityReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"storagePodDiskUsageReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.storagePodDiskUsageReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH}]},t.prototype.getClusterRpVmChartIds=function(){return[{chartId:"clusterRpVmStackedCpuReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.cpuReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"clusterRpVmStackedMemReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.memConsumedReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH}]},t.prototype.getClusterHostsChartIds=function(){return[{chartId:"clusterStackedCpuReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.cpuReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"clusterStackedMemReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.memConsumedReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"clusterStackedDiskReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.diskReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"clusterStackedNetReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.netReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH}]},t.prototype.getHostVmsChartIds=function(){return[{chartId:"hostCpuUsageHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.cpuReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"hostMemUsageHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.memUsageReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"hostNetUsageHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.diskReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"hostDiskUsageHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.netReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH}]},t.prototype.getVappRpVmChartIds=function(){return[{chartId:"vAppCpuUsagemhzHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.cpuReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH},{chartId:"vAppMemUsageHostedReport",name:this.i18nService.getString("AdvperfchartsUi","topNChart.name.memConsumedReport"),type:this.chartConstants.graphTypes.STACKED_GRAPH}]},t.$inject=["defaultUriSchemeUtil","chartConstants","chartDataService","chartTitleService","performanceCounterGroupsService","i18nService","dataService","managedEntityConstants","$q","featureFlagsService"],t}();t.OverviewChartsService=n,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("overviewChartsService",n)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e){this.chartDataService=t,this.chartConstants=e}return t.prototype.getPerformanceCounterGroupsManager=function(t){var e=this;return this.chartDataService.getPerformanceCounterGroups(t).then(function(t){return new r(t,e.chartConstants)})},t.$inject=["chartDataService","chartConstants"],t}();t.PerformanceCounterGroupsService=e;var r=function(){function t(t,e){this.performanceCounterGroups=t,this.chartConstants=e}return t.prototype.getGroup=function(t){return this.performanceCounterGroups[t]?new a(this.performanceCounterGroups[t]):void 0},t.prototype.getGroups=function(){var t=this,e=_.map(this.performanceCounterGroups,function(e,r){var a=_.map(e,function(t,e){return _.map(t,function(t){return angular.merge(t,{counterKey:e})})}),i=[t.chartConstants.intervals.REALTIME,t.chartConstants.intervals.HISTORICAL],s=_.map(i,function(e){return{type:e,counters:t.getGroupIntervalCounters(a,e)}});return{key:r,name:a[0][0].groupName,groupIntervals:s}}),r=_.sortBy(e,"name");return r},t.prototype.getGroupIntervalCounters=function(t,e){var r=_.map(t,function(t){var r=_.filter(t,function(t){return t.interval===e}),a=_.map(r,function(t){return{name:t.relatedDeviceName,id:t.relatedDeviceId,relatedDeviceName:t.relatedDeviceName,relatedDeviceId:t.relatedDeviceId}});return{id:t[0].id,name:t[0].name,rollupType:t[0].rollupType,statsUnitName:t[0].statsUnitName,nameKey:t[0].nameKey,counterKey:t[0].counterKey,statsType:t[0].statsType,description:t[0].description,relatedDevices:a}}),a=_.filter(r,function(t){return t.relatedDevices.length>0});return _.sortBy(a,"name")},t.prototype.getCounters=function(t){var e=t.counters,r=[],a=this;return e.forEach(function(e){var i=a.getGroup(e.counterGroup);i&&(r=r.concat(i.getCountersByFilter({counterKey:e.counterKey,timespan:t.timespan})))}),r},t.prototype.getAllCounters=function(){var t=[];return _.map(this.performanceCounterGroups,function(e){t.push.apply(t,_.flatten(_.values(e)))}),t},t}();t.PerformanceCounterGroupsManager=r;var a=function(){function t(t){this.performanceCounters=t}return t.prototype.getCounters=function(t){return this.performanceCounters[t]},t.prototype.getCountersByFilter=function(t){var e=this.getCounters(t.counterKey);return e?t.timespan?e.filter(function(e){return e.interval===t.timespan.type}):e:[]},t}();t.PerformanceCounterGroup=a,angular.module("com.vmware.opsmgmt.client.advperfcharts").service("performanceCounterGroupsService",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(e,r,a,i,s,n,o,c,h,p,d,u,m,l,v,g,S,f,C,y,T){this.$scope=e,this.$q=r,this.$animate=a,this.$location=i,this.chartDataService=s,this.chartTitleService=n,this.chartConfiguratorService=o,this.visibilityMonitorService=c,this.notificationService=h,this.$element=p,this.i18nService=d,this.chartOptionsService=u,this.performanceCounterGroupsService=m,this.defaultUriSchemeUtil=l,this.configurationService=v,this.clarityModalService=g,this.chartConstants=S,this.vxZoneService=f,this.chartExportMenuService=C,this.localStorageService=y,this.chartThemeService=T,this.hasCustomTimespan=!1,this.chartType=this.chartConstants.graphTypes.LINE_GRAPH,this.actualDrawChartType=this.chartConstants.graphTypes.LINE_GRAPH,this.isChartTypeChanged=!1,this.hasCounters=!1,this.hasChartData=!1,this.customSettingAdded=!1,this.refreshTimeoutId=null,this.visibilitySubscriberId=null,this.isViewDestroyed=!1,this.localStorageSettings=[],this.localStorageSettingsNames=[],this.resizeChart=_.throttle(this.reflowChart,t.REFLOW_INTERVAL)}return t.prototype.$onInit=function(){this.init()},t.prototype.$onDestroy=function(){this.isViewDestroyed=!0,this.themeUpdateSubscription&&this.themeUpdateSubscription.unsubscribe(),this.chartConfigurator&&this.chartConfigurator.destroyChart(),null!==this.refreshTimeoutId&&(clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=null),null!==this.visibilitySubscriberId&&(this.visibilityMonitorService.unsubscribe(this.visibilitySubscriberId),this.visibilitySubscriberId=null)},t.prototype.refresh=function(){var t=this;if(this.clearRefreshTimeout(),this.visibilityMonitorService.getVisibilityStatus(this.$element)[0]!==!1){var e=t.chartOptionsService.getAvailableSettings(t.performanceCounterGroups,t.getObjectType()),r=!_.isUndefined(t.settingsByName)&&!_.isUndefined(t.settingsByName[t.i18nService.getString("AdvperfchartsUi","chart.settings.custom.name")])&&this.customSettingAdded;if(r){var a=t.settingsByName[t.i18nService.getString("AdvperfchartsUi","chart.settings.custom.name")];e.push(a)}return 0===e.length?(t.hasCounters=!1,void t.resetRefreshTimeout()):(t.hasCounters=!0,this.getLocalStorageData(),e=this.addLocalStorageSettiongOptions(e),t.settingsByName=_.indexBy(e,"name"),t.updateSettingsSelect(e),t.selectedSettingName&&!_.isUndefined(t.settingsByName[t.selectedSettingName])||(t.selectedSettingName=_.values(this.settingsByName)[0].name),t.updateTimespansSelect(),t.selectedTimespan||(t.selectedTimespan={type:t.timespansDropdownOptions[0].id}),t.loadCounterStats(),void 0)}},t.prototype.globalRefresh=function(){var t=this;this.loadAvailableCounters().then(function(){t.refresh()})},t.prototype.openChartOptionsDialog=function(){var t=this,e=this.isCustomOptionsSelected()?this.selectedCounterObjectIds:[];this.$scope.dialogData={objectId:this.objectId,selectedCounters:this.settingsByName[this.selectedSettingName]?this.settingsByName[this.selectedSettingName].counters:_.values(this.settingsByName)[0].counters,selectedChartType:this.actualDrawChartType,selectedTimespan:angular.copy(this.selectedTimespan),selectedObjectIds:e,selectedSavedOption:this.settingsByName[this.selectedSettingName],savedChartNames:this.localStorageSettingsNames,customCounters:[],customObjects:[],selectedGroupKey:"",defaultAvailableSettingsNames:this.settingsByName,customSettingAdded:this.customSettingAdded},this.clarityModalService.openOkCancelModal({title:this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.button.chartoptions"),subTitle:{objectId:this.objectId},size:"xl",defaultButton:"submit",contentTemplate:"advperfcharts-ui/resources/h5-advperfcharts/views/chartOptionsView.html",modalClass:"advperfcharts-options-dialog",dialogData:this.$scope.dialogData,onCancel:function(){t.selectedSettingName&&!_.isUndefined(t.settingsByName[t.selectedSettingName])||(t.selectedSettingName=_.values(t.settingsByName)[0].name),_.each(t.$scope.dialogData.localStorageSettings,function(e){_.keys(t.settingsByName).indexOf(e.name)===-1&&(t.settingsByName[e.name]={name:e.name,counters:t.getSelectedCounters(e)})}),t.getLocalStorageData();var e=t.getUpdateSavedChartSettings(t.localStorageSettingsNames,t.$scope.dialogData.savedChartNames);t.updateSettingsSelect(e)}}),this.$scope.$watch("dialogData.customCounters",this.handleCustomCountersUpdate.bind(this))},t.prototype.onSettingsChange=function(){var t=this;this.updateTimespansSelect();var e=this.timespansDropdownOptions.some(function(e){return e.id===t.selectedTimespan.type});e||(this.selectedTimespan.type=this.timespansDropdownOptions[0].id),this.loadCounterStats()},t.prototype.onTimespanChange=function(){this.loadCounterStats()},t.prototype.getUpdateSavedChartSettings=function(t,e){var r=[];return r=_.isEqual(_.sortBy(t),_.sortBy(e))?_.values(this.settingsByName):this.chartOptionsService.removeSavedChartNames(_.values(this.settingsByName),t),r=this.addSavedChartNames(r,e)},t.prototype.addSavedChartNames=function(t,e){var r=this.chartOptionsService.uniqueArray(t,"name");return e&&_.each(r,function(t){e.indexOf(t.name)===-1&&r.push(t)}),r=this.addLocalStorageSettiongOptions(r)},t.prototype.handleCustomCountersUpdate=function(t){var e=this;if(t.length>0){var r={name:this.$scope.dialogData.selectedSavedOption,counters:[]};r.counters=_.map(t,function(t){return{counterGroup:e.$scope.dialogData.selectedGroupKey,counterKey:t.counterKey}});var a=_.uniq(this.$scope.dialogData.savedChartNames),i=this.$scope.dialogData.localStorageSettings;_.each(i,function(t){e.settingsByName[t.name]={name:t.name,counters:e.getSelectedCounters(t)}}),this.settingsByName[r.name]=r,this.getLocalStorageData();var s=this.getUpdateSavedChartSettings(this.localStorageSettingsNames,a);this.selectedTimespan=this.$scope.dialogData.selectedTimespan,this.customSettingAdded=this.$scope.dialogData.customSettingAdded,this.chartType!==this.$scope.dialogData.selectedChartType&&(this.chartType=this.$scope.dialogData.selectedChartType,this.isChartTypeChanged=!0),this.chartConstants.periods.CUSTOM===this.selectedTimespan.type&&(this.hasCustomTimespan=!0),this.selectedSettingName=r.name,this.updateSettingsSelect(s),this.selectedCounterObjectIds=_.pluck(this.$scope.dialogData.customObjects,"id"),this.onSettingsChange()}},t.prototype.addLocalStorageSettiongOptions=function(t){var e=t?t:[],r=[];if(this.localStorageSettings&&this.localStorageSettings.length>0){_.isUndefined(this.$scope.dialogData)||(this.localStorageSettings=this.$scope.dialogData.localStorageSettings),r=this.getLocalStorageConfigSetting(this.localStorageSettings);var a=t.concat(r);e=this.chartOptionsService.uniqueArray(a,"name")}return e},t.prototype.getLocalStorageConfigSetting=function(t){var e=this;return _.map(t,function(t){return{name:t.name,counters:e.getSelectedCounters(t)}})},t.prototype.getSelectedCounters=function(t){return _.map(t.settings.selectedCounters,function(e){var r=t.settings.selectedGroup.key;return{counterGroup:r,counterKey:e.counterKey}})},t.prototype.reflowChart=function(){this.chartConfigurator&&this.chartConfigurator.reflowChart()},t.prototype.showPerformanceStats=function(){var t=this;if(this.hasChartData=this.chartDataService.hasPerformanceStats(this.performanceStats),!this.hasChartData)return void(this.noDataMessage=this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataformetrics"));(this.actualDrawChartType!==this.chartType||!this.isCustomOptionsSelected()&&this.chartType!==this.chartConstants.graphTypes.LINE_GRAPH)&&(this.isChartTypeChanged=!0),this.actualDrawChartType=this.isCustomOptionsSelected()||this.isLocalStorageOptionSelected()?this.chartType:this.chartConstants.graphTypes.LINE_GRAPH;var e={chart:{type:"line",renderTo:"renderedGraph"}};this.actualDrawChartType===this.chartConstants.graphTypes.STACKED_GRAPH||this.actualDrawChartType===this.chartConstants.graphTypes.STACKED_GRAPH_PER_VM?(e.chart.type="area",e.plotOptions={area:{stacking:"normal",animation:!1}}):e.plotOptions={line:{animation:!1}},this.chartConfigurator?this.isChartTypeChanged?(this.isChartTypeChanged=!1,this.chartConfigurator.setStats(this.performanceStats,this.actualDrawChartType),setTimeout(function(){t.isViewDestroyed||(t.chartConfigurator.destroyChart(),t.chartConfigurator=t.chartConfiguratorService.createChartConfigurator(t.performanceStats,t.actualDrawChartType,e),t.$scope.$apply())},0)):this.chartConfigurator.setStats(this.performanceStats,this.actualDrawChartType):setTimeout(function(){t.isViewDestroyed||(t.chartConfigurator=t.chartConfiguratorService.createChartConfigurator(t.performanceStats,t.actualDrawChartType,e),t.$scope.$apply())},0),this.getTitle(this.performanceStats).then(function(e){t.title=e})},t.prototype.getSettingsDropdownOptions=function(t){return t.map(function(t){return{id:t.name,label:t.name}})},t.prototype.resetRefreshTimeout=function(){var t=this;this.clearRefreshTimeout(),this.selectedTimespan&&this.selectedTimespan.type===this.chartConstants.intervals.REALTIME&&this.vxZoneService.runOutsideAngular(function(){t.refreshTimeoutId=setTimeout(t.refresh.bind(t),t.getNextRoundRefreshInterval())})},t.prototype.getNextRoundRefreshInterval=function(){var e=(new Date).getSeconds(),r=t.REFRESH_INTERVAL-e%t.REFRESH_INTERVAL;return 1e3*r},t.prototype.clearRefreshTimeout=function(){null!==this.refreshTimeoutId&&(clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=null)},t.prototype.getPopoutChartUrl=function(){var e=this.selectedSettingName,r=this.selectedTimespan.type,a=$.param({objectId:this.objectId,selectedSettingName:e,selectedTimespan:r}),i=document.createElement("a");if(i.href=t.CHART_BASE_URL,i.hash="?"+a,h5.debug){var s=$.param({debug:!0});i.search=s}return i.href},t.prototype.getLocalStorageData=function(){var t=this,e=[];this.localStorageService.getUserData(this.chartConstants.SAVED_CHART_SETTINGS_KEY).then(function(r){t.localStorageSettingsNames=r,_.each(r,function(r){t.localStorageService.getUserData(r).then(function(a){var i={name:r,settings:a};t.defaultUriSchemeUtil.getEntityType(t.objectId)===t.defaultUriSchemeUtil.getEntityType(a.objectId)&&e.push(i),t.localStorageSettings=t.chartOptionsService.uniqueArray(e,"name")})})})},t.prototype.init=function(){var t=this;this.initViewMessages(),this.getLocalStorageData();var e=this;if(this.actionBarOptions={actions:[]},h5.isPerfChartPopUpWindow){var r=e.$location.search();e.selectedSettingName=String(r.selectedSettingName),e.objectId=String(r.objectId),e.selectedTimespan={type:String(r.selectedTimespan)}}else this.objectId=this.$scope._route.objectId,this.actionBarOptions.actions.push({iconClass:"vx-icon-window-popout",tooltipText:this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.popUpChart.action.tooltip"),enabled:!0,onClick:function(){var t=e.getPopoutChartUrl();window.open(t,"_blank","width=800,height=600,toolbar=0,location=0,menubar=0,resizable=1,noopener")}}),this.actionBarOptions.actions.push({iconClass:"vx-icon-export",tooltipText:this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.label.export"),enabled:!0,onClick:function(e){t.chartExportMenuService.showExportMenu(e,t.$scope)}});this.$animate.enabled(this.$element,!1),this.visibilitySubscriberId=this.visibilityMonitorService.subscribeForVisibilityChange(this.$element,function(t){t&&null===e.refreshTimeoutId&&e.resetRefreshTimeout()}),this.chartOptions=this.buildChartOptions(),this.loadAvailableCounters().then(function(){t.refresh(),t.themeUpdateSubscription=t.chartThemeService.subscribeToThemeChanged(function(){t.chartConfigurator&&t.chartConfigurator.updateTheme()})})},t.prototype.initViewMessages=function(){this.viewMessages={noCountersData:this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.nodataavailable"),chartOptions:this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.button.chartoptions"),switchTo:this.i18nService.getString("AdvperfchartsUi","advPerfChartsView.label.switchto"),chartLegendHeader:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.legendHeader")}},t.prototype.updateSettingsSelect=function(t){var e=this.i18nService.getString("AdvperfchartsUi","chart.settings.custom.name"),r=t;h5.isPerfChartPopUpWindow&&(!h5.isPerfChartPopUpWindow||this.selectedSettingName===e)||!_.isUndefined(this.$scope.dialogData)&&(_.isUndefined(this.$scope.dialogData)||this.customSettingAdded)||(r=_.filter(t,function(t){return t.name!==e})),this.settingsDropdownOptions=this.chartOptionsService.uniqueArray(this.getSettingsDropdownOptions(r),"label");
},t.prototype.updateTimespansSelect=function(){var t=this,e=this.getCountersToShow(),r=e.some(function(e){return e.interval===t.chartConstants.intervals.HISTORICAL}),a=e.some(function(e){return e.interval===t.chartConstants.intervals.REALTIME});this.timespansDropdownOptions=[],a&&this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.REALTIME)),r&&(this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_DAY)),this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_WEEK)),this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_MONTH)),this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.LAST_YEAR)),this.hasCustomTimespan&&this.timespansDropdownOptions.push(this.getTimespanSelectItem(this.chartConstants.periods.CUSTOM)))},t.prototype.getTimespanSelectItem=function(t){return{id:t,label:this.i18nService.getString("AdvperfchartsUi","advPerfChart.timeInterval."+t)}},t.prototype.loadAvailableCounters=function(){var t=this;return this.performanceCounterGroupsService.getPerformanceCounterGroupsManager(this.chartOptions.objectId).then(function(e){t.performanceCounterGroups=e})},t.prototype.loadCounterStats=function(){var t=this;this.clearRefreshTimeout();var e=this.getCountersToShow();return this.chartDataService.getPerformanceStats(this.buildChartOptions(),this.selectedTimespan,e).then(function(e){t.performanceStats=e,t.showPerformanceStats(),t.resetRefreshTimeout()})["catch"](function(e){"RESTRICTED_BY_ADMINISTRATOR"===e&&(t.hasChartData=!1,t.noDataMessage=t.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.restrictedbyadministrator"),t.notificationService.notify({content:t.i18nService.getString("AdvperfchartsUi","advPerfChartsView.message.notification.restrictedbyadministrator"),type:t.notificationService.type.WARNING})),t.resetRefreshTimeout()})},t.prototype.getCountersToShow=function(){var t=this.settingsByName[this.selectedSettingName],e={counters:t?t.counters:[]};return this.performanceCounterGroups.getCounters(e)},t.prototype.getTitle=function(t){return this.chartTitleService.getTitle(t,!1,this.getGroupName(t))},t.prototype.getGroupName=function(t){return t[0].groupName},t.prototype.buildChartOptions=function(){var t=this.isCustomOptionsSelected(),e=t&&!h5.isPerfChartPopUpWindow?this.selectedCounterObjectIds:["*"];return{objectId:this.objectId,type:this.chartType,relatedDeviceIds:e}},t.prototype.isCustomOptionsSelected=function(){return this.selectedSettingName===this.i18nService.getString("AdvperfchartsUi","chart.settings.custom.name")},t.prototype.isLocalStorageOptionSelected=function(){return!(!this.localStorageSettingsNames||0===this.localStorageSettingsNames.length)&&this.localStorageSettingsNames.indexOf(this.selectedSettingName)!==-1},t.prototype.getObjectType=function(){return this.defaultUriSchemeUtil.getEntityType(this.objectId)},t.REFRESH_INTERVAL=20,t.REFLOW_INTERVAL=500,t.CHART_BASE_URL="chart",t.$inject=["$scope","$q","$animate","$location","chartDataService","chartTitleService","chartConfiguratorService","visibilityMonitorService","notificationService","$element","i18nService","chartOptionsService","performanceCounterGroupsService","defaultUriSchemeUtil","configurationService","clarityModalService","chartConstants","vxZoneService","chartExportMenuService","localStorageService","chartThemeService"],t}();angular.module("com.vmware.opsmgmt.client.advperfcharts").controller("AdvperfchartsViewController",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){function e(){return{restrict:"A",template:'<div data-test-id="chart-legend-grid"\n                          ng-if="ctrl.legendGridOptions"\n                          vui-datagrid="ctrl.legendGridOptions"\n                          vx-datagrid-preselect-item="true"\n                          reselect-on-change="true"\n                          preselect-comparator="preselectComparator"\n                          vx-stretch-grid></div>',scope:{performanceStats:"=",chartSeries:"="},controller:r,controllerAs:"ctrl"}}e.$inject=["i18nService","vuiConstants","numberFormatterService"];var r=function(){function t(t,e,r,a,i){this.$scope=t,this.vuiConstants=e,this.i18nService=r,this.numberFormatterService=a,this.chartOptionsService=i,this.initLegendGrid();var s=this;this.sorting={column:"",dir:""},this.$scope.preselectComparator=function(t){var e=!1;return s.selectedItems&&s.selectedItems.length>0&&(e=_.some(s.selectedItems,function(e){return e.id===t.id&&e.relatedDeviceName===t.relatedDeviceName&&e.nameKey===t.nameKey&&e.rollupType===t.rollupType})),e},this.$scope.$watch("performanceStats",this.onPerformanceStatsChange.bind(this)),this.legendSelectedItemsWatch=this.$scope.$watch("ctrl.legendGridOptions.selectedItems",this.onSelectedSeriesChange.bind(this))}return t.prototype.onPerformanceStatsChange=function(){var t=this;if(this.$scope.performanceStats&&this.$scope.chartSeries){this.legendSelectedItemsWatch&&this.legendSelectedItemsWatch();var e=this.$scope.performanceStats.map(function(e,r){var a=t.$scope.chartSeries[r];return e.legendItem.color=a.color,e.legendItem.serieIndex=r,e.legendItem});""!==this.sorting.column&&void 0!==this.sorting.column&&("relatedDeviceName"===this.sorting.column?e.sort(this.chartOptionsService.compareAlphanumericValues.bind(this)):e.sort(this.compare.bind(this))),this.legendGridOptions.data=e,this.legendGridOptions.selectedItems=[],this.legendSelectedItemsWatch=this.$scope.$watch("ctrl.legendGridOptions.selectedItems",this.onSelectedSeriesChange.bind(this))}},t.prototype.onSelectedSeriesChange=function(t,e){var r=this;if(t!==e){this.legendGridOptions.dataSource.bind("change",function(){var t=r.legendGridOptions.dataSource.sort();t.length>0&&(r.sorting={column:t[0].field,dir:t[0].dir})});var a=this,i=!1;e&&e.forEach(function(t){var e=a.$scope.chartSeries[t.serieIndex];e.update({lineWidth:2,zIndex:0},!1),i=!0}),t&&(t.forEach(function(t){var e=a.$scope.chartSeries[t.serieIndex];e.update({lineWidth:3,zIndex:1},!1),i=!0}),t.length>0&&(a.selectedItems=t)),this.$scope.chartSeries&&this.$scope.chartSeries.length>0&&i&&this.$scope.chartSeries[0].update({},!0)}},t.prototype.localizeRollupType=function(t){return this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.rollup."+t)},t.prototype.initLegendGrid=function(){var t=this;this.legendGridOptions={columnDefs:[{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.key"),field:"color",width:"100px",template:function(t){return'<span class="legend-color-block" style="background-color:'+t.color+';"></span>'}},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.object"),field:"relatedDeviceName",template:"#:relatedDeviceName#",sortable:this.chartOptionsService.compareAlphanumericValues},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.measurement"),field:"measurement",template:"#:measurement#"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.rollup"),field:"rollupType",template:function(e){return t.localizeRollupType(e.rollupType)}},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.units"),field:"units",template:"#:units#"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.latest"),field:"latest",template:function(e){return t.numberFormatterService.format(e.latest)},type:"number"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.maximum"),field:"max",template:function(e){return t.numberFormatterService.format(e.max)},type:"number"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.minimum"),field:"min",template:function(e){return t.numberFormatterService.format(e.min)},type:"number"},{displayName:this.i18nService.getString("AdvperfchartsUi","advPerfChart.legend.columnTitle.average"),field:"average",template:function(e){return t.numberFormatterService.format(e.average)},type:"number"}],pageConfig:{hidePager:!0},data:[],sortMode:this.vuiConstants.grid.sortMode.SINGLE,selectionMode:this.vuiConstants.grid.selectionMode.MULTI,showCheckboxesOnMultiSelection:!1,selectedItems:[],height:"100%",resizable:!0,reorderable:!0}},t.prototype.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.prototype.compare=function(t,e){var r=t[this.sorting.column],a=e[this.sorting.column];return this.isNumber(r)&&this.isNumber(a)?"desc"===this.sorting.dir?r<a?1:r>a?-1:0:r>a?1:r<a?-1:0:"desc"===this.sorting.dir?a.localeCompare(r):r.localeCompare(a)},t.$inject=["$scope","vuiConstants","i18nService","numberFormatterService","chartOptionsService"],t}();angular.module("com.vmware.opsmgmt.client.advperfcharts").directive("chartLegend",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a,i,s,n,o,c,h,p,d,u,m,l,v){var g=this;this.$scope=t,this.i18nService=e,this.chartDataService=r,this.performanceCounterGroupsService=a,this.vuiConstants=i,this.chartTimespanOptionsService=s,this.chartConstants=n,this.chartOptionsService=o,this.$element=c,this.$window=h,this.configurationService=p,this.clarityModalService=d,this.localStorageService=u,this.defaultUriSchemeUtil=m,this.$timeout=l,this.$q=v,this.isFirstTimeLoad=!0,this.objectId=t.modalOptions.dialogData.objectId,this.groupsGridOptions=this.chartOptionsService.getGroupGridOptions(),this.countersGridOptions=this.chartOptionsService.getCounterGridOptions(),this.objectsGridOptions=this.chartOptionsService.getObjectGridOptions(),this.savedChartNames=t.modalOptions.dialogData.savedChartNames?t.modalOptions.dialogData.savedChartNames:[];var S=this.$scope.$watch("ctrl.groupsGridOptions.selectedItems",this.onSelectedGroupChange.bind(this)),f=this.$scope.$watch("ctrl.chartTimespan.type",this.onSelectedTimespanChange.bind(this)),C=this.$scope.$watch("ctrl.countersGridOptions.selectedItems",this.onSelectedCounterChange.bind(this)),y=this.$scope.$watch("ctrl.objectsGridOptions.selectedItems",this.onSelectedObjectChange.bind(this)),T=this.$scope.$watch("ctrl.chartType",this.onChartTypeChanged.bind(this));this.$scope.$watch("ctrl.selectedSavedOption",function(t){g.actionBarOptions.actions[1].enabled=g.savedChartNames.indexOf(t)!==-1&&t!==g.i18nService.getString("AdvperfchartsUi","chart.settings.custom.name")},!0),this.getViewData(),this.chartTimespanUnitOptions=this.chartOptionsService.getTimespanUnitOptions(),this.chartTypeDropdownOptions=this.chartOptionsService.getChartTypeOptions(this.defaultUriSchemeUtil.getEntityType(this.objectId)),this.chartType=t.modalOptions.dialogData.selectedChartType,t.groupsPreselectComparator=this.groupsPreselectComparator.bind(this),t.countersPreselectComparator=this.countersPreselectComparator.bind(this),t.objectsPreselectComparator=this.objectsPreselectComparator.bind(this),t.modalOptions.onSubmit=this.submitChartOptions.bind(this);var D=this.$q.defer();D.promise.then(function(t){g.chartOptionsSaveEnabled=t,g.chartOptionsSaveEnabled&&g.initSavedChartSettingsDropdown()}),D.resolve(!0),t.$on("$destroy",function(){S(),f(),C(),y(),T()}),t.$on("kendoWidgetCreated",function(t,e){e&&e.constructor===kendo.ui.Grid&&("adv-perf-charts-options-objects-grid"===e.element.context.parentElement.id&&(g.objectsGridWidget=e),"adv-perf-charts-options-counters-grid"===e.element.context.parentElement.id&&(g.countersGridWidget=e),"adv-perf-charts-options-groups-grid"===e.element.context.parentElement.id&&(g.groupsGridWidget=e))}),this.actionBarOptions={actions:[{label:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.button.saveAs"),tooltipText:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.button.saveAs"),enabled:!0,onClick:function(){g.openSaveOptionsModal()}},{label:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.button.deleteSavedChartSettings"),tooltipText:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.button.deleteSavedChartSettings"),onClick:function(){g.openDeleteOptionConfirmationModal()}}]}}return t.prototype.changeChartSettingSelectedOption=function(){var t=this,e=this.$element.find("#adv-perf-charts-options-groups-grid > div").data("kendoGrid");this.savedChartNames.indexOf(this.selectedSavedOption)!==-1?this.localStorageService.getUserData(this.selectedSavedOption).then(function(r){if(r){var a=function(t){return t.key===r.selectedGroup.key};t.selectRows(t.groupsGridWidget,a);var i=[];_.each(r.selectedCounters,function(t){t.counterKey&&i.push(t.counterKey)});var s=function(t){return _.find(i,function(e){return t.counterKey===e})};t.$timeout(function(){t.countersGridWidget.clearSelection(),t.selectRows(t.countersGridWidget,s),t.countersGridWidget.refresh()},0),t.chartTimespan=r.selectedTimespan,t.chartType=r.selectedChartType,t.savedChartOptionsData=r}else e.select("tr:eq(0)")}):this.setDefaultSettings()},t.prototype.getViewData=function(){var t=this,e=this.performanceCounterGroupsService.getPerformanceCounterGroupsManager(this.objectId).then(function(e){t.groupsGridOptions.data=e.getGroups()});if(this.chartOptionsService.isCompositeChartTypeSupported(this.defaultUriSchemeUtil.getEntityType(this.objectId))){var r=this.chartDataService.getCompositeStatsObjects(this.objectId).then(function(t){var e=_.map(_.keys(t),function(e){return{id:e,name:t[e].name}});return e});this.$q.all([e,r]).then(function(e){var r=e[1];r.push({id:"",name:t.findObjectName()}),t.compositeViewObjects=r})}},t.prototype.findObjectName=function(){for(var t=0,e=this.groupsGridOptions.data;t<e.length;t++)for(var r=e[t],a=0,i=r.groupIntervals;a<i.length;a++)for(var s=i[a],n=0,o=s.counters;n<o.length;n++)for(var c=o[n],h=0,p=c.relatedDevices;h<p.length;h++){var d=p[h];if(""===d.relatedDeviceId)return d.name}return"default"},t.prototype.groupsPreselectComparator=function(t){return this.$scope.modalOptions.dialogData.selectedCounters[0].counterGroup===t.key},t.prototype.countersPreselectComparator=function(t){return _.some(this.$scope.modalOptions.dialogData.selectedCounters,function(e){return e.counterKey===t.counterKey})},t.prototype.objectsPreselectComparator=function(t){return!(!this.isFirstTimeLoad&&this.selectedObjects&&0!==this.selectedObjects.length)&&(!(!this.$scope.modalOptions.dialogData.selectedObjectIds||0!==this.$scope.modalOptions.dialogData.selectedObjectIds.length)||_.contains(this.$scope.modalOptions.dialogData.selectedObjectIds,t.id))},t.prototype.initSavedChartSettingsDropdown=function(){var t=this,e=this.i18nService.getString("AdvperfchartsUi","chart.settings.custom.name");this.savedDropdownOptions=[{id:e,label:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.prompt.savedSettings")},{id:"defaultOptions",label:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.settings.defaultName")}];var r=this.selectedSavedOption?this.selectedSavedOption:this.$scope.modalOptions.dialogData.selectedSavedOption.name;this.localStorageSettings=[],this.localStorageService.getUserData(this.chartConstants.SAVED_CHART_SETTINGS_KEY).then(function(a){a&&0!==a.length?(t.savedChartNames=_.uniq(t.savedChartNames.concat(a)),_.each(a,function(r){r!==e&&t.localStorageService.getUserData(r).then(function(e){var a={id:r,label:r};e&&t.defaultUriSchemeUtil.getEntityType(t.objectId)===t.defaultUriSchemeUtil.getEntityType(e.objectId)&&t.savedDropdownOptions.indexOf(a)===-1&&(t.savedDropdownOptions.push(a),t.localStorageSettings.push({name:r,settings:e})),t.savedChartOptionsData=e})}),a.indexOf(r)!==-1?t.selectedSavedOption=r:(_.isUndefined(t.selectedSavedOption)||a.indexOf(r)===-1)&&(t.selectedSavedOption=t.savedDropdownOptions[0].id),t.$scope.modalOptions.dialogData.savedChartNames=a):t.selectedSavedOption=e,t.localStorageSettings=t.chartOptionsService.uniqueArray(t.localStorageSettings,"name"),t.$scope.modalOptions.dialogData.localStorageSettings=t.localStorageSettings})},t.prototype.onSelectedGroupChange=function(t){return t&&0!==t.length?void(this.selectedGroup&&t[0].key===this.selectedGroup.key||(this.selectedGroup=t[0],this.selectedCounters=[],this.selectedObjects=[],this.countersGridOptions.data.length>0&&(this.$scope.modalOptions.dialogData.selectedTimespan=null,this.$scope.modalOptions.dialogData.selectedCounters=[]),this.initTimespanSettings(),this.onSelectedTimespanChange())):(delete this.selectedGroup,void(this.countersGridOptions.data=[]))},t.prototype.onSelectedTimespanChange=function(){if(this.selectedGroup){var t=_.findWhere(this.selectedGroup.groupIntervals,{type:this.chartOptionsService.getTimespanInterval(this.chartTimespan.type)});this.countersGridOptions.data=_.map(t.counters,function(t){return t})}},t.prototype.onSelectedCounterChange=function(t){var e=this;this.selectedCounters=t;var r=this.objectsGridOptions.data;if(this.objectsGridOptions.data=this.getCounterObjects(),this.isFirstTimeLoad)this.selectedCounters&&this.selectedCounters.length===this.$scope.modalOptions.dialogData.selectedCounters.length&&(this.isFirstTimeLoad=!1);else{var a=_.filter(this.objectsGridOptions.data,function(t){return!_.findWhere(r,t)}),i=_.filter(this.selectedObjects,function(t){return void 0!==_.find(e.objectsGridOptions.data,function(e){return t.name===e.name})}).concat(a);this.objectsGridOptions.selectedItems=this.selectedObjects=i;var s=function(t){return _.find(i,function(e){return t.name===e.name})};this.$timeout(function(){e.selectRows(e.objectsGridWidget,s),e.objectsGridWidget.refresh()},0)}},t.prototype.onSelectedObjectChange=function(t){this.selectedObjects=t},t.prototype.onChartTypeChanged=function(t,e){var r=t===this.chartConstants.graphTypes.STACKED_GRAPH_PER_VM,a=e===this.chartConstants.graphTypes.STACKED_GRAPH_PER_VM;r!==a&&(r?this.objectsGridOptions.data=this.compositeViewObjects:this.objectsGridOptions.data=this.getCounterObjects(),this.selectedObjects=[])},t.prototype.getCounterObjects=function(){return this.chartType===this.chartConstants.graphTypes.STACKED_GRAPH_PER_VM?this.compositeViewObjects:this.chartOptionsService.getCounterObjects(this.selectedCounters)},t.prototype.initTimespanSettings=function(){var t=this,e=_.some(this.selectedGroup.groupIntervals,function(e){return e.type===t.chartConstants.intervals.REALTIME&&e.counters.length>0}),r=_.some(this.selectedGroup.groupIntervals,function(e){return e.type===t.chartConstants.intervals.HISTORICAL&&e.counters.length>0});this.timespanDropdownOptions=[],e&&this.timespanDropdownOptions.push(this.chartOptionsService.getTimespanSelectItem(this.chartConstants.periods.REALTIME)),r&&(this.timespanDropdownOptions.push(this.chartOptionsService.getTimespanSelectItem(this.chartConstants.periods.LAST_DAY)),this.timespanDropdownOptions.push(this.chartOptionsService.getTimespanSelectItem(this.chartConstants.periods.LAST_WEEK)),this.timespanDropdownOptions.push(this.chartOptionsService.getTimespanSelectItem(this.chartConstants.periods.LAST_MONTH)),this.timespanDropdownOptions.push(this.chartOptionsService.getTimespanSelectItem(this.chartConstants.periods.LAST_YEAR)),this.timespanDropdownOptions.push(this.chartOptionsService.getTimespanSelectItem(this.chartConstants.periods.CUSTOM)));var a=!1;this.$scope.modalOptions.dialogData.selectedTimespan?this.$scope.modalOptions.dialogData.selectedTimespan.customPeriodType?(this.chartTimespan=this.$scope.modalOptions.dialogData.selectedTimespan,this.$scope.modalOptions.dialogData.selectedTimespan.customPeriodType===this.chartConstants.customTimeTypes.PERIOD&&(a=!0)):this.chartTimespan=this.chartOptionsService.getDefaultTimespanSettings(this.$scope.modalOptions.dialogData.selectedTimespan.type):this.chartTimespan=this.chartOptionsService.getDefaultTimespanSettings(this.timespanDropdownOptions[0].id),this.initCustomPeriodChartDateTime(a)},t.prototype.initCustomPeriodChartDateTime=function(t){var e=moment().subtract(1,"days").toDate(),r=moment().toDate();this.preSelectedFromDateTime=t?this.$scope.modalOptions.dialogData.selectedTimespan.startDate:e,this.preSelectedToDateTime=t?this.$scope.modalOptions.dialogData.selectedTimespan.endDate:r,this.chartTimespanFromDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedFromDateTime),this.preSelectedFromTime=this.chartTimespanFromDate.time,this.chartTimespanToDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedToDateTime),this.preSelectedToTime=this.chartTimespanToDate.time},t.prototype.normalizeCustomTimespanValue=function(){var t=this.chartTimespan.customPeriodUnitsCount?this.chartTimespan.customPeriodUnitsCount:1;this.chartTimespan.customPeriodUnitsCount=Math.max(Math.min(t,150),1)},t.prototype.$onInit=function(){this.$window.addEventListener("resize",t.onWindowResize)},t.prototype.$onDestroy=function(){this.$window.removeEventListener("resize",t.onWindowResize)},t.prototype.openSaveOptionsModal=function(){var t=this;if(this.validate()){var e=_.map(this.selectedCounters,function(t){return{counterKey:t.counterKey}});this.clarityModalService.openOkCancelModal({title:this.i18nService.getString("AdvperfchartsUi","saveSettings.title"),defaultButton:"submit",contentTemplate:"advperfcharts-ui/resources/h5-advperfcharts/views/saveChartOptionsView.html",modalClass:"save-advperfcharts-options-dialog",dialogData:{selectedCounters:e,selectedGroup:{key:this.selectedGroup.key},selectedTimespan:angular.copy(this.chartTimespan),selectedChartType:this.chartType,objectId:this.objectId,defaultAvailableSettingsNames:this.$scope.modalOptions.dialogData.defaultAvailableSettingsNames},finishCallback:function(e){t.selectedSavedOption=e,t.initSavedChartSettingsDropdown()}})}},t.prototype.openDeleteOptionConfirmationModal=function(){var t=this,e={title:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.confirm.deleteSettings.title"),message:this.i18nService.getString("AdvperfchartsUi","advPerfChartsConfig.confirm.deleteSettings.text",this.selectedSavedOption),clarityIcon:{"class":"is-warning",shape:"warning-standard",size:"32"},submit:function(){var e=t.selectedSavedOption;t.localStorageService.removeUserData(e),t.selectedSavedOption="defaultOptions",t.setDefaultSettings(),t.initSavedChartSettingsDropdown(),t.$scope.modalOptions.dialogData.localStorageSettings=t.localStorageSettings,t.localStorageService.getUserData(t.chartConstants.SAVED_CHART_SETTINGS_KEY).then(function(r){var a=r.indexOf(e);r.splice(a,1),t.savedChartNames=r,t.$scope.modalOptions.dialogData.savedChartNames=r,t.localStorageService.setUserData(t.chartConstants.SAVED_CHART_SETTINGS_KEY,r)})}};this.clarityModalService.openConfirmationModal(e)},t.prototype.setDefaultSettings=function(){var t=this;this.groupsGridWidget.select("tr:eq(0)"),this.$timeout(function(){t.countersGridWidget.clearSelection()},0),this.savedChartOptionsData=null},t.prototype.submitChartOptions=function(){if(this.$scope.modalOptions.isAlertClosed=!0,this.$scope.modalOptions.alerts=[],this.chartTimespanFromDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedFromDateTime),this.chartTimespanFromDate.time=this.preSelectedFromTime,this.chartTimespanToDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedToDateTime),this.chartTimespanToDate.time=this.preSelectedToTime,!this.validate())return!1;if(this.normalizeCustomTimespanValue(),this.$scope.modalOptions.dialogData.customCounters=this.selectedCounters,this.$scope.modalOptions.dialogData.selectedGroupKey=this.selectedGroup.key,this.$scope.modalOptions.dialogData.customObjects=this.selectedObjects,this.$scope.modalOptions.dialogData.selectedTimespan=this.chartTimespan,this.$scope.modalOptions.dialogData.selectedChartType=this.chartType,this.$scope.modalOptions.dialogData.savedChartNames=_.uniq(this.savedChartNames),this.$scope.modalOptions.dialogData.localStorageSettings=this.localStorageSettings,this.chartTimespan.customPeriodType===this.chartConstants.customTimeTypes.PERIOD&&this.chartTimespan.type===this.chartConstants.periods.CUSTOM){var t=this.chartTimespanOptionsService.parseChartDateTime(this.chartTimespanFromDate),e=this.chartTimespanOptionsService.parseChartDateTime(this.chartTimespanToDate);this.$scope.modalOptions.dialogData.selectedTimespan.startDate=t,this.$scope.modalOptions.dialogData.selectedTimespan.endDate=e}else this.$scope.modalOptions.dialogData.selectedTimespan.startDate=void 0,this.$scope.modalOptions.dialogData.selectedTimespan.endDate=void 0;if(this.savedChartOptionsData&&this.chartOptionsService.compareSelectedChartSettings(this.$scope.modalOptions.dialogData,this.savedChartOptionsData))this.$scope.modalOptions.dialogData.selectedSavedOption=this.selectedSavedOption;else{var r=this.i18nService.getString("AdvperfchartsUi","chart.settings.custom.name");this.$scope.modalOptions.dialogData.selectedSavedOption=r,this.$scope.modalOptions.dialogData.customSettingAdded=!0,this.savedChartNames.push(r),this.localStorageService.setUserData(this.chartConstants.SAVED_CHART_SETTINGS_KEY,_.uniq(this.savedChartNames));var a={selectedGroup:this.selectedGroup,selectedCounters:this.selectedCounters,selectedObjects:this.selectedObjects,selectedChartType:this.chartType,selectedTimespan:this.chartTimespan,objectId:this.objectId};this.localStorageService.setUserData(r,a)}return!0},t.prototype.validate=function(){var t="";return this.selectedGroup?this.selectedCounters&&0!==this.selectedCounters.length?this.selectedObjects&&0!==this.selectedObjects.length?this.getUniqueCounterUnitsNumber(this.selectedCounters)>1&&this.chartType!==this.chartConstants.graphTypes.LINE_GRAPH?t="advPerfChartsConfig.warning.moreThanOneUnit":this.getUniqueCounterUnitsNumber(this.selectedCounters)<3?this.chartTimespan.customPeriodType===this.chartConstants.customTimeTypes.PERIOD&&this.chartTimespan.type===this.chartConstants.periods.CUSTOM&&(t=this.chartTimespanOptionsService.validateChartDateTimeInterval(this.chartTimespanFromDate,this.chartTimespanToDate)):t="advPerfChartsConfig.warning.moreThanTwoUnits":t="advPerfChartsConfig.warning.noObjectsSelected":t="advPerfChartsConfig.warning.noCountersSelected":t="advPerfChartsConfig.warning.noChartMetricsSelected",t&&(this.$scope.modalOptions.alerts=[{text:this.i18nService.getString("AdvperfchartsUi",t),type:this.vuiConstants.validationBanner.type.ERROR}],this.$scope.modalOptions.isAlertClosed=!1),!t},t.prototype.getUniqueCounterUnitsNumber=function(t){var e=_.pluck(t,"statsUnitName"),r=_.uniq(e);return r.length},t.prototype.selectRows=function(t,e){if(t){var r="";_.each(t.tbody.find("tr"),function(a){var i=t._data[a.rowIndex],s=e(i);s&&(""===r?r="tr:eq("+a.rowIndex+")":r+=", tr:eq("+a.rowIndex+")")}),t.select(r)}},t.onWindowResize=function(){kendo.resize($(document),!1)},t.$inject=["$scope","i18nService","chartDataService","performanceCounterGroupsService","vuiConstants","chartTimespanOptionsService","chartConstants","chartOptionsService","$element","$window","configurationService","clarityModalService","localStorageService","defaultUriSchemeUtil","$timeout","$q"],t}();angular.module("com.vmware.opsmgmt.client.advperfcharts").controller("ChartOptionsViewController",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a,i){this.$scope=t,this.chartTimespanOptionsService=e,this.i18nService=r,this.$element=a,this.vuiConstants=i,this.initChartTimespanChartDateTimes(),t.modalOptions.onSubmit=this.submitChartOptions.bind(this)}return t.prototype.initChartTimespanChartDateTimes=function(){this.preSelectedFromDateTime=this.$scope.modalOptions.dialogData.inputStartDate,this.preSelectedToDateTime=this.$scope.modalOptions.dialogData.inputEndDate,this.chartTimespanFromDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedFromDateTime),this.preSelectedFromTime=this.chartTimespanFromDate.time,this.chartTimespanToDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedToDateTime),this.preSelectedToTime=this.chartTimespanToDate.time},t.prototype.submitChartOptions=function(){if(this.$scope.modalOptions.isAlertClosed=!0,this.$scope.modalOptions.alerts=[],this.chartTimespanFromDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedFromDateTime),this.chartTimespanFromDate.time=this.preSelectedFromTime,this.chartTimespanToDate=this.chartTimespanOptionsService.createChartDateTime(this.preSelectedToDateTime),this.chartTimespanToDate.time=this.preSelectedToTime,!this.validate())return!1;var t=this.chartTimespanOptionsService.parseChartDateTime(this.chartTimespanFromDate),e=this.chartTimespanOptionsService.parseChartDateTime(this.chartTimespanToDate);return this.$scope.modalOptions.dialogData.outputStartDate=t,this.$scope.modalOptions.dialogData.outputEndDate=e,!0},t.prototype.validate=function(){var t=this.chartTimespanOptionsService.validateChartDateTimeInterval(this.chartTimespanFromDate,this.chartTimespanToDate);return!t||(this.$scope.modalOptions.alerts=[{text:this.i18nService.getString("AdvperfchartsUi",t),type:this.vuiConstants.validationBanner.type.ERROR}],this.$scope.modalOptions.isAlertClosed=!1,!1)},t.$inject=["$scope","chartTimespanOptionsService","i18nService","$element","vuiConstants"],t}();angular.module("com.vmware.opsmgmt.client.advperfcharts").controller("ChartTimeRangeViewController",e)}(h5_advperfcharts||(h5_advperfcharts={}));var h5_advperfcharts;!function(t){var e=function(){function t(t,e,r,a,i){this.$scope=t,this.localStorageService=e,this.vuiConstants=r,this.i18nService=a,this.chartConstants=i,t.modalOptions.onSubmit=this.submitChartOptions.bind(this),this.getChartOptionNames()}return t.prototype.getChartOptionNames=function(){var t=this;this.localStorageService.getUserData(this.chartConstants.SAVED_CHART_SETTINGS_KEY).then(function(e){t.chartOptionsSavedNamesOriginalData=e})},t.prototype.submitChartOptions=function(){var t=this;return this.$scope.modalOptions.isAlertClosed=!0,this.$scope.modalOptions.alerts=[],!!this.validate()&&this.localStorageService.getUserData(this.chartConstants.SAVED_CHART_SETTINGS_KEY).then(function(e){return t.chartOptionsSavedNames=e,_.isEmpty(t.chartOptionsSavedNames)&&(t.chartOptionsSavedNames=[]),t.chartOptionsSavedNames.push(t.chartOptionsName),t.localStorageService.setUserData(t.chartOptionsName,t.$scope.modalOptions.dialogData),t.localStorageService.setUserData(t.chartConstants.SAVED_CHART_SETTINGS_KEY,_.uniq(t.chartOptionsSavedNames)),t.$scope.modalOptions.finishCallback(t.chartOptionsName),!0})},t.prototype.validate=function(){var t=!0;if(this.chartOptionsName){var e=this.isChartOptionsNamePresentedInDefautlSettings(this.chartOptionsName);e&&(t=!1,this.$scope.modalOptions.alerts=[{text:this.i18nService.getString("AdvperfchartsUi","saveSettings.nameAlreadyInOptions.warning.message"),type:this.vuiConstants.validationBanner.type.ERROR}],this.$scope.modalOptions.isAlertClosed=!1)}else this.$scope.modalOptions.alerts=[{text:this.i18nService.getString("AdvperfchartsUi","saveSettings.blank.warning.message"),type:this.vuiConstants.validationBanner.type.ERROR}],this.$scope.modalOptions.isAlertClosed=!1,t=!1;return t},t.prototype.isChartOptionsNamePresentedInDefautlSettings=function(t){var e=this.$scope.modalOptions.dialogData.defaultAvailableSettingsNames,r=_.pluck(e,"name"),a=_.difference(r,this.chartOptionsSavedNamesOriginalData),i=_.some(a,function(e){return e===t});return i},t.$inject=["$scope","localStorageService","vuiConstants","i18nService","chartConstants"],t}();angular.module("com.vmware.opsmgmt.client.advperfcharts").controller("SaveChartOptionsViewController",e)}(h5_advperfcharts||(h5_advperfcharts={}));
//# sourceMappingURL=h5-advperfcharts-ui.min.js.map
