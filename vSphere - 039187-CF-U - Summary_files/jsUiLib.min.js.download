function VxValueInUnitsController(e,t,n,i,r,o){function a(e){var t=_.find(_.keys(p.errorMessages),function(t){return e.hasOwnProperty(t)});if(t){var n=p.errorMessages[t];angular.isFunction(n)&&(n=n()),p.vxErrorConfig.message=n}else p.vxErrorConfig.message=r.getString("Common","resourcePool.create.form.invalid.chars")}function s(e){var t=e?e:n.defaultUnit;return p.showUnits?t?_.find(p.unitOptions,function(e){return e.label===t}):p.unitOptions[0]:null}function c(){var e=!1;_.each(p.recommendedValues,function(t){t.value!==p.ngModelController.$viewValue||e?t.isHighlighted=!1:(t.isHighlighted=!0,e=!0)})}function l(e){p.customValidators&&_.each(p.customValidators,function(t){e.$validators[t.name]=function(e,n){var i=t.validate(n);return p.valueInUnitsForm.quantity.$setValidity(t.name,i),i},p.errorMessages[t.name]=t.message})}function u(e,t,n){var i=function(e){(n!==e.target&&!n[0].contains(e.target)||e.target&&"select-one"===e.target.type)&&t.$apply(function(){p.properties.recommendedValuesExpanded=!1})};e.on("click",i),t.$on("$destroy",function(){e.off("click",i)})}function d(e,t,n,i,r){return i.$observe(n,function(){t.$validate()}),function(o){var a=i[n];if(t.$isEmpty(a))return e.$setValidity(n,!0),!0;var s=r(o,Number(a));return e.$setValidity(n,s),s}}var f=r.getString("Common","unlimited"),p=this,m=function(e){void 0===e&&(e=p.ngModelController.$viewValue),-1===p.ngModelController.$viewValue?p.selection.quantity=f:p.selection.quantity=e};p.$onInit=function(){if(p.properties={},p.showUnits=angular.isUndefined(p.showUnits)?!0:p.showUnits,e.$watch("ctrl.recommendedValues",function(){c()}),e.$watch("ctrl.errorMessages",function(){var e=p.valueInUnitsForm.$error;e&&!_.isEmpty(e)&&a(e)}),e.$watchCollection("ctrl.valueInUnitsForm.$error",function(e){p.vxErrorConfig.isVisible=!1,p.vxErrorConfig.message="",e&&!_.isEmpty(e)&&(a(e),p.vxErrorConfig.isVisible=!0)}),p.ngModelController=p.ngModel,l(p.ngModelController),p.ngModelController.$render=m,n.defaultUnit)var t=e.$watch("ctrl.selection.quantity",function(){if(p.selection.quantity!==f){if(!p.selection.unit)throw new Error("No unit for '"+p.name+"'.");p.selection.quantity=p.ngModelController.$viewValue/p.selection.unit.multiplier}t()})},p.$postLink=function(){p.name=n.name,p.type=n.type||"text",p.selection={quantity:1,unit:s()},p.allowedCharacters=angular.isDefined(p.allowedCharacters)?p.allowedCharacters:"0-9.",p.vxErrorConfig={message:"",isVisible:!1},u(i,e,t),p.ngModelController.$validators.max=d(p.valueInUnitsForm.quantity,p.ngModelController,"max",n,function(e,t){return t>=e}),p.ngModelController.$validators.min=d(p.valueInUnitsForm.quantity,p.ngModelController,"min",n,function(e,t){return e>=t}),p.ngModelController.$validators.mod=d(p.valueInUnitsForm.quantity,p.ngModelController,"mod",n,function(e,t){n.min||(n.min=0);var i;if(n.hotPlugActive){var r=e-n.min>=t,o=e%t===0;i=o&&r||Number(n.min)===e}else i=e%t===0;return i}),p.updateModelFromFields=function(e,t){var n=t?t.multiplier:1,i=0;p.currentUnit=t,e===f?i=-1:e&&(i=e*n),p.ngModelController.$setViewValue(i),p.unitChangedCallback&&"function"==typeof p.unitChangedCallback&&p.unitChangedCallback(t?t:null),p.valueChangedCallback&&"function"==typeof p.valueChangedCallback&&p.valueChangedCallback({value:i})},p.clickDropdownButton=function(){p.properties.recommendedValuesExpanded=!p.properties.recommendedValuesExpanded,o.onRecommendedValuesExpandedChange(t)},p.setModelValue=function(e){e.unit&&(p.selection={quantity:1,unit:s(e.unit)}),p.ngModelController.$setViewValue(e.value),m(e.value/(p.selection.unit?p.selection.unit.multiplier:1)),c()}}}function bytesFilter(e){"use strict";return function(t,n,i,r){return e.formatStorage(t,n,i,r)}}function cpuClockFilter(e,t){"use strict";return function(n){var i=e.getString("VmUi","VmCpu.MHz"),r=e.getString("VmUi","VmCpu.GHz");if(0>n)return e.getString("VmUi","labelUnlimited");var o;return n%1e3===0&&n>0?(n/=1e3,o=r):o=i,t.format(n,{suffix:o})}}function CategoryNodeController(e,t,n,i,r){function o(n){var i=n?n.uid:"";n.viewState&&n.viewState.selectedNodeId&&(e.selectedUid=n.viewState.selectedNodeId),t.getView(i).then(function(t){angular.extend(e,{topNode:t,node:t})})}var a=e.objectnavigator;i.create(r.get(0),e),o(e._view.viewDetails.context),e.$on("dataRefreshInvocationEvent",function(){o(e._view.viewDetails.context)}),e.$on("vxRouteChangeSuccess",function(n,i,r,o){(r.extensionId!==o.extensionId||r.objectId!==o.objectId)&&t.getNaviData(r.extensionId,r.objectId,r.navigator,o.navigator).then(function(t){t&&t.viewState&&t.viewState.selectedNodeId&&(e.selectedUid=t.viewState.selectedNodeId)})}),e.isItemSelected=function(t){return t.uid===e.selectedUid||!e.selectedUid&&e.topNode.children[0].children[0]===t},e.selectItem=function(t){if(t.navigationTargetUid)if(t.viewOpenedUponFocus)a.switchView({url:t.viewOpenedUponFocus.url,context:t.viewOpenedUponFocus,historyDescription:{icon:t.icon,title:t.title},navigate:angular.extend({extensionId:t.navigationTargetUid})});else{e.selectedUid=t.uid;var n=e._view.viewDetails.context;n&&n.viewState&&n.viewState.selectedNodeId&&(n.viewState.selectedNodeId=t.uid),e._navigate(t.navigationTargetUid,null)}}}function PerformanceData(){this.startTimestamp=null,this.endTimestamp=null,this.timeInSeconds=0,this.watchersCount=0,this.uiTimeInSeconds=0,this.ajaxTimeInSeconds=0,this.ajaxCallsCount=0,this.perfEntries=[]}window.h5=window.h5||{},window.h5.uiLib=window.h5.uiLib||{},window.h5.actions=window.h5.actions||{},window.h5.dragAndDropValidationMethods=window.h5.dragAndDropValidationMethods||{},window.h5.listViewSelectedItemIdProperty="lvSelectedItemId",window.h5.uiLib.angularModule=angular.module("com.vmware.platform.ui",["ngAria","ngCookies","vui.angular","kendo.directives","angulartics","angulartics.piwik","clarity-bridge","ui.sortable"]).config(["vuiModalServiceProvider","vuiDialogServiceProvider","vuiWizardServiceProvider",function(e,t,n){e.setDefaultConfig({destroyOnHide:!0,destroyOuterScope:!0}),t.setDefaultConfig({destroyOnHide:!0,destroyOuterScope:!0}),t.setDefaultDialogOptions({maximizable:!1,resizable:!1,draggable:!0,resizeMinWidth:320,resizeMinHeight:320}),n.setDefaultConfig({destroyOnHide:!0,destroyOuterScope:!0}),n.setDefaultWizardOptions({maximizable:!0,resizable:!0,draggable:!0,resizeMinWidth:700,resizeMinHeight:420,closeOnEsc:!0})}]).config(["$compileProvider","$httpProvider",function(e,t){e.aHrefSanitizationWhitelist(/^\s*((https?|ftp|mailto|tel|file|vmrc):|(javascript:((void\(0\))?;?|(\/{2})))$)/),e.debugInfoEnabled(h5.debug),t.defaults.xsrfCookieName=h5.xsrfCookieName,t.defaults.xsrfHeaderName=h5.xsrfHeaderName,e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1)}]).config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]).config(["$locationProvider",function(e){e.hashPrefix("")}]).directive("input",function(){return{restrict:"E",require:"?ngModel",link:function(e,t,n,i){"number"===n.type&&i&&delete i.$validators.step}}}).run(["$rootScope","i18nService","$cookies","h5SdkActionService",function(e,t,n,i){h5.i18n.getString=t.getString,angular.extend(e,{i18n:t.getString}),jQuery.ajaxPrefilter(function(e,t,i){var r=n.get(h5.xsrfCookieName);r&&i.setRequestHeader(h5.xsrfHeaderName,r)}),i.bindActionHandlers()}]),window.h5.h5main=window.h5.h5main||{},window.h5.h5main.angularModule=angular.module("h5main",["ngAnimate","com.vmware.platform.ui","angulartics","angulartics.piwik"]);var pendingJqueryRequests=[],pendingXhrs={};h5.debug||(h5.configuration&&h5.configuration.configParams&&"false"===h5.configuration.configParams["browser.context.menu"]?$(window).on("contextmenu",function(){return!1}):$(document).ready(function(){$("#applicationMenuContainer").on("contextmenu",function(){return!1})}),function(){$(document).ready(function(){!function(e){XMLHttpRequest.prototype.open=function(t,n,i,r,o){this.addEventListener("loadstart",function(){pendingXhrs[n]={method:t}},!1),this.addEventListener("loadend",function(){delete pendingXhrs[n]},!1),e.apply(this,arguments)}}(XMLHttpRequest.prototype.open),$(document).ajaxSend(function(e,t,n){t.vmwopts=n.url+" - "+n.data,pendingJqueryRequests.push(t.vmwopts),t.always(function(){var e=pendingJqueryRequests.indexOf(t.vmwopts);-1===e&&(pendingJqueryRequests=[]),pendingJqueryRequests.splice(e,1)})})})}()),angular.module("clarity-bridge",[]);var platform;!function(e){var t=function(){function e(e,t){this.$q=e,this.$parse=t,this.scopePseudoNotationSubstrate()}return e.prototype.scopePseudoNotationSubstrate=function(){!function(e,t){try{e.querySelector(":scope BODY")}catch(n){for(var i=function(n){var i=t[n];t[n]=function(t){if(/(^|,)\s*:scope/.test(t)){var r=this.id;this.id="scopedPseudo_"+Date.now(),t=t.replace(/((^|,)\s*):scope/g,"$1#"+this.id);var o=e[n](t);return this.id=r,o}return i.call(this,t)}},r=0,o=["querySelector","querySelectorAll"];r<o.length;r++){var a=o[r];i(a)}}}(window.document,Element.prototype)},e.prototype.observeHostToController=function(e,t,n,i){for(var r=[],o=Object.keys(e),a=function(n){var i=e[n];r.push([i,function(e){t[n]=e}])},s=0,c=o;s<c.length;s++){var l=c[s];a(l)}this.observeHostInputsList(r,n,i)},e.prototype.observeHostInputsList=function(e,t,n){for(var i=this,r=function(e,r){var o=e;0!==o.indexOf("[")&&"]"!==o.substr(o.length-1)&&(o="["+n.$normalize(o)+"]"),n.$observe(o,function(e){r(i.$parse(e)(t))})},o=0,a=e;o<a.length;o++){var s=a[o],c=s[0],l=s[1];r(c,l)}},e.prototype.preparingHostComponent=function(e){var t=this,n=this.$q.defer();return this.fetchingComponentInjectorReference(e).then(function(e){var i=(r={},r[t.injectorName]=e,r);n.resolve(e.then?t.fetchingHostComponent(i):t.getHostComponent(e));var r}),n.promise},e.prototype.fetchingComponentInjectorReference=function(e){function t(){return e.data(i)}var n=this.$q.defer(),i=this.getInjectorControllerName(),r=t();if(r)n.resolve(r);else var o=setInterval(function(){var e=t();e&&(clearInterval(o),n.resolve(t()))},0);return n.promise},e.prototype.fetchingHostComponent=function(e){var t=this,n=this.$q.defer(),i=e[this.injectorName];return i&&i.then?i.then(function(e){return n.resolve(t.getHostComponent(e))}):n.reject(),n.promise},e.prototype.getElementControllerByIdSelector=function(e,t,n){if(!(t.indexOf("-")>0)){var i="$"+t+"Controller",r=angular.element(this.determineContainerDOM(n).querySelector("[\\#"+e+"]")),o=r.data(),a=Object.keys(o).filter(function(e){return[i,t].indexOf(e)>=0}).map(function(e){return o[e]});return a.length?a[0]:void 0}},e.prototype.getComponentById=function(e,t){var n=angular.element(this.determineContainerDOM(t).querySelector("[\\#"+e+"]"));if(n){var i=n.data(this.getInjectorControllerName());if(i&&"function"!=typeof i.then)return this.getHostComponent(i)}},e.prototype.determineContainerDOM=function(e){var t=e[0],n=t&&(t instanceof HTMLElement||e[0]instanceof HTMLUnknownElement)?e[0]:e;return n},e.prototype.getHostComponent=function(e){return e.view.nodes[0].componentView.component},e.prototype.getChildrenNodesList=function(e,t){var n=":scope ";return Array.prototype.slice.call(t[0].querySelectorAll(n+e))},e.prototype.getChildrenComponentsList=function(e,t){var n=this;return this.getChildrenNodesList(e,t).map(function(e){return n.getHostComponent(angular.element(e).data(n.getInjectorControllerName()))})},e.prototype.augmentRequire=function(e,t){return void 0===t&&(t=!0),e[this.injectorName]=t?"^^":"",e},Object.defineProperty(e.prototype,"injectorName",{get:function(){return"$$angularInjector"},enumerable:!0,configurable:!0}),e.prototype.getInjectorControllerName=function(){return"$"+this.injectorName+"Controller"},e.Metastructure={name:"ClarityExtenderService",factory:["$q","$parse",function(t,n){return new e(t,n)}]},e}();e.ClarityExtenderService=t,angular.module("clarity-bridge").service(t.Metastructure.name,t.Metastructure.factory)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){var t=this;this.clarityExtender=e,this.restrict="A",this.link=function(e,n,i,r){var o;n.addClass("dropdown-toggle"),t.clarityExtender.fetchingHostComponent(r).then(function(e){return o=e}),n.on("click",function(e){o.toggleDropdown()})},this.require=e.augmentRequire({},!0)}return e.Metastructure={name:"clrDropdownToggle",factory:["ClarityExtenderService",function(t){return new e(t)}]},e}();e.DropdownToggleDirective=t;var n=function(){function t(t){this.clarityExtender=t,this.restrict="A",this.bindToController={"(click)":"&"},this.controller=function(){function t(e,t){this.$element=e,this.clarityExtender=t,e.addClass("dropdown-item")}return t.prototype.$onInit=function(){var e=this;this.clarityExtender.fetchingHostComponent(this).then(function(t){return e.clarityDropdown=t}),this.$element.on("click",function(t){var n=e["(click)"];n&&(n({$evt:t}),e.onDropdownItemClick())})},t.prototype.onDropdownItemClick=function(){this.clarityDropdown.isMenuClosable&&!this.$element.hasClass("disabled")&&this.clarityDropdown.toggleDropdown()},t.$inject=["$element",e.ClarityExtenderService.Metastructure.name],t}(),this.require=t.augmentRequire({},!0)}return t.Metastructure={name:"clrDropdownItem",factory:["ClarityExtenderService",function(e){return new t(e)}]},t}();e.DropdownItemDirective=n,angular.module("clarity-bridge").directive(t.Metastructure.name,t.Metastructure.factory),angular.module("clarity-bridge").directive(n.Metastructure.name,n.Metastructure.factory)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){this.clarityExtender=e,this.restrict="E",this.bindToController={},this.hostToController={},this.terminal=!1,this.controllerAs="tabsCtrl",this.controller=function(){function e(e,t,n,i,r){this.$scope=e,this.$element=t,this.$attrs=n,this.$timeout=i,this.clarityExtender=r,this.active=!1}return e.prototype.$onInit=function(){},e.prototype.$postLink=function(){var e=this;this.clarityExtender.preparingHostComponent(this.$element).then(function(t){e.clarityTabs=t,e.timer=e.$timeout(function(){e.afterViewInit()},0)})},e.prototype.$onDestroy=function(){this.timer&&this.$timeout.cancel(this.timer)},e.prototype.afterViewInit=function(){this.applyComponentPatch(),this.clarityTabs.tabLinkChildren.reset(this.queryTabLinkContentChildren()),this.clarityTabs.tabContentChildren.reset(this.queryTabContentContentChildren()),this.clarityTabs.setUpLinksAndContents(),Array.isArray(this.tabContentComponentsList)&&(this.TabContentClass=this.tabContentComponentsList[0].constructor),Array.isArray(this.tabLinkComponentsList)&&(this.TabLinkClass=this.tabLinkComponentsList[0].constructor)},e.prototype.queryTabLinkContentChildren=function(){return this.tabLinkComponentsList=this.clarityExtender.getChildrenComponentsList("> UL > clr-tab-link",this.$element)},e.prototype.queryTabContentContentChildren=function(){return this.tabContentComponentsList=this.clarityExtender.getChildrenComponentsList("> clr-tab-content",this.$element)},e.prototype.applyComponentPatch=function(){var e=this;this.clarityExtender.getChildrenNodesList("> UL > clr-tab-content",this.$element).forEach(function(t){return e.$element[0].appendChild(t)})},e.$inject=["$scope","$element","$attrs","$timeout","ClarityExtenderService"],e}(),this.link=function(e,t,n,i){},this.controller.HostToController=this.hostToController}return e.Metastructure={name:"clrTabs",factory:["ClarityExtenderService",function(t){return new e(t)}]},e}();e.TabsDirective=t,angular.module("clarity-bridge").directive(t.Metastructure.name,t.Metastructure.factory)}(platform||(platform={}));var common_ui;!function(e){var t=function(){function e(e,t){this.vuiConstants=e,this.$log=t,this.isDisabled=function(e){return e?void 0===e.enabled?!1:e.enabled?!1:!0:!1}}return e.prototype.isSeparator=function(e){return e===this.vuiConstants.actions.SEPARATOR?!0:!1},e.prototype.isVisible=function(e){return e?void 0===e.visible?!0:e.visible:!0},e.prototype.hasLabel=function(e){return e.label&&e.label.trim().length>0},e.prototype.clickAction=function(e,t){t.enabled?angular.isDefined(t.onClick)&&angular.isFunction(t.onClick)?t.onClick.call(void 0,e,t):this.$log.warn("No onClick action defined for action id: "+t.id+" label: "+t.label):(e.stopPropagation(),e.preventDefault())},e.prototype.hasClarityIcon=function(e){if(!e||!e.iconClass)return!1;if(e.shape)return!0;var t=e.iconClass.indexOf("clr:");return 0===t?(e.shape=e.iconClass.slice(4),!0):!1},e.$inject=["vuiConstants","$log"],e}(),n=function(){function e(){this.templateUrl="resources/ui/components/action-bar/action-bar.component.html",this.controller=t,this.bindings={options:"<",clrTemplate:"<?"}}return e}();e.ActionBarComponent=n,angular.module("com.vmware.platform.ui").component("actionBar",new n)}(common_ui||(common_ui={})),function(){"use strict";function e(){return{templateUrl:"resources/ui/components/activityIndicator/vxActivityIndicator.html",transclude:!0,scope:{isInteractive:"=?",isVisible:"=",title:"@",size:"@?",loadingAriaLabel:"@?"},controller:["$scope",function(e){this.$onInit=function(){e.isInteractive=angular.isDefined(e.isInteractive)?e.isInteractive:!0}}],restrict:"E",priority:-500}}angular.module("com.vmware.platform.ui").directive("vxActivityIndicator",e)}(),function(){function e(e,n,i){return{restrict:"A",template:e.get(t),scope:{vxAlert:"="},link:function(e,t,r){function o(){_.isObject(e.vxAlert.rejectOptions)&&_.isFunction(e.vxAlert.rejectOptions.onClick)&&e.vxAlert.rejectOptions.onClick.call(void 0),e.vxAlert.visible=!1}var a=27;if(!_.isObject(e.vxAlert))throw new TypeError("Alert configuration is not an object");var s=function(t){t.stopImmediatePropagation(),(t.which===a||t.keyCode===a)&&e.$apply(function(){o()})};e.vxAlert.htmlSafe=e.vxAlert.text,n.on("keydown",s),e.$on("$destroy",function(){n.off("keydown",s)}),e.$watch("vxAlert.text",function(t,n){e.vxAlert.htmlSafe&&angular.equals(t,n)||(e.vxAlert.htmlSafe=e.vxAlert.text)}),e.isConfirmVisible=function(){return _.isUndefined(e.vxAlert.confirmOptions.visible)&&(e.vxAlert.confirmOptions.visible=!0),e.vxAlert.confirmOptions.visible},e.isRejectVisible=function(){return _.isUndefined(e.vxAlert.rejectOptions.visible)&&(e.vxAlert.rejectOptions.visible=!0),e.vxAlert.rejectOptions.visible},e.isConfirmDisabled=function(){return _.isUndefined(e.vxAlert.confirmOptions.disabled)&&(e.vxAlert.confirmOptions.disabled=!1),e.vxAlert.confirmOptions.disabled},e.isRejectDisabled=function(){return _.isUndefined(e.vxAlert.rejectOptions.disabled)&&(e.vxAlert.rejectOptions.disabled=!1),e.vxAlert.rejectOptions.disabled},e.onConfirmClick=function(t){angular.isDefined(e.vxAlert.confirmOptions.onClick)&&angular.isFunction(e.vxAlert.confirmOptions.onClick)&&e.vxAlert.confirmOptions.onClick.call(void 0,t),e.vxAlert.visible=!1},e.onRejectClick=o,e.getConfirmText=function(){return e.vxAlert.confirmOptions.label},e.getRejectText=function(){return e.vxAlert.rejectOptions.label},e.vxAlert.rejectOptions.focused&&i(function(){t.find(".reject-button").focus()},0)}}}var t="resources/ui/components/alert/vxAlertTemplate.html";angular.module("com.vmware.platform.ui").directive("vxAlert",e),e.$inject=["$templateCache","$document","$timeout"]}(),function(){angular.module("com.vmware.platform.ui").directive("autofocus",["$timeout",function(e){return{restrict:"A",link:function(t,n){e(function(){n[0].focus()},500)}}}])}(),function(){angular.module("com.vmware.platform.ui").directive("autoscrollintoview",["$timeout",function(e){return{restrict:"A",link:function(t,n,i){e(function(){var e=i.autoscrollintoview?n.find(i.autoscrollintoview)[0]:void 0,t=e||n[0];t&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView(!1))},1)}}}])}(),angular.module("com.vmware.platform.ui").directive("vxBindHtmlAndCompile",["$compile",function(e){return{restrict:"A",link:function(t,n,i){t.$watch(function(){return t.$eval(i.vxBindHtmlAndCompile)},function(i){n.html(i&&i.toString()),e(n.contents())(t)})}}}]),angular.module("com.vmware.platform.ui").directive("vxClick",["$timeout","$parse",function(e,t){return{restrict:"A",link:function(n,i,r,o){function a(e){t(r.vxClick)(n,e),f=e.$type}function s(t){1===t.which&&(f=null,n.$apply(function(){a({$type:"mousedown",$event:t})}),d=e(function(){a({$type:"slowClick"})},500))}function c(t){1===t.which&&(e.cancel(d),a("slowClick"===f?{$type:"mouseup"}:{$type:"click",$event:t}))}function l(e){n.$apply(function(){a({$type:"rightclick",$event:e})})}function u(e){32===e.keyCode&&a({$type:"click",$event:e})}var d,f;$(i).on("mousedown",s),$(i).on("mouseup",c),$(i).on("contextmenu",l),$(i).on("keyup",u),$(i).on("click",function(e){e.which=1,s(e)}),n.$on("$destroy",function(){$(i).off("mousedown",s),$(i).off("mouseup",c),$(i).off("contextmenu",l),$(i).off("keyup",u)})},controller:["$scope","$element","$attrs",function(e,t,n){}]}}]),function(){"use strict";function e(e,t){function n(n,r,o){var a=null;""!==o.vxDatagridRowRightClick&&(a=e(o.vxDatagridRowRightClick));var s=r.children("div[kendo-grid]");s.on("contextmenu","tr[role='row'][data-uid]",function(e){function r(e){c.clearSelection(),c.select(e)}if(null===a)return void e.preventDefault();e.preventDefault();var c=s.data("kendoGrid");if(c.options.selectionMode===t.grid.selectionMode.SINGLE)e.data=[c.dataItem(e.currentTarget)],o.hasOwnProperty("vxDatagridRowRightClickPreselection")&&r(e.currentTarget);else if(c.options.selectionMode===t.grid.selectionMode.MULTI){for(var l=c.select(),u=[],d=0;d<l.length;d++){var f=c.dataItem(l[d]);u.push(f)}i(u,c.dataItem(e.currentTarget))?e.data=u:(r(e.currentTarget),e.data=[c.dataItem(e.currentTarget)])}var p=jQuery.extend(!0,{},e),m=function(){a(n,{$event:p})};n.$apply(m)})}function i(e,t){if(!e||!t)return!1;for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1}var r={link:n};return r}angular.module("com.vmware.platform.ui").directive("vxDatagridRowRightClick",e),e.$inject=["$parse","vuiConstants"]}(),angular.module("com.vmware.platform.ui").directive("vxDocumentClick",["$timeout","$parse",function(e,t){return{restrict:"A",link:function(e,n,i,r){function o(n){e.$apply(t(i.vxDocumentClick)(e,n))}function a(e){$(e.target).closest(n).length||o({$event:e})}$(document).on("mousedown",a),e.$on("$destroy",function(){$(document).off("mousedown",a)})}}}]),function(){"use strict";function e(e){function t(t,n,i){var r=null;""!==i.vxRightClick&&(r=e(i.vxRightClick)),n.bind("contextmenu",function(e){return null===r?void e.preventDefault():void t.$apply(function(){e.preventDefault(),r(t,{$event:e})})})}var n={link:t};return n}angular.module("com.vmware.platform.ui").directive("vxRightClick",e),e.$inject=["$parse"]}(),function(){"use strict";function e(e){function t(t,n,i){var r=null;""!==i.vxTreeRightClick&&(r=e(i.vxTreeRightClick)),n.on("contextmenu",".k-in",function(e){if(e.preventDefault(),null!==r){var i=$(e.target),o=n.data("kendoTreeView");if(o){e.data=o.dataItem(i);var a=function(){r(t,{$event:e})};t.$apply(a)}}})}var n={restrict:"A",link:t};return n}angular.module("com.vmware.platform.ui").directive("vxTreeRightClick",e),e.$inject=["$parse"]}(),angular.module("com.vmware.platform.ui").directive("collapse",["transitionService",function(e){return{link:function(t,n,i){function r(t){function i(){l===r&&(l=void 0)}var r=e(n,t);return l&&l.cancel(),l=r,r.then(i,i),r}function o(){u?(u=!1,a()):(n.removeClass("collapse").addClass("collapsing"),r({height:n[0].scrollHeight+"px"}).then(a))}function a(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function s(){if(u)u=!1,c(),n.css({height:0});else{n.css({height:n[0].scrollHeight+"px"});n[0].offsetWidth;n.removeClass("collapse in").addClass("collapsing"),r({height:0}).then(c)}}function c(){n.removeClass("collapsing"),n.addClass("collapse")}var l,u=!0;t.$watch(i.collapse,function(e){e?s():o()})}}}]),angular.module("com.vmware.platform.ui").directive("vxCollapseIcon",["$timeout","$parse",function(e,t){return{restrict:"A",scope:{vxCollapseIcon:"=?"},template:'<i ng-class="getIcon()" style="margin: 0px;"></i>',link:function(e,t,n,i){},controller:["$scope","$element","$attrs",function(e,t,n){e.getIcon=function(){return e.vxCollapseIcon?"vui-icon-caret-gray-right":"vui-icon-caret-gray-down"},t.on("click",function(){e.vxCollapseIcon=!e.vxCollapseIcon})}]}}]),angular.module("com.vmware.platform.ui").run(["columnRenderersRegistry","resourceUtil","taskConstants","i18nService","taskFormatter","entityStatusService","$interpolate","vimEntityEscapingService","iconService",function(e,t,n,i,r,o,a,s,c){"use strict";function l(e,t,n,i){return a('<vx-static-progress-indicator progress="{{ progress }}" enable-cancel-button="{{ cancelable }}" is-cancel-pending="{{ isCancelPending }}" cancel-callback="{{ cancelCallback }}"/>')({progress:e,cancelable:t,isCancelPending:n,cancelCallback:i})}function u(e){var t=_.escape(r.getClientErrorOrSimpleStatus(e));t&&S(e)&&(t=t.substr(t.indexOf("\n")+1));var n=r.getTaskIconByState(e.state),o=r.hasClientError(e)?_.escape(i.getString("Common","error")):"";return'<div class="object"><span ng-non-bindable><span ng-non-bindable title="'+_.escape(e.statusSummary)+'"><span class="vui-icon '+n+'" '+(o&&'aria-label="'+o+'" ')+"></span>"+t+"</span></span></div>"}function d(e){var t=_.escape(r.getClientErrorOrSimpleStatus(e));if(t){var n=t.split(/[\r\n]/g);n.length&&n.length>1&&(t=n[0],S(e)&&(t=n[1]))}var o=r.getTaskIconByState(e.state),a=r.hasClientError(e)?_.escape(i.getString("Common","error")):"";return'<div class="object"><span ng-non-bindable><span title="'+_.escape(e.statusSummary)+'"><span class="vui-icon '+o+'" '+(a&&'aria-label="'+a+'" ')+"></span>"+t+"</span></span></div>"}function f(e,t,n){return e||0===e?("undefined"==typeof t&&(t=e),n&&(t=s.unescapeSpecialCharacters(t),e=s.unescapeSpecialCharacters(e)),['<span ng-non-bindable class="vertical-aligned-text"><span title="',_.escape(t),'">',_.escape(e),"</span></span>"].join("")):""}function p(e,n,i,r,o,a,s,l){var u="",d="";"undefined"==typeof a&&(a=n);var p;if(!n)return"";if(i){var m=t.getLocalizedEntityType(e),g="";m&&(g=' aria-label="'+_.escape(m)+'"');var v=c.parseIcon(i);v[0]?"clr"===v[0]&&(d='<span><clr-icon shape="'+v[1]+'"'+g+"></clr-icon></span>"):d='<span class="'+i+'"'+g+" ></span>"}if(r&&(u="disabled-link"),s===!1&&(u+=" non-navigatable-link"),e){var h=o&&o.extensionName||"vsphere.core.inventory.serverObjectViewsExtension",S=['"'+h+'"','"'+e+'"'];if(o&&o.isKendoGrid){var y=$("<a/>").addClass(u).attr("onClick","angular.element('recent-tasks-view').injector().get('navigation').navigateToViewAndObject("+S.join(", ")+")").html(["<span ng-non-bindable>",$("<span/>").attr("title",a).text(n)[0].outerHTML,"</span>"].join(""));l!==!0||y.attr("href")||y.attr("href",""),p=y[0].outerHTML}else{n=_.escape(n);var b=s===!1?"":"ng-click='$root._navigateToViewAndObject("+S.join(", ").replace(/"/g,"&quot;")+")'",I=u?'class="'+u+'"':"",C=l===!0?" href ":"";p=["<a "+I+" "+b+C+">",'<span ng-non-bindable="">','<span title="'+_.escape(a)+'">'+n+"</span>","</span>","</a>"].join("")}}else p=f(n,a);return['<div class="object object-link">',d,p,"</div>"].join("")}function m(e,n,i,r,o,a){var s="";if(e&&n){var c=t.getTaggingLabelString(i),l=o?n+c:n+c+":";s=$("<a/>").attr("ng-click",'$root._navigateToObject("'+e+'")').html(["<span ng-non-bindable>",$("<span/>").attr("title",l).text(l)[0].outerHTML,"</span>"].join(""))[0].outerHTML}var u=$("<span/>").attr("title",r).text(r)[0].outerHTML,d=o?['<div class ="'+a+'">',u," ",s,"</div>"]:['<div class ="'+a+'">',s," ",u,"</div>"];return d.join("")}function g(e){var t={WARNING:{iconClass:"vsphere-icon-status-warning",label:i.getString("Common","issueStatus.warning")},ERROR:{iconClass:"vsphere-icon-status-error",label:i.getString("Common","issueStatus.error")},INFO:{iconClass:"vui-icon-info",label:i.getString("Common","issueStatus.info")},QUESTION:{iconClass:"vsphere-icon-status-unkown",label:i.getString("Common","issueStatus.questions")}};return e&&t[e]?'<span class="'+t[e].iconClass+'"></span>'+t[e].label:""}function v(e,t,n,i){var r="undefined",o="";n?(r=n.icon?n.icon:n.iconProperty?t[n.iconProperty]:"unspecified",n.dataProperty?(o=t[n.dataProperty],i&&(o=s.unescapeSpecialCharacters(o))):(o=t[e[0]],i&&(o=s.unescapeSpecialCharacters(o)))):(r=t[e[0]],o=t[e[1]],i&&(o=s.unescapeSpecialCharacters(o)));var a=_.escape(o),c="";return Array.isArray(r)?_.each(r,function(e){c+='<i class="'+_.escape(e)+'"></i>'}):c='<i class="'+_.escape(r)+'"></i>','<span ng-non-bindable class="object" title="'+a+'">'+c+_.escape(o)+"</span>"}function h(e){return S(e)&&e.state===n.status.RUNNING?y(e):null}function S(e){return"com.vmware.vsphere.client.PluginDeploymentTask"===e.taskTypeId||"com.vmware.vsphere.client.PluginDownloadTask"===e.taskTypeId||"com.vmware.vsphere.client.PluginUndeploymentTask"===e.taskTypeId}function y(e){var t=_.escape(r.getClientErrorOrSimpleStatus(e));return'<span class="spinner spinner-inline"></span><span>&ensp;'+t+"</span>"}e.registerColumnRenderers({"object-name":function(e,n,i){var r=n[e[0]],o=n[e[1]]||"",a=n[e[2]];if(!a)return"";var s=n[e[3]],c=n[e[4]],l=t.getTaggingLabelString(s),u=i?i.navigatable:void 0,d=null;return i&&i.extensionName&&(d={extensionName:i.extensionName}),p(r,a+l,o,!1,d,c,u)},status:function(e,t){var n=t[e[0]],i=o.statusProperties(n),r=_.escape(i.label);return'<div ng-non-bindable class="object"><span title="'+r+'"><i class="'+i.iconClass+'"></i>'+r+"</span></div>"},"task-status":u,"task-status-first-line":d,"object-link":function(e,t,n){var i,r=t[e[0]],o=t[e[1]],a=e[2],s=t[e[3]],c=e[4],l=t[e[5]];i=o?o:s;var u=c===!1,d=n?n.navigatable:void 0,f=n&&n.focusable===!0;return p(r,i,a,u,n,l,d,f)},"custom-attr":function(e,t,n){var i=_.find(t.customValue,function(e){return n.key===e.key&&n.serverGuid===t["@instanceUuid"]}),r=i?i.value:"";return f(r,r)},text:function(e,t,n){return f(t[e[0]],void 0,n)},"text-with-custom-tooltip":function(e,t,n){return f(t[e[0]],t[e[1]],n)},"wrapped-text":function(e,t){var n=void 0!==t[e[0]]?t[e[0]]:"";return $("<div/>").attr("ng-non-bindable","").addClass("line-wrap").text(n)[0].outerHTML},"disabled-text":function(e,t){var n=void 0!==t[e[0]]?t[e[0]]:"",i="vertical-aligned-text";return void 0!==t[e[1]]&&t[e[1]]===!0&&(i+=" disabled-text"),$("<span/>").attr("ng-non-bindable","").addClass(i).text(n)[0].outerHTML},"disabled-text-icon-with-tooltip":function(e,t){var n=t[e[0]],i=t[e[1]];("undefined"==typeof i||null===i)&&(i="");var r="vertical-aligned-text";void 0!==t[e[2]]&&t[e[2]]===!0&&(r+=" disabled-text");var o=t[e[3]];return("undefined"==typeof o||null===o)&&(o=i),"<span ng-non-bindable class='"+r+"'><span title='"+_.escape(o)+"' class='object'><i class='"+_.escape(n)+"'></i>"+_.escape(i)+"</span></span>"},number:function(e,t){var n=void 0!==t[e[0]]?t[e[0]]:"";return $("<span/>").attr("ng-non-bindable","").addClass("numeric-text").text(n)[0].outerHTML},array:function(e,t){var n=t[e[0]],i=n?n.join(", "):"";return'<div ng-non-bindable class="line-wrap">'+i+"</div>"},meter:function(e,t){var n=t[e[0]];n||(n=0);var i="<span ng-non-bindable>"+n+"%</span>",r='<vx-resource-meter percentage="'+n+'" orientation="horizontal"/>';return'<div class="column-meter">'+i+r+"</div>"},"progress-bar-cancel-link":l,"task-state":function(e){var t=h(e);return t?t:e.state===n.status.RUNNING?l(e.progress,e.cancelable,e.pendingCancel,"dataItem.onCancelTaskClicked()"):u(e)},"recent-task-state":function(e){var t=h(e);if(t)return t;if(e.state===n.status.RUNNING){var r=e.cancelable?"vui-icon-datagrid-cancel":"vui-icon-datagrid-cancel-disabled",o="angular.element('recent-tasks-view').injector().get('recentTasksStoreService').cancelTask('"+e.key+"', '"+e.serverGuid+"')";return'<div class="horizontal-flex-container"><div class="progress-static flex-column flex-grow-auto"><div class="progress-meter" data-value="'+e.progress+'"></div></div><div role="percentage">'+e.progress+'%</div><div role="cancelButton" onclick="'+o+'" class="'+r+'" title="'+i.getString("Common","cancel")+'"></div></div>'}return u(e)},"icon-text":function(e,t,n){return v(e,t,null,n)},"icon-text-ex":function(e,t,n,i){return v(e,t,n,i)},link:p,"link-and-text":m,"issue-status":g})}]),angular.module("com.vmware.platform.ui").service("columnRenderersRegistry",function(){
"use strict";var e={};return{registerColumnRenderers:function(t){angular.extend(e,t)},getColumnRenderer:function(t){return e[t]}}}),function(){"use strict";function e(e,t){return{getTaggingLabelString:function(t){if(!angular.isString(t))return"";var n=t.split(";"),i=[];return n.forEach(function(t){if(t=t.trim()){var n=t.split(":"),r="";2===n.length?r=e.getString(n[0],n[1]):1===n.length&&(r=e.getString("Common",n[0])),r||(r=t),i.push(r)}}),0===i.length?"":" ("+i.join(", ")+")"},getItalicClassName:function(e,t){var n="disconnected",i="notResponding",r="inaccessible",o=e&&(-1!==e.indexOf(n)||-1!==e.indexOf(i)),a=t&&-1!==t.indexOf(r);return o||a?"italic":""},getLocalizedEntityType:function(n){if(n&&"string"==typeof n){var i=t.getEntityType(n);switch(i){case"HostSystem":return e.getString("Common","typeResource.host");case"Datacenter":return e.getString("Common","typeResource.datacenter");case"Datastore":return e.getString("Common","typeResource.datastore");case"Folder":return t.isRootFolder(n)?e.getString("Common","typeResource.vCenter"):e.getString("Common","typeResource.folder");case"VirtualMachine":return e.getString("Common","typeResource.vm");case"ClusterComputeResource":return e.getString("Common","typeResource.cluster");case"VirtualApp":return e.getString("Common","typeResource.vapp");case"ResourcePool":return e.getString("Common","typeResource.rp");case"Network":return e.getString("Common","typeResource.network");case"VmwareDistributedVirtualSwitch":return e.getString("Common","typeResource.dvs");case"DistributedVirtualPortgroup":return e.getString("Common","typeResource.dvpg");case"StoragePod":return e.getString("Common","typeResource.storagePod")}}return""}}}angular.module("com.vmware.platform.ui").factory("resourceUtil",e),e.$inject=["i18nService","defaultUriSchemeUtil"]}(),angular.module("com.vmware.platform.ui").directive("vxDatagridPreselectItem",["$timeout","vuiConstants","$log",function(e,t,n){return{link:function(i,r,o){i.$on("kendoWidgetCreated",function(a,s){function c(){var e=m.dataSource.page();v=e===h,h=e}function l(){o.vxDatagridPreselectItem?d():u()}function u(){m.select(r.find(".k-selectable tr:first"))}function d(){if(o.preselectComparator){var a=null;if(o.preselectComparator&&-1!==o.preselectComparator.indexOf(".")){for(var s=o.preselectComparator.split("."),c=i;s.length;){var l=s.shift();c=c[l]}a=c}else a=i[o.preselectComparator];if(!a)return void n.warn('Pre-select comparator "'+o.preselectComparator+'" is not undefined!');m.items().each(function(){var n=m.dataItem(this);if(a(n)){if(m.options.selectionMode===t.grid.selectionMode.MULTI){var i=this;e(function(){m.select(i)},0)}else m.select(this);var r=$(this).closest(".k-grid-content");r[0].scrollTop=r[0].scrollTop+$(this).position().top}})}else{var u=".k-selectable tr:contains('"+o.vxDatagridPreselectItem+"')";m.select(r.find(u))}g&&v&&f()}function f(){e(function(){if(r){var e=r.find("div[kendo-grid]").data("kendoGrid");if(e&&e.select().length){var t=e.wrapper.find(".k-grid-content").data("kendoVirtualScrollable");if(t){var n=e.select().position().top,i=t.verticalScrollbar.scrollTop(),o=t.verticalScrollbar.innerHeight(),a=i,s=i+o,c=0;a>=n&&(c=n),n>a&&s>n&&(c=i),n>=s&&(c=n),t.verticalScrollbar.animate({scrollTop:c},400)}}}},0)}var p=!1;if("false"!==o.vxDatagridPreselectItem){var m=r.find("[kendo-grid]").data("kendoGrid");if(s===m){var g=o.ensurePreselectionVisibility&&"false"!==o.ensurePreselectionVisibility;if(g)var v=!0,h=m.dataSource.page();o.hasOwnProperty("reselectOnChange")&&(o.$observe("vxDatagridPreselectItem",function(){d()}),i.$watch(o.vuiDatagrid+".data",function(t){t&&e(function(){p||d()},0)}),i.$on("$destroy",function(){p=!0})),m.items().length>0?l():m.bind("dataBound",function(){g&&c(),l()})}}})}}}]),angular.module("com.vmware.platform.ui").directive("vxMultiDatagridContainer",[function(){function e(e,t){var n=e.find("[vx-multi-datagrid-member]");n.each(function(e,n){n!==t[0]&&$(n).find("[kendo-grid]").data("kendoGrid").clearSelection()})}return{link:function(t,n){t.$on("vx-multi-datagrid.selection-changed",function(t,i){e(n,i)})}}}]),angular.module("com.vmware.platform.ui").directive("vxMultiDatagridMember",[function(){function e(e,t,n){e.$watch(t.vuiDatagrid+".selectedItems",function(e){e.length>0&&n()})}return{link:function(t,n,i){e(t,i,function(){t.$emit("vx-multi-datagrid.selection-changed",n)})}}}]),angular.module("com.vmware.platform.ui").directive("vxStretchGrid",[function(){"use strict";return{restrict:"A",link:function(e,t){function n(){kendo.resize(t,!0)}e.$on("resize",n),e.$on("kendoWidgetCreated",function(e,t){t&&t.constructor===kendo.ui.Grid&&(t.resize=_.wrap(t.resize,function(e){var n=Array.prototype.slice.call(arguments,1);return 0===n.length?n.push(!0):n[0]=!0,e.apply(t,n)}),t._setContentHeight=function(){var e=this,t=e.options,n=e.wrapper.innerHeight(),i=e.wrapper.children(".k-grid-header"),r=kendo.support.scrollbar();if(t.scrollable&&e.wrapper.is(":visible")){n-=i.outerHeight(),e.pager&&(n-=e.pager.element.outerHeight()),t.groupable&&(n-=e.wrapper.children(".k-grouping-header").outerHeight()),t.toolbar&&(n-=e.wrapper.children(".k-grid-toolbar").outerHeight()),e.footerTemplate&&(n-=e.wrapper.children(".k-grid-footer").outerHeight());var o=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!==n?(e.height(""),!0):(e.height(""),!1))};o(e.wrapper)&&(n>2*r?(e.lockedContent&&(r=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?r:0,e.lockedContent.outerHeight(n-r)),e.content.outerHeight(n)):e.content.outerHeight(2*r+1))}},n())})}}}]);var platform;!function(e){var t=function(){function e(e,t,n,i){this.datastoreBrowserConstants=e,this.defaultUriSchemeUtil=t,this.vuiConstants=i,this.FOLDER_TYPE="folder",this.DATASTORE_TYPE="datastore",this.FILE_TYPE="file",this.areContentItemsLoading=!1,this.dsBrowserTreeAccessor={},this.splitterOptions={orientation:this.vuiConstants.splitter.orientation.HORIZONTAL,panes:[{min:"250px",size:"35%"},{min:"250px",size:"35%"},{min:"200px",size:"30%"}]},this.i18n=n.getString}return e.prototype.$onInit=function(){this.fileQueryType=this.initialFileQueryType,this.selectedFileQueryType=this.filterFileQueryTypes&&this.filterFileQueryTypes.length>0?this.filterFileQueryTypes[0]:void 0},e.prototype.clearContentItems=function(){this.contentItems=[],this.selectedFile=null,this.notifySelectedFileChanged()},e.prototype.selectedTreeItemChanged=function(e){this.clearContentItems(),this.selectedTreeItem=e,this.areContentItemsLoading=!0},e.prototype.selectedTreeItemFilesLoaded=function(e){if(this.areContentItemsLoading=!1,this.contentItems=e,this.contentItems&&1===this.contentItems.length){var t=this.contentItems[0];t.type!==this.FILE_TYPE||this.disablePreselect||this.selectedContentItemChanged(t)}},e.prototype.selectedContentItemChanged=function(e){var t=null;e.type===this.FOLDER_TYPE?this.dsBrowserTreeAccessor.selectChildItem(e.path):t=e,this.selectedFile=t,this.notifySelectedFileChanged()},e.prototype.notifySelectedFileChanged=function(){this.selectedFileChanged&&this.selectedFileChanged({selectedFile:this.selectedFile})},e.prototype.fileQueryTypeChange=function(e){this.clearContentItems(),this.fileQueryType=e.value,this.dsBrowserTreeAccessor.reloadContentFiles&&(this.areContentItemsLoading=!0,this.dsBrowserTreeAccessor.reloadContentFiles(this.fileQueryType))},e.prototype.isDatastoreItemSelected=function(){return this.selectedTreeItem?this.selectedTreeItem.type===this.DATASTORE_TYPE:!1},e.prototype.isFolderItemSelected=function(){return this.selectedTreeItem?this.selectedTreeItem.type===this.FOLDER_TYPE:!1},e.prototype.isFileItemSelected=function(){return this.selectedFile?this.selectedFile.type===this.FILE_TYPE:!1},e.$inject=["datastoreBrowserConstants","defaultUriSchemeUtil","i18nService","vuiConstants"],e}();e.DatastoreFileBrowserController=t;var n=function(){function e(){this.bindings={objectId:"<",datastoreIds:"<",initialFileQueryType:"<",filterFileQueryTypes:"<?",showVmImagesFolder:"<",selectedFile:"=?",selectedFileChanged:"&",selectedTreeItem:"=?",disablePreselect:"<?"},this.controller=t,this.templateUrl="resources/ui/components/datastore-file-browser/datastore-file-browser.html"}return e}();e.DatastoreFileBrowserComponent=n,angular.module("com.vmware.platform.ui").component("datastoreFileBrowser",new n)}(platform||(platform={})),function(){"use strict";function e(e,t,n,i,r){function o(r,o,a){function c(i){var o,a,s,c;if(o=i.data&&i.data[T],s=!o)c=e.getRoot(r.objectRef,r.datastores,r.showVmImagesFolder);else{a=y.dataSource.get(o);var l=n.defer();E.push(l),c=e.getChildren(r.objectRef,a.path,t.fileQueryType.FOLDERS,l.promise)["finally"](function(){var e=E.indexOf(l);e>=0&&E.splice(e,1)})}c.then(function(e){_.forEach(e,function(e){e.friendlyName&&(e.name=e.friendlyName)}),i.success(e),s&&(m(e),P||(p(),P=!0))})}function l(t){u(),w=n.defer();var i=e.getChildren(r.objectRef,t,r.fileQueryType,w.promise);C=i,i.then(function(e){i===C&&(w=null,v(e))})}function u(){w&&w.resolve()}function d(e){var t=n.defer();return y.expandPath(e,function(){t.resolve()}),t.promise}function f(e){var t,n=y.dataSource.get(e);if(n)try{t=y.findByUid(n.uid),y.select(t),y.trigger("select",{node:t})}catch(i){s.error("Failed selecting element: "+i.message)}return!!t}function p(){var e=y.dataSource.data();if(O&&e&&e.length>0){var t=e[0][T];f(t),d([t])}}function m(e){k&&r.initializationCompleted({rootItems:e})}function g(e){D&&r.selectedItemChanged({selectedTreeItem:e})}function v(e){x&&r.selectedItemFilesLoaded({selectedTreeItemContentFiles:e})}function h(){return y.dataSource.read()}function S(){return new kendo.data.HierarchicalDataSource({schema:{model:{id:T}},transport:{read:c}})}var y,b,I,C,w,T="path",E=[],k=!!a.onInitializationCompleted,D=!!a.onSelectedItemChanged,x=!!a.onSelectedItemFilesLoaded,O=void 0!==a.selectAndExpandFirstRootItem,P=!1;r.$on("$destroy",function(){u(),_.forEach(E,function(e){e.resolve()}),E=[]}),b=S(),I={dataSource:b,dataTextField:["name"]},I.select=function(e){var t=y.dataItem(e.node);g(t),x&&l(t.path)},y=o.kendoTreeView(I).data("kendoTreeView"),o.attr("vui-tree-view",""),r.accessor&&(r.accessor.reloadData=function(){P=!1,y.setDataSource(S())},r.accessor.reloadContentFiles=function(e){var t,n;e&&(r.fileQueryType=e),t=y.select(),n=y.dataItem(t),n&&l(n.path)},r.accessor.refreshTreeNode=function(e){var t=y.dataSource.get(e);if(t)try{t.loaded(!1),t.expanded&&t.load();var n=y.select(),i=y.dataItem(n);if(n&&!i)return void r.accessor.refreshTree();i[T]===e&&r.accessor.reloadContentFiles()}catch(o){s.error("Failed reloading element: "+o.message)}},r.accessor.refreshTree=function(){if(!r.isRefreshing){var e=i(function(){r.isRefreshing=!1},1e4);r.isRefreshing=!0;var t=y.select(),n=y.dataItem(t);if(!n)return void h().then(function(){r.isRefreshing=!1,i.cancel(e)});g();for(var o=y.parent(t),a=y.dataItem(o),s=n.expanded?[n[T]]:[];a;)s.splice(0,0,a[T]),o=y.parent(o),a=y.dataItem(o);var c=h();c.then(function(){d(s).then(function(){f(n[T])||p(),r.isRefreshing=!1,i.cancel(e)})})}},r.accessor.selectChildItem=function(e){var t=y.select(),n=y.dataItem(t);if(n){for(var i=y.parent(t),r=y.dataItem(i),o=[n[T]];r;)o.splice(0,0,r[T]),i=y.parent(i),r=y.dataItem(i);d(o).then(function(){f(e)})}})}var a={scope:{objectRef:"=",datastores:"=?",fileQueryType:"=?",selectAndExpandFirstRootItem:"=?",showVmImagesFolder:"=?",initializationCompleted:"&onInitializationCompleted",selectedItemChanged:"&onSelectedItemChanged",selectedItemFilesLoaded:"&onSelectedItemFilesLoaded",accessor:"="},link:o},s=r("datastoreBrowserTree");return a}angular.module("com.vmware.platform.ui").directive("datastoreBrowserTree",e),e.$inject=["datastoreBrowserTreeService","datastoreBrowserConstants","$q","$timeout","logService"]}(),function(){"use strict";function e(e){function t(e,t,n){var i={method:"GET",url:"datastoreBrowserTree/root/"+e,params:{}};return t&&(i.params.datastores=t),n&&(i.params.showVmImagesFolder=n),o(i,[])}function n(e,t,n,i){var r={method:"GET",url:"datastoreBrowserTree/children/"+e,params:{datastorePath:t},timeout:i};return n&&(r.params.fileQueryType=n),o(r,[])}function i(e,t,n,i){var r={method:"GET",url:"datastoreBrowserTree/children/"+e,params:{datastorePath:t,pattern:"*"+n+"*",fileQueryType:16,searchInSubFolders:!0},timeout:i};return o(r,[])}function r(e,t,n){var i={method:"GET",url:"datastoreBrowserTree/isFileExists/"+e,params:{filePath:t,fileQueryType:n}};return o(i,!1)}function o(t,n){return e(t).then(function(e){return e.data},function(e){return n})}var a={getRoot:t,getChildren:n,searchResults:i,isFileExists:r};return a}angular.module("com.vmware.platform.ui").factory("datastoreBrowserTreeService",e),e.$inject=["$http"]}(),angular.module("com.vmware.platform.ui").directive("vxMultiPageDialog",["vxMultiPageDialogService",function(e){"use strict";return{restrict:"A",scope:!1,link:function(t,n,i){var r={scope:t,configObjectName:i.vxMultiPageDialog},o=e(r);t.$watch(i.vxMultiPageDialog+".show",function(e,t){e===!1&&t===!0?o.hide():e===!0&&t===!1&&o.show()}),t.$on("$destroy",function(){o.destroy(),r=null,o=null})}}}]),angular.module("com.vmware.platform.ui").provider("vxMultiPageDialogService",[function(){this.$get=["$rootScope","$document","$q","$timeout","vuiModalService","jsUtils","vuiConstants","vuiLocale","vxModalKeyService",function(e,t,n,i,r,o,a,s,c){function l(e){var l,u=e.scope,d=u.$new();d.multiPageDialog=e.scope[e.configObjectName],d.isInitialized=!1;var f={label:s.ok,disabled:!1,confirmOnEnter:!0},p={label:s.cancel,visible:!0,rejectOnEsc:!0};angular.extend(d.multiPageDialog,angular.extend({maximizable:!0,resizable:!0,draggable:!0,resizeMinWidth:700,resizeMinHeight:420},d.multiPageDialog));var m={};angular.extend(m,f,d.multiPageDialog.confirmOptions),d.multiPageDialog.confirmOptions=m;var g=d.multiPageDialog.confirmOptions;m={},angular.extend(m,p,d.multiPageDialog.rejectOptions),d.multiPageDialog.rejectOptions=m;var v,h=d.multiPageDialog.rejectOptions,S='<div class="vui-wizard default-text" vui-focus-trap ng-style="multiPageDialog.getStyle()"role="dialog" tabindex="0" vui-focus-on="vuiModalOpened"><div class="wizard-modal-titlebar"><span class="titlebar-left-icons"><span ng-if="multiPageDialog.iconClass" class="vui-icon" ng-class="multiPageDialog.iconClass"></span></span><span class="titlebar-text" title="{{multiPageDialog.title}}">{{multiPageDialog.title}}</span></div><div class="wizard-modal-body" ng-if="multiPageDialog.show"><vx-multi-page-dialog-toc></vx-multi-page-dialog-toc><div class="wizard-content-container" role="main" tabindex="0"><div vui-validation-banner="multiPageDialog.validationBanner"></div><div class="wizard-content"ng-include="dialogPages[dialogManager.currentIdx].contentUrl"></div></div><div class="progress-bordered progress-centered" ng-if="multiPageDialog.loading"><vx-progress message="{{multiPageDialog.loadingMessage}}" loading-aria-label="{{multiPageDialog.loadingAriaLabel}}"></vx-progress></div></div><div class="wizard-modal-footer"><button class="btn" ng-if="multiPageDialog.rejectOptions.visible" ng-click="multiPageDialog.onCancelClick()">{{multiPageDialog.rejectOptions.label}}</button><button class="btn btn-primary" ng-click="multiPageDialog.onOkClick()" ng-disabled="multiPageDialog.confirmOptions.disabled || !isInitialized">{{multiPageDialog.confirmOptions.label}}</button><span class="wizard-resize-icon-span"></span></div></div>',y=function(e){d.multiPageDialog.validationBanner.messages=e},b=function(){y([])},I=function(e){return e&&"combobox"===e.getAttribute("role")},C=function(e){return e&&"listbox"===e.getAttribute("role")},w=function(e){var t=e.currentTarget.activeElement;h.rejectOnEsc===!0&&(I(t)||C(t)||h.visible===!0&&d.multiPageDialog.onCancelClick())},T=function(e){c.onKeydownHandler(e,w.bind(this,e))},E=function(e){t[e]("keydown",T)},k=function(e){return l.currentIdx===e||d.dialogPages[e].state===a.wizard.pageState.DISABLED?n.resolve(!1):n.when(x()).then(function(t){var n=!1;return t&&(D(e),n=!0),n})},D=function(e){l.currentIdx=e,d.multiPageDialog.currentPage=d.dialogPages[e],b()},x=function(){var e=d.multiPageDialog.currentPage.onCommit;return e&&"function"==typeof e?n.when(e()).then(function(e){return"boolean"==typeof e?e:_.isArray(e)&&e.length>0?(b(),y(e),!1):!0}):!0};d.$watch("multiPageDialog.show",function(e){if(e){v=document.activeElement;var t=function(){i(function(){d.progress||(d.progress=$(".modal-spinner")),d.progress.hasClass("ng-hide")||!d.progress.length?d.$broadcast("vuiModalOpened"):t()},100)};t()}});var O=function(){v&&v.focus()};d.multiPageDialog.onOkClick=function(){n.when(x()).then(function(e){e&&(P(),O())})};var P=function(){g&&g.onClick&&"function"==typeof g.onClick?n.when(g.onClick()).then(function(e){e&&(b(),d.multiPageDialog.show=!1)}):(b(),d.multiPageDialog.show=!1)};d.multiPageDialog.onCancelClick=function(){h&&h.onClick&&"function"==typeof h.onClick?n.when(h.onClick()).then(function(e){e&&(b(),d.multiPageDialog.show=!1)}):(b(),d.multiPageDialog.show=!1),O()},d.multiPageDialog.getStyle=function(){var e={};return o.hasProperty(d.multiPageDialog,"width")&&(e.width=d.multiPageDialog.width),o.hasProperty(d.multiPageDialog,"height")&&(e.height=d.multiPageDialog.height),e},d.dialogManager={currentIdx:0,tryMoveToPage:k};var A=function(){d.isInitialized=!0,l=d.dialogManager,d.dialogPages=d.multiPageDialog.pages,d.multiPageDialog.validationBanner={showAllMessages:!1,messages:[]},d.multiPageDialog.currentPage={};for(var e=0;d.dialogPages[e].state===a.wizard.pageState.SKIPPED&&e<d.dialogPages.length;)e++;D(e)};return e._vuiModalTemplate=S,e._outerScopeActual=u,e.scope=d,e.showBackdrop=!0,e.headerElementSelector="> .wizard-modal-titlebar",e.configObjectName="multiPageDialog",e.zIndex=a.internal.zIndex.DEFAULT,d.$watch(e.configObjectName+".show",function(e,t){e===!1&&t===!0?E("off"):e===!0&&E("on")}),d.$watch(e.configObjectName+".loading",function(e){if(!e){if(d.isInitialized)return;A()}}),d.$on("$destroy",function(){E("off")}),r(e)}return l}]}]),angular.module("com.vmware.platform.ui").directive("vxMultiPageDialogToc",["vuiConstants","vuiTreeAccessibilityServiceFactory",function(e,t){"use strict";return{template:'<div class="wizard-panel-TOC" role="tree" tabindex="0"><ul class="wizard-steps-list" role="group"><li ng-repeat="page in dialogPages" ng-class="getStepClass(page.state, $index)" ng-if="criteriaMatch(page.state)" ng-click="moveTo($index)" role="treeitem" aria-label="{{page.title}}" aria-selected="{{getAriaActive($index) ? \'true\' : \'false\'}}"tabindex="-1"><a class="no-content">{{page.title}}</a></li></ul></div>',scope:!1,restrict:"E",controller:["$scope","$element","$timeout",function(n,i,r){var o=e.wizard.pageState,a=n.dialogManager;setTimeout(function(){t.create(i,n)},0),n.criteriaMatch=function(e){return e!==o.SKIPPED},n.getStepClass=function(e,t){var n=t===a.currentIdx?"wizard-steps-current ":"";return e===o.DISABLED?n+="wizard-steps-not-available":e===o.COMPLETED&&0!==t?n+="wizard-steps-completed":e===o.INCOMPLETE&&(n+="wizard-steps-incomplete"),n},n.getAriaActive=function(e){return e===a.currentIdx},n.moveTo=function(e){a.tryMoveToPage(e).then(function(t){t||i.find(".wizard-steps-list li a:eq("+e+")").blur()})}}]}}]),function(){"use strict";angular.module("com.vmware.platform.ui").directive("diskFormatSelector",["diskFormatService",function(e){return{scope:{diskFormats:"=",selectedFormat:"=?",readOnly:"=?",ctrlAriaLabeledBy:"=?"},templateUrl:"resources/ui/components/diskFormatSelector/diskFormatSelector.html",link:function(t){function n(){t.isDisabled=!t.diskFormats||!t.diskFormats.length||1===t.diskFormats.length&&t.diskFormats[0].type===e.diskFormats.asDefinedInProfile.type}function i(){t.diskFormats&&t.diskFormats.length>0&&(t.selectedFormat=t.diskFormats[0])}t.selectedFormat||i(),t.$watch(function(){return t.diskFormats},function(e,r){e!==r&&(t.selectedFormat||i(),n())}),n()}}}])}(),function(){"use strict";function e(e,t){function n(e){return[r.flat,r.thin,r.thick]}function i(t,n,i,o){if(!t)return[];if(t===e.VVOL)return[r.thin,r.nativeThick];if(t===e.VSAN)return[r.asDefinedInProfile];if((t===e.NFS||t===e.NFS41)&&n!==!0)return[r.thin];var a=[];return i===!0&&a.push(r.sameAsSource),a.push(r.flat),o===!0&&a.push(r.thick),a.push(r.thin),a}var r={sameAsSource:{type:"sameAsSource",name:t.getString("Common","VirtualDiskFormat.sameAsSource")},asDefinedInProfile:{type:"asDefinedInProfile",name:t.getString("Common","VirtualDiskFormat.asDefinedInProfile")},flat:{type:"flat",name:t.getString("Common","VirtualDiskFormat.flat")},thick:{type:"thick",name:t.getString("Common","VirtualDiskFormat.thick")},nativeThick:{type:"nativeThick",name:t.getString("Common","VirtualDiskFormat.nativeThick")},thin:{type:"thin",name:t.getString("Common","VirtualDiskFormat.thin")}};return{diskFormats:r,getDrsDiskFormats:n,getAvailableDiskFormats:i}}angular.module("com.vmware.platform.ui").factory("diskFormatService",e),e.$inject=["datastoreTypeConstants","i18nService"]}(),angular.module("com.vmware.platform.ui").directive("vxDropdown",function(){return{restrict:"E",transclude:!0,scope:{label:"@"},controller:["$scope",function(e){e.isOpen=!1}],template:'<div class="dropdown" ng-class="{open : isOpen}" ><a class="btn dropdown-toggle"  ng-click="isOpen=!isOpen">{{label}} <span class="caret"></span></a><ul class="dropdown-menu" ng-click="isOpen=!isOpen" ng-transclude></ul></div>',replace:!0}}).directive("vxDropdownItem",function(){return{restrict:"E",scope:!1,transclude:!0,template:"<li ng-transclude></li>",replace:!0}}).directive("vxDropdownDivider",function(){return{restrict:"E",transclude:!1,template:'<li class="divider"/>',replace:!0}}),function(){"use strict";function e(){return{restrict:"A",scope:{vxErrorStack:"=",errorReportArgs:"="},template:['<div class="property-value horizontal-flex-container">','<span class="property">',"{{::ctrl.i18n('errorStack.label')}}","</span>","</div>",'<span class="horizontal-flex-container property-value"ng-repeat="line in ctrl.stack track by $index"style="white-space: pre;">','<span class="vui-icon-error-stack" ','style="flex-shrink:0;"></span>',"{{line}}","</span>"].join(""),controller:t,controllerAs:"ctrl"}}function t(e,t,i){var r=this;r.i18n=function(e){return t.getString("Common",e)},r.onSubmitErrorReportClicked=function(){var t=n+"?"+angular.element.param(e.errorReportArgs);i.open(t)},r.stack=e.vxErrorStack}angular.module("com.vmware.platform.ui").directive("vxErrorStack",e);var n="/h5ngc/errorReport/";t.$inject=["$scope","i18nService","$window"]}(),function(){angular.module("com.vmware.platform.ui").directive("filterFocusRetainer",["$document",function(e){return{restrict:"A",link:function(t){function n(e){if(e&&e.target){var t=e.target.getAttribute("class");t&&t.indexOf("k-textbox")>-1&&e.stopPropagation()}}e[0].body.addEventListener("focusin",n),t.$on("$destroy",function(){e[0].body.removeEventListener("focusin",n)})}}}])}(),angular.module("com.vmware.platform.ui").component("vxValueInUnits",{templateUrl:"resources/ui/components/forms/vxValueInUnits.html",bindings:{unitOptions:"<",unitChangedCallback:"=",valueChangedCallback:"&",errorMessages:"<",isDisabled:"<",recommendedValues:"<",showUnits:"<?",customValidators:"<?",allowedCharacters:"@",currentUnit:"=?",unitAriaLabel:"<?",quantityCaretAriaLabel:"<?",quantityAriaLabel:"<?"},require:{ngModel:"ngModel"},controller:VxValueInUnitsController,controllerAs:"ctrl"}),VxValueInUnitsController.$inject=["$scope","$element","$attrs","$document","i18nService","vxValueInUnitsService"],function(){"use strict";function e(){return{onRecommendedValuesExpandedChange:t}}function t(e,t){if(t){var i=e.context.offsetParent,r=i.getBoundingClientRect(),o=$(e.find("table.recommended-values")),a=o[0].getBoundingClientRect(),s=n(r,a);s&&o.addClass("recommended-values-openUpwards")}}function n(e,t){var n=e.bottom+e.top,i=t.bottom+t.top,r=0>n-i;return r}angular.module("com.vmware.platform.ui").factory("vxValueInUnitsService",e)}(),function(){"use strict";function e(e,t,n){function i(t,i){function o(e){var n=e.match(/{([^{}]+)}/)[1];return(t.targets[n]||{}).entity}function a(e){return e.match(/{([^{}]+)}/g)||[]}function s(t){return e.getVsphereObjectId(o(t))}function c(e){var n=e.match(/{([^{}]+)}/)[1];return(t.targets[n]||{}).name}t.$watch("text",function(){var e=_.escape(t.text);t.targets||(t.targets={}),_.every(a(e),function(n){if(o(n)){var i=r(s(n),c(n));return e=e.replace(n,i),!0}return e="<span ng-non-bindable>"+t.fallbackText+"</span>",!1}),i.html(e),n(i.contents())(t)},!0)}var r=t.getColumnRenderer("link");return{scope:{text:"=",targets:"=",fallbackText:"="},template:"",link:i}}angular.module("com.vmware.platform.ui").directive("linkedText",e),e.$inject=["defaultUriSchemeUtil","columnRenderersRegistry","$compile"]}(),function(){"use strict";angular.module("com.vmware.platform.ui").directive("vxLocalizedAriaLabel",["i18nService",function(e){return{restrict:"A",scope:!1,link:function(t,n,i){t.$watch(i.vxLocalizedAriaLabel,function(t){if(t){var n=t.split(":"),r=e.getString.apply(e,n);r&&i.$set("aria-label",r)}})}}}])}(),function(){"use strict";function e(e,t){function n(){return{message:"",isVisible:!1}}function i(e){return"assigned"===e||"generated"===e}var r=this;r.$onInit=function(){r.MAC_ADDRESS_PREFIX="00:50:56:",r.originalMacAddress=r.assignedMacAddress,r.originalAddressType=r.addressType,r.ARIA_LBL_MAC=t.getString("Common","macAddress"),r.ARIA_LBL_MAC_TYPE=t.getString("Common","macAddressType");var e=i(r.addressType)?r.addressType:"generated";r.dropDownOptions=[{id:"manual",label:t.getString("Common","macAddressType.manual")},{id:e,label:t.getString("Common","macAddressType.automatic")}],r.macAddressValidateErrorConfig=n(),r.addressType?r.selectedOption="manual"===r.addressType?r.dropDownOptions[0]:r.dropDownOptions[1]:r.selectedOption=r.dropDownOptions[1]},r.$postLink=function(){r.validateMacAddress=function(){if("manual"===r.selectedOption.id){var t=e.validate(r.assignedMacAddress);r.macAddressForm.macAddressInput.$setValidity("required",t.result),r.macAddressValidateErrorConfig.isVisible=!t.result,r.macAddressValidateErrorConfig.message=t.error}else r.macAddressForm.macAddressInput.$setValidity("required",!0),r.macAddressValidateErrorConfig=n()},r.onSelectionChange=function(){if(r.addressType=r.selectedOption.id,r.selectedOption.id===r.originalAddressType){var e=i(r.addressType)?"":r.MAC_ADDRESS_PREFIX;r.assignedMacAddress=_.isEmpty(r.originalMacAddress)?e:r.originalMacAddress}else"manual"===r.originalAddressType?"manual"===r.addressType?r.assignedMacAddress=r.originalMacAddress?r.originalMacAddress:r.MAC_ADDRESS_PREFIX:r.assignedMacAddress=r.originalMacAddress?r.originalMacAddress:"":"manual"===r.addressType?r.assignedMacAddress=r.MAC_ADDRESS_PREFIX:r.assignedMacAddress=r.originalMacAddress?r.originalMacAddress:"";r.isAutomatic=i(r.addressType),r.validateMacAddress()},r.onSelectionChange()}}angular.module("com.vmware.platform.ui").component("macAddressControl",{templateUrl:"resources/ui/components/macAddressControl/macAddressControl.html",controller:e,controllerAs:"ctrl",bindings:{addressType:"=?",assignedMacAddress:"=?",disabled:"=ngDisabled"}}),e.$inject=["macAddressValidatorService","i18nService"]}();var platform;!function(e){var t=function(){function e(e,t,n,i,r){this.$scope=e,this.i18nService=t,this.logService=n,this.navigation=i,this.vuiConstants=r,this.isResizable=!1,this.log=this.logService("vxMasterDetailsViewController"),this.noItemsSelectedWarning=this.i18nService.getString("Common","ListPreviewSplitView.noItemsSelected"),this.multipleItemsSelectedWarning=this.i18nService.getString("Common","ListPreviewSplitView.multipleItemsSelected"),this.splitterOptions={orientation:this.vuiConstants.splitter.orientation.VERTICAL,panes:[{min:"250px",size:"50%"},{size:"50%"}]}}return e.prototype.$onInit=function(){this.$scope.detailsViewData=this.detailsViewData||{},this.$scope.masterDetailsViewContext=this.masterDetailsViewContext||{};var e={selectedItems:[],detailsView:null,selectedItem:null,contextObjectId:this.navigation.getRoute().objectId};_.defaults(this.$scope.masterDetailsViewContext,e),this.initWatch()},e.prototype.initWatch=function(){var e=this;this.$scope.$watch(function(){return e.$scope.masterDetailsViewContext.selectedItems},function(t,n){t===n||_.isEqual(t,n)||(!t||0===t.length||t.length>1?e.$scope.masterDetailsViewContext.selectedItem=null:e.$scope.masterDetailsViewContext.selectedItem=t[0])})},e.$inject=["$scope","i18nService","logService","navigation","vuiConstants"],e}();e.MasterDetailsComponent=t,angular.module("com.vmware.platform.ui").component("vxMasterDetailsComponent",{controller:t,templateUrl:"resources/ui/components/masterdetails/vxMasterDetailsComponent.html",bindings:{masterViewTemplateUrl:"@",detailsViewData:"<?",masterDetailsViewContext:"<?",detailsViewTemplateUrl:"@?",isResizable:"@?"}})}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n,i){this.$scope=e,this.i18nService=t,this.log=n("vxMasterDetailsViewController"),this.$scope.masterDetailsViewContext=e.masterDetailsViewContext||{selectedItems:[],detailsView:null,selectedItem:null,contextObjectId:i.getRoute().objectId},this.initMasterDetailsUrls()}return e.prototype.initMasterDetailsUrls=function(){if(this.$scope._view.children&&2===this.$scope._view.children.length){var e=this.$scope._view.children[0],t=this.$scope._view.children[1];this.masterViewTemplateUrl=e.contentSpec.url,this.detailsViewTemplateUrl=t.contentSpec.url,this.$scope.masterDetailsViewContext.detailsView=t}else this.log.error("Master-details view: Expected 2 hosted points.")},e.$inject=["$scope","i18nService","logService","navigation"],e}();angular.module("com.vmware.platform.ui").controller("vxMasterDetailsViewController",t)}(platform||(platform={})),function(){"use strict";function e(e){return{restrict:"E",replace:!0,scope:{message:"=?"},template:['<div class="no-items-selected-container">','<span class="no-items-selected-text" ng-bind="message || defaultMessage" />',"</div>"].join(""),link:function(t){t.defaultMessage||(t.defaultMessage=e.getString("Common","ListPreviewSplitView.noItemsSelected"))}}}angular.module("com.vmware.platform.ui").directive("vxNoItemsSelected",["i18nService",e])}(),function(){"use strict";function e(e,t,n,i){var r,o=n("vxSingleExtensionTabController"),a=this,s=i.getRoute().objectId;return r=t.tabExtension?t.tabExtension.uid||i.getRoute().extensionId:i.getRoute().extensionId,r&&s?void e.getHostedExtensions(r,s).then(function(e){e&&1===e.length?a.viewTemplateUrl=e[0].contentSpec.url:o.error("VxSingleExtensionTabController: Expected 1 hosted point.")}):void o.error("VxSingleExtensionTabController: invalid configuration")}angular.module("com.vmware.platform.ui").controller("vxSingleExtensionTabController",e),e.$inject=["extensionService","$scope","logService","navigation"]}(),function(){"use strict";function e(e,t,n,i,r,o){function a(){return o.getRoute().extensionId+"_selectedTab"}function s(){p.selectedTab&&p.selectedTab.uid&&i.setUserData(a(),p.selectedTab.uid)}function c(){return i.getUserData(a())}function l(e){var t=[];_.forEach(m,function(n){d(e,n)&&t.push(n)}),p.tabs=t,p.selectedTab&&!d(e,p.selectedTab)&&(p.selectedTab=p.tabs[0]),p.tabViewApi&&p.tabViewApi.clearCache&&p.tabViewApi.clearCache(p.selectedTab)}function u(){var n=t.detailsViewData.tabsPromise;return n||(n=e.getHostedExtensions(t.masterDetailsViewContext.detailsView.uid).then(function(e){return _.map(e,function(e){return{name:e.name,templateUrl:e.contentSpec.url,metadata:e.contentSpec.metadata,uid:e.uid,tabParams:{tabExtension:e}}})})),r.all([n,c()]).then(function(e){var t=e[0],n=e[1];m=[],_.forEach(t,function(e){m.push(e),n&&e.uid===n&&(p.selectedTab=e)})})}function d(e,t){if(!e)return!1;if(!t.metadata||!t.metadata.relevantFor)return!0;var n=t.metadata.relevantFor.split(","),i=!0;return _.forEach(n,function(t){var n=t.trim(),r=!0;"!"===n.charAt(0)&&(n=n.substring(1),r=!1),e.hasOwnProperty(n)||(f.debug("Tabbed details view: Missing flags "+n+" for the selected item."),
i=!1),e[n]!==r&&(i=!1)}),i}var f=n("VxTabbedDetailsViewController"),p=this,m=[];p.tabViewApi={},t.$watch(function(){return t.masterDetailsViewContext.selectedItem},function(e,t){e!==t&&l(e)}),t.$watch(function(){return p.selectedTab},function(e,t){e!==t&&s()}),u().then(function(){t.masterDetailsViewContext.selectedItem&&l(t.masterDetailsViewContext.selectedItem)})}angular.module("com.vmware.platform.ui").controller("vxTabbedDetailsViewController",e),e.$inject=["extensionService","$scope","logService","localStorageService","$q","navigation"]}(),function(){function e(){return{restrict:"A",templateUrl:"resources/ui/components/menu/vxMenuTemplate.html",scope:{vxMenu:"="},link:function(e,t,n,i){h5.debug||t.on("contextmenu",function(){return!1}),e.clickHandler=function(t){var n=$(t.target),i=n.closest("li");if(0===i.length)return!1;var r=$(i[0]);return r.hasClass("disabled")?!1:(e.vxMenu.showMenu=!1,e.vxMenu.isShowing=!1,void e.vxMenu.itemClick(t,r[0]))},e.isDivider=function(e){return"SEPARATOR"===e},e.styles={left:"0px",top:"0px"},e.$watch("vxMenu.left",function(t){e.styles.left=t+"px"}),e.$watch("vxMenu.top",function(t){e.styles.top=t+"px"})}}}angular.module("com.vmware.platform.ui").directive("vxMenu",e)}(),angular.module("com.vmware.platform.ui").directive("vxResourceMeter",function(){return{restrict:"E",replace:!0,scope:{percentage:"=",orientation:"@"},templateUrl:"resources/ui/components/meter/vxResourceMeter.html"}}),angular.module("com.vmware.platform.ui").directive("modalTitle",function(){return{restrict:"A",scope:{primaryTitle:"=",secondaryTitle:"="},templateUrl:"resources/ui/components/modal/modalTitle.html"}});var platform;!function(e){var t=function(){function e(e,t){this.vxZoneService=e,this.clarityConstants=t}return e.prototype.onKeydownHandler=function(e,t,n){var i=this,r=e.which||e.keyCode;(r===this.clarityConstants.keys.ESC||r===this.clarityConstants.keys.ENTER)&&(e.stopImmediatePropagation(),this.vxZoneService.runInsideAngular(function(){switch(r){case i.clarityConstants.keys.ESC:t&&t();break;case i.clarityConstants.keys.ENTER:n&&n()}}))},e.$inject=["vxZoneService","clarityConstants"],e}();e.VxModalKeyService=t,angular.module("com.vmware.platform.ui").service("vxModalKeyService",t)}(platform||(platform={})),function(){"use strict";function e(e,t){var n=!1;return{restrict:"E",scope:{objectIcon:"@",objectName:"@",objectId:"@"},link:function(i,r,o){function a(){n||(n=!0,t(function(){n&&(s(i),n=!1)},0))}function s(t){var n=e.getColumnRenderer("object-link"),i={id:t.objectId,label:t.objectName};r.html(n(["id","label",t.objectIcon],i))}o.$observe("objectId",a),o.$observe("objectIcon",a),o.$observe("objectName",a),s(i)}}}angular.module("com.vmware.platform.ui").directive("vxObjectLabel",e),e.$inject=["columnRenderersRegistry","$timeout"]}(),angular.module("com.vmware.platform.ui").directive("vxObjectSelector",["i18nService","logService","vuiConstants","$timeout","$http","$q","defaultUriSchemeUtil",function(e,t,n,i,r,o,a){function s(t,r){var o={},a=t.config.onSelectionChanged;if(t.currentSelection=[],t.primaryTabOptions={hideWhenSingleTab:!t.multipleSelect,tabs:m(t,r),tabType:n.tabs.type.PRIMARY},t.config.multipleSelect=angular.isDefined(t.config.multipleSelect)?!!t.config.multipleSelect:!1,t.config.selectedObjects=T(t.config),t.$watch(function(){return t.filterTabOptions&&t.filterTabOptions.selectedTabIndex?t.filterTabOptions.selectedTabIndex:void 0},function(e,n){e!==n&&i(function(){var e=l(r,t.filterTabOptions.tabs[t.filterTabOptions.selectedTabIndex].listViewId);if(e){var n=e.data("kendoGrid");n&&n.resize(!0)}},0)}),t.config.treeTabConfig){if(t.config.multipleSelect)throw new Error("Configuration error: tree is not supported in multipleSelect mode");if(t.treeConfig=t.config.treeTabConfig.treeConfig||{},angular.extend(t.treeConfig,{preselectRoot:!1}),t.onTreeSelectionChanged=function(e){var n=t.currentSelection;if(t.currentSelection=[C(e)],n.length&&_.isEqual(_.values(o)[0],n)){var i=_.keys(o)[0];u(r,i),delete o[i]}I(a,t.currentSelection,n)},t.config.selectedObjects.length){t.treePreselectedNode=t.config.selectedObjects[0];var s=_.findIndex(t.primaryTabOptions.tabs,{label:e.getString("CommonUi","objectSelector.navigationTabTitle")});t.primaryTabOptions.selectedTabIndex=-1!==s?s:0}}if(t.config.listTabConfig){var d=t.config.listTabConfig.selectedTabIndex,f=angular.isDefined(d)?d:0,p=t.config.listTabConfig.listConfig;if(!E(p))return;if(t.config.selectedObjects.length&&!t.config.treeTabConfig){var h=_.clone(t.config.selectedObjects),S=function(e){return e?h.indexOf(e.id)>-1:!1};_.each(p,function(e){e.preselectComparator=S})}g(p,t).then(function(e){function a(n){i(function(){var i=p[n].listViewId;if(delete o[i],t.config.multipleSelect){var a=t.primaryTabOptions.tabs[1];y(r,o,a)}u(r,i),e[n]=v(l,d,p[n]),s([e[n]])},0)}function s(i){c(i,f,o,t,r),t.filterTabOptions={selectedTabIndex:f,tabs:e,tabType:n.tabs.type.SECONDARY,tabStyle:t.config.tabStyle?t.config.tabStyle:n.tabs.style.TABS,hideWhenSingleTab:!0}}var l=t.config.contextObject,d=t.config.multipleSelect?n.grid.selectionMode.MULTI:n.grid.selectionMode.SINGLE,m=p.length,g=_.flatten(_.map(p,function(e){return[function(){return e.propertyParams},function(){return e.filterId}]}));t.$watchGroup(g,function(e,t){_.each(_.range(m),function(n){var i=2*n,r=i+1;(e[i]!==t[i]||e[r]!==t[r])&&a(n)})}),s(e)})}}function c(e,t,n,i,r){_.each(e,function(e,o){var a,s;o===t&&(e.deferInstantiation=!1),e.onSelectionChanged=function(t,o){if(!w(t,o)){var c=_.map(t,C);if(i.config.multipleSelect){a=_.chain(n).values().flatten().value(),n[e.listViewId]=c,s=_.chain(n).values().flatten().value();var l=i.primaryTabOptions.tabs[1];y(r,n,l),i.config.selectedObjects=_.pluck(s,"id")}else{if(!t||!t.length)return;a=_.flatten(_.values(n));var d=_.keys(n)[0];d!==e.listViewId&&a.length&&(u(r,d),delete n[d]),i.currentSelection.length&&!a.length&&(a=a.concat(i.currentSelection),f(r)),n[e.listViewId]=c,i.currentSelection=c,s=c}x&&!D&&(D=_.clone(a)),x||(D?(I(i.config.onSelectionChanged,s,D),D=null):I(i.config.onSelectionChanged,s,a)),i.config.selectedObjects=_.pluck(s,"id")}},e.onClick=function(e,t){t.deferInstantiation=!1}})}function l(e,t){var n=e.find('[list-view-id="'+t+'"] [kendo-grid]');return n}function u(e,t){var n=l(e,t),i=n.data("kendoGrid");void 0!==i&&n.data("kendoGrid").clearSelection()}function d(e){var t=e.find("[vx-tree-view]");return t}function f(e){var t=d(e);t.data("kendoTreeView").select($())}function p(e,t){var n={},i=[];return _.each(e,function(e){var r=e[t];n.hasOwnProperty(r)&&i.push(r),n[r]=1}),i}function m(t,n){var i=t.config,r=[];if(i.listTabConfig){var o=e.getString("CommonUi","objectSelector.filterTabTitle"),a=i.listTabConfig.label||o,s={label:a,contentUrl:"resources/ui/components/objectselector/filterTab.html"};r.push(s)}if(i.treeTabConfig&&!i.multipleSelect){var c={label:e.getString("CommonUi","objectSelector.navigationTabTitle"),contentUrl:"resources/ui/components/objectselector/browseTab.html"};r.push(c)}if(i.multipleSelect){var l={label:e.getString("CommonUi","objectSelector.selectedObjectsTabTitle",0),contentUrl:"resources/ui/components/objectselector/selectObjectsTab.html",gridOpts:S(t,n)};r.push(l)}return r}function g(e,t){var i,r=t.config.contextObject,a=t.config.multipleSelect?n.grid.selectionMode.MULTI:n.grid.selectionMode.SINGLE,s=_.filter(e,function(e){return!angular.isDefined(e.filterId)});if(0===s.length)return i=_.map(e,function(e){return v(r,a,e)}),o.when(i);var c=_.map(s,function(e){return h(r,e.listViewId,e.dataModels[0])});return o.all(c).then(function(t){return i=_.map(e,function(e){return v(r,a,e,t)})})}function v(e,t,n,i){var r={label:n.label,contentUrl:"resources/ui/components/objectselector/tabContent.html",listViewId:n.listViewId,contextObject:e,selectionMode:t,filterId:n.filterId,dataModels:n.dataModels,preselectComparator:n.preselectComparator,filterParams:n.filterParams,propertyParams:n.propertyParams,showLoadingIndicatorWhileFetchingColumns:n.showLoadingIndicatorWhileFetchingColumns,loadingIndicatorSize:n.loadingIndicatorSize,deferInstantiation:n.useLazyInstantiation?!0:!1};return n.filterId||(r.relationId=i.shift().relationId),r}function h(e,t,n){return r({method:"get",url:"relateditems/relateditem/"+e+"?listViewId="+t+"&targetType="+n}).then(function(e){return e.data})}function S(t,r){function o(){for(var e=r.find("#selected-objects > div").data("kendoGrid"),t=e.dataSource.data(),n=e.select(),o=[],a=0,s=0;a<t.length&&s<n.length;a++)t[a].uid===n[s].getAttribute("data-uid")&&(o.push(t[a].id),s++);i(function(){n.find('input[type="checkbox"]').click()},0);var c=_.map(r.find(".vui-secondary-tabs [vui-datagrid] > div"),function(e){var t=$(e).data("kendoGrid");return t.dataSource.data()}),l=[];_.each(c,function(e){for(var t=0;t<e.length;t++){var n=o.indexOf(e[t].id);-1!==n&&(l.push(e[t].uid),delete o[n])}}),i(function(){x=!0,_.each(l,function(e){e===l[l.length-1]&&(x=!1),r.find('[data-uid="'+e+'"] input[type="checkbox"]').click()})},0)}var a='<span ng-non-bindable><span class="#:iconClass#"></span>#:name#</span>',s={actionId:"removeItems",tooltipText:e.getString("CommonUi","selector.removeItems"),label:e.getString("CommonUi","selector.removeItems"),enabled:!0,iconClass:"vx-icon-removeIcon",onClick:o},c={columnDefs:[{displayName:e.getString("CommonUi","objectSelector.selectedObjectsTabName"),template:kendo.template(a),field:"name",width:"50%"},{displayName:e.getString("CommonUi","objectSelector.selectedObjectTabType"),field:"type"}],sortMode:n.grid.sortMode.SINGLE,selectionMode:n.grid.selectionMode.MULTI,data:[],selectedItems:[],resizable:!0,searchable:!1,actionBarOptions:{actions:[s]}};return t.$watch(function(){return c.selectedItems},function(e){s.enabled=!!e.length}),c}function y(t,n,i){if(t){var r=t.find("#selected-objects > div").data("kendoGrid");if(r){var o=_.chain(n).map(function(e,t){return e&&0!==e.length?_.map(e,function(e){return{iconClass:e.icon,name:e.name,type:b(e.id),id:e.id}}):[]}).flatten().value();r.dataSource.data(o),i.label=e.getString("CommonUi","objectSelector.selectedObjectsTabTitle",o.length)}}}function b(t){if(!t)return"";var n=a.getEntityType(t);return n?e.getString("Common","fieldType."+n):""}function I(e,t,n){e&&t&&e(t,n)}function C(e){return{id:e.id||e.objRef,icon:e.primaryIconId||e.spriteCssClass,name:e.name||e.text,rawData:e}}function w(e,t){return!e||e&&0===e.length&&(!t||0===t.length)}function T(e){var t=e.selectedObjects?e.selectedObjects:[];return!e.multipleSelect&&t.length>1?(k.error("Configuration error: Cannot preselect more thanone item when multiple selection is set to false"),[t[0]]):t}function E(e){var t=p(e,"listViewId");if(0!==t.length)return k.error("Duplicate list view ids: "+t.join()),!1;for(var n=0;n<e.length;n++)if(!e[n].dataModels||!e[n].dataModels.length)return k.error("Missing or empty data models for list view: "+e[n].listViewId),!1;var i=p(e,"dataModels");return 0!==i.length?(k.error("Duplicate data models: "+i.join()),!1):!0}var k=t("vxObjectSelector"),D=null,x=!1;return{templateUrl:"resources/ui/components/objectselector/vxObjectSelector.html",restrict:"A",scope:{config:"="},link:s}}]);var common_ui;!function(e){var t=function(){function e(){this.bindings={config:"<"},this.controller=n,this.template='<div vx-object-selector\n                     config="$ctrl.config"\n               </div>'}return e}();e.UpgradableObjectSelector=t;var n=function(){function e(){}return e}();angular.module("com.vmware.platform.ui").component("vxUpgradableObjectSelector",new t)}(common_ui||(common_ui={})),angular.module("com.vmware.platform.ui").directive("vxPortlets",["$log","jsUtils","persistenceService","navigation","defaultUriSchemeUtil","$rootScope","$timeout",function(e,t,n,i,r,o,a){"use strict";var s=32;return{scope:!0,restrict:"A",replace:!0,templateUrl:"resources/ui/components/portlet/portlets.html",link:function(t,c,l){function u(e){var t=/^(\d+):(\d+)$/i;e.style={height:"auto"};var n=((e._view.contentSpec||{}).metadata||{}).size;if("string"==typeof n&&t.test(n)){var i=n.match(t),r=(parseInt(i[1],10),parseInt(i[2],10));if(!(1>r||r>2)){var o=156,a=o*r;e.style.height=a+"px"}}}var d=l.vxPortlets,f="portletsStateCategory",p="vx-portlets",m="vx-portlet",g={extensionId:i.getRouteFromUrl().extensionId,entityType:r.getEntityType(o._route.objectId)};t.toggleCollapsed=function(e,n){n.keyCode&&n.keyCode===s&&n.preventDefault(),e.collapsed=!e.collapsed;var i=angular.element(n.currentTarget).closest("."+m);if(i.toggleClass("collapsed"),h(t.columns),e.collapsed){var r=angular.element('[portlet-id="'+e._view.uid+'"] .vx-portlet-content');r&&r.remove()}},t.hasLabel=function(e){return e.label&&e.label.trim().length>0},t.clickAction=function(t,n){angular.isDefined(n.onClick)&&angular.isFunction(n.onClick)?n.onClick.call(void 0,t,n):e.warn("No onClick action defined for link: "+n.label)},t.getLimits=function(e){return[Math.floor(e.length/2)+1,-Math.floor(e.length/2)]},t.sortableOptions={handle:"> .portlet-titlebar",cursor:"move",placeholder:m+" placeholder",connectWith:".col",start:function(e,t){t.item.css("transform","rotate(2deg)"),t.item.css("transform","translateX(10px)"),t.item.closest("."+p).addClass("ui-sorting")},stop:function(e,n){n.item.css("transform","rotate(0deg)"),n.item.css("transform","translateX(0px)"),a(function(){n.item.closest("."+p).removeClass("ui-sorting"),h(t.columns)},0)}};var v=function(){return g.entityType+"-"+g.extensionId+"-portlets"},h=function(e){var t=[];_.each(e,function(e){var n=[];t.push(n),_.each(e,function(e){var t=e._view.uid,i=e.collapsed;n.push({id:t,collapsed:i})})}),n.setData(v(),angular.toJson(t),{},f)};t.$watchCollection(d+".portlets",function(){t.columns=[[],[]];var i=t.$eval(d);if(i&&i.portlets&&i.portlets.length>0){var r={key:"uid",op:"=",value:v()};n.getData(r).then(function(n){var r,o={};_.each(i.portlets,function(t,n){r=t._view.uid,o[r]&&e.debug("Duplicate portlet with ID "+r+" found in the scope!"),t.collapsed=!t._view.activateViewByDefault,t.columnIndex=n%2,o[r]=t});var a={};if(_.each(t.columns,function(t){_.each(t,function(t){r=t._view.uid,a[r]&&e.warn("Duplicate portlet with ID "+r+" found in the visible portlet columns!"),a[r]=!0})}),n[0]&&n[0].value){var s=angular.fromJson(n[0].value);_.each(s,function(e,t){_.each(e,function(e){var n=o[e.id];n&&(void 0!==e.collapsed&&null!==e.collapsed&&(n.collapsed=e.collapsed),n.columnIndex=t)})}),_.each(s,function(e){_.each(e,function(e){if(r=e.id,o[r]&&!a[r]){var n=o[r];delete o[r],t.columns[n.columnIndex].push(n),a[r]=!0,u(n)}})}),_.each(o,function(e){t.columns[t.columns.length-1].push(e),a[r]=!0,u(e)})}else _.each(i.portlets,function(e){r=e._view.uid,o[r]&&!a[r]&&(e=o[r],delete o[r],t.columns[e.columnIndex].push(e),a[r]=!0,u(e))})})}})}}}]),angular.module("com.vmware.platform.ui").directive("vxProgress",function(){return{restrict:"E",templateUrl:"resources/ui/components/progress/vxProgress.html",scope:{message:"@",loadingAriaLabel:"@?"},link:function(e,t,n){e.message=n.message}}}),angular.module("com.vmware.platform.ui").directive("vxStaticProgressIndicator",function(){function e(e){var t=this;t.$onInit=function(){t.resources={cancelTooltip:e.getString("Common","cancel"),cancelEnableClass:"vui-icon-datagrid-cancel",cancelDisabledClass:"vui-icon-datagrid-cancel-disabled"},t.resources.resolvedCancelClass=t.isCancelPending?t.resources.cancelDisabledClass:t.resources.cancelEnableClass,t.enableCancelButton||(t.resources.resolvedCancelClass=t.resources.cancelDisabledClass),t.events={onCancelClickEvent:function(e){t.enableCancelButton&&t.cancelCallback(e)}}}}return e.$inject=["i18nService"],{restrict:"E",bindToController:!0,controllerAs:"vx_spi_ctrl",templateUrl:"resources/ui/components/progress/vxStaticProgressIndicator.html",scope:{progress:"=",enableCancelButton:"=",isCancelPending:"=",cancelCallback:"&"},controller:e}}),angular.module("com.vmware.platform.ui").directive("vxPropertyView",["$rootScope",function(e){"use strict";function t(e,t){return _.findIndex(e,function(e){return e.id===t})}function n(e,n){return t(e,n)>=0}return{templateUrl:"resources/ui/components/propertyview/propertyView.html",restrict:"E",replace:!0,scope:{data:"=",defaultCategoryId:"="},link:function(i){i.selectedCategoryId=i.defaultCategoryId,i.selectCategory=function(e){i.selectedCategoryId=e},i.getSelectedCategory=function(){if(!(i.data&&i.data.categories&&i.data.categories instanceof Array))return null;var e=t(i.data.categories,i.selectedCategoryId);return 0>e?null:i.data.categories[e]},i.navigate=function(t){e._navigate(t.extensionId,t.objectId,t.navigator)},i.$watchCollection("data.categories",function(e){return e&&e instanceof Array&&0!==e.length&&!n(e,i.selectedCategoryId)?n(e,i.defaultCategoryId)?void(i.selectedCategoryId=i.defaultCategoryId):void(i.selectedCategoryId=e[0].id):void 0})}}}]);var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},platform;!function(e){!function(e){e[e.Message="Message"]="Message",e[e.PropertyValue="PropertyValue"]="PropertyValue",e[e.PropertyKey="PropertyKey"]="PropertyKey",e[e.Property="Property"]="Property",e[e.Section="Section"]="Section",e[e.Category="Category"]="Category"}(e.PropertyViewModelItemType||(e.PropertyViewModelItemType={}));var t=e.PropertyViewModelItemType,n=function(){function e(){this.parent=null}return e.cloneBuilders=function(e,t){return _.map(e,function(e){var n=e.clone();return t&&t.setAsParentTo(n),n})},e.getBuildersResults=function(e){return _.map(e,function(e){return e.build()})},e.prototype.setAsParentTo=function(e){return e.parent=this,this},e}();e.PropertyViewBaseBuilder=n;var i=function(e){function n(){e.call(this),this._text=null,this._icon=null,this._renderAsHtml=!1}return __extends(n,e),n.prototype.text=function(e){return this._text=e,this},n.prototype.icon=function(e){return this._icon=e,this},n.prototype.renderAsHtml=function(e){return this._renderAsHtml=e,this},n.prototype.build=function(){return{type:t.Message,text:this._text,icon:this._icon,renderAsHtml:this._renderAsHtml}},n.prototype.clone=function(){var e=new n;return e._text=this._text,e._icon=this._icon,e._renderAsHtml=this._renderAsHtml,e},n.prototype.exit=function(){return this.parent},n}(n);e.PropertyViewMessageBuilder=i;var r=function(e){function n(){e.call(this),this._text=null,this._icon=null}return __extends(n,e),n.prototype.text=function(e){return this._text=e,this},n.prototype.icon=function(e){return this._icon=e,this},n.prototype.build=function(){return{type:t.PropertyKey,text:this._text,icon:this._icon}},n.prototype.clone=function(){var e=new n;return e._text=this._text,e._icon=this._icon,e},n.prototype.exit=function(){return this.parent},n}(n);e.PropertyViewPropertyKeyBuilder=r;var o=function(e){function n(){e.call(this),this._text=null,this._icon=null,this._link=null}return __extends(n,e),n.prototype.text=function(e){return this._text=e,this},n.prototype.icon=function(e){return this._icon=e,this},n.prototype.link=function(e){return this._link=e,this},n.prototype.build=function(){return{type:t.PropertyValue,text:this._text,icon:this._icon,link:this._link}},n.prototype.clone=function(){var e=new n;return e._text=this._text,e._icon=this._icon,e._link=angular.copy(this._link),e},n.prototype.exit=function(){return this.parent},n}(n);e.PropertyViewPropertyValueBuilder=o;var a=function(e){function i(){e.call(this),this._keyBuilder=new r,this.setAsParentTo(this._keyBuilder),this._valueBuilders=[]}return __extends(i,e),i.prototype.keyBuilder=function(){return this._keyBuilder},i.prototype.valueBuilder=function(){var e=new o;return this.setAsParentTo(e),this._valueBuilders.push(e),e},i.prototype.build=function(){return{type:t.Property,key:this.keyBuilder().build(),content:n.getBuildersResults(this._valueBuilders)}},i.prototype.clone=function(){var e=new i;return e._keyBuilder=this._keyBuilder.clone(),e.setAsParentTo(e._keyBuilder),e._valueBuilders=n.cloneBuilders(this._valueBuilders,e),e},i.prototype.exit=function(){return this.parent},i}(n);e.PropertyViewPropertyBuilder=a;var s=function(e){function r(t){if("string"!=typeof t)throw new Error("id must be a string");e.call(this),this._id=t,this._title=null,this._titleIcon=null,this._contentBuilders=[],this._actions=[],this._renderAsHtml=!1,this._compileAsHtml=!1}return __extends(r,e),r.prototype.getId=function(){return this._id},r.prototype.renderAsHtml=function(e){return this._renderAsHtml=e,this},r.prototype.compileAsHtml=function(e){return this._compileAsHtml=e,this},r.prototype.title=function(e){return this._title=e,this},r.prototype.titleIcon=function(e){return this._titleIcon=e,this},r.prototype.action=function(e){return e&&this._actions.push(e),this},r.prototype.property=function(e,t){var n;n=t instanceof Array?t:null===t||void 0===t?[]:[t];var i=this.propertyBuilder();return i.keyBuilder().text(e),_.each(n,function(e){i.valueBuilder().text(e)}),this},r.prototype.message=function(e,t){var n=this.messageBuilder();return n.text(e),"string"==typeof t&&n.icon(t),this},r.prototype.info=function(e){return this.message(e,r.INFO_ICON_CLASS)},r.prototype.warning=function(e){return this.message(e,r.WARNING_ICON_CLASS)},r.prototype.error=function(e){return this.message(e,r.ERROR_ICON_CLASS)},r.prototype.propertyBuilder=function(){var e=new a;return this.setAsParentTo(e),this._contentBuilders.push(e),e},r.prototype.messageBuilder=function(){var e=new i;return this.setAsParentTo(e),this._contentBuilders.push(e),e},r.prototype.build=function(){return{type:t.Section,id:this._id,renderAsHtml:this._renderAsHtml,compileAsHtml:this._compileAsHtml,title:this._title,titleIcon:this._titleIcon,actions:this._actions,content:n.getBuildersResults(this._contentBuilders)}},r.prototype.clone=function(){var e=new r(this._id);return e._renderAsHtml=this._renderAsHtml,e._compileAsHtml=this._compileAsHtml,e._title=this._title,e._titleIcon=this._titleIcon,e._actions=this._actions.concat(),e._contentBuilders=n.cloneBuilders(this._contentBuilders,e),e},r.prototype.exit=function(){return this.parent},r.INFO_ICON_CLASS="vx-icon-info_normal",r.WARNING_ICON_CLASS="vx-icon-warn",r.ERROR_ICON_CLASS="vx-icon-error",r}(n);e.PropertyViewSectionBuilder=s;var c=function(e){function i(t){if("string"!=typeof t)throw new Error("id must be a string");e.call(this),this._id=t,this._title=null,this._contentBuilders=[]}return __extends(i,e),i.prototype.getId=function(){return this._id},i.prototype.title=function(e){return this._title=e,this},i.prototype.section=function(e){var t=this.getSection(e);return null===t&&(t=new s(e),this.setAsParentTo(t),this._contentBuilders.push(t)),t},i.prototype.getSection=function(e){var t=_.filter(this.getAllSections(),function(t){return t.getId()===e});return 1===t.length?t[0]:null},i.prototype.getAllSections=function(){return _.filter(this._contentBuilders,function(e){return e instanceof s})},i.prototype.cloneAndAddBuilder=function(e){if(!e)return this;if(!(e instanceof s))throw new Error("expected a PropertyViewSectionBuilder instance");if(null!==this.getSection(e.getId()))throw new Error("a PropertyViewSectionBuilder with the same id already exists");return e=e.clone(),this.setAsParentTo(e),this._contentBuilders.push(e),this},i.prototype.cloneAndAddBuilders=function(e){var t=this;return _.each(e,function(e){return t.cloneAndAddBuilder(e)}),this},i.prototype.build=function(){return{type:t.Category,id:this._id,title:this._title,content:n.getBuildersResults(this._contentBuilders)}},i.prototype.clone=function(){var e=new i(this._id);return e._title=this._title,e._contentBuilders=n.cloneBuilders(this._contentBuilders,e),e},i.prototype.exit=function(){return this.parent},i}(n);e.PropertyViewCategoryBuilder=c;var l=function(e){function t(t){if(e.call(this),this._i18nService=t,"object"!=typeof t||"function"!=typeof t.getString)throw new Error("expecting i18nService to be an object with a getString() method");this._categoryBuilders=[]}return __extends(t,e),t.prototype.category=function(e,t){var n=this.getCategory(e);null===n&&(n=new c(e),this.setAsParentTo(n),this._categoryBuilders.push(n));var i=_.findIndex(this._categoryBuilders,function(t){return t.getId()===e});if(this._categoryBuilders.splice(i,1),void 0===t)t=i;else if("number"!=typeof t||isNaN(t)||!isFinite(t)||t!==parseInt(t.toString(),10)||0>t||this._categoryBuilders.length<t)throw new Error("invalid insertionIndex");return this._categoryBuilders.splice(t,0,n),n},t.prototype.getCategory=function(e){var t=_.filter(this.getAllCategories(),function(t){return t.getId()===e});return 1===t.length?t[0]:null},t.prototype.getAllCategories=function(){return _.filter(this._categoryBuilders,function(e){return e instanceof c})},t.prototype.getSection=function(e,t){var n=this.getCategory(e);return null===n?null:n.getSection(t)},t.prototype.generateAllCategory=function(e){if(this.getCategory("all"))throw new Error('"All" category already added');return e=e||this._i18nService.getString("Common","vxPropertyView.allCategory"),this.category("all",0).title(e).cloneAndAddBuilders(_.flatten(_.map(this.getAllCategories(),function(e){return e.getAllSections()})))},t.prototype.build=function(){return{categories:n.getBuildersResults(this._categoryBuilders)}},t.prototype.clone=function(){var e=new t(this._i18nService);return e._categoryBuilders=n.cloneBuilders(this._categoryBuilders,e),e},t.prototype.exit=function(){return null},t}(n);e.PropertyViewBuilder=l,angular.module("com.vmware.platform.ui").constant("vxPropertyViewConstants",{PropertyViewModelItemType:t}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewBaseBuilder",function(){return n}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewMessageBuilder",function(){return i}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewPropertyKeyBuilder",function(){return r}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewPropertyValueBuilder",function(){return o}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewPropertyBuilder",function(){return a}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewSectionBuilder",function(){return s}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewCategoryBuilder",function(){return c}),angular.module("com.vmware.platform.ui").factory("vxPropertyViewBuilder",function(){return l})}(platform||(platform={}));var platform;!function(e){var t=function(){function t(e){this._i18nService=e}return t.prototype.createPropertyViewBuilder=function(){return new e.PropertyViewBuilder(this._i18nService)},t.$inject=["i18nService"],t}();e.PropertyViewService=t,angular.module("com.vmware.platform.ui").service("vxPropertyViewService",t)}(platform||(platform={})),function(){"use strict";function e(){var e={restrict:"A",scope:{objectIds:"@watchObjects",refreshCallback:"&refresh",refreshEventTypes:"@refreshEventTypes",delayRefreshOnObjectUpdatesBy:"@delayRefreshOnObjectUpdatesBy",liveRefreshEnabled:"@",liveRefreshProperties:"=?",hasObjectStateProperty:"@"},controller:t};return e}function t(e,t,n,i,r,o){function a(t,n){return e.objectIds&&f?!e.hasObjectStateProperty&&_.isEmpty(p)?!1:n.updates.some(s):!1}function s(t){var n=t.data,i=r.createVmomiUri(n.type,n.value,n.serverGuid);return e.hasObjectStateProperty&&"true"===e.hasObjectStateProperty?e.objectIds.indexOf(i)>=0&&t.metadata&&t.metadata.hasObjectStateProperty:e.objectIds.indexOf(i)>=0&&t.deltaProperties.some(function(e){return _.has(p,e)})}function c(e,t){m()}function l(t,n){var i=e.objectIds,r=null;return"CHANGE"===n.operationType&&(r=n.objectId),i&&i.indexOf(r)>=0}function u(t,i){var r=y?m:e.refreshCallback;e.delayRefreshOnObjectUpdatesBy>0?g=n(r,e.delayRefreshOnObjectUpdatesBy):r()}var d="object-details",f=e.liveRefreshEnabled?"true"===e.liveRefreshEnabled:!0,p={};f&&_.each(e.liveRefreshProperties,function(e){p[e]=!0});var m=_.debounce(function(){e.refreshCallback()},o.CHANGELOG_REFRESH_DELAY),g=null,v={},h=!e.refreshEventTypes||-1!==e.refreshEventTypes.indexOf(o.DATA_REFRESH_INVOCATION_EVENT),S=!e.refreshEventTypes||-1!==e.refreshEventTypes.indexOf(o.MODEL_CHANGED_EVENT),y=!e.refreshEventTypes||-1!==e.refreshEventTypes.indexOf(d);h&&(v[o.DATA_REFRESH_INVOCATION_EVENT]={handler:e.refreshCallback}),S&&(v[o.MODEL_CHANGED_EVENT]={handler:u,checker:l}),y&&(v[d]={handler:c,checker:a});var b=i.subscribeForDataUpdate(t,e.refreshCallback,v);e.$on("$destroy",function(){g&&(n.cancel(g),g=null),null!==b&&(i.unsubscribe(b),b=null)})}angular.module("com.vmware.platform.ui").directive("vxRefreshable",e),t.$inject=["$scope","$element","$timeout","visibilityAwareDataUpdateNotificationService","defaultUriSchemeUtil","vcH5ConstantsService"]}(),angular.module("com.vmware.platform.ui").directive("vxKendoResize",["vxZoneService",function(e){"use strict";return{restrict:"A",scope:!1,link:function(t,n,i){function r(){kendo.resize(n,!0)}var o=null;t.$watchCollection(i.vxKendoResize,function(){null===o&&e.runOutsideAngular(function(){o=setTimeout(function(){o=null,r()},1)})}),t.$on("$destroy",function(){null!==o&&e.runOutsideAngular(function(){clearTimeout(o),o=null})})}}}]),angular.module("com.vmware.platform.ui").directive("vxView",["navigation","extensionFrameworkConstants","$compile",function(e,t,n){var i="resources/ui/views/plugins/sandboxTemplate.html",r='<div class="fill-parent">  <div class="fill-parent">     <div class="fill-parent" ng-include="_vxViewNodeData.url"           vx-extension-view-id="{{_vxViewNodeData.node.$id}}"></div>  </div></div>',o=!1,a={restrict:"ECA",scope:!0,link:function(a,s,c){function l(){var t=!!c.vxView,n=null;if(t)n=a.$eval(c.vxView);else{var i=e.getTree();if(!i)return;var r=[];if(n=i.getNodeAtLevel(y.depth),y.depth>0)for(var s=i.getNodeAtLevel(y.depth-1);s;)r.push(s.$id),s=s.$parent;for(var l=[],d=y.parentNode;d;)l.push(d.$id),d=d.$parent;if(JSON.stringify(r)!==JSON.stringify(l))return}var f=e.getRoute(),p=e.getPreviousRoute();return n&&y.node&&y.node.$id===n.$id&&(t||!e.shouldReload(n,y.node,f,p))?(n!==y.node&&angular.extend(y.node,n),void(o?y.scope.$broadcast("viewDidUpdate",y.node.$id):(o=!0,y.scope.$broadcast("viewDidLoad",y.node.$id)))):void u(n)}function u(e){if(y.node){var t=m(y.node),n=y.node.$id;t?p(n,!1):f(n),y.node=null,y.scope=null}if(e){var i=e.$id;g[i]&&m(e)?angular.extend(g[i].node,e):d(e),p(i,!0),y.node=e,y.scope=g[i].scope}}function d(e){var t=e.contentSpec&&e.contentSpec.sandbox?i:e.$templateUrl,o=a.$new(!1);o._view=e,o._vxViewNodeData={url:t,depth:y.depth,node:e};var s=n(r)(o);g[e.$id]={node:e,scope:o,element:s}}function f(e){var t=g[e];t.scope.$destroy(),t.element.remove(),delete g[e]}function p(e,t){var n=g[e],i=n.element;t?(n.scope.$broadcast("viewDidLoad",e),i.appendTo(s),kendo.resize(i)):(n.scope.$broadcast("viewDidUnload",e),i.detach())}function m(e){var n=e.$viewRetentionPolicy||t.ViewRetentionPolicy.INHERIT;switch(n){case t.ViewRetentionPolicy.NONE:case t.ViewRetentionPolicy.DESCENDANTS_ONLY:return!1;case t.ViewRetentionPolicy.SELF_ONLY:case t.ViewRetentionPolicy.SELF_AND_DESCENDANTS:return!0;case t.ViewRetentionPolicy.INHERIT:for(;e.$parent;){var i=e.$parent.$viewRetentionPolicy||t.ViewRetentionPolicy.INHERIT;switch(i){case t.ViewRetentionPolicy.NONE:case t.ViewRetentionPolicy.SELF_ONLY:return!1;case t.ViewRetentionPolicy.DESCENDANTS_ONLY:case t.ViewRetentionPolicy.SELF_AND_DESCENDANTS:return!0;case t.ViewRetentionPolicy.INHERIT:e=e.$parent;break;default:return!1}}}return!1}var g={},v=a.$parent._vxViewNodeData,h=v?v.node:null,S=v?v.depth:null,y={depth:"number"==typeof S?S+1:0,parentNode:h||null};a.$on("$destroy",function(){Object.keys(g).forEach(function(e){var t=g[e];t.element.remove()})}),a.$on("vxRouteChangeSuccess",function(e,t,n,i){l()}),a.$on("viewDidUnload",function(){o&&(o=!1,y.scope.$broadcast("viewDidUnload",y.node.$id))}),c.vxView&&a.$watch(c.vxView,function(e,t){e===t||angular.equals(e,t)||l()}),l()}};return a}]),function(){"use strict";function e(){return{require:"ngModel",link:function(e,t,n,i){i.$render=function(){
t.val(i.$viewValue),t[0].select()}}}}angular.module("com.vmware.platform.ui").directive("vxFocusAndSelect",e)}(),function(){"use strict";function e(e,i){function r(){if(e._view&&e._view.contentSpec&&e._view.contentSpec.metadata&&e._view.contentSpec.metadata.propertyToRetrieve){var t=e._view.contentSpec.metadata.propertyToRetrieve;i.getProperties(s,[t]).then(function(e){if(e){var n=e[t]||[];if(a.propertyItems&&a.propertyItems.length>0){var i={};_.forEach(a.propertyItems,function(e){e&&e.expanded&&(i[e.label]=!0)}),_.forEach(n,function(e){i[e.label]===!0&&(e.expanded=!0)})}a.propertyItems=n}else a.propertyItems=[]})}}function o(){r(),a.settingsViewHeaderAccessor&&a.settingsViewHeaderAccessor.refresh&&a.settingsViewHeaderAccessor.refresh()}var a=this,s=e._route.objectId;a.refresh=o,a.title=e._view.name,a.watchForObjects=[s],a.settingsViewHeaderAccessor={},a.actions=[];for(var c=1;e._view.contentSpec.metadata[t(c)];)a.actions.push({actionUid:e._view.contentSpec.metadata[t(c)],customLabel:e._view.contentSpec.metadata[n(c)]}),c++;if(a.delayRefreshOnObjectUpdatesBy=0,e._view.contentSpec&&e._view.contentSpec.metadata){var l=e._view.contentSpec.metadata;a.cssClass=l.cssClass||"",l.liveRefreshProperties&&(a.liveRefreshProperties=_.map(l.liveRefreshProperties.split(","),function(e){return e.trim()})),l.delayRefreshOnObjectUpdatesBy&&!isNaN(Number(l.delayRefreshOnObjectUpdatesBy))&&(a.delayRefreshOnObjectUpdatesBy=Number(l.delayRefreshOnObjectUpdatesBy))}r()}function t(e){return"action"+e+"Id"}function n(e){return"action"+e+"CustomLabel"}angular.module("com.vmware.platform.ui").controller("GenericSettingsViewController",e),e.$inject=["$scope","dataService"]}(),function(){"use strict";function e(e){function t(){i&&0!==i.length&&e.getActions(n.objectIds,i).then(function(e){var t={};_.each(e,function(e){var n=e.action.uid,i=r[n];t[n]={label:i||e.action.label,actionId:e.action.uid,isEnabled:e.available,eval:e}});var o=[];_.each(i,function(e){t[e]&&o.push(t[e])}),n.actionsToRender=o})}var n=this;n.actionsToRender=[];var i=[],r={};n.$onInit=function(){n.actions&&n.actions.length&&_.each(n.actions,function(e){i.push(e.actionUid),r[e.actionUid]=e.customLabel}),n.accessor&&(n.accessor.refresh=function(){t()}),t()},n.invokeAction=function(t,i){var r={objectIds:n.objectIds,focusTarget:t.target};e.invokeAction(i.eval,r)}}angular.module("com.vmware.platform.ui").component("settingsViewHeader",{templateUrl:"resources/ui/components/settingsView/settingsViewHeader.html",controller:e,controllerAs:"ctrl",bindings:{headerTitle:"<",actions:"<",objectIds:"<",accessor:"<"}}),e.$inject=["actionsService"]}(),function(){function e(e,t){function n(){var n={};return n[t.sharesLevel.LOW]=e.getString("Common","SharesControl.SharesInfoLevel.Low"),n[t.sharesLevel.NORMAL]=e.getString("Common","SharesControl.SharesInfoLevel.Normal"),n[t.sharesLevel.HIGH]=e.getString("Common","SharesControl.SharesInfoLevel.High"),n[t.sharesLevel.CUSTOM]=e.getString("Common","SharesControl.SharesInfoLevel.Custom"),_.map(t.sharesLevel,function(e){return{id:e,label:n[e]}})}return{restrict:"A",templateUrl:"resources/ui/components/shares/vxSharesControl.html",scope:{sharesInfo:"=",defaultShares:"=",multiplier:"=",sharesAriaLabel:"<?",quantityCaretAriaLabel:"<?",quantityAriaLabel:"<?"},controller:["$scope",function(i){function r(){var e=1;i.sharesInfo.level===t.sharesLevel.LOW&&(e=.5),i.sharesInfo.level===t.sharesLevel.HIGH&&(e=2);var n=e*i.multiplier*i.defaultShares;return n=Math.min(n,i.getMaxCustomShares()),Math.floor(n)}var o=0,a=1e6;i.sharesOptions=n(),i.$watch("sharesInfo.level",function(){i.isSharesLevelCustom()||(i.sharesInfo.shares=r())}),i.isSharesLevelCustom=function(){return i.sharesInfo.level===t.sharesLevel.CUSTOM},i.getMinCustomShares=function(){return o},i.getMaxCustomShares=function(){return a},i.sharesRecommendations=[{value:i.getMinCustomShares(),name:e.getString("Common","SharesControl.MinCustomShares")},{value:i.getMaxCustomShares(),name:e.getString("Common","SharesControl.MaxCustomShares")}];var s=function(){return e.getString("Common","SharesControl.RangeError",i.getMinCustomShares(),i.getMaxCustomShares())};i.shareValueErrorMessages={min:s,max:s}}]}}angular.module("com.vmware.platform.ui").directive("vxSharesControl",e),e.$inject=["i18nService","sharesLevelsConstants"]}(),function(){"use strict";function e(){function e(e,t,n){var i=e.$watch(n.vxVuiSplitterExpandIf,function(e,n){if(!n&&e){var r=t.find("[kendo-splitter]").data("kendoSplitter"),o=r.element.find(".k-pane");o&&o.each(function(e,t){r.expand(t)}),i()}})}return{link:e}}angular.module("com.vmware.platform.ui").directive("vxVuiSplitterExpandIf",e)}(),function(){"use strict";function e(e){function t(t,n,i){var r=function(){var e=n.find("[kendo-splitter]").data("kendoSplitter");e&&e.resize(!0)};t.$watch(i.vxVuiSplitterResizeNotifier,function(t){"undefined"!=typeof i.noDelay?r():e(r,0)})}return{priority:-500,link:t}}angular.module("com.vmware.platform.ui").directive("vxVuiSplitterResizeNotifier",e),e.$inject=["$timeout"]}(),angular.module("com.vmware.platform.ui").controller("vxStackviewController",["$scope",function(e){var t=this;e.stackviewItems=[],e.commitProperties=function(){e._stackViewItemsChanged&&(t.analyzeStackviewItems(),delete e._stackViewItemsChanged)},this.registerStackviewItem=function(t){e.stackviewItems.indexOf(t)<0&&e.stackviewItems.push(t),e._stackViewItemsChanged=!0},this.unregisterStackviewItem=function(t){var n=e.stackviewItems.indexOf(t);n>-1&&(e.stackviewItems.splice(n,1),e._stackViewItemsChanged=!0)},this.analyzeStackviewItems=function(){var t,n,i,r,o,a,s,c=e.stackviewItems.length,l=e.stackviewItems;for(t=0;c>t;t++){for(s=l[t],a=null,s.children=null,r=parseInt(s.level,10),r=r?r:0,n=t-1;n>=0;n--)if(i=l[n],o=parseInt(i.level,10),o=o?o:0,r>o){a=i;break}a?(a.children||(a.children=[]),a.children.push(s),s.indent=a.indent+1,s.isVisible=!!a.isExpanded):(s.indent=0,s.isVisible=!0)}e.$watch(e.commitProperties)}}]),angular.module("com.vmware.platform.ui").directive("vxStackview",[function(){return{restrict:"EA",scope:{},template:'<table ng-transclude ng-class="{stackview: true}"></table>',replace:!0,transclude:!0,controller:"vxStackviewController",link:function(e,t,n,i){i.analyzeStackviewItems()}}}]),angular.module("com.vmware.platform.ui").directive("vxStackviewItem",[function(){return{require:"^vxStackview",restrict:"EA",scope:{level:"@"},template:'<tr ng-transclude ng-show="isVisible"></tr>',replace:!0,transclude:!0,controller:["$scope",function(e){this.registerLabelValue=function(t){t.stackviewItem=e}}],link:function(e,t,n,i){e.level=e.level||0,e.getItemCSS=function(t){var n="sv-indent"+e.indent;return n+=e.hasChildItems()?e.isExpanded?" sv-expanded":" sv-collapsed":" sv-expandCollapseNone"},e.hasChildItems=function(){return e.children&&e.children.length},e.expandCollapse=function(t){e.showHideChildren()},e.showHideChildren=function(){var t,n,i=e.children,r=i?i.length:0;for(t=0;r>t;t++)n=i[t],n.isVisible=e.isExpanded&&e.isVisible},e.onLevelChange=function(t){i.registerStackviewItem(e)},e.$watch("isExpanded",e.expandCollapse),e.$watch("isVisible",e.expandCollapse),e.$watch("level",e.onLevelChange),i.registerStackviewItem(e)},compile:function(e,t,n){return this.link}}}]),angular.module("com.vmware.platform.ui").directive("vxStackviewItemLabel",[function(){return{require:["^vxStackviewItem"],restrict:"EA",template:'<td class="sv-label" ng-click="toggle()"><div class="sv-hbox"><div ng-class="stackviewItem.getItemCSS()"></div><div ng-transclude></div></div></td>',replace:!0,transclude:!0,controller:["$scope",function(e){e.toggle=function(){e.stackviewItem.hasChildItems()&&(e.stackviewItem.isExpanded=!e.stackviewItem.isExpanded)}}],link:function(e,t,n,i){var r=i[0];r.registerLabelValue(e)}}}]),angular.module("com.vmware.platform.ui").directive("vxStackviewItemValue",[function(){return{require:"^vxStackviewItem",restrict:"EA",template:'<td class="sv-value"><div ng-transclude ng-show="!stackviewItem.isExpanded"></div></td>',replace:!0,transclude:!0,link:function(e,t,n,i){i.registerLabelValue(e)}}}]);var common_ui;!function(e){var t=function(){function e(e,t,n,i,r){this._currentVmProfileAssignment={vmHomeProfile:{id:"",label:""}},this._storageProfiles=e,t&&(this._vmRef=t),n&&(this.existingVmProfileAssignment=n),this.existingVmProfileAssignment&&this.assignExistingAssignments(),i&&(this.selectedProfile=i),e&&e.length&&(this.selectedProfile=e[0]),r&&(this._error=r,this._storageProfiles=[],this._currentVmProfileAssignment.vmHomeProfile.id=null)}return Object.defineProperty(e.prototype,"selectedProfile",{get:function(){return this._currentVmProfileAssignment.vmHomeProfile},set:function(e){if(!this.areProfilesEqual(this._currentVmProfileAssignment.vmHomeProfile,e)){if(e&&e.keepExistingProfileAssignments)return this._currentVmProfileAssignment.vmHomeProfile=e,void(this.existingVmProfileAssignment&&this.existingVmProfileAssignment.diskProfileAssignments&&(this._currentVmProfileAssignment.diskProfileAssignments=angular.copy(this.existingVmProfileAssignment.diskProfileAssignments)));for(var t=0;t<this._storageProfiles.length;t++)if(this.areProfilesEqual(this._storageProfiles[t],e)){this._currentVmProfileAssignment.vmHomeProfile=this._storageProfiles[t],this.assignProfileToDisks(this._storageProfiles[t]);break}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"existingHomeProfile",{get:function(){return this.existingVmProfileAssignment.vmHomeProfile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storageProfiles",{get:function(){return this._storageProfiles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),e.prototype.getDiskProfile=function(e){var t=this._currentVmProfileAssignment.diskProfileAssignments;return this.getDiskProfileInternal(e,t)},e.prototype.getExistingDiskProfile=function(e){var t=this.existingVmProfileAssignment.diskProfileAssignments;return this.getDiskProfileInternal(e,t)},e.prototype.getDiskProfileInternal=function(e,t){if(t)for(var n=0,i=t;n<i.length;n++){var r=i[n];if(r.diskId===e.toString())return r.profile}return null},e.prototype.assignExistingAssignments=function(){var e=this.existingVmProfileAssignment.diskProfileAssignments;e&&(this._currentVmProfileAssignment=angular.copy(this.existingVmProfileAssignment))},e.prototype.assignProfileToDisks=function(e){var t=this._currentVmProfileAssignment.diskProfileAssignments;if(t)for(var n=0;n<t.length;n++)t[n].profile=e},e.prototype.areProfilesEqual=function(e,t){return e===t?!0:e&&!t||t&&!e?!1:e.id===t.id&&e.label===t.label},e}();e.StorageProfilesData=t}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){}return e}();e.StorageSelectorData=t;var n=function(){function e(){}return e}();e.StorageSelectorInitialConfig=n}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){}return e}();e.StorageSelectorDialogData=t}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){}return e}();e.StorageSelectorDiskFormatSettings=t}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){}return e}();e.StorageSelectorModeSettings=t}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){}return e}();e.StorageSelectorState=t;var n=function(){function e(){}return e}();e.StorageSelectorBasicState=n;var i=function(){function e(){this.hiddenBaselineHints={}}return e}();e.StorageSelectorHeaderComponentState=i}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){}return e.prototype.getVmHomeProfile=function(){return this.vmHome&&this.vmHome.storageProfile},e.prototype.getVmHomeStorage=function(){return this.vmHome&&this.vmHome.storageObj},e.prototype.getReplicationGroupAssignments=function(){var e=[];return this.vmHome&&this.vmHome.replicationGroup&&e.push(this.vmHome.replicationGroup),_.forEach(this.vmDisks,function(t){t&&t.replicationGroup&&e.push(t.replicationGroup)}),e},e}();e.VmStorageConfig=t;var n=function(){function e(){}return e}();e.VmComponentStorageConfig=n}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){this.templateUrl="resources/ui/components/storageLocator/storageLocator.html",this.controller=i,this.bindings={storageLocatorItemsData:"=",podDisplayDisabled:"=?",drsDisabled:"=?",selectedItem:"=?",onSelectionChanged:"&",storageProfilesData:"=?",diskFormatSettings:"=?",datagridPreselect:"=?",disableDefaultPreselection:"<?",ensurePreselectionVisibility:"<?",vmIds:"<?",vmDestinationHosts:"<?",vmStorageConfigs:"<?",replicationGroupSettings:"<?",showEncryptionOptions:"<?",isEncryptionOptionsDisabled:"<?",encryptionOptionsDisabledReason:"<?"}}return e}();e.StorageLocator=t;var n=function(){function e(){}return e}();e.ReplicationGroupSettings=n;var i=function(){function e(e,t,n,i,r,o,a,s,c,l,u,d,f,p){this.$scope=e,this.$element=t,this.vuiConstants=n,this.i18nService=i,this.dataService=r,this.featureFlagsService=o,this.columnRenderersRegistry=a,this.defaultUriSchemeUtil=s,this.bytesFilter=c,this.storageProfileService=l,this.listUtil=u,this.diskFormatService=d,this.$timeout=f,this.spbmReplicationGroupInfoService=p,this._isInitalized=!1,this._preserveSelectedItem=!1,this.rgSignPostConfig={title:this.i18nService.getString("Common","help"),message:this.i18nService.getString("Common","StorageLocatorControl.protectionGroup.info")}}return Object.defineProperty(e.prototype,"drsDisabled",{get:function(){return this._drsDisabled},set:function(e){var t=this._drsDisabled;this._drsDisabled=e,t!==this._drsDisabled&&this._isInitalized&&this.populateStorageListItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedReplicationGroupItem",{get:function(){return this._selectedRgItem},set:function(e){this._selectedRgItem=e,e?this.replicationGroupSettings.selectedReplicationGroup=e.rgInfo:this.replicationGroupSettings.selectedReplicationGroup=null,this.updateReplicationGroupValidationError()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showReplicationGroupSelector",{get:function(){return this.replicationGroupSettings.showReplicationGroups&&this.replicationGroupItems&&this.replicationGroupItems.length>0},enumerable:!0,configurable:!0}),e.prototype.$onInit=function(){var e=this;this.compatibleStorageData=null,this._isInitalized=!0,this.diskFormatSettings=this.diskFormatSettings||{},this.replicationGroupSettings=this.replicationGroupSettings||new n,_.defaults(this.diskFormatSettings,{diskFormatSupported:!1,sameAsSourceSupported:!0,thickDiskFormatSupported:!0,selectedDiskFormat:null}),_.isUndefined(this.datagridPreselect)&&(this.datagridPreselect=!0),_.isUndefined(this.selectedItem)||(this._preserveSelectedItem=!0),this.encryptionOptionsLabel=this.encryptionOptionsDisabledReason?this.i18nService.getString("Common","storageSelector.encryptVmWithReason",this.encryptionOptionsDisabledReason):this.i18nService.getString("Common","storageSelector.encryptVm"),this.storageProfilesData&&(this.storageProfilesData.storageProfiles&&(this.lastNonEncryptionProfile=this.storageProfilesData.storageProfiles[0]),this.onStorageProfileChanged(this.storageProfilesData.selectedProfile)),this.refreshStorageProfiles(),this.i18n=this.i18nService.getString,this.rawItemDataMap={},this.updateDatagridOptions([],null),this.$scope.$watch(function(){return e.datagridOptions?e.datagridOptions.selectedItems:void 0},function(t,n){if(e.datagridOptions&&!(e.isEmptyArrayOrNull(t)&&e.isEmptyArrayOrNull(n)||t===n)){var i=e.selectedItem;if(e.disableDefaultPreselection||(e._preserveSelectedItem=!1),t&&t.length>0){var r=t[0];e.formattedItemToSelect=null,e.selectedItem=r?e.rawItemDataMap[r.id]:null}else e.selectedItem=null;var o=!e.areStorageLocatorDataItemsEqual(i,e.selectedItem);e.onStorageSelected(o)}}),this.$onInitContinued()},e.prototype.toggleEncryptVm=function(){this.isEncryptVmEnabled&&this.lastEncryptionProfile?this.storageProfilesData.selectedProfile=this.lastEncryptionProfile:!this.isEncryptVmEnabled&&this.lastNonEncryptionProfile&&(this.storageProfilesData.selectedProfile=this.lastNonEncryptionProfile),this.isProfileSetFromDropDown=!1,this.refreshStorageProfiles()},e.prototype.refreshStorageProfiles=function(){var e=this;this.storageProfilesData&&!_.isEmpty(this.storageProfilesData.storageProfiles)&&(this.filteredStorageProfiles=this.filterStorageProfiles(this.storageProfilesData.storageProfiles),_.isEmpty(this.filteredStorageProfiles)||this.storageProfilesData.selectedProfile&&_.some(this.filteredStorageProfiles,function(t){return t.id===e.storageProfilesData.selectedProfile.id})||(this.storageProfilesData.selectedProfile=this.filteredStorageProfiles[0]))},e.prototype.isEmptyArrayOrNull=function(e){return!e||e&&!e.length},e.prototype.onStorageProfileChanged=function(e){this.storageProfilesData.selectedProfile=e,this.isEncryptionOptionsDisabled||(this.isEncryptVmEnabled=this.storageProfileService.isEncryptionStorageProfile(e)),this.isProfileSetFromDropDown=!0,this.isEncryptVmEnabled?this.lastEncryptionProfile=e:this.lastNonEncryptionProfile=e,this.afterProfileOrStorageChanged()},e.prototype.notifySelectionChanged=function(e){this.onSelectionChanged&&this.onSelectionChanged({selectedItem:e})},e.prototype.onStorageSelected=function(e){var t=this.datagridOptions.selectedItems&&this.datagridOptions.selectedItems.length>0?this.datagridOptions.selectedItems[0]:null;if(this.notifySelectionChanged(t),t){var n=void 0,i=void 0;t.isDatastore?(n=this.rawItemDataMap[t.id].type,i=this.rawItemDataMap[t.id].vStorageSupported):t&&t.childDatastoreDataItems&&t.childDatastoreDataItems.length>0&&(n=t.childDatastoreDataItems[0].type,i=t.childDatastoreDataItems[0].vStorageSupported),e&&(this.diskFormatSettings.selectedDiskFormat=null),this.diskFormats=this.diskFormatService.getAvailableDiskFormats(n,i,this.diskFormatSettings.sameAsSourceSupported,this.diskFormatSettings.thickDiskFormatSupported)}else this.diskFormats=[];this.updateReplicationGroupItems(),this.afterProfileOrStorageChanged()},e.prototype.afterProfileOrStorageChanged=function(){this.overrideDiskFormatsIfNeeded()},e.prototype.isStorageSelected=function(){if(!this.datagridOptions)return!1;var e=this.datagridOptions.selectedItems;return e&&e.length>0},e.prototype.overrideDiskFormatsIfNeeded=function(){if(!this.isStorageSelected()&&this.diskFormatSettings.drsPlacement){var e=this.storageProfilesData.selectedProfile;this.diskFormats=this.diskFormatService.getDrsDiskFormats(e)}},e.prototype.getSelectItemCompatibilityResult=function(){var e=this.datagridOptions.selectedItems&&this.datagridOptions.selectedItems.length>0?this.datagridOptions.selectedItems[0]:null;if(e&&this.compatibleStorageData&&this.rawItemDataMap[e.id]&&this.rawItemDataMap[e.id].storageRef){var t=this.rawItemDataMap[e.id].storageRef.value;return _.find(this.compatibleStorageData.compatibilityResults,function(e){return e.hub&&e.hub.hubId===t})||null}return null},e.prototype.getAvailableReplicationGroups=function(){var e=this,t=this.getSelectItemCompatibilityResult();if(!t||!this.compatibleStorageData)return[];var n=[];return _.forEach(this.vmDestinationHosts,function(t){var i=e.defaultUriSchemeUtil.getManagedObjectReference(t);i&&"HostSystem"===i.type&&n.push(i)}),this.spbmReplicationGroupInfoService.extractReplicationGroupInfos(t,n,this.compatibleStorageData.replicationGroupInfo)},e.prototype.updateReplicationGroupItems=function(){var e=this,t=this.getAvailableReplicationGroups();if(t){this.replicationGroupItems=t.map(function(t){return{label:e.spbmReplicationGroupInfoService.getReplicationGroupName(t),rgInfo:t}});var n=this.replicationGroupSettings&&this.replicationGroupSettings.selectedReplicationGroup;n?this.selectedReplicationGroupItem=_.find(this.replicationGroupItems,function(t){return e.spbmReplicationGroupInfoService.equalReplicationGroupInfos(t.rgInfo,n)})||null:this.selectedReplicationGroupItem=_.find(this.replicationGroupItems,function(t){return e.spbmReplicationGroupInfoService.isAutoReplicationGroup(t.rgInfo)})||null}else this.replicationGroupItems=[],this.selectedReplicationGroupItem=null},e.prototype.updateDatagridOptions=function(e,t,n){this.formattedItemToSelect=n,this.datagridOptions={columnDefs:this.getColumnDefs(),data:e,height:"100%",selectionMode:this.vuiConstants.grid.selectionMode.SINGLE,searchable:!1,resizable:!0,selectedItems:[],groupOrder:t,sortOrder:[{dir:"asc",field:"initialIndex"}],pageConfig:{hidePager:!0}}},e.prototype.$onInitContinued=function(){var e=this;this.requestCompatibleStorage()["finally"](function(){e.populateStorageListItems()}),this.$scope.$watch(function(){return e.storageLocatorItemsData},function(t,n){t!==n&&e.requestCompatibleStorage()["finally"](function(){e.populateStorageListItems()})}),this.storageProfilesData&&this.$scope.$watch(function(){return e.storageProfilesData.selectedProfile},function(t,n){t!==n&&e.requestCompatibleStorage()["finally"](function(){e.populateStorageListItems()})}),this.preselectComparator=function(t){var n;return e.formattedItemToSelect?n=e.formattedItemToSelect.id:e.selectedItem&&(n=e.defaultUriSchemeUtil.getVsphereObjectId(e.selectedItem.storageRef)),n&&t&&n===t.id}},e.prototype.populateStorageListItems=function(){var e=this,t=[];this.drsCheckboxVisible=!1;var n={};this.storageLocatorItemsData&&this.storageLocatorItemsData.storagePodItems&&_.forEach(this.storageLocatorItemsData.storagePodItems,function(i){var r=e.defaultUriSchemeUtil.getVsphereObjectId(i.storageRef);if(e.rawItemDataMap[r]=i,i.storageRef.isSdrsEnabled=i.drsEnabled,i.drsEnabled===!0&&(e.drsCheckboxVisible=!0,!e.drsDisabled&&!e.podDisplayDisabled)){var o=e.buildStoragePodListItem(i);t.push(o),n[r]=o}}),this.storageLocatorItemsData.datastoreItems&&_.forEach(this.storageLocatorItemsData.datastoreItems,function(i){if(!e.isPmemDatastoreItem(i)){var r=e.defaultUriSchemeUtil.getVsphereObjectId(i.storageRef);e.rawItemDataMap[r]=i;var o;if(i.parentStoragePod){var a=e.defaultUriSchemeUtil.getVsphereObjectId(i.parentStoragePod);o=e.rawItemDataMap[a],i.parentStoragePod.isSdrsEnabled=o.drsEnabled,n[a]&&n[a].childDatastoreDataItems.push(i)}e.isDatastoreItemVisible(o)&&t.push(e.buildDatastoreListItem(i,o))}}),_.each(t,function(e,t){e.initialIndex=t});var i=null,r=null;if(this.compatibleStorageData&&this.compatibleStorageData.compatibleStorage){var o=this.i18nService.getString("Common","StorageLocatorControl.Compatible"),a=this.i18nService.getString("Common","StorageLocatorControl.Incompatible");_.forEach(t,function(t){t.compatibility=e.compatibleStorageData.compatibleStorage[t.id]===!0?o:a,e.disableDefaultPreselection||r||t.compatibility!==o||t.isDatastore&&t.hasAllocateSpacePrivilege!==!0||(r=t)}),this.disableDefaultPreselection||r||(r=_.find(t,function(e){return e.compatibility===o})||r);var s="asc";o>a&&(s="desc"),i=[{field:"compatibility",dir:s}]}if(!this.disableDefaultPreselection&&!r&&t&&t.length){var c=_.find(t,function(e){return!e.isDatastore||e.hasAllocateSpacePrivilege});r=c||t[0]}if(this._preserveSelectedItem&&this.selectedItem){var l=_.find(t,function(t){return e.defaultUriSchemeUtil.getVsphereObjectId(e.selectedItem.storageRef)===t.id});l?r=l:this.selectedItem=null}this.updateDatagridOptions(t,i,r),this.ensurePreselectionVisibility&&this.scrollToPreselection()},e.prototype.requestCompatibleStorage=function(){var e=this;this.datagridOptions=null;var t=this.selectedItem;this.selectedItem=null,this.compatibleStorageData=null;var n;return n=this.storageProfilesData&&this.storageProfilesData.selectedProfile&&this.storageProfilesData.selectedProfile.keepExistingProfileAssignments&&this.vmIds&&this.vmStorageConfigs&&this.vmStorageConfigs.some(this.isVmStorageAssignedToNonDefaultStorageProfile)?this.storageProfileService.createCompatibleStorageQuerySpecForVms(this.vmIds,this.getDatastoreRefs(),this.getDrsEnabledStoragePodRefs()):this.storageProfileService.createCompatibleStorageQuerySpecForProfile(this.storageProfilesData,this.getDatastoreRefs(),this.getDrsEnabledStoragePodRefs()),this.storageProfileService.requestCompatibleStorage(n).then(function(n){return e.selectedItem=t,e.compatibleStorageData=n,e.compatibleStorageData&&(e.compatibleStorageData.compatibleStorage={},_.forEach(e.compatibleStorageData.datastoreRefs,function(t){var n=e.defaultUriSchemeUtil.getVsphereObjectId(t);e.compatibleStorageData.compatibleStorage[n]=!0}),_.forEach(e.compatibleStorageData.storagePodsRefs,function(t){var n=e.defaultUriSchemeUtil.getVsphereObjectId(t);e.compatibleStorageData.compatibleStorage[n]=!0})),n})},e.prototype.updateReplicationGroupValidationError=function(){if(this.isStorageSelected()&&this.shouldShowAdvancedModeOrChangePolicyWarning()&&this.hasCurrentDatastoreMatchingReplicationGroups()){var e=this.i18nService.getString("Common","storageSelector.configurePerDisk");this.replicationGroupSettings.replicationGroupValidationError=this.i18nService.getString("Common","DiskLocatorControl.ReplicationGroup.advancedModeOrAnotherPolicyNeededError",e)}else this.showReplicationGroupSelector&&!this.replicationGroupSettings.selectedReplicationGroup?this.replicationGroupSettings.replicationGroupValidationError=this.i18nService.getString("Common","DiskLocatorControl.ReplicationGroup.noSelectionError"):this.replicationGroupSettings.replicationGroupValidationError=null},e.prototype.shouldShowAdvancedModeOrChangePolicyWarning=function(){return this.storageProfilesData&&this.storageProfilesData.selectedProfile&&this.storageProfilesData.selectedProfile.keepExistingProfileAssignments&&this.replicationGroupSettings.showReplicationGroups&&(!this.replicationGroupItems||0===this.replicationGroupItems.length)},e.prototype.hasCurrentDatastoreMatchingReplicationGroups=function(){var e=this,t=(this.compatibleStorageData||{}).datastoresWithReplicationGroupsRefs;return t&&t.length>0&&t.some(function(t){return t.value===e.selectedItem.storageRef.value})},e.prototype.getDatastoreRefs=function(){return _.pluck(this.storageLocatorItemsData.datastoreItems,"storageRef")},e.prototype.getDrsEnabledStoragePodRefs=function(){var e=[];return this.storageLocatorItemsData&&this.storageLocatorItemsData.storagePodItems&&_.forEach(this.storageLocatorItemsData.storagePodItems,function(t){t.drsEnabled===!0&&e.push(t.storageRef)}),e},e.prototype.isDatastoreItemVisible=function(e){return this.drsDisabled||!e||e.drsEnabled===!1||this.podDisplayDisabled},e.prototype.isVmStorageAssignedToNonDefaultStorageProfile=function(e){return[e.vmHome].concat(e.vmDisks).filter(function(e){return e.storageProfile}).some(function(e){return"defaultId"!==e.storageProfile.id})},e.prototype.scrollToPreselection=function(){var e=this;this.$timeout(function(){if(e.$element){var t=e.$element.find("#storageLocatorGrid div[kendo-grid]").data("kendoGrid");if(t){var n=t.wrapper.find(".k-grid-content").data("kendoVirtualScrollable");if(n&&t.select().length){var i=t.select().position().top;n.verticalScrollbar.animate({scrollTop:i},400)}}}},0)},e.prototype.buildStoragePodListItem=function(e){return{id:this.defaultUriSchemeUtil.getVsphereObjectId(e.storageRef),isDatastore:!1,name:e.name,childDatastoreDataItems:[],icon:"vsphere-icon-datastore-cluster",capacity:e.capacity,formattedCapacity:this.bytesFilter(e.capacity),provisionedSpace:e.provisionedSpace,formattedProvisionedSpace:this.bytesFilter(e.provisionedSpace),freeSpace:e.freeSpace,formattedFreeSpace:this.bytesFilter(e.freeSpace),formattedType:"",storageDRS:e.drsEnabled?this.i18nService.getString("Common","StorageListItem.sdrsEnabled"):this.i18nService.getString("Common","StorageListItem.sdrsDisabled"),thinProvisioning:this.formatThinProvisioningSupported(e),access:this.formatMultipleHostAccess(e),hardwareAcceleration:e.hardwareAcceleration,storagePodName:""}},e.prototype.buildDatastoreListItem=function(e,t){return{id:this.defaultUriSchemeUtil.getVsphereObjectId(e.storageRef),isDatastore:!0,name:e.name,icon:"vsphere-icon-datastore",capacity:e.capacity,formattedCapacity:this.bytesFilter(e.capacity),provisionedSpace:e.provisionedSpace,formattedProvisionedSpace:this.bytesFilter(e.provisionedSpace),freeSpace:e.freeSpace,formattedFreeSpace:this.bytesFilter(e.freeSpace),formattedType:e.formattedType,storageDRS:"",thinProvisioning:this.formatThinProvisioningSupported(e),access:this.formatMultipleHostAccess(e),hardwareAcceleration:e.hardwareAcceleration,parentPodName:t?t.name:"",parentPodIcon:t?"vsphere-icon-datastore-cluster":null,hasAllocateSpacePrivilege:e.hasAllocateSpacePrivilege}},e.prototype.formatMultipleHostAccess=function(e){return e.multipleHostAccess?this.i18nService.getString("Common","StorageListItem.MultipleHostAccess"):this.i18nService.getString("Common","StorageListItem.SingleHostAccess")},e.prototype.formatThinProvisioningSupported=function(e){return e.thinProvisioningSupported?this.i18nService.getString("Common","StorageListItem.ThinProvisioningSupported"):this.i18nService.getString("Common","StorageListItem.ThinProvisioningNotSupported")},e.prototype.getColumnDefs=function(){var e=this,t=[{field:"name",displayName:this.i18nService.getString("Common","StorageLocatorControl.NameColumnHeader"),width:200,template:this.iconNameRendererFactory("name","icon")},{field:"compatibility",displayName:this.i18nService.getString("Common","StorageLocatorControl.CompatibilityColumnHeader"),width:110,visible:!1,template:function(e){return e.compatibility}},{field:"formattedCapacity",displayName:this.i18nService.getString("Common","StorageLocatorControl.CapacityColumnHeader"),width:110,sortable:function(t,n){return e.listUtil.compareNumericValues(t,n,"capacity")},template:function(e){return e.formattedCapacity}},{field:"formattedProvisionedSpace",displayName:this.i18nService.getString("Common","StorageLocatorControl.ProvisionedSpaceColumnHeader"),width:110,sortable:function(t,n){return e.listUtil.compareNumericValues(t,n,"provisionedSpace")},template:function(e){return e.formattedProvisionedSpace}},{field:"formattedFreeSpace",displayName:this.i18nService.getString("Common","StorageLocatorControl.FreeSpaceColumnHeader"),width:110,sortable:function(t,n){return e.listUtil.compareNumericValues(t,n,"freeSpace")},template:function(e){return e.formattedFreeSpace}},{field:"formattedType",displayName:this.i18nService.getString("Common","StorageLocatorControl.TypeColumnHeader"),width:110,template:function(e){return e.formattedType}},{field:"storagePodName",displayName:this.i18nService.getString("Common","StorageLocatorControl.StoragePodColumnHeader"),width:200,template:this.iconNameRendererFactory("parentPodName","parentPodIcon")},{field:"storageDRS",displayName:this.i18nService.getString("Common","StorageLocatorControl.StorageDrsColumnHeader"),width:110,template:function(e){return e.storageDRS}},{field:"thinProvisioning",displayName:this.i18nService.getString("Common","StorageLocatorControl.ThinProvisioningColumnHeader"),width:110,template:function(e){return e.thinProvisioning}},{field:"access",displayName:this.i18nService.getString("Common","StorageLocatorControl.AccessColumnHeader"),width:110,template:function(e){return e.access}},{field:"hardwareAcceleration",displayName:this.i18nService.getString("Common","StorageLocatorControl.HardwareAccelerationColumnHeader"),width:110,template:function(e){return e.hardwareAcceleration}}];return t},e.prototype.iconNameRendererFactory=function(e,t){var n=this;return function(i){var r=i[t],o=n.columnRenderersRegistry.getColumnRenderer("object-link");return o([void 0,e,r],i)}},e.prototype.areStorageLocatorDataItemsEqual=function(e,t){return e||t?e&&t?this.defaultUriSchemeUtil.getVsphereObjectId(e.storageRef)===this.defaultUriSchemeUtil.getVsphereObjectId(t.storageRef):!1:!0},e.prototype.isPmemDatastoreItem=function(e){return"PMEM"===e.type},e.prototype.filterStorageProfiles=function(e){var t=this,n=!1,i=_.reduce(e,function(e,i){var r=t.storageProfileService.isEncryptionStorageProfile(i);return n=n||r,t.isEncryptVmEnabled&&!r?e:t.storageProfileService.isPmemStorageProfile(i)?e:(e.push(i),
e)},[]);return this.hasEncryptionPolicies=n,i},e.$inject=["$scope","$element","vuiConstants","i18nService","dataService","featureFlagsService","columnRenderersRegistry","defaultUriSchemeUtil","bytesFilter","storageProfileService","listUtil","diskFormatService","$timeout","spbmReplicationGroupInfoService"],e}();angular.module("com.vmware.platform.ui").component("storageLocator",new t)}(common_ui||(common_ui={}));var common_ui;!function(e){var t=e.StorageSelectorDialogData,n=function(){function e(){}return e}();e.StorageLocatorAdvancedModeApi=n;var i=function(){function e(){this.template='<div vui-datagrid="$ctrl.datagridOptions" class="flex-grid" ng-if="$ctrl.datagridOptions"></div>',this.controller=r,this.bindings={onSelectionChanged:"&",vmStorageConfig:"<",storageProfilesData:"<?",diskFormatSettings:"<?",storageLocatorItemsData:"<",recentlySelectedStorageItems:"<",controlApi:"<",podDisplayDisabled:"<?",disableDefaultPreselection:"<",showReplicationGroups:"<?",isEncryptionOptionsDisabled:"<?",isVmtxWorkflow:"<?",isDiskGroupsAvailable:"<?"}}return e}();e.StorageLocatorAdvancedMode=i;var r=function(){function e(e,t,n,i,r,o,a,s,c){this.i18nService=e,this.diskFormatService=t,this.defaultUriSchemeUtil=n,this.$q=i,this.storageSelectorService=r,this.spbmReplicationGroupInfoService=o,this.$element=a,this.$timeout=s,this.storageProfileService=c,this.originalStorageItems={}}return e.prototype.$onInit=function(){this.recentlySelectedStorageItems=this.recentlySelectedStorageItems||[],this.controlApi&&(this.controlApi.validateSelection=this.validateSelection.bind(this)),this.buildDatagridOptions()},e.prototype.validateSelection=function(){var e=!!_.find(this.vmStorageConfig,function(e){return e.vmHome.storageObj?!!_.find(e.vmDisks,function(e){return!e.storageObj}):!0});return e?this.i18nService.getString("Common","storageSelector.incompleteSelection"):null},e.prototype.getAvailableDiskFormatsForStorageObj=function(e){var t,n,i=this;if("Datastore"!==e.storageRef.type){var r=this.defaultUriSchemeUtil.getVsphereObjectId(e.storageRef),o=_.find(this.storageLocatorItemsData.datastoreItems,function(e){return e.parentStoragePod&&i.defaultUriSchemeUtil.getVsphereObjectId(e.parentStoragePod)===r});if(!o)return[];t=o.type,n=o.vStorageSupported}else t=e.type,n=e.vStorageSupported;return this.diskFormatService.getAvailableDiskFormats(t,n,this.diskFormatSettings.sameAsSourceSupported,this.diskFormatSettings.thickDiskFormatSupported)},e.prototype.suggestProfileForVmComponent=function(e){return this.storageProfileService.isPmemStorageProfile(e.storageProfile)?this.storageProfileService.getDefaultProfile():e.storageProfile},e.prototype.triggerOnSelectionChange=function(){this.onSelectionChanged&&this.onSelectionChanged()},e.prototype.saveOriginalStorageItems=function(){var e=this;this.originalStorageItems={},_.forEach(this.vmStorageConfig,function(t){e.originalStorageItems[t.vmId]=t.vmHome.storageObj,_.forEach(t.vmDisks,function(n){e.originalStorageItems[t.vmId+":"+n.key]=n.storageObj})})},e.prototype.buildDatagridOptions=function(){this.saveOriginalStorageItems(),this.datagridOptions={height:"100%",resizable:!0,reorderable:!0,data:this.buildStorageLocatorItems(),columnDefs:this.getColumnDefs(),searchable:!1,selectedItems:[]}},e.prototype.buildStorageLocatorItems=function(){var e=this,t=[];return _.forEach(this.vmStorageConfig,function(n){n.vmHome&&!e.isDiskGroupsAvailable&&t.push(e.buildStorageLocatorItem(n,!0,n.vmHome)),_.forEach(n.vmDisks,function(i){t.push(e.buildStorageLocatorItem(n,!1,i))})}),t},e.prototype.buildStorageLocatorItem=function(e,t,n){var i=new o;return i.uniqueId=(t?e.vmId:e.vmId+n.key).replace(/\:/g,"_"),i._isVmHome=t,i.vmName=e.vmName,i._vmComponent=n,i._destinationHost=e.destinationHostId,i.getAvailableDiskFormatsForStorageObj=this.getAvailableDiskFormatsForStorageObj.bind(this),i.suggestProfileForVmComponent=this.suggestProfileForVmComponent.bind(this),i.onSelectionChange=this.triggerOnSelectionChange.bind(this),i.i18nService=this.i18nService,i.spbmReplicationGroupInfoService=this.spbmReplicationGroupInfoService,i.browseForStorageObj=this.browseForStorageObj.bind(this,t),i.onRecentItemsChange=this.onRecentItemsChange.bind(this),i.storageLocatorItemsData=this.storageLocatorItemsData,i._recentlySelectedStorageItems=this.recentlySelectedStorageItems,i.originalStorageItem=t?this.originalStorageItems[e.vmId]:this.originalStorageItems[e.vmId+":"+n.key],i.init(),i.diskGroupName=n.diskGroupName,i},e.prototype.onRecentItemsChange=function(e){var t=this;_.forEach(this.datagridOptions.data,function(e){return e.updateStorageItems()}),this.datagridOptions.data=this.buildStorageLocatorItems(),e&&this.$timeout(function(){var n=t.$element.find("#"+e);n&&n[0]&&n[0].focus()},1)},e.prototype.browseForStorageObj=function(e,n,i){var r=new t;n.storageObj&&!n.storageObj.parentStoragePod&&(r.storageObj=n.storageObj),r.storageProfile=n.storageProfile,r.replicationGroup=n.replicationGroup;var o=this.isVmComponentASystemDiskGroup(n);return this.storageSelectorService.browseForStorage(this.storageLocatorItemsData,this.storageProfilesData,r,this.podDisplayDisabled,this.disableDefaultPreselection,i,this.showReplicationGroups,this.isEncryptionOptionsDisabled,e,o)},e.prototype.getColumnDefs=function(){var e=this.i18nService.getString("Common","DiskLocatorControl.Browse"),t=this.isDiskGroupsAvailable?this.isDiskGroupsAvailable:!1,n=this.isVmtxWorkflow?this.isVmtxWorkflow:!1,i=[{displayName:this.i18nService.getString("Common","DiskLocatorControl.Vm"),width:180,field:"vmName",type:"string",sortable:!0,visible:!t},{displayName:this.i18nService.getString("ProvisioningUiLib","DiskGroupLocator.diskGroup"),width:180,field:"diskGroupName",type:"string",sortable:!0,visible:t},{displayName:this.i18nService.getString("Common","DiskLocatorControl.File"),width:180,field:"fileName",type:"string",sortable:!0,visible:!t},{displayName:this.i18nService.getString("Common","DiskLocatorControl.Storage"),width:180,template:function(t){return'\n                        <div class="select">\n                          <select id="{{dataItem.uniqueId}}-storage-selector"\n                                  aria-label="{{dataItem.i18nService.getString(\'Common\', \'DiskLocatorControl.Storage\')}}"\n                                  ng-model="dataItem.storageItemId"\n                                  ng-change="dataItem.setStorageItemId(dataItem.storageItemId)"\n                                  ng-click="dataItem.onDatastoreComboClick($event)"\n                                  ng-options="option.id as option.label for option in dataItem.storageItems">\n                               <option value="" disabled style="display: none; visibility:hidden">'+e+"</option>\n                           </select>\n                        </div>"}},{displayName:this.i18nService.getString("Common","DiskLocatorControl.DiskFormat"),width:200,visible:!n,template:function(e){return'\n                        <div class="select" >\n                          <select ng-model="dataItem.diskFormat"\n                                  aria-label="{{dataItem.i18nService.getString(\'Common\', \'DiskLocatorControl.DiskFormat\')}}"\n                                  ng-change="dataItem.updateDiskFormatVmComponent(dataItem.diskFormat)"\n                                  ng-options="diskFormat as diskFormat.name for diskFormat in dataItem.availableDiskFormats track by diskFormat.type"\n                                  ng-disabled="!dataItem.isDiskFormatEnabled">\n                        </div>'}},{displayName:this.i18nService.getString("Common","DiskLocatorControl.VmStorageProfile"),width:200,field:"storageProfileLabel",type:"string",visible:!n,template:function(e){return"<div>{{dataItem.storageProfileLabel}}</div>"},sortable:!0}];return!this.showReplicationGroups||t||n||i.push({displayName:this.i18nService.getString("Common","DiskLocatorControl.ReplicationGroup"),width:200,field:"replicationGroupLabel",type:"string",template:function(e){return"<span>{{dataItem.replicationGroupLabel}}</span>"},sortable:!0}),i},e.prototype.isVmComponentASystemDiskGroup=function(t){return t&&t.key===e.SYSTEM_DISK_GROUP_KEY},e.VVOL_DS_TYPE="VVOL",e.SYSTEM_DISK_GROUP_KEY="ngcArtificialSystemDiskGroup",e.$inject=["i18nService","diskFormatService","defaultUriSchemeUtil","$q","storageSelectorService","spbmReplicationGroupInfoService","$element","$timeout","storageProfileService"],e}(),o=function(){function e(){this.MAX_STORAGE_ITEMS_OPTIONS=10,this.BROWSER_OPTION_ID="browse",this.NO_SELECTION_OPTION_ID=null}return Object.defineProperty(e.prototype,"fileName",{get:function(){return this._vmComponent.name},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.storageItemId=this._vmComponent.storageObj?this._vmComponent.storageObj.storageRef.value:this.NO_SELECTION_OPTION_ID,this.updateStorageItems(),this.updateAvailableDiskFormats(),this.updateStorageProfileLabel(),this.updateReplicationGroupLabel()},e.prototype.updateStorageProfileLabel=function(){this._vmComponent.storageProfile?this.storageProfileLabel=this._vmComponent.storageProfile.label:this.storageProfileLabel=""},e.prototype.updateReplicationGroupLabel=function(){this._vmComponent.replicationGroup?this.replicationGroupLabel=this.spbmReplicationGroupInfoService.getReplicationGroupName(this._vmComponent.replicationGroup):this.replicationGroupLabel=""},e.prototype.updateDiskFormatVmComponent=function(e){e&&!e.type&&(e=null),e!==this._vmComponent.diskFormat&&(this._vmComponent.diskFormat=e?{name:e.name,type:e.type}:null,this.onSelectionChange())},e.prototype.updateAvailableDiskFormats=function(){var e=this;this._isVmHome||!this._vmComponent.storageObj?this.availableDiskFormats=[]:this.availableDiskFormats=this.getAvailableDiskFormatsForStorageObj(this._vmComponent.storageObj),this.availableDiskFormats&&0!==this.availableDiskFormats.length||(this.availableDiskFormats=[{type:null,name:this.i18nService.getString("Common","DiskLocatorControl.na")}]),this._vmComponent.diskFormat&&_.find(this.availableDiskFormats,function(t){return t.type===e._vmComponent.diskFormat.type})?this.diskFormat=this._vmComponent.diskFormat:this.diskFormat=this.availableDiskFormats[0],this.isDiskFormatEnabled=!this._isVmHome&&this.availableDiskFormats.length>1,this.updateDiskFormatVmComponent(this.diskFormat)},e.prototype.changeStorageSelection=function(e){this._vmComponent.storageObj=e,e&&(this.storageItemId=e.storageRef.value,this.updateAvailableDiskFormats()),this.onSelectionChange()},e.prototype.restoreLastStorageSelection=function(){this._vmComponent.storageObj?this.storageItemId=this._vmComponent.storageObj.storageRef.value:this.storageItemId=this.NO_SELECTION_OPTION_ID},e.prototype.onDatastoreComboClick=function(e){this.storageItems&&1===this.storageItems.length&&(e&&e.target&&e.target.blur&&e.target.blur(),this.setStorageItemId(this.storageItemId))},e.prototype.addNewRecentItem=function(e){return e&&e.type===r.VVOL_DS_TYPE?!1:e&&!_.find(this._recentlySelectedStorageItems,function(t){return t.storageRef.value===e.storageRef.value})?(this._recentlySelectedStorageItems.unshift(e),this._recentlySelectedStorageItems.length>this.MAX_STORAGE_ITEMS_OPTIONS&&this._recentlySelectedStorageItems.pop(),!0):!1},e.prototype.setStorageItemId=function(e){var t=this;if(e===this.BROWSER_OPTION_ID||e===this.NO_SELECTION_OPTION_ID)this.browseForStorageObj(this._vmComponent,this._destinationHost).then(function(e){e?(t._vmComponent.storageProfile=e.storageProfile,t.updateStorageProfileLabel(),t._vmComponent.replicationGroup=e.replicationGroup,t.updateReplicationGroupLabel(),t.changeStorageSelection(e.storageObj),t.updateStorageItems(),t.addNewRecentItem(e.storageObj)&&t.onRecentItemsChange(t.uniqueId+"-storage-selector")):t.restoreLastStorageSelection()},function(){t.restoreLastStorageSelection()});else{var n=_.find(this.storageLocatorItemsData.datastoreItems,function(t){return t.storageRef.value===e});n||(n=_.find(this.storageLocatorItemsData.storagePodItems,function(t){return t.storageRef.value===e})),this._vmComponent.replicationGroup&&(this._vmComponent.replicationGroup=null,this.updateReplicationGroupLabel()),this._vmComponent.storageProfile=this.suggestProfileForVmComponent(this._vmComponent),this.updateStorageProfileLabel(),this.changeStorageSelection(n),this.updateStorageItems()}},e.prototype.buildStorageItemOption=function(e){return{id:e.storageRef.value,label:e.name}},e.prototype.addStorageItemOptionToList=function(e,t){e.length<this.MAX_STORAGE_ITEMS_OPTIONS&&!_.find(e,function(e){return e.id===t.id})&&e.push(t)},e.prototype.updateStorageItems=function(){var e=this,t=[];this._vmComponent.storageObj&&this.addStorageItemOptionToList(t,this.buildStorageItemOption(this._vmComponent.storageObj)),this.originalStorageItem&&this.originalStorageItem.type!==r.VVOL_DS_TYPE&&this.addStorageItemOptionToList(t,this.buildStorageItemOption(this.originalStorageItem)),_.forEach(this._recentlySelectedStorageItems,function(n){return e.addStorageItemOptionToList(t,e.buildStorageItemOption(n))}),t=_.sortBy(t,"label"),t.push({id:this.BROWSER_OPTION_ID,label:this.i18nService.getString("Common","DiskLocatorControl.Browse")}),this.storageItems=t},e}();angular.module("com.vmware.platform.ui").component("storageLocatorAdvancedMode",new i)}(common_ui||(common_ui={})),function(){"use strict";function e(e,t,n){function i(n,i){if(s(n,void 0))return o(n);var r="storageLocator:storageLocatorItemsData";return i?e.getProperties(n,[r],{propertyParams:[{propertyName:r,parameterType:"com.vmware.vim.binding.vmodl.ManagedObjectReference",parameter:t.getManagedObjectReference(i)}]}).then(function(e){return e?e[r]:null},function(e){return e=null,null}):e.getProperties(n,[r]).then(function(e){return e?e[r]:null})}function r(t){if(s(t,[n.COMPUTE_RESOURCE]))return o(t);var i="storageLocator:provisioningStorageLocatorItemsData";return e.getProperties(t,[i]).then(function(e){return e?e[i]:null})}function o(n){var i=t.getRootFolderFromVsphereObjectId(n),r="storage:allDatastoresInfo";return e.getProperties(i,[r]).then(function(e){var t=e?e[r]:null;return{datastoreItems:t,storagePodItems:[]}})}function a(e){var n={};return e&&e.datastoreItems&&_.forEach(e.datastoreItems,function(e){n[t.getVsphereObjectId(e.storageRef)]=e.name}),e&&e.storagePodItems&&_.forEach(e.storagePodItems,function(e){n[t.getVsphereObjectId(e.storageRef)]=e.name}),n}function s(e,i){var r=t.getEntityType(e);const o=[n.HOST,n.CLUSTER,n.RESOURCE_POOL,n.V_APP];return-1!==o.indexOf(r)?!1:i&&-1!==i.indexOf(r)?!1:!0}var c={getStorageLocatorData:i,getProvisioningStorageLocatorData:r,getStorageObjectNameMap:a};return c}angular.module("com.vmware.platform.ui").factory("storageLocatorService",e),e.$inject=["dataService","defaultUriSchemeUtil","managedEntityConstants"]}();var common_ui;!function(e){var t=e.StorageLocatorAdvancedModeApi,n=e.StorageSelectorBasicState,i=e.ReplicationGroupSettings,r=function(){function e(){}return e}();e.StorageSelectorApi=r;var o=function(){function e(){this.templateUrl="resources/ui/components/storageLocator/storageSelector.html",this.controller=a,this.bindings={modeSettings:"=?",onSelectionChanged:"&",storageSelectorState:"=",storageSelectorData:"=",storageSelectorApi:"=",diskFormatSettings:"=?",disableDefaultPreselectionInBasicMode:"<?",ensurePreselectionVisibilityInBasicMode:"<?",podDisplayDisabled:"<?",showReplicationGroups:"<?",showStorageBaselineSignpostHints:"<?",unsupportedStorageBaselineIds:"<?",isVmtxWorkflow:"<?",isDiskGroupsAvailable:"<?",isPmemOptionDisabled:"<?",showEncryptionOptions:"<?",isEncryptionOptionsDisabled:"<?",encryptionOptionsDisabledReason:"<?"}}return e}();e.StorageSelector=o;var a=function(){function r(e,t,n,i,r,o,a,s){this.$scope=e,this.$element=t,this.$timeout=n,this.i18nService=i,this.defaultUriSchemeUtil=r,this.storageSelectorService=o,this.storageSelectorConstants=a,this.storageProfileService=s}return r.prototype.$onInit=function(){var e=this;this.storageSelectorApi&&(this.storageSelectorApi.validateSelection=this.validateSelection.bind(this),this.storageSelectorApi.validateReplicationGroupSelection=this.validateReplicationGroupSelection.bind(this)),this.onSelectionChanged&&(this._onSelectionChangedDebounced=_.debounce(this.onSelectionChanged,20)),this.advancedModeApi=new t,this.vmIds=[],this.vmDestinationHosts=[],_.forEach(this.storageSelectorData.sourceVmStorageConfig,function(t){e.vmIds.push(t.vmId),t.destinationHostId&&e.vmDestinationHosts.push(t.destinationHostId)}),this.initBasicModeData(),this.initAdvancedModeData()},r.prototype.onSelectionModeChange=function(e){switch(this.storageSelectorState.mode=e,e){case this.storageSelectorConstants.BASIC_MODE:this.selectionModeButtonLabel=this.i18nService.getString("Common","DatastoreSelectControl.Advanced"),this.updateSelectionInBasicMode();break;case this.storageSelectorConstants.ADVANCED_MODE:this.selectionModeButtonLabel=this.i18nService.getString("Common","DatastoreSelectControl.Basic"),this.onSelectionChangedInAdvancedMode(),this.resizeAdvancedGrid()}},r.prototype.initAdvancedModeData=function(){var e=this;this.storageSelectorState.vmStorageConfigInAdvancedMode||(this.storageSelectorState.vmStorageConfigInAdvancedMode=angular.copy(this.storageSelectorData.sourceVmStorageConfig)),this.storageSelectorState.recentlySelectedStorageItemsInAdvancedMode?this.storageSelectorState.recentlySelectedStorageItemsInAdvancedMode=_.filter(this.storageSelectorState.recentlySelectedStorageItemsInAdvancedMode,function(t){return e.isStorageObjAvailable(t)}):this.storageSelectorState.recentlySelectedStorageItemsInAdvancedMode=[],_.forEach(this.storageSelectorState.vmStorageConfigInAdvancedMode,function(t){t.vmHome&&e.removeUnavailableStorage(t.vmHome),_.forEach(t.vmDisks,function(t){return e.removeUnavailableStorage(t)})})},r.prototype.isStorageObjAvailable=function(e){if(e&&e.storageRef){var t=this.defaultUriSchemeUtil.getVsphereObjectId(e.storageRef);return!!this.storageSelectorService.getStorageObjectFromId(t,this.storageSelectorData.storageLocatorItemsData)}return!1},r.prototype.removeUnavailableStorage=function(e){if(e.storageObj){var t=this.defaultUriSchemeUtil.getVsphereObjectId(e.storageObj.storageRef),n=e.storageObj.storageRef.isSdrsEnabled;if(e.storageObj=this.storageSelectorService.getStorageObjectFromId(t,this.storageSelectorData.storageLocatorItemsData),e.storageObj&&e.storageObj.storageRef&&(e.storageObj.storageRef.isSdrsEnabled=n),e.storageObj&&e.storageObj.parentStoragePod){var i=this.defaultUriSchemeUtil.getVsphereObjectId(e.storageObj.parentStoragePod);e.storageObj.parentStoragePod.isSdrsEnabled=this.storageSelectorService.getStorageObjectFromId(i,this.storageSelectorData.storageLocatorItemsData).drsEnabled}}},r.prototype.initBasicModeData=function(){var e=this;this.storageSelectorState.basicModeState||this.initBasicModeState(),this.storageSelectorState.basicModeState.profilesData&&this.$scope.$watch(function(){return e.storageSelectorState.basicModeState.profilesData.selectedProfile},function(t,n){t!==n&&e.updateSelectionInBasicMode()}),this.$scope.$watch(function(){return e.storageSelectorState.basicModeState.selectedItem},function(t,n){t!==n&&e.updateSelectionInBasicMode()}),this.$scope.$watch(function(){return e.storageSelectorState.basicModeState.replicationGroupSettings.selectedReplicationGroup},function(t,n){t!==n&&e.updateSelectionInBasicMode()}),this.$scope.$watch(function(){return e.storageSelectorState.basicModeState.diskFormatSettings.selectedDiskFormat},function(t,n){t!==n&&e.updateSelectionInBasicMode()})},r.prototype.initBasicModeState=function(){var t=this;this.storageSelectorState.basicModeState=new n;var r=new i;if(this.storageSelectorState.basicModeState.replicationGroupSettings=r,r.replicationGroupValidationError=null,r.showReplicationGroups=this.showReplicationGroups,r.selectedReplicationGroup=this.storageSelectorData.initialConfig?this.storageSelectorData.initialConfig.selectedReplicationGroupInBasicMode:null,this.storageSelectorState.basicModeState.diskFormatSettings={drsPlacement:this.diskFormatSettings.drsPlacement,diskFormatSupported:this.diskFormatSettings.diskFormatSupported,sameAsSourceSupported:this.diskFormatSettings.sameAsSourceSupported,thickDiskFormatSupported:this.diskFormatSettings.thickDiskFormatSupported,selectedDiskFormat:this.storageSelectorData.initialConfig?this.storageSelectorData.initialConfig.selectedDiskFormatInBasicMode:null},this.storageSelectorState.basicModeState.selectedItem=null,this.storageSelectorData.initialConfig&&(this.storageSelectorState.basicModeState.selectedItem=this.storageSelectorData.initialConfig.selectedItemInBasicMode),this.storageSelectorData.storageProfilesData&&(this.storageSelectorState.basicModeState.profilesData={error:this.storageSelectorData.storageProfilesData.error,storageProfiles:this.storageSelectorData.storageProfilesData.storageProfiles,selectedProfile:this.storageSelectorData.initialConfig?this.storageSelectorData.initialConfig.selectedStorageProfileInBasicMode:null}),this.storageSelectorState.basicModeState.drsDisabled=!1,this.storageSelectorData.initialConfig&&this.storageSelectorData.initialConfig.selectedItemInBasicMode&&this.storageSelectorData.initialConfig.selectedItemInBasicMode.parentStoragePod){var o=this.defaultUriSchemeUtil.getVsphereObjectId(this.storageSelectorData.initialConfig.selectedItemInBasicMode.parentStoragePod),a=_.find(this.storageSelectorData.storageLocatorItemsData.storagePodItems,function(e){return o===t.defaultUriSchemeUtil.getVsphereObjectId(e.storageRef)});a&&a.drsEnabled&&(this.storageSelectorState.basicModeState.drsDisabled=!0)}this.storageSelectorState.basicModeState.headerState=new e.StorageSelectorHeaderComponentState},r.prototype.onSelectionChangedInAdvancedMode=function(){this.storageSelectorData.vmStorageConfig=this.storageSelectorState.vmStorageConfigInAdvancedMode,this.triggerOnSelectionChange()},r.prototype.updateVmComponentInBasicMode=function(e,t){e&&(e.storageObj=this.storageSelectorState.basicModeState.selectedItem,e.replicationGroup=this.storageSelectorState.basicModeState.replicationGroupSettings.selectedReplicationGroup,t?(e.diskFormat=null,this.updateVmComponentProfileInBasicMode(e,!0)):(e.diskFormat=this.storageSelectorState.basicModeState.diskFormatSettings.selectedDiskFormat,this.updateVmComponentProfileInBasicMode(e,!1)))},r.prototype.updateVmComponentProfileInBasicMode=function(e,t){if(this.storageSelectorState.basicModeState.profilesData){if(!t){if(this.storageSelectorState.storageBaselineId===this.storageSelectorConstants.PMEM_STORAGE_BASELINE.id)return e.storageProfile=this.storageProfileService.findPmemStorageProfile(this.storageSelectorData.storageProfilesData.storageProfiles),void(e.storageObj=null);if(this.storageSelectorState.storageBaselineId===this.storageSelectorConstants.HYBRID_STORAGE_BASELINE.id&&e.storageProfile&&this.storageProfileService.isPmemStorageProfile(e.storageProfile))return void(e.storageObj=null)}var n=!!this.storageSelectorState.basicModeState.profilesData.selectedProfile&&this.storageSelectorState.basicModeState.profilesData.selectedProfile.keepExistingProfileAssignments;if(!n)return void(e.storageProfile=this.storageSelectorState.basicModeState.profilesData.selectedProfile);var i=e.storageProfile&&this.storageProfileService.isPmemStorageProfile(e.storageProfile),r=this.storageSelectorState.storageBaselineId===this.storageSelectorConstants.STANDARD_STORAGE_BASELINE.id;r&&i&&(e.storageProfile=this.storageProfileService.getDefaultProfile())}},r.prototype.updateSelectionInBasicMode=function(){var e=this;this.storageSelectorData.vmStorageConfig=angular.copy(this.storageSelectorData.sourceVmStorageConfig),_.forEach(this.storageSelectorData.vmStorageConfig,function(t){e.updateVmComponentInBasicMode(t.vmHome,!0),_.forEach(t.vmDisks,function(t){return e.updateVmComponentInBasicMode(t,!1)})}),this.triggerOnSelectionChange()},r.prototype.triggerOnSelectionChange=function(){this._onSelectionChangedDebounced&&this._onSelectionChangedDebounced()},r.prototype.validateSelection=function(){var e=this;if(this.storageSelectorState.mode===this.storageSelectorConstants.ADVANCED_MODE)return this.advancedModeApi.validateSelection();if(this.storageSelectorState.basicModeState.replicationGroupSettings.replicationGroupValidationError)return this.storageSelectorState.basicModeState.replicationGroupSettings.replicationGroupValidationError;var t=_.any(this.storageSelectorData.vmStorageConfig,function(t){return t.vmHome&&!t.vmHome.storageObj?!0:_.any(t.vmDisks,function(t){return!e.storageProfileService.isPmemStorageProfile(t.storageProfile)&&!t.storageObj})});return t?this.i18nService.getString("Common","storageSelector.incompleteSelection"):null},r.prototype.validateReplicationGroupSelection=function(){return this.showReplicationGroups&&this.storageSelectorState.mode===this.storageSelectorConstants.BASIC_MODE?this.storageSelectorState.basicModeState.replicationGroupSettings.replicationGroupValidationError:null},r.prototype.resizeAdvancedGrid=function(){var e=this;this.$timeout(function(){var t=e.$element.find(".storage-selector-advanced-mode [kendo-grid]");if(t){var n=t.data("kendoGrid");n&&n.resize(!0)}},0)},r.prototype.onStorageBaselineSelectionChange=function(e){this.storageSelectorState.storageBaselineId=e,this.storageSelectorState.mode===this.storageSelectorConstants.BASIC_MODE&&this.updateSelectionInBasicMode()},r.prototype.isLocatorInBasicMode=function(){var e=_.find(this.storageSelectorData.vmStorageConfig,function(e){return!!e.vmHome});return this.storageSelectorState.mode===this.storageSelectorConstants.BASIC_MODE&&(this.storageSelectorConstants.PMEM_STORAGE_BASELINE.id!==this.storageSelectorState.storageBaselineId||!!e)},r.$inject=["$scope","$element","$timeout","i18nService","defaultUriSchemeUtil","storageSelectorService","storageSelectorConstants","storageProfileService"],r}();angular.module("com.vmware.platform.ui").component("storageSelector",new o)}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(e){this.i18nService=e,this.STANDARD_STORAGE_BASELINE={label:"na",id:"stdBaseline"},this.PMEM_STORAGE_BASELINE={label:"na",id:"pmemBaseline"},this.HYBRID_STORAGE_BASELINE={label:"na",id:"hybridBaseline"},this.BASIC_MODE="basicMode",this.ADVANCED_MODE="advancedMode",this.STANDARD_STORAGE_BASELINE.label=e.getString("Common","storageSelector.stdBaseline.label"),this.PMEM_STORAGE_BASELINE.label=e.getString("Common","storageSelector.pmemBaseline.label"),this.HYBRID_STORAGE_BASELINE.label=e.getString("Common","storageSelector.hybridBaseline.label")}return e.$inject=["i18nService"],e}();e.StorageSelectorConstants=t,angular.module("com.vmware.platform.ui").service("storageSelectorConstants",t)}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){this.templateUrl="resources/ui/components/storageLocator/storageSelectorHeaderComponent.html",this.controller=n,this.bindings={storageProfiles:"<",datastoreItems:"<",sourceVmStorageConfig:"<?",storageBaselineId:"<?",showStorageBaselineSignpostHints:"<?",unsupportedStorageBaselineIds:"<?",storageSelectorState:"<?",showSelectionModeSelector:"<?",selectionMode:"<?",componentState:"<",onStorageBaselineIdChange:"&",onSelectionModeChange:"&",isPmemOptionDisabled:"<?",isDiskGroupsAvailable:"<?"}}return e}();e.StorageSelectorHeaderComponent=t;var n=function(){function e(e,t,n,i){this.i18nService=e,this.storageProfileService=t,this.storageSelectorConstants=n,this.featureFlagsService=i,this.baselineHints={},this.i18n=e.getString,this.signpostParams={title:e.getString("Common","storageSelector.pmemStorage"),message:e.getString("Common","storageSelector.pmemBaseline.signpost")}}return e.prototype.$onInit=function(){this.initSelectionModeSelector(),this.initStorageBaselineSelector()},e.prototype.initSelectionModeSelector=function(){this.selectionMode=this.selectionMode||this.storageSelectorConstants.BASIC_MODE,this.onSelectionModeChange({newSelectionMode:this.selectionMode})},e.prototype.toggleSelectionMode=function(){switch(this.selectionMode){case this.storageSelectorConstants.BASIC_MODE:this.selectionMode=this.storageSelectorConstants.ADVANCED_MODE;break;case this.storageSelectorConstants.ADVANCED_MODE:this.selectionMode=this.storageSelectorConstants.BASIC_MODE}this.onSelectionModeChange({newSelectionMode:this.selectionMode})},e.prototype.initStorageBaselineSelector=function(){var e=this,t=_.any(this.storageProfiles,function(t){return e.storageProfileService.isPmemStorageProfile(t)});if(!t)return this.availableStorageBaselines=void 0,void this.setSelectedStorageBaselineId(this.storageSelectorConstants.STANDARD_STORAGE_BASELINE.id);var n=_.any(this.datastoreItems,function(e){return"PMEM"===e.type});if(!n||this.isPmemOptionDisabled)return this.availableStorageBaselines=void 0,void this.setSelectedStorageBaselineId(this.storageSelectorConstants.STANDARD_STORAGE_BASELINE.id);var i=_.any(this.sourceVmStorageConfig,function(e){return!_.isEmpty(e.vmDisks)});if(!i)return this.availableStorageBaselines=void 0,void this.setSelectedStorageBaselineId(this.storageSelectorConstants.STANDARD_STORAGE_BASELINE.id);this.availableStorageBaselines=[this.storageSelectorConstants.STANDARD_STORAGE_BASELINE];var r=_.indexOf(this.unsupportedStorageBaselineIds,this.storageSelectorConstants.PMEM_STORAGE_BASELINE.id)<0;r&&this.availableStorageBaselines.push(this.storageSelectorConstants.PMEM_STORAGE_BASELINE);var o=0,a=0;_.each(this.sourceVmStorageConfig,function(t){_.each(t.vmDisks,function(t){e.storageProfileService.isPmemStorageProfile(t.storageProfile)&&o++,a++})});var s=this.storageSelectorConstants.STANDARD_STORAGE_BASELINE.id;o>0&&(o===a?s=this.storageSelectorConstants.PMEM_STORAGE_BASELINE.id:(this.availableStorageBaselines.push(this.storageSelectorConstants.HYBRID_STORAGE_BASELINE),s=this.storageSelectorConstants.HYBRID_STORAGE_BASELINE.id)),_.size(this.availableStorageBaselines)<=1&&(this.availableStorageBaselines=void 0),this.setSelectedStorageBaselineId(this.pickInitialStorageBaselineId(s)),this.initBaselineHints()},e.prototype.pickInitialStorageBaselineId=function(e){if(!this.availableStorageBaselines)return this.storageSelectorConstants.STANDARD_STORAGE_BASELINE.id;var t=this.storageBaselineId||e;if(t){var n=_.findWhere(this.availableStorageBaselines,{id:t});if(n)return t}return this.availableStorageBaselines.indexOf(this.storageSelectorConstants.HYBRID_STORAGE_BASELINE)>=0?this.storageSelectorConstants.HYBRID_STORAGE_BASELINE.id:this.storageSelectorConstants.STANDARD_STORAGE_BASELINE.id},e.prototype.setSelectedStorageBaselineId=function(e){this.selectedStorageBaselineId!==e&&(this.selectedStorageBaselineId=e,this.onSelectedStorageBaselineIdChange())},e.prototype.initBaselineHints=function(){if(this.availableStorageBaselines){var e=this.storageSelectorConstants.PMEM_STORAGE_BASELINE;if(!this.componentState.hiddenBaselineHints[e.id]&&this.availableStorageBaselines.indexOf(e)>=0){var t=1===this.sourceVmStorageConfig.length&&!this.sourceVmStorageConfig[0].vmHome&&this.sourceVmStorageConfig[0].vmDisks&&1===this.sourceVmStorageConfig[0].vmDisks.length;t?this.baselineHints[e.id]=[{message:this.i18n("Common","storageSelector.pmemBaseline.singleDisk.hint.line1"),bold:!0},{message:this.i18n("Common","storageSelector.pmemBaseline.singleDisk.hint.line2"),bold:!1}]:this.baselineHints[e.id]=[{message:this.i18n("Common","storageSelector.pmemBaseline.hint.line1"),bold:!0},{message:this.i18n("Common","storageSelector.pmemBaseline.hint.line2"),bold:!1}]}e=this.storageSelectorConstants.HYBRID_STORAGE_BASELINE,!this.componentState.hiddenBaselineHints[e.id]&&this.availableStorageBaselines.indexOf(e)>=0&&(this.baselineHints[e.id]=[{message:this.i18n("Common","storageSelector.hybridBaseline.hint"),bold:!0}])}},e.prototype.getHintFor=function(e){return this.selectionMode!==this.storageSelectorConstants.ADVANCED_MODE?this.baselineHints[e]:void 0},e.prototype.onSelectedStorageBaselineIdChange=function(){this.onStorageBaselineIdChange({newStorageBaselineId:this.selectedStorageBaselineId
})},e.prototype.onBaselineHintClose=function(){this.baselineHints[this.selectedStorageBaselineId]=void 0,this.componentState.hiddenBaselineHints[this.selectedStorageBaselineId]=!0},e.$inject=["i18nService","storageProfileService","storageSelectorConstants","featureFlagsService"],e}();angular.module("com.vmware.platform.ui").component("storageSelectorHeaderComponent",new t)}(common_ui||(common_ui={}));var common_ui;!function(e){var t=e.StorageSelectorState,n=e.StorageSelectorData,i=e.VmStorageConfig,r=e.VmComponentStorageConfig,o=e.StorageSelectorModeSettings,a=e.StorageSelectorDiskFormatSettings,s=e.StorageSelectorApi,c=e.StorageSelectorInitialConfig,l=e.StorageSelectorDialogData,u=function(){function e(e,t,n,i,r,o,a){this.$q=e,this.i18nService=t,this.storageProfileService=n,this.defaultUriSchemeUtil=i,this.bytesFilter=r,this.clarityModalService=o,this.clarityConstants=a}return e.prototype.getStorageSelectorApiObj=function(){return new s},e.prototype.getStorageSelectorState=function(){var e=new t;return e.mode="basicMode",e},e.prototype.getStorageSelectorInitialConfig=function(e,t,n){var i=new c;return i.selectedItemInBasicMode=e,i.selectedStorageProfileInBasicMode=t,i.selectedReplicationGroupInBasicMode=n,i},e.prototype.getStorageSelectorModeSettings=function(e){var t=new o;return t.showAdvancedMode=e,t},e.prototype.getStorageSelectorData=function(e,t,i,r,o){var a=this;r=r||[];var s=this.defaultUriSchemeUtil.getPartsFromVsphereObjectId(e).serverGuid,c=o?this.$q.when(o):this.storageProfileService.fetchStorageProfilesData(s,{includeKeepExisting:i}),l={storageLocatorItemsDataRequest:this.$q.when(t),storageProfilesDataRequest:c};return this.$q.all(l).then(function(e){var t=new n;if(!e)return t;t.storageLocatorItemsData=e.storageLocatorItemsDataRequest,t.storageProfilesData=e.storageProfilesDataRequest,_.each(t.storageProfilesData.storageProfiles,function(e){var t=a.storageProfileService.isEncryptionStorageProfile(e);t?e.groupLabel=a.i18nService.getString("Common","storage.policy.dropdown.group.encryption"):e.groupLabel=""});var i=[];if(_.forEach(r,function(e){e&&e.id&&i.push(e.id)}),!i.length){var s=r&&r.length?r[0]:null,c=a.buildDummyVmConfig(t.storageLocatorItemsData,t.storageProfilesData,s);return t.sourceVmStorageConfig=[c],t}var l,u=t.storageProfilesData&&!t.storageProfilesData.error;return l=u?o&&o.vmProfileAssignments&&o.vmReplicationGroupAssignments?a.$q.when({vmProfileAssignments:o.vmProfileAssignments,vmReplicationGroupAssignments:o.vmReplicationGroupAssignments}):a.storageProfileService.requestVmProfileAndReplicationGroupAssignments(i):a.$q.when({vmProfileAssignments:{},vmReplicationGroupAssignments:{}}),l.then(function(e){return t.sourceVmStorageConfig=_.map(r,function(n){return a.buildVmConfig(n,e.vmProfileAssignments[n.id],u,e.vmReplicationGroupAssignments[n.id],t.storageLocatorItemsData,t.storageProfilesData.storageProfiles)}),t})})},e.prototype.buildDummyVmConfig=function(e,t,n){if(!n||_.isEmpty(n.disksData)){var o=new i;return o.vmHome=new r,o.vmDisks=[this.buildDummyDiskVmConfig()],o}var a=this.buildDummyVmProfileAssignments(t,n.disksData);return n.id="undefined",this.buildVmConfig(n,a,!0,[],e,t.storageProfiles)},e.prototype.buildDummyDiskVmConfig=function(){var e=new r;return e.name="__placeholder_disk__",e.key=-1,e},e.prototype.buildDummyVmProfileAssignments=function(e,t){var n={vm:{value:void 0},homeStorageProfile:void 0,diskAssignments:[]};return _.each(t,function(t){if(t.$profileId){var i=_.find(e.storageProfiles,function(e){return e.id===t.$profileId});i&&n.diskAssignments.push({diskId:n.vm.value+":"+t.key,profile:i.profileObj})}}),n},e.prototype.browseForStorage=function(e,t,o,s,c,u,d,f,p,m){var g=this;void 0===p&&(p=!0),void 0===m&&(m=!1),d=d||!1;var v=this.getStorageSelectorModeSettings(!1),h=new a;h.diskFormatSupported=!1;var S=new n,y=new i;y.destinationHostId=u;var b=new r;if(p?y.vmHome=b:y.vmDisks=[b],S.sourceVmStorageConfig=[y],o){b.storageProfile=o.storageProfile,b.storageObj=o.storageObj;var I=null;o.storageProfile&&!this.storageProfileService.isPmemStorageProfile(o.storageProfile)&&(I=_.find(t.storageProfiles,function(e){return o.storageProfile&&e.id===o.storageProfile.id&&e.label===o.storageProfile.label})||null),S.initialConfig=this.getStorageSelectorInitialConfig(o.storageObj,I,o.replicationGroup)}S.storageProfilesData={storageProfiles:_.filter(t.storageProfiles,function(e){return!e.keepExistingProfileAssignments}),selectedProfile:null,error:t.error},S.storageLocatorItemsData=e;var C=this.getStorageSelectorApiObj(),w=this.$q.defer(),T={contentTemplate:"resources/ui/components/storageLocator/storageSelectorDialog.html",title:this.i18nService.getString("Common","StorageLocatorDialog.Title"),defaultButton:"submit",size:"lg",dialogData:{modeSettings:v,storageSelectorState:this.getStorageSelectorState(),storageSelectorData:S,storageSelectorApi:C,diskFormatSettings:h,podDisplayDisabled:s,disableDefaultPreselection:c,showReplicationGroups:d,isEncryptionOptionsDisabled:f,isPmemOptionDisabled:m},alerts:[],onSubmit:function(){var e=C.validateSelection()||C.validateReplicationGroupSelection();if(e)return T.alerts=[{text:e,type:g.clarityConstants.notifications.type.ERROR}],!1;var t=new l;return p?(t.storageObj=S.vmStorageConfig[0].getVmHomeStorage(),t.storageProfile=S.vmStorageConfig[0].getVmHomeProfile(),t.replicationGroup=S.vmStorageConfig[0].vmHome?S.vmStorageConfig[0].vmHome.replicationGroup:null):(t.storageObj=S.vmStorageConfig[0].vmDisks[0].storageObj,t.storageProfile=S.vmStorageConfig[0].vmDisks[0].storageProfile,t.replicationGroup=S.vmStorageConfig[0].vmDisks[0].replicationGroup),w.resolve(t),!0},onCancel:function(){return w.resolve(null),!0}};return this.clarityModalService.openOkCancelModal(T),w.promise},e.prototype.getRgAssignment=function(e,t){var n=null;return e&&e.forEach(function(e){e&&e.vmObjectId===t&&(n=e.replicationGroup)}),n},e.prototype.buildVmConfig=function(e,t,n,o,a,s){var c=this,l=new i;l.vmId=e.id,l.vmName=e.name,l.vmHome=new r,l.vmHome.name=this.i18nService.getString("Common","DiskLocatorControl.fileType.configuration"),l.vmHome.storageObj=this.getStorageObjectFromId(e.homeDatastore,a),l.destinationHostId=e.destinationHost;var u=this.defaultUriSchemeUtil.getPartsFromVsphereObjectId(e.id).value;return l.vmHome.replicationGroup=this.getRgAssignment(o,u),t&&t.homeStorageProfile?l.vmHome.storageProfile=this.buildProfileItem(t.homeStorageProfile,s):n&&(l.vmHome.storageProfile=this.storageProfileService.getDefaultProfile()),l.vmDisks=_.map(e.disksData,function(e){var i=new r;if(i.key=e.key,i.name=c.getVirtualDiskLabel(e),i.storageObj=c.getStorageObjectFromId(c.defaultUriSchemeUtil.getVsphereObjectId(e.backing.datastore),a),i.capacityInBytes=e.capacityInBytes,i.replicationGroup=c.getRgAssignment(o,u+":"+e.key),t){var d=t.vm.value+":"+e.key,f=_.find(t.diskAssignments,function(e){return d===e.diskId});f&&f.profile&&(i.storageProfile=c.buildProfileItem(f.profile,s))}return c.storageProfileService.isPmemStorageProfile(i.storageProfile)&&(i.storageObj=void 0),!i.storageProfile&&n&&(i.storageProfile=c.storageProfileService.getDefaultProfile()),"undefined"===l.vmId&&(i.diskGroupName=e.deviceInfo.label),i}),l},e.prototype.getVirtualDiskLabel=function(e){var t=this.bytesFilter(e.capacityInKB,"KB","Auto",2);return this.i18nService.interpolate("{0} ({1})",[e.deviceInfo.label,t])},e.prototype.buildProfileItem=function(e,t){return e?_.find(t,function(t){return t.id===e.profileId.uniqueId})||null:null},e.prototype.getStorageObjectFromId=function(e,t){var n=this;if(!e||!t)return null;var i=_.find(t.datastoreItems,function(t){return n.defaultUriSchemeUtil.getVsphereObjectId(t.storageRef)===e});if(i)return i;var r=_.find(t.storagePodItems,function(t){return n.defaultUriSchemeUtil.getVsphereObjectId(t.storageRef)===e});return r||null},e.$inject=["$q","i18nService","storageProfileService","defaultUriSchemeUtil","bytesFilter","clarityModalService","clarityConstants"],e}();e.StorageSelectorService=u,angular.module("com.vmware.platform.ui").service("storageSelectorService",u)}(common_ui||(common_ui={}));var common_ui;!function(e){var t=function(){function e(){this.controller=n,this.bindings={modeSettings:"=?",onSelectionChanged:"&",storageSelectorState:"=",storageSelectorData:"=",storageSelectorApi:"=",diskFormatSettings:"=?",disableDefaultPreselectionInBasicMode:"<?",ensurePreselectionVisibilityInBasicMode:"<?",podDisplayDisabled:"<?",showReplicationGroups:"<?",showStorageBaselineSignpostHints:"<?",unsupportedStorageBaselineIds:"<?",isVmtxWorkflow:"<?",isDiskGroupsAvailable:"<?",showEncryptionOptions:"<?",isEncryptionOptionsDisabled:"<?",encryptionOptionsDisabledReason:"<?"},this.template='<storage-selector class="display-flex-col"\n                  mode-settings="$ctrl.modeSettings"\n                  on-selection-changed="$ctrl.onSelectionChanged()"\n                  storage-selector-state="$ctrl.storageSelectorState"\n                  storage-selector-data="$ctrl.storageSelectorData"\n                  storage-selector-api="$ctrl.storageSelectorApi"\n                  disk-format-settings="$ctrl.diskFormatSettings"\n                  disable-default-preselection-in-basic-mode="$ctrl.disableDefaultPreselectionInBasicMode"\n                  ensure-preselection-visibility-in-basic-mode="$ctrl.ensurePreselectionVisibilityInBasicMode"\n                  pod-display-disabled="$ctrl.podDisplayDisabled"\n                  show-replication-groups="$ctrl.showReplicationGroups"\n                  show-storage-baseline-signpost-hints="$ctrl.showStorageBaselineSignpostHints"\n                  unsupported-storage-baseline-ids="$ctrl.unsupportedStorageBaselineIds"\n                  is-vmtx-workflow="$ctrl.isVmtxWorkflow"\n                  is-disk-groups-available="$ctrl.isDiskGroupsAvailable"\n                  show-encryption-options="$ctrl.showEncryptionOptions"\n                  is-encryption-options-disabled="$ctrl.isEncryptionOptionsDisabled"\n                  encryption-options-disabled-reason="$ctrl.encryptionOptionsDisabledReason"\n               ></storage-selector>'}return e}();e.UpgradableStorageSelector=t;var n=function(){function e(){}return e}();angular.module("com.vmware.platform.ui").component("vxUpgradableStorageSelector",new t)}(common_ui||(common_ui={})),angular.module("com.vmware.platform.ui").directive("storageProfile",[function(){return{scope:{selectedStorageProfile:"=",storageProfiles:"=",readOnly:"=",warning:"=",errorConfig:"=",onChangeCallback:"&",selectAriaLabel:"<?"},templateUrl:"resources/ui/components/storageProfile/storageProfile.html"}}]),angular.module("com.vmware.platform.ui").directive("vxTabPane",[function(){return{link:function(e,t){var n=t.attr("vx-tab-pane");e.$on("vxTab.showTab",function(i,r){r===n&&e.$eval(t.attr("vx-tab-on-show"))})}}}]),angular.module("com.vmware.platform.ui").directive("vxTabs",["$timeout",function(e){function t(e,t,n){e.find("[vx-tab-header].active").removeClass("active"),e.find("[vx-tab-pane].active").removeClass("active"),e.find('[vx-tab-header="'+t+'"]').addClass("active"),e.find('[vx-tab-pane="'+t+'"]').addClass("active"),n.$broadcast("vxTab.showTab",t),n.$broadcast("resize")}return{link:function(n,i,r){var o=r.vxTabsInitialActiveTab;o&&t(i,o,n),i.on("click","[vx-tab-header]",function(e){var r=$(e.currentTarget);if(!r.hasClass("active")){var o=r.attr("vx-tab-header");t(i,o,n)}}),i.on("click","clr-tab-link",function(t){e(function(){n.$broadcast("resize")},0)})}}}]),angular.module("com.vmware.platform.ui").directive("vxViewTabs",["navigation",function(e){return{scope:{tabs:"=vxViewTabs"},template:"<div class='fill-parent'> <ul class='nav nav-tabs'> <li ng-class='{active: isSelected($index)}' ng-repeat='tab in tabs'><a ng-click='switchTab($index)'><i class='{{tab.icon}}'></i>{{tab.title}}</a></li></ul><div class = 'tab-content fill-parent' vx-view = 'getSelectedTab()'> </div></div>",link:function(t){function n(){t.selectedTabId=0}e.populateScope(t),n(),t.switchTab=function(e){t.selectedTabId=e},t.isSelected=function(e){return t.selectedTabId===e},t.getSelectedTab=function(){return angular.isDefined(t.tabs)&&angular.isArray(t.tabs)?t.tabs[t.selectedTabId]:void 0}}}}]),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n,i){i.$observe("vxTemplate",function(i){if(i){var r=e(i)(t);n.empty(),n.append(r)}})}}}angular.module("com.vmware.platform.ui").directive("vxTemplate",e),e.$inject=["$compile"]}(),function(){"use strict";function e(){var e=["HH:mm:ss","HH:mm"],t=["HH:mm:ss","HH:mm"];return{restrict:"A",require:"ngModel",link:function(n,i,r,o){function a(n){if("string"!=typeof n)return"";var i=moment(n,e,!0);return i.isValid()?i.format(t[0]):""}function s(n){if("string"!=typeof n)return"";var i=moment(n,t,!0);return i.isValid()?i.format(e[0]):""}o.$formatters.push(a),o.$parsers.push(s)}}}angular.module("com.vmware.platform.ui").directive("vxTimePicker",[e])}(),angular.module("com.vmware.platform.ui").directive("vxTransclude",function(){return{controller:["$transclude","$element","$attrs","$parse","$scope",function(e,t,n,i,r){e(function(e,o){t.append(e);var a=i(n.vxTransclude);a(r,{$transcludedScope:o})})}]}}),angular.module("com.vmware.platform.ui").directive("vxTreeList",function(){"use strict";return{restrict:"A",scope:{vxTreeListOptions:"="},link:function(e,t,n){function i(){n.vxTreeList&&r&&e.$parent.$eval(n.vxTreeList+" = $vxTreeListWidget",{$vxTreeListWidget:r})}var r=null;if(e.$watch("vxTreeListOptions.dataSource",function(e){r&&r.setDataSource(e)}),e.vxTreeListOptions){var o=e.vxTreeListOptions.dataSource;r=t.kendoTreeList(e.vxTreeListOptions).data("kendoTreeList");var a=e.vxTreeListOptions.dataSource;i(),angular.equals(a,o)||r.setDataSource(e.vxTreeListOptions.dataSource)}else var s=e.$watch("vxTreeListOptions",function(){!r&&e.vxTreeListOptions&&(r=t.kendoTreeList(e.vxTreeListOptions).data("kendoTreeList"),i(),s())})}}});var platform;!function(e){"use strict";var t=function(){function e(){this.name="selection"}return e}();e.TreeSelectionError=t;var n=function(){function e(){}return e.SELECTION=new t,e}();e.TreeViewErrorConstants=n,angular.module("com.vmware.platform.ui").constant("treeViewErrorConstants",n)}(platform||(platform={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},platform;!function(e){"use strict";var t;!function(e){e[e.Change=0]="Change",e[e.Children=1]="Children"}(t||(t={}));var n=function(){function e(e,t,n,i,r,o,a){var s=this;this.$rootScope=e,this.$timeout=t,this.$http=n,this.treeNodeService=i,this.logService=r,this.configurationService=o,this.$log=a,this.collectors={},e.$on("$destroy",function(){s.collectors={}})}return e.prototype.createChangeBuffer=function(e,n){var i=this;this.collectors[e]||(this.collectors[e]={}),this.collectors[e][t.Change]&&this.collectors[e][t.Change].destroy(),this.collectors[e][t.Change]=new r(new s,this.$timeout,this.logService("treeLiveChangeUpdateBuffer"),this.configurationService,n,function(e){return i.$http({method:"POST",url:"tree/propertiesByObjectIds",skipLoadingNotification:!0,data:{objectIds:Object.keys(e)}}).then(function(e){return e?e.data||{}:{}})})},e.prototype.createChildrenBuffer=function(e,n){var i=this;this.collectors[e]||(this.collectors[e]={}),this.collectors[e][t.Children]&&this.collectors[e][t.Children].destroy(),this.collectors[e][t.Children]=new o(new c,this.$timeout,this.logService("treeLiveChildrenUpdateBuffer"),this.configurationService,n,function(t){var n=_.values(t),r=JSON.stringify(n);return i.$log.debug("TreeLiveUpdateBufferService: calling treeNodeService#getChildrenByObjectIds for '"+r+"'"),i.treeNodeService.getChildrenByObjectIds(e,n)})},e.prototype.destroyChangeBuffer=function(e){return this.collectors[e]&&this.collectors[e][t.Change]?(this.collectors[e][t.Change].destroy(),delete this.collectors[e][t.Change],!0):!1},e.prototype.destroyChildrenBuffer=function(e){return this.collectors[e]&&this.collectors[e][t.Children]?(this.collectors[e][t.Children].destroy(),delete this.collectors[e][t.Children],!0):!1},e.prototype.addChangeEntry=function(e,n,i){return this.collectors[e]&&this.collectors[e][t.Change]?(this.collectors[e][t.Change].addEntry(n,i),!0):!1},e.prototype.addChildrenEntry=function(e,n,i){return this.collectors[e]&&this.collectors[e][t.Children]?(this.collectors[e][t.Children].addEntry(n,i),!0):!1},e.$inject=["$rootScope","$timeout","$http","treeNodeService","logService","configurationService","$log"],e}();e.TreeLiveUpdateBufferService=n;var i=function(){function e(e,t,n,i,r,o){this.buffer=e,this.$timeout=t,this.logger=n,this.configurationService=i,this.callback=r,this.getData=o,this.timer=new l,this.isHttpAndThrottleDone=!0}return e.prototype.destroy=function(){this.callback=angular.noop},e.prototype.addEntry=function(e,t){this.buffer.addEntry(e,t),this.isHttpAndThrottleDone&&this.flushBuffer()},e.prototype.flushBuffer=function(){var e=this,t=this.buffer.getMapAndReset();this.isHttpAndThrottleDone=!1,this.timer.start(),this.getData(t).then(function(n){e.callback(n,t),e.throttle()},function(t){e.logger.warn(t),e.throttle()})},e.prototype.throttle=function(){var t=this;this.configurationService.getProperty("live.updates.navtree.throttle.interval").then(function(n){var i=parseInt(n);(isNaN(i)||0>i)&&(i=e.LIVE_UPDATES_THROTTLE_INTERVAL_MS);var r=i-t.timer.elapsed();r=0>r?0:r,t.$timeout(function(){t.isHttpAndThrottleDone=!0,t.buffer.isEmpty()||t.flushBuffer()},r)})},e.LIVE_UPDATES_THROTTLE_INTERVAL_MS=1e3,e}(),r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(i),o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(i),a=function(){function e(){this.map={}}return e.prototype.getMapAndReset=function(){var e=this.map;return this.map={},e},e.prototype.addEntry=function(e,t){this.map[e]=t},e.prototype.isEmpty=function(){return!Object.keys(this.map).length},e}(),s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.addEntry=function(e,t){(!this.map[e]||t.data.isNameUpdate)&&(this.map[e]=t)},t}(a),c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(a),l=function(){function e(){this.startTime=0}return e.prototype.start=function(){this.startTime=_.now()},e.prototype.elapsed=function(){return _.now()-this.startTime},e}();angular.module("com.vmware.platform.ui").service("treeLiveUpdateBufferService",n)}(platform||(platform={})),function(){"use strict";function e(e,n){function i(e,t){var n={method:"GET",url:"tree/root",params:{treeId:e}};return t&&(n.params.objRef=t),c(n)}function r(e,n,i){var r={method:"GET",url:"tree/children",params:{treeId:e,nodeTypeId:n,objRef:i}};return c(r).then(function(e){return _.each(e,function(e){e.nodeTypeId&&(e.spriteCssClass=e.spriteCssClass||"",e.spriteCssClass+=" "+e.nodeTypeId),_.each(e.aliases,function(n){t[n]=e.objRef})}),e})}function o(e,n){var i={method:"POST",url:"tree/childrenByObjectIds",skipLoadingNotification:!0,data:{treeId:e,parents:n}};return c(i).then(function(e){return _.each(e,function(e){_.each(e,function(e){_.each(e.aliases,function(n){t[n]=e.objRef})})}),e})}function a(e){var t={method:"GET",url:"tree/path",skipLoadingNotification:!0,params:angular.copy(e)};return c(t)}function s(e){var t={method:"GET",url:"tree/supportedTypes",params:{treeId:e}};return c(t)}function c(t){return angular.extend(t,{skipErrorInterceptor:!0}),e(t).then(function(e){return e?e.data||{}:{}})["catch"](function(e){l.error(e)})}var l=n("treeONodeService"),u={getRoot:i,getChildren:r,getChildrenByObjectIds:o,getPath:a,getSupportedTypes:s,objAliasesToPrimaryObjId:t};return u}angular.module("com.vmware.platform.ui").factory("treeNodeService",e),e.$inject=["$http","logService"];var t={}}(),angular.module("com.vmware.platform.ui").constant("treeUpdatesConstants",{PROPERTIES_UPDATE:0,CHILDREN_UPDATE:1,PARENT_UPDATE:2,DELETE_OBJECT:3}),function(){"use strict";function e(e,n,i,r,o,a,s,c,I,C,w){var T=s("treeUpdatesHandler");return l=e,u=n,d=i,f=r,p=o,m=a,g=c,v=I,h=C,b={},y=T.log.bind(T),S=w,t}function t(e,t,p,b){function x(){v.destroyChangeBuffer(t),v.destroyChildrenBuffer(t)}function O(t){return r(e,t)?ee(t):l.resolve()}function P(e){ee(e)}function R(t){n(e,t)}function M(t){return i(e,t)}function j(n){var i=r(e,n);return i?te(n).then(ne).then(function(r){return r?d.getChildren(t,r.nodeTypeId,r.objRef).then(ce).then(function(t){return e.remove(e.findByUid(i.uid)),re(r,t)}):l.reject("undefined parent for object id: "+n)})["catch"](y):ee(n)}function L(n){var i=r(e,n);if(i)return d.getChildren(t,i.nodeTypeId,i.objRef).then(ce).then(function(e){return re(i,e)}).then(function(){var e=["primaryIconId","name","labelIds"];return i.nodeTypeId===N&&e.push(A),g.getProperties(i.objRef,e,{queryName:"treeUpdatesHandler."+L.name}).then(function(e){s(i,{icon:e.primaryIconId,name:e.name,labelIds:e.labelIds,isVmTemplate:e[A]})})})["catch"](y)}function U(n){q(t,n)||o(t).then(ce).then(function(i){if(H(n,i)){var o=B(n),a=r(e,o);a&&v.addChangeEntry(t,o,n)}})["catch"](y)}function V(e){G(t,e)||o(t).then(ce).then(function(t){H(e,t)&&z(B(e))})["catch"](y)}function F(i){q(t,i)||o(t).then(ce).then(function(t){H(i,t)&&n(e,B(i))})["catch"](y)}function B(e){var t=e.source;return m.createVmomiUri(t.type,t.value,t.serverGuid)}function H(e,t){if(!e)return!1;if(!angular.isArray(t)||0===t.length)return!0;var n=e.source,i=n.type;return i===D&&(i=a(n.value)||n.type),-1!==t.indexOf(i)}function G(e,t){if(!t)return!1;var n=t.data?t.data.childrenProperties:[];if(1===n.length&&"vm"===n[0]){var i=f.isNodeTypeVisibleSync(e,"VirtualMachine");return!i}return!1}function q(e,t){if(!t)return!1;var n=t.source,i=n.type,r=f.isNodeTypeVisibleSync(e,i);return!r}function z(n){if(angular.isString(n)){var i=d.objAliasesToPrimaryObjId[n];i&&(n=i);var o=r(e,n);if(o)return o.expanded?void v.addChildrenEntry(t,n,o):void o.loaded(!1)}}function W(e,t){if(e&&t){var n=_.reduce(t,function(t,n){return t.concat(K(e[n.objRef],n))},[]);b(n)}}function K(t,n){if(!t)return[];var i=[],o=e.findByUid(n.uid);if(!e.dataItem(o))return i;var a=n.children&&_.isFunction(n.children.data)?n.children.data():[];a=_.extend([],a);var s=_.pluck(t,"objRef");_.each(a,function(t){_.contains(s,t.objRef)||(i.push(t.objRef),S.debug("treeUpdatesHandler#updateChildren: removing '"+t.text+"' from '"+n.text+"'"),e.remove(e.findByUid(t.uid)))});var c=!0;return _.each(t,function(a,s){var l=r(e,a.objRef);if(!l||l.parentNode().objRef!==n.objRef){S.debug("treeUpdatesHandler#updateChildren: inserting '"+a.text+"' under '"+n.text+"'");const u=l?w:T,d=l?l:a;c?ae(d,o,u):se(d,t[s-1],u),i.push(a.objRef)}c&&(c=!1)}),i}function Y(e){return m.getPartsFromVsphereObjectId(e).type}function X(t,n){Object.keys(n).forEach(function(i){var o=t[i];if(t&&Object.keys(t).length&&o){var a=o.name,c=o.labelIds,l=o.primaryIconId,u=o[A],d=r(e,i);if(d){var f=Y(i),p=d.parentNode();if(p){var m=p.children.data()||[],g=_.filter(m,function(e){return Y(e.objRef)===f}),v=e.findByUid(d.uid);if(e.dataItem(v)){if(n[i].data.isNameUpdate||n[i].data.isTemplateUpdate){var S=0,y=g.length;if(null!==u&&void 0!==u){var b=g.filter(function(e){return!e.isVmTemplate}).length;u?S=b:y=b}var I={startIndex:S,endIndex:y,isVmTemplate:u,name:a};J(d,g,I)}var C=$($(v[0]).find(".k-in")[0]);if(C){C.removeClass("italic");var w=h.getItalicClassName(c,l);w&&C.addClass(w)}s(d,{icon:l,name:a,labelIds:c,isVmTemplate:u})}}}}})}function J(t,n,i){var r=e.findByUid(t.uid),o=Q(t,n,i);if(!o){var a=n[i.endIndex-1];return void Z(r,a,k)}Z(r,o,E)}function Q(e,t,n){if(n.startIndex===n.endIndex&&n.isVmTemplate===!1)return t[0];for(var i,r=n.startIndex;r<n.endIndex;r++)if(t[r]&&t[r].text&&t[r].text.toLocaleLowerCase().localeCompare(n.name.toLocaleLowerCase())>0&&0!==t[r].text.localeCompare(e.text)){i=t[r];break}return i}function Z(t,n,i){var r=e.findByUid(n.uid);if(e.dataItem(r)&&0!==t.text().localeCompare(n.text))return i===E?void e.insertBefore(t,r):void e.insertAfter(t,r)}function ee(t){var n=l.defer();if(angular.isString(t)){var i,o;if(i=r(e,t))if(o=i.parentNode()){do if(!o.expanded)return o.loaded(!1),n.resolve(),n.promise;while(o=o.parentNode());ie(i.parentNode()).then(n.resolve)}else n.resolve();else te(t).then(ne).then(ie).then(n.resolve)["catch"](y)}else n.resolve();return n.promise}function te(e){var n={treeId:t,objRef:e};return p&&(n.rootRef=p),d.getPath(n).then(ce)}function ne(t){var n,i,o,a,s;if(t&&angular.isArray(t.paths)&&t.paths.length){for(i=t.paths,i=i.slice();i.length;)for(n=i.shift(),n=n.slice(),o=n.pop();n.length&&(s=n.shift(),a=r(e,s));){if(!a.expanded){c(a);break}if(!n.length)return a}return null}}function ie(e){function n(){d.getChildren(t,e.nodeTypeId,e.objRef).then(ce).then(function(t){re(e,t).then(i.resolve)})["catch"](y)}var i=l.defer();if(e)if(I){var r=e.objRef;le[r]&&u.cancel(le[r]),le[r]=u(function(){le[r]=null,n()},C)}else n();else i.resolve();return i.promise}function re(t,n){var i=l.defer();t||y("diffUpdateNodeChildren","parent is required"),angular.isArray(n)||y("diffUpdateNodeChildren","latestChildren should be array");var o=e.findByUid(t.uid);if(!e.dataItem(o))return i.promise;var a=t.children&&_.isFunction(t.children.data)?t.children.data():[],s=_.reduce(n,function(e,t){return e[t.objRef]=t,e},{}),c=[],d=[];_.each(a,function(e){s[e.objRef]||(c.push(e),d.push(u(null,0).then(function(){return ee(e.objRef)})))}),_.each(c,function(t){e.remove(e.findByUid(t.uid))});var f=!0;return _.each(n,function(t,i){var a=r(e,t.objRef);a?(a.spriteCssClass!==t.spriteCssClass&&a.set("spriteCssClass",t.spriteCssClass),oe(a,t)&&(a.text!==t.text&&a.set("text",t.text),f?ae(a,o,w):se(a,n[i-1],w))):f?ae(t,o,T):se(t,n[i-1],T),f&&(f=!1)}),l.all(d).then(i.resolve),i.promise}function oe(e,t){return e.text!==t.text||e.isVmTemplate!==t.isVmTemplate}function ae(t,n,i){var r=n.find(".k-item:first");if(i===w){var o=e.dataItem(r);if(o&&o.objRef===t.objRef)return;if(t=e.findByUid(t.uid),!e.dataItem(t))return}r.size()?e.insertBefore(t,r):e.append(t,n)}function se(t,n,i){if(i!==w||(t=e.findByUid(t.uid),e.dataItem(t))){var r=e.dataSource.get(n.objRef);if(r){var o=e.findByUid(r.uid);e.dataItem(o)&&e.insertAfter(t,o)}}}function ce(t){return e.element?l.resolve(t):l.reject("KendoTreeView does not exist.")}var le={};v.createChangeBuffer(t,X),v.createChildrenBuffer(t,W),f.initAsync();var ue={add:P,change:O,handleDelete:R,handleMove:j,handleNodesVisibility:M,childrenUpdate:L,liveChildrenUpdate:V,liveDelete:F,liveChangeUpdate:U,destroy:x};return ue}function n(e,t){var n;if(angular.isString(t)&&(n=r(e,t)),n){var i=e.findByUid(n.uid);if(!i||!i.length)return void S.debug("treeUpdatesHandler#removeItemFromTree: no tree node found for item with uid '"+n.uid+"'");var o=e.select();i.get(0)===o.get(0)&&(o=e.parent(i),e.select(o)),S.debug("treeUpdatesHandler#removeItemFromTree: removing '"+i.text()+"'"),e.remove(i)}}function i(e,t){if(!e.element)return Promise.resolve(!1);var n=e.element.find(R).closest("li"),i=e.select(),r=i&&i.get(0);return r&&_.contains(n,r)&&e.select(e.parent(i)),p.executeOnChunks(function(t){e.remove(t)},n,250,1e3)}function r(e,t){var n=null;try{n=e.dataSource.get(t)}catch(i){}return n}function o(e){var t=l.defer();return b.hasOwnProperty(e)?t.resolve(b[e]):d.getSupportedTypes(e).then(function(n){b[e]=n,t.resolve(n)}),t.promise}function a(e){if(e===x)return O;var t=_.find(Object.keys(P),function(t){return-1!==e.indexOf(t)});return t&&P[t]||null}function s(e,t){if(e){if(t.icon&&e.set("spriteCssClass",t.icon),t.name){var n=t.name;t.labelIds&&(n+=h.getTaggingLabelString(t.labelIds)),e.set("text",n)}null!==t.isVmTemplate&&void 0!==t.isVmTemplate&&e.set("isVmTemplate",t.isVmTemplate)}}function c(e){e.hasChildren=!0,e.loaded(!1),e.load()}angular.module("com.vmware.platform.ui").factory("treeUpdatesHandler",e),e.$inject=["$q","$timeout","treeNodeService","treeNodesVisibilityStateService","chunkExecutor","defaultUriSchemeUtil","logService","dataService","treeLiveUpdateBufferService","resourceUtil","$log"];var l,u,d,f,p,m,g,v,h,S,y,b,I=!0;t.setOptimizedGetChildren=function(e){I=!!e};var C=1e3,w=0,T=1,E=0,k=1,D="Folder",x="group-d1",O="rootFolder",P={"group-d":"datacenterFolder","group-h":"hostFolder","group-v":"vmFolder","group-s":"storageFolder","group-n":"networkFolder"},A="config.template",N="VirtualMachine",R=".StandaloneHostVm, .ClusterVm, .ResPoolVm"}(),angular.module("com.vmware.platform.ui").factory("treeViewLocalStorageService",["$q","localStorageService","simpleObjectStorageService",function(e,t,n){function i(i){function r(){return f.getUserData(d).then(function(e){return e||{}})}function o(e,t){var n=angular.copy(e);t&&angular.extend(n,t),f.setUserData(d,n)}function a(e){p=p.then(r).then(function(t){o(t,e)})}function s(e,t,n){for(var i=c(e),r=l(t),o=i,s=r.length-1;s>0&&o;--s)o=o.children[r[s]];o&&n(o),a({expandedNodes:i})}function c(e){return e.expandedNodes?e.expandedNodes:{children:{}}}function l(e){for(var t=[],n=e;n;)t.push(n.objRef),n=n.parentNode();return t}var u=this,d=i,f=n.getObjectStorage(),p=e.when();return u.enablePersistence=function(e){e===!0?f=t:f===t&&(f=n.getObjectStorage())},u.selectionChanged=function(e){a({lastSelectedNode:e.objRef,lastSelectedNodeExpanded:e.expanded})},u.nodeExpanded=function(e){r().then(function(t){t.lastSelectedNode===e.objRef&&a({lastSelectedNodeExpanded:!0}),s(t,e,function(t){var n=t.children[e.objRef];n?n.expanded=!0:t.children[e.objRef]={expanded:!0,children:{}}})})},u.nodeCollapsed=function(e){r().then(function(t){t.lastSelectedNode===e.objRef&&a({lastSelectedNodeExpanded:!1}),s(t,e,function(t){var n=t.children[e.objRef];n&&(Object.keys(n.children).length>0?n.expanded=!1:delete t.children[e.objRef])})})},u.getLastSelectedNodeData=function(){return r().then(function(e){return{node:e.lastSelectedNode,expanded:e.lastSelectedNodeExpanded}})},u.getExpandedNodesData=function(){return r().then(c)},u.cleanExpandedNodesData=function(){return r().then(function(e){return a({expandedNodes:{children:{}}}),e.expandedNodes})},this}function r(e){return new i(e)}return{getLocalStorageByTreeId:r}}]),function(){"use strict";function e(){function e(e,t,n,i){t.attr("vui-tree-view","");var r=t.attr("id");if(!r){var o=t.attr("tree-id");o&&t.attr("id",o)}t.attr("role","tree");var a=t.kendoTreeView({dragAndDrop:e.config?e.config.dragAndDrop:!1,dataBound:function(){t.find("ul[role=tree]").attr("role",null)}}).data("kendoTreeView");i.setupAndRun(a,e.config)}return{link:e,scope:{treeId:"@treeId",options:"@options",change:"&onChange",error:"&onError",rootObjRef:"=",selectNode:"=",config:"="},controller:"VxTreeViewController"}}angular.module("com.vmware.platform.ui").directive("vxTreeView",e)}(),function(){"use strict";function e(e,n,i,r,o,a,s,c,l,u,d,f,p){function m(){return new kendo.data.HierarchicalDataSource({schema:{model:{id:"objRef"}},transport:{read:g}})}function g(e){var t,n,r,a,s;if(n=e.data&&e.data.objRef,a=!n)s=o.getRoot(z,G);else{if(t=A.dataSource.get(n),!t)return;r=t.nodeTypeId,s=o.getChildren(z,r,n)}if(s.then(e.success),a){var c=d.getProperty("live.updates.navtree.enabled");i.all([s,c]).then(function(e){var t=e[0],n=e[1];j=n&&"TRUE"===n.toUpperCase(),y(t)})}}function v(e){l.isRootFolder(e)&&(K[e]||j&&(K[e]=!0,h(e)))}function h(e){var t=l.getPartsFromVsphereObjectId(e).serverGuid;c.openInventory(t)}function S(){_.each(Object.keys(K),function(e){h(e)})}function y(e){var t=i.defer(),n=function(n,i){var r=e&&e[0]&&e[0].objRef,o=angular.noop;r&&(o=P.preselectRoot?_.partial(T,r,!0):function(){A.expandPath([r]),O(f.SELECTION)}),E(n,i).then(function(e){e||o(),t.resolve()})["catch"](o)},r=M.cleanExpandedNodesData().then(D);q?(n(q,!!P.expandPreselectedNode),q=null):M.getLastSelectedNodeData().then(function(e){n(e.node,e.expanded)}),i.all([t.promise,r]).then(x)}function b(){function t(){var t=A.dataItem(A.select());t&&(e.change({objRef:t.objRef,text:t.text,nodeTypeId:t.nodeTypeId,item:t}),M.selectionChanged(t))}function n(e){var t=e.node;t&&A.select(t)}function i(e){var t=A.dataItem(e.node);
M.nodeExpanded(t),v(t.id)}function r(e){var t=A.dataItem(e.node);M.nodeCollapsed(t),A.select().closest(e.node).length&&A.select(e.node)}function o(e){u(d(L),e,e.sourceNode)}function a(e){u(d(U),e,e.dropTarget)}function s(e){u(d(V),e,e.node)}function c(e){u(d(F),e,e.destinationNode)}function l(e){var t=$(e.target).closest(".k-item");u(d(F),e,t)}function u(e,t,n){e&&(t.vxKendoTreeView=A,t.vxDataItem=A.dataItem(n),e(t))}function d(e){return P.dragAndDropEventHandler?P.dragAndDropEventHandler[e]:null}A.bind("change",t),A.bind("navigate",n),A.bind("expand",i),A.bind("collapse",r);var f=P?P.dragAndDrop:!1;f&&(A.bind(L,o),A.bind(U,a),A.bind(V,s),A.bind(F,c),A.element.kendoDropTarget({group:"gridGroup",drop:l}))}function I(){e.$watch("selectNode",function(e,t){if(e!==t){var n=A.dataItem(A.select());n&&n.objRef===e||E(e,!1)}}),n.$on("treeVisibilityStateChanged",function(e,t){"vsphere.core.physicalInventorySpec"===z&&(t.isVisible?A.dataSource.read():(n.$emit("hidingVms",!0),R.handleNodesVisibility(t.nodeTypes).then(function(e){n.$emit("hidingVms",!1),e||p.warn("Hiding VMs has failed. VMs might be partially hidden.")},function(e){e.message=e.message||"",p.error("An error occurred while hiding VMs: "+e.message),n.$emit("hidingVms",!1)})))}),P.refreshEnabled&&(e.$on("dataRefreshInvocationEvent",function(){A.dataSource.read()}),e.$on("modelChanged",function(e,t){var n=t.objectId,i=t.operationType;"ADD"===i?R.add(n):"CHANGE"===i?R.change(n):"DELETE"===i?R.handleDelete(n):"RELATIONSHIP_CHANGE"===i?R.handleMove(n).then(function(){var t=e.currentScope,i=t&&t.selectNode===n;i&&E(n,!0)}):"CHILDREN_UPDATE"===i&&R.childrenUpdate(n)}),e.$on("navTree",function(e,t){var n=t.updates;n&&_.each(C(n),function(e){var t=JSON.stringify(e);p.debug(t);var n=e.data.type;if(n===u.CHILDREN_UPDATE){if(!e.source)return;var i=e.source.type;if(!B[z][i])return;var r=e.data.childrenProperties,o=!0;if(r&&r.length>0){o=!1;for(var a in r)if(B[z][i].has(r[a])){o=!0;break}}o&&R.liveChildrenUpdate(e)}else n===u.PROPERTIES_UPDATE?R.liveChangeUpdate(e):n===u.DELETE_OBJECT&&R.liveDelete(e)})})),e.$on("vxRouteChangeSuccess",function(e,t,n){"OBJECT_NOT_FOUND"===n.extensionId&&R.change(n.objectId)}),e.$on("reOpenWebSocketsEvent",S),e.$on("$destroy",function(){R.destroy()})}function C(e){var t=[],n=_.groupBy(e,function(e){return l.getVsphereObjectId(e.source)});return _.each(e,function(e){var i=l.getVsphereObjectId(e.source),r=o.objAliasesToPrimaryObjId[i];r&&_.some(_.pluck(n[r],"data"),_.partial(_.isEqual,e.data))||t.push(e)}),t}function w(e){return A.dataSource.get(e)}function T(e,t){var n=w(e);if(n){if(!A.element)return!1;A.expandTo(n);var i=A.findByUid(n.uid);A.select(i),t&&A.expand(i),x()}return!!n}function E(e,t){function n(e){return e&&angular.isArray(e.paths)&&e.paths.length?e&&angular.fromJson(e.options).selectNode!==N?i.resolve(null):(N=null,k(e.paths,t)):i.resolve(null)}if(!e)return i.resolve(null);if(T(e,t))return i.resolve(e);var r={treeId:z,objRef:e,options:{selectNode:e}};return G&&(r.rootRef=G),N=e,o.getPath(r).then(n)}function k(e,t,n){n||(n=i.defer());var o=e.shift();if(!o)return n.resolve(null),n.promise;var a=o.pop();return A.expandPath(o,function(){T(a,t)?n.resolve(a):r(function(){k(e,t,n)},0)}),n.promise}function D(e){var t=i.defer();if(!e||!e.children||0===Object.keys(e.children).length)return t.resolve(),t.promise;var n=[];return _.each(e.children,function(e,t){if(e.expanded&&w(t)){var r=i.defer();n.push(r.promise),A.expandPath([t],function(){D(e).then(r.resolve)})}}),i.all(n).then(t.resolve),t.promise}function x(){var e=A.element;if(e){var t=e.offset().top,n=A.select();if(n&&n.offset()){var i=e.scrollTop(),r=n.offset().top,o=i+r-t;e.scrollTop(o)}}}function O(t){e.error&&e.error({error:t})}var P,A,N,R,M,j,L="dragstart",U="drag",V="dragend",F="drop",B={"vsphere.core.physicalInventorySpec":{Folder:new Set(["childEntity"]),Datacenter:new Set(["childEntity"]),ComputeResource:new Set(["childEntity","vm","resourcePool","host"]),ClusterComputeResource:new Set(["childEntity","vm","resourcePool","host"]),HostSystem:new Set(["childEntity","vm","resourcePool"]),ResourcePool:new Set(["childEntity","vm","resourcePool"]),VirtualApp:new Set(["childEntity","vm","resourcePool"])},"vsphere.core.virtualInventorySpec":{Folder:new Set(["childEntity"]),Datacenter:new Set(["childEntity"])},"vsphere.core.storageInventorySpec":{Folder:new Set(["childEntity"]),Datacenter:new Set(["childEntity"]),StoragePod:new Set(["childEntity"])},"vsphere.core.networkingInventorySpec":{Folder:new Set(["childEntity"]),Datacenter:new Set(["childEntity"]),VmwareDistributedVirtualSwitch:new Set(["childEntity","portgroup"]),DistributedVirtualSwitch:new Set(["childEntity","portgroup"])}},H=this,G=e.rootObjRef,q=e.selectNode,z=e.treeId,W=!!(e.options&&e.options.indexOf("persistselection")>-1),K={};H.setupAndRun=function(n,i){P=angular.extend({preselectRoot:!0,refreshEnabled:!1,expandPreselectedNode:!1},i),A=n,t(n),M=s.getLocalStorageByTreeId(z),M.enablePersistence(W),A.setDataSource(m()),b(),R=a(A,z,G,function(t){var n=e.selectNode;_.contains(t,n)&&E(n,!0)}),I()}}function t(e){if("2015.3.1214"!==kendo.version)throw"Verify expandPath of kendoTreeView with the new kendo version";e.expandPath=function(e,t){function n(e,t,n){e&&!e.loaded()?e.set("expanded",!0):(r.unbind("change",a),t.call(n))}e=e.slice(0);var i=this,r=this.dataSource,o=r.get(e[0]);for(t=t||$.noop;e.length>0&&o&&o.loaded();)o.set("expanded",!0),e.shift(),o=r.get(e[0]);if(!e.length)return t.call(i);var a=function(o){var s,c=o.node&&o.node.id;c&&c===e[0]&&(e.shift(),e.length?(s=r.get(e[0]),n(s,t,i)):(r.unbind("change",a),t.call(i)))};r.bind("change",a),n(o,t,i)}}angular.module("com.vmware.platform.ui").controller("VxTreeViewController",e),e.$inject=["$scope","$rootScope","$q","$timeout","treeNodeService","treeUpdatesHandler","treeViewLocalStorageService","websocketMessagingService","defaultUriSchemeUtil","treeUpdatesConstants","configurationService","treeViewErrorConstants","$log"]}(),angular.module("com.vmware.platform.ui").factory("directiveUtilService",[function(){"use strict";return{findParentController:function(e,t){for(var n,i="$"+t+"Controller",r=e.parent();r.length;){if(n=r.data(i))return n;r=r.parent()}}}}]),angular.module("com.vmware.platform.ui").factory("positionService",["$document","$window",function(e,t){"use strict";function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var r=function(t){for(var n=e[0],r=t.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},o=r(t[0]);o!==e[0]&&(i=this.offset(angular.element(o)),i.top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var a=t[0].getBoundingClientRect();return{width:a.width||t.prop("offsetWidth"),height:a.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var r,o,a,s,c,l,u=n.split("-"),d=u[0],f=u[1]||"center";switch(r=i?this.offset(e):this.position(e),o=t.prop("offsetWidth"),a=t.prop("offsetHeight"),c={center:function(){return r.left+r.width/2-o/2},left:function(){return r.left},right:function(){return r.left+r.width}},l={center:function(){return r.top+r.height/2-a/2},top:function(){return r.top},bottom:function(){return r.top+r.height}},d){case"right":s={top:l[f](),left:c[d]()};break;case"left":s={top:l[f](),left:r.left-o};break;case"bottom":s={top:l[d](),left:c[f]()};break;default:s={top:r.top-a,left:c[f]()}}return s}}}]),angular.module("com.vmware.platform.ui").factory("transitionService",["$q","$timeout","$rootScope",function(e,t,n){var i=function(r,o){var a=e.defer(),s=function(e){n.$apply(function(){r.unbind(i.transitionEndEventName,s),a.resolve(r)})};return i.transitionEndEventName&&r.bind(i.transitionEndEventName,s),t(function(){angular.isString(o)?r.addClass(o):angular.isFunction(o)?o(r):angular.isObject(o)&&r.css(o),i.transitionEndEventName||a.resolve(r)}),a.promise.cancel=function(){i.transitionEndEventName&&r.unbind(i.transitionEndEventName,s),a.reject("Transition cancelled")},a.promise},r=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};for(var a in o)void 0!==r.style[a]&&(i.transitionEndEventName=o[a]);return i}]),function(){"use strict";angular.module("com.vmware.platform.ui").directive("vxError",["$compile","$window","$rootScope","positionService",function(e,t,n,i){return{restrict:"EA",require:"ngModel",scope:{vxError:"="},link:function(n,r,o,a){function s(){var e=i.positionElements(r,u,"right",!0);e.top+="px",e.left+="px",u.css(e)}function c(){var e;"function"==typeof n.vxError.isVisible?e=n.vxError.isVisible.call(n.vxError,a):"boolean"==typeof n.vxError.isVisible&&(e=n.vxError.isVisible),e&&(d.append(u),s())}function l(){u&&u.remove()}r.bind("mouseenter",c),r.bind("mouseleave",l);var u,d=angular.element(t.document.body);n.getMessage=function(){return n.vxError?"function"==typeof n.vxError.message?n.vxError.message():n.vxError.message:""};var f='<div class="vx-error-tooltip tooltip right in"><div class="tooltip-arrow"></div><div class="tooltip-inner">{{getMessage()}}</div></div>';u=e(f)(n),n.$on("$destroy",function(){u&&u.remove(),p()});var p=n.$watch("vxError.message",function(e){_.isEmpty(e)&&l()})}}}])}(),angular.module("com.vmware.platform.ui").directive("vxPasswordMatch",function(){"use strict";return{require:"ngModel",link:function(e,t,n,i){var r="#"+n.vxPasswordMatch;t.bind("focusout",function(){var e=t.val()===angular.element(r).val();i.$setValidity("passwordMatch",e)}),t.add(r).on("focusout",function(){var e=t.val()===angular.element(r).val();i.$setValidity("passwordMatch",e)})}}}),angular.module("com.vmware.platform.ui").constant("regexConstants",{ipv4:/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,fqdn:/^(?=.{1,254}$)((?=[a-z0-9-]{1,63}\.)(xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,63}$/i,port:/^(4915[0-1]|491[0-4]\d|490\d\d|4[0-8]\d{3}|[1-3]\d{4}|[1-9]\d{0,3}|0)$/,url:/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/}).directive("vxValid",["regexConstants",function(e){"use strict";return{restrict:"A",require:"ngModel",link:function(t,n,i,r){function o(t){return e[t]}var a=t[i.vxValid].validationRules;r.$parsers.unshift(function(e){var t=!1,n=!1;return"undefined"!=typeof a&&""!==e&&(Array.isArray(a)||(a=[a]),a.forEach(function(n){var i=Object.keys(n)[0],a=n[i],s=!1;if("string"==typeof a)s=o(a).test(e);else if(a instanceof RegExp)s=a.test(e);else if("function"==typeof a){var c=a(e);"boolean"==typeof c&&(s=c)}t=t||s,r.$setValidity(i,s)}),n=!0),t=t||!n,r.$setValidity("vxValid",t),t?e:void 0})}}}]),angular.module("com.vmware.platform.ui").filter("boolean",["$filter","i18nService",function(e,t){"use strict";return function(e,n,i){return n=n||t.getString("Common","yes.label"),i=i||t.getString("Common","no.label"),e?n:i}}]),angular.module("com.vmware.platform.ui").filter("bytes",bytesFilter),bytesFilter.$inject=["numberFormatterService"],angular.module("com.vmware.platform.ui").filter("cpuClock",cpuClockFilter),cpuClockFilter.$inject=["i18nService","numberFormatterService"],angular.module("com.vmware.platform.ui").filter("dataFormat",["$filter",function(e){return function(t,n){var i={"Storage.B":{name:"bytes"}},r=i[n];return r?e(r.name)(t):t}}]),angular.module("com.vmware.platform.ui").filter("dateLocale",["timeFormatterService",function(e){"use strict";return function(t){return e.timestampToText(t)}}]),angular.module("com.vmware.platform.ui").filter("enabled",["$filter","i18nService",function(e,t){"use strict";return function(e,n,i){return n=n||t.getString("Common","enabled"),i=i||t.getString("Common","disabled"),e=!!e,e?n:i}}]),angular.module("com.vmware.platform.ui").filter("errorFormat",function(){"use strict";return function(e,t){function n(e,t){var n=_.escape(e);return"\n"!==t&&(n=n.replace(/\n|\\n/g,t)),n}if(null===e)return"null";t||(t="<br>");var i,r;if(e instanceof Error)return r=[],e.message&&r.push(e.message),e.name&&r.push("name: "+e.name),e.description&&r.push(e.description),e.number&&r.push("number: "+e.number),e.fileName&&r.push("file: "+e.fileName),e.lineNumber&&r.push("line: "+e.lineNumber),e.columnNumber&&r.push("col: "+e.columnNumber),e.stack&&r.push("stack: "+e.stack),i="UnexpectedError (js): "+r.join("\n"),n(i,t);if(i=e.toString(),"[object Object]"!==i)return i;if(e.data){r=[];var o=e.data;if(o.message&&r.push(o.message),o.cause&&r.push("cause: "+o.cause),o.stackTrace&&r.push("stack: "+o.stackTrace),r.length>0)return i="UnexpectedError (object): "+r.join("\n"),n(i,t)}return i=JSON.stringify(e),n("UnexpectedError (json): "+i,t)}}),angular.module("com.vmware.platform.ui").filter("ceil",function(){return function(e){return Math.ceil(e)}}),angular.module("com.vmware.platform.ui").filter("reverse",[function(){return function(e){return e.slice().reverse()}}]);var platform;!function(e){var t=function(){function e(){this.bindings={url:"<",closeModal:"&"},this.template="",this.controller=n}return e}(),n=function(){function e(e,t,n,i,r,o){this.$element=e,this.h5SdkCommonService=t,this.telemetryService=n,this.pluginUrlService=i,this.$compile=r,this.$scope=o}return e.prototype.$onInit=function(){var e=this;this.pluginUrlService.associatePluginSessionWithClientId(this.url.valueOf()).then(function(){var t='<iframe ng-src="{{$ctrl.url}}" class="sandbox-iframe"></iframe>',n=e.$compile(t)(e.$scope).get(0),i=e.$element[0];i.classList.add("plugin-resource("+e.url+")"),e.$element.append(n),n.addEventListener("load",function(t){n.focus(),n.contentWindow&&!e.h5SdkCommonService.isCrossDomainIFrame(n)&&(n.contentWindow.addEventListener("keyup",function(t){(27===t.keyCode||"Escape"===t.key)&&e.closeModal()}),e.telemetryService.startTrackingWindowEvents(n.contentWindow),n.contentWindow.addEventListener("unload",function(){n.contentWindow&&!e.h5SdkCommonService.isCrossDomainIFrame(n)&&e.telemetryService.stopTrackingWindowEvents(n.contentWindow)}))})})},e.$inject=["$element","h5SdkCommonService","telemetryService","pluginUrlService","$compile","$scope"],e}();angular.module("com.vmware.platform.ui").component("htmlBridgePluginModalIframe",new t)}(platform||(platform={}));var platform;!function(e){function t(){return{restrict:"E",template:"",scope:{viewUrl:"<",isModal:"<?",viewUrlParams:"<?",context:"<?",viewId:"<?",remotePluginExtensionContext:"<?"},controller:i,controllerAs:"ctrl"}}var n=function(){function e(e,t,n){this.pluginUrlService=e,this.vxZoneService=t,this.pingUrl=n,this.PING_INTERVAL=15e5,this.timerId=null}return e.prototype.start=function(){var e=this;this.stop(),this.vxZoneService.runOutsideAngular(function(){e.timerId=setInterval(e.onTimerTriggerEvent.bind(e),e.PING_INTERVAL)})},e.prototype.stop=function(){var e=this;this.vxZoneService.runOutsideAngular(function(){null!==e.timerId&&(clearInterval(e.timerId),e.timerId=null)})},e.prototype.onTimerTriggerEvent=function(){this.pluginUrlService.associatePluginSessionWithClientId(this.pingUrl)},e}(),i=function(){function e(t,i,r,o,a,s,c,l,u,d,f,p,m,g,v,h){var S=this;this.$scope=t,this.$element=i,this.h5SdkApiService=r,this.configurationService=o,this.pluginUrlService=a,this.vxZoneService=s,this.iframeNavigationDataCache=c,this.$q=l,this.$compile=u,this.sessionTimeoutService=d,this.userSessionService=f,this.$log=p,this.$location=m,this.h5RemoteSdkAdapterService=g,this.h5SdkCommonService=v,this.telemetryService=h,this.onIframeUnloadBound=this.onIframeUnload.bind(this),this.extendUserSessionBound=this.extendUserSession.bind(this),this.redispatchIframeMouseEventBound=this.redispatchIframeMouseEvent.bind(this),this.userSessionExtendedTime=(new Date).getTime(),this.lastSdkReloadPluginExtensionsValue="",this.EXTEND_USER_SESSION_INTERVAL=3e5,this.isRemotePlugin=!!this.$scope.remotePluginExtensionContext,this.pingPlugin=new n(a,s,this.$scope.viewUrl);var y=this.configurationService.getProperty("experimental.sdk.features.enabled").then(function(e){return S.$q.when("true"===e)}),b=this.userSessionService.getUserSession().then(function(e){return S.$q.when(e.locale)});this.$q.all({sdkFeaturesEnabled:y,userSessionLocale:b}).then(function(e){return S.isRemotePlugin?e:S.pluginUrlService.associatePluginSessionWithClientId(S.$scope.viewUrl).then(function(){return e})}).then(function(e){return S.$scope.$on("viewDidLoad",function(e,t){S.$scope.viewId===t&&S.replaceNavigationData()}),S.$scope.$on("viewDidUpdate",function(e,t){if(S.$scope.viewId===t){var n=S.$location.search();n&&n.sdkReloadPluginExtensions&&n.sdkReloadPluginExtensions!==S.lastSdkReloadPluginExtensionsValue&&(S.lastSdkReloadPluginExtensionsValue=n.sdkReloadPluginExtensions,S.replaceNavigationData(),S.reloadPluginView())}}),S.replaceNavigationData(),e}).then(function(t){var n=S.isRemotePlugin?e.REMOTE_PLUGIN_IFRAME_TEMPLATE:e.LOCAL_PLUGIN_IFRAME_TEMPLATE;S.iframe=S.$compile(n)(S.$scope).get(0),S.locale=t.userSessionLocale,S.setIframeUrl(),S.$scope.$watch("viewUrlParams.vcSelectorSelection",function(e,t){e!==t&&S.setIframeUrl()});var r=i[0].classList;if(S.$scope.viewId)r.add("plugin-extension("+S.$scope.viewId+")");else{var o=!0,a=S.trustedUrl.valueOf();e.PLUGIN_URL.test(a)?a=a.replace(e.PLUGIN_URL,"$1"):(o=!1,p.warn("PluginIframeController: viewUrl: "+a+" does not match PluginIframeController.PLUGIN_URL!")),S.isRemotePlugin&&(e.REMOTE_PLUGIN_PROXIED_URL_REGEX.test(a)?a=a.replace(e.REMOTE_PLUGIN_PROXIED_URL_REGEX,"$1/<obfuscated>$3"):(o=!1,p.warn("PluginIframeController: viewUrl: "+a+(" for remote plugin extension context id: "+S.$scope.remotePluginExtensionContext.contextId)+" does not match PluginIframeController.REMOTE_PLUGIN_PROXIED_URL_REGEX!"))),o&&r.add("plugin-resource("+a+")")}return S.h5SdkInitializer=S.h5SdkApiService.getH5SdkApi(S.$scope),S.htmlClientSdk=S.h5SdkInitializer.sdk,S.isRemotePlugin&&S.supportsShadowDom?(S.iframe.style.display="block",S.iframe.style.boxSizing="border-box",S.iframe.style.width="100%",S.iframe.style.height="100%",S.iframe.style.border="0",S.shadowRoot=S.$element[0].attachShadow({mode:h5.debug?"open":"closed"}),S.shadowRoot.appendChild(S.iframe)):S.$element.append(S.iframe),t}).then(function(e){return S.$scope.isModal&&S.iframe.addEventListener("load",function(e){S.iframe.focus()}),S.isRemotePlugin?S.bootstrapRemotePluginSdk():S.bootstrapLocalPluginSdk(),e})}return Object.defineProperty(e.prototype,"supportsShadowDom",{get:function(){return!!this.$element[0].attachShadow},enumerable:!0,configurable:!0}),e.prototype.$onInit=function(){this.isRemotePlugin||this.pingPlugin.start()},e.prototype.$onDestroy=function(){if(this.pingPlugin.stop(),this.pingPlugin=null,this.isRemotePlugin)this.h5RemoteSdkAdapter&&(this.h5RemoteSdkAdapter.destroy(),this.h5RemoteSdkAdapter=null);else if(this.iframe&&(this.iframe.htmlClientSdk=null,this.iframe.contentWindow&&!this.h5SdkCommonService.isCrossDomainIFrame(this.iframe))){this.iframe.contentWindow.removeEventListener("unload",this.onIframeUnloadBound),this.iframe.contentWindow.removeEventListener("mousedown",this.extendUserSessionBound);for(var t=0,n=e.mouse_event_names;t<n.length;t++){var i=n[t];this.iframe.contentWindow.removeEventListener(i,this.redispatchIframeMouseEventBound)}this.telemetryService.stopTrackingWindowEvents(this.iframe.contentWindow)}this.h5SdkInitializer&&(this.h5SdkInitializer.destroy(),this.h5SdkInitializer=null)},e.prototype.replaceNavigationData=function(){this.iframeNavigationDataCache.updateNavigationData(this.$scope.viewId)},e.prototype.onIframeUnload=function(){!this.h5SdkCommonService.isCrossDomainIFrame(this.iframe)&&this.iframe.contentWindow&&this.telemetryService.stopTrackingWindowEvents(this.iframe.contentWindow),this.h5SdkInitializer&&this.h5SdkInitializer.onIframeUnload()},e.prototype.extendUserSession=function(){var e=(new Date).getTime(),t=Math.abs(e-this.userSessionExtendedTime);t>this.EXTEND_USER_SESSION_INTERVAL&&(this.sessionTimeoutService.resetSessionTimeout(),this.userSessionExtendedTime=e)},e.prototype.redispatchIframeMouseEvent=function(e){var t,n=this.iframe.getBoundingClientRect(),i=n.left+e.clientX,r=n.top+e.clientY;"function"!=typeof MouseEvent?(t=document.createEvent("MouseEvents"),t.initMouseEvent(e.type,!0,!0,window,0,e.screenX,e.screenY,i,r,!1,!1,!1,!1,e.button,null)):t=new MouseEvent(e.type,{bubbles:!0,cancelable:!0,button:e.button,buttons:e.buttons,screenX:e.screenX,screenY:e.screenY,clientX:i,clientY:r}),this.$element[0].dispatchEvent(t)},e.prototype.bootstrapLocalPluginSdk=function(){var t=this;this.iframe.htmlClientSdk=Object.freeze(this.htmlClientSdk),this.iframe.addEventListener("load",function(n){if(!t.h5SdkCommonService.isCrossDomainIFrame(t.iframe)){t.$scope.isModal&&t.iframe.contentWindow.addEventListener("keyup",function(e){(27===e.keyCode||"Escape"===e.key)&&t.iframe.htmlClientSdk.modal.close()}),t.iframe.contentWindow.addEventListener("unload",t.onIframeUnloadBound),t.iframe.contentWindow.addEventListener("mousedown",t.extendUserSessionBound);for(var i=0,r=e.mouse_event_names;i<r.length;i++){var o=r[i];t.iframe.contentWindow.addEventListener(o,t.redispatchIframeMouseEventBound)}t.telemetryService.startTrackingWindowEvents(t.iframe.contentWindow)}})},e.prototype.bootstrapRemotePluginSdk=function(){this.h5RemoteSdkAdapter=this.h5RemoteSdkAdapterService.createH5RemoteSdkAdapter(this.iframe,this.htmlClientSdk,this.$scope,this.extendUserSessionBound,this.onIframeUnloadBound,this.redispatchIframeMouseEventBound)},e.prototype.reloadPluginView=function(){if(this.iframe&&this.iframe.parentNode){var e=this.iframe.parentNode;e.removeChild(this.iframe),e.appendChild(this.iframe)}},e.prototype.setIframeUrl=function(){this.$scope.viewUrlParams||(this.$scope.viewUrlParams={}),this.$scope.viewUrlParams.locale=this.locale,this.isRemotePlugin?this.trustedUrl=this.pluginUrlService.trustPluginUrl(this.$scope.viewUrl):this.trustedUrl=this.pluginUrlService.buildUrl(this.$scope.viewUrl,this.$scope.viewUrlParams)},e.$inject=["$scope","$element","h5SdkApiService","configurationService","pluginUrlService","vxZoneService","iframeNavigationDataCache","$q","$compile","sessionTimeoutService","userSessionService","$log","$location","h5RemoteSdkAdapterService","h5SdkCommonService","telemetryService"],e.PLUGIN_URL=/^(?:http(?:s)?:\/\/[^\/]+)?(.*)$/i,e.REMOTE_PLUGIN_PROXIED_URL_REGEX=/^(\/plugins\/[^\/]+)(\/[^\/]+)(.*)$/i,e.LOCAL_PLUGIN_IFRAME_TEMPLATE='<iframe ng-src="{{ctrl.trustedUrl}}" class="sandbox-iframe"></iframe>',e.REMOTE_PLUGIN_IFRAME_TEMPLATE='<iframe ng-src="{{ctrl.trustedUrl}}" sandbox="allow-scripts allow-same-origin allow-forms" class="sandbox-iframe"></iframe>',e.mouse_event_names=["mousedown","mouseup","mousemove","click"],e}();angular.module("com.vmware.platform.ui").directive("pluginIframe",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(){this.controller=n,this.bindings={viewUrl:"=",isModal:"=?",viewUrlParams:"=?",context:"=?",viewId:"=?"},this.template='<plugin-iframe\n                  ng-style="style"\n                  class="sandbox-iframe vx-portlet-content"\n                  view-url="$ctrl.viewUrl"\n                  is-modal="$ctrl.isModal"\n                  view-url-params="$ctrl.viewUrlParams"\n                  context="$ctrl.context"\n                  view-id="$ctrl.viewId"\n            ></plugin-iframe>'}return e}();e.UpgradablePluginIframe=t;var n=function(){function e(){}return e}();angular.module("com.vmware.platform.ui").component("upgradablePluginIframe",new t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n,i){this.$http=e,this.$log=t,this.telemetryService=n,this.telemetryHelperService=i}return e.prototype.createH5RemoteSdkAdapter=function(e,t,i,r,o,a){return new n(this.$http,this.$log,this.telemetryService,this.telemetryHelperService,window,e,t,i,r,o,a)},e.$inject=["$http","$log","telemetryService","telemetryHelperService"],e}();e.H5RemoteSdkAdapterService=t;var n=function(){function t(e,t,n,i,r,o,a,s,c,l,u){var d=this;this.$http=e,this.$log=t,this.telemetryService=n,this.telemetryHelperService=i,this.appWindow=r,this.pluginIFrame=o,this.htmlClientSdk=a,this.$scope=s,this.extendUserSession=c,this.onIframeUnload=l,this.redispatchIframeMouseEvent=u,this.onPluginIFrameMessageBound=this.onPluginIFrameMessage.bind(this),this.appWindow.addEventListener("message",this.onPluginIFrameMessageBound),this.removeContentWindowValueWatch=s.$watch(function(){return d.pluginIFrame.contentWindow},function(e,t){!e&&t&&d.onIframeUnload()})}return t.prototype.destroy=function(){this.appWindow.removeEventListener("message",this.onPluginIFrameMessageBound),this.removeContentWindowValueWatch&&(this.removeContentWindowValueWatch(),this.removeContentWindowValueWatch=null)},t.prototype.onPluginIFrameMessage=function(t){var n=this;if(this.pluginIFrame&&t.source&&t.source===this.pluginIFrame.contentWindow){var i=t.data.operation,r=t.data.payload;if("htmlClientSdk.internal.init"===i&&(this.postMessage("htmlClientSdk.internal.init$response",{isModal:this.$scope.isModal,cachedApiData:{app:{apiEndpoints:{uiApiEndpoint:{origin:window.location.origin,pathname:"/api/ui",queryParams:[],fullUrl:window.location.origin+"/api/ui"}},navigationData:this.htmlClientSdk.app.getNavigationData(),clientInfo:this.htmlClientSdk.app.getClientInfo(),contextObjects:this.htmlClientSdk.app.getContextObjects(),clientLocale:this.htmlClientSdk.app.getClientLocale(),theme:this.htmlClientSdk.app.getTheme()},modal:{customData:this.htmlClientSdk.modal.getCustomData()}}}),this.htmlClientSdk.event.onThemeChanged(this.onThemeChanged.bind(this))),"htmlClientSdk.internal.extendUserSession"===i&&this.extendUserSession(),"htmlClientSdk.internal.redispatchIframeMouseEvent"===i){if(!r||!r.mouseEventProperties)return;this.redispatchIframeMouseEvent(r.mouseEventProperties)}if("htmlClientSdk.internal.trackTelemetryEvent$MouseEvent"===i){if(!(r&&r.eventType&&r.targetNodesDataChain&&r.targetNodesDataChain.length))return;for(var o=r.eventType,a=void 0,s=new e.TelemetryDomNodeWrapper(this.pluginIFrame,this.telemetryHelperService),c=r.targetNodesDataChain.length-1;c>=0;c--){var l=r.targetNodesDataChain[c];a={id:l.id,classList:l.classList,index:l.index,nodeType:l.nodeType,nodeName:l.nodeName,textContents:l.textContents,isEmbeddedNodeWrapper:!0,parentNodeWrapper:s},s=a}this.telemetryService.trackMouseEvent(o,a)}if("htmlClientSdk.app.navigateTo"===i){if(!r||!r.navigationOptions)return;this.htmlClientSdk.app.navigateTo(r.navigationOptions)}if("htmlClientSdk.app.getSessionInfo"===i){if(!r||!r.requestId)return;var u="/ui/plugins/"+this.$scope.remotePluginExtensionContext.fullyQualifiedPluginInstanceId+"/session";this.$http.get(u).then(function(e){n.postMessage("htmlClientSdk.app.getSessionInfo$response",{requestId:r.requestId,sessionInfo:e.data})})}if("htmlClientSdk.modal.open"===i){if(!r||!r.modalId||!r.modalConfig)return;var d=r.modalId,f=r.modalConfig;f.onClosed===!0?f.onClosed=function(e){n.postMessage("htmlClientSdk.modal.open$onClosed()",{modalId:d,modalResult:e})}:f.onClosed=void 0,this.htmlClientSdk.modal.open(f)}if("htmlClientSdk.modal.close"===i){var p=null;r&&(p=r.closeResult),this.htmlClientSdk.modal.close(p)}if("htmlClientSdk.modal.setOptions"===i){if(!r||!r.newModalConfig)return;this.htmlClientSdk.modal.setOptions(r.newModalConfig)}"htmlClientSdk.event.onGlobalRefresh"===i&&this.htmlClientSdk.event.onGlobalRefresh(function(){n.postMessage("htmlClientSdk.event.onGlobalRefresh$callback()")})}},t.prototype.postMessage=function(e,t){return this.pluginIFrame.contentWindow?void this.pluginIFrame.contentWindow.postMessage({operation:e,payload:t},"*"):void this.$log.warn("Can't post message with operation id '"+e+"'"+(" to remote plugin extension '"+this.$scope.viewId+"'")+" because iframe.contentWindow is null!")},t.prototype.onThemeChanged=function(e){this.postMessage("htmlClientSdk.internal.onThemeChanged$event",{theme:e})},t}();e.H5RemoteSdkAdapter=n,angular.module("com.vmware.platform.ui").service("h5RemoteSdkAdapterService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t){this.$http=e,this.h5SdkModalService=t}return e.prototype.bindActionHandlers=function(){h5.actions["com.vmware.vsphere.client.HtmlPluginModalAction"]=this.handleHtmlPluginModalAction.bind(this),h5.actions["com.vmware.vsphere.client.HtmlPluginHeadlessAction"]=this.handleHtmlPluginHeadlessAction.bind(this),h5.actions["com.vmware.vsphere.client.pluginActions"]=this.handlePluginActions.bind(this)},e.prototype.handleHtmlPluginModalAction=function(e,t){if(e.additionalData){var n=_.map(t,function(e){return{id:e}}),i={url:e.additionalData.actionUrl,title:e.additionalData.dialogTitle,closable:"false"!==e.additionalData.closable,contextObjects:n};if(e.additionalData.dialogSize){var r=e.additionalData.dialogSize.split(","),o={width:parseInt(r[0],10),height:parseInt(r[1],10)};i.size=o}this.h5SdkModalService.openModal(i,e.remotePluginExtensionContext)}},e.prototype.handleHtmlPluginHeadlessAction=function(e,t){if(e.additionalData){var n={targetIds:t.toString()};this.$http.post(e.additionalData.actionUrl,null,{params:n})}},e.prototype.handlePluginActions=function(e,t){var n=/^(\d+),(\d+)$/i;if(e.pluginData)if("true"===e.pluginData.headless){var i={targetIds:t.toString()};this.$http.post(e.pluginData.url,null,{params:i})}else{var r=_.map(t,function(e){return{id:e}}),o=null;if("string"==typeof e.pluginData.closable)try{o=JSON.parse(e.pluginData.closable)}catch(a){}"boolean"!=typeof o&&(o=null);var s={url:e.pluginData.url,title:e.pluginData.title,closable:o,contextObjects:r};if("string"==typeof e.pluginData.size&&n.test(e.pluginData.size)){var c=e.pluginData.size.match(n),l=parseInt(c[1],10),u=parseInt(c[2],10);l>0&&u>0&&(s.size={width:l,height:u})}this.h5SdkModalService.openModal(s,e.remotePluginExtensionContext)}},e.$inject=["$http","h5SdkModalService"],e}();e.H5SdkActionService=t,angular.module("com.vmware.platform.ui").service("h5SdkActionService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n,i){this.eventApiInitializer=i.createH5SdkEventApi(e);var r=e.viewUrlParams.locale.replace("_","-");this.sdk={app:t.createH5SdkApplicationApi(e,r),modal:n.createH5SdkModalApi(e),event:this.eventApiInitializer.api}}return e.prototype.onIframeUnload=function(){this.eventApiInitializer.onIframeUnload()},e.prototype.destroy=function(){this.eventApiInitializer.destroy()},e}();e.H5SdkInitializer=t;var n=function(){function e(e,t,n){this.h5SdkApplicationService=e,this.h5SdkModalService=t,this.h5SdkEventService=n}return e.prototype.getH5SdkApi=function(e){return new t(e,this.h5SdkApplicationService,this.h5SdkModalService,this.h5SdkEventService)},e.$inject=["h5SdkApplicationService","h5SdkModalService","h5SdkEventService"],e}();e.H5SdkApiService=n,angular.module("com.vmware.platform.ui").service("h5SdkApiService",n)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n,i,r,o,a,s){this.navigation=e,this.i18nService=t,this.pluginUrlService=n,this.iframeNavigationDataCache=i,this.vxZoneService=r,this.h5SdkThemeService=o,this.$q=a,this.$http=s}return e.prototype.createH5SdkApplicationApi=function(e,t){
return new n(e,this,this.i18nService,this.pluginUrlService,this.iframeNavigationDataCache,this.h5SdkThemeService,t)},e.prototype.navigateTo=function(e,t){var n=this;if(e.targetViewId&&t&&(e.targetViewId=t.pluginNavigableExtensionIdsPrefix+e.targetViewId),e.customData&&e.targetViewId&&-1===e.targetViewId.search("^vsphere.core..*.summary$")&&this.iframeNavigationDataCache.setNavigationData({viewId:e.targetViewId,customData:e.customData}),"string"==typeof e.objectId&&0===e.objectId.trim().length)throw new Error("Navigation failed: objectId cannot be an empty string");this.vxZoneService.runInsideAngular(function(){var i={sdkReloadPluginExtensions:Math.random()};t&&!e.objectId&&(i.rpxcId=t.contextId),n.getActualTargetViewId(e.targetViewId,t).then(function(t){if(t&&e.objectId)n.navigation.navigateToViewAndObject(t,e.objectId,i);else if(t&&!e.objectId)n.navigation.navigateToView(t,i);else{if(t||!e.objectId)throw new Error("Navigation failed: At least one of targetViewId and objectId parameters must be specified");n.navigation.navigateToObject(e.objectId,i)}})})},e.prototype.getActualTargetViewId=function(e,t){return e&&t?this.getStandardExtensionIdToSharedExtensionIdMap().then(function(t){return t[e]?t[e]:e}):this.$q.when(e)},e.prototype.getStandardExtensionIdToSharedExtensionIdMap=function(){var e=this;return this._standardExtensionIdToSharedExtensionIdMapPromise||(this._standardExtensionIdToSharedExtensionIdMapPromise=this.$http.get("/ui/plugins/standardExtensionIdToSharedExtensionIdMap").then(function(e){return e.data},function(t){return e._standardExtensionIdToSharedExtensionIdMapPromise=null,{}})),this._standardExtensionIdToSharedExtensionIdMapPromise},e.$inject=["navigation","i18nService","pluginUrlService","iframeNavigationDataCache","vxZoneService","h5SdkThemeService","$q","$http"],e}();e.H5SdkApplicationService=t;var n=function(){function e(e,t,n,i,r,o,a){this.navigateTo=function(n){t.navigateTo(n,e.remotePluginExtensionContext)},this.getClientInfo=function(){var e=n.getString("CommonUi","client.version");e=e.split("-")[0];var t={type:"html",version:e};return t},this.getContextObjects=function(){if(e.isModal)return e.context&&e.context.contextObjects?e.context.contextObjects:[];var t=i.getUrlParameterValue(window.location.href,"objectId");return t?[{id:t}]:[]},this.getClientLocale=function(){return a},this.getNavigationData=function(){return r.getReturnedNavigationData()},this.getTheme=function(){return o.getPluginTheme()}}return e}();e.H5SdkApplicationApi=n,angular.module("com.vmware.platform.ui").service("h5SdkApplicationService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(){}return e.prototype.isCrossDomainIFrame=function(e){try{return!e.contentWindow.addEventListener}catch(t){return!0}},e}();e.H5SdkCommonService=t,angular.module("com.vmware.platform.ui").service("h5SdkCommonService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t){this.vcH5ConstantsService=e,this.h5SdkThemeService=t,this.$inject=["vcH5ConstantsService","h5SdkThemeService"]}return e.$inject=["vcH5ConstantsService","h5SdkThemeService"],e.prototype.createH5SdkEventApi=function(e){return new n(e,this.vcH5ConstantsService,this.h5SdkThemeService)},e}();e.H5SdkEventService=t;var n=function(){function e(e,t,n){var i=this;this.scope=e,this.vcH5ConstantsService=t,this.h5SdkThemeService=n,this.globalRefreshEvent=null,this.onThemeChangedCallback=null,this.api={onGlobalRefresh:function(n){i.destroyGlobalRefreshEvent(),i.globalRefreshEvent=e.$on(t.DATA_REFRESH_INVOCATION_EVENT,n)},onThemeChanged:function(e){if("function"!=typeof e)throw new Error("'callback' must be a function!");i.destroyThemeChangedCallback(),i.h5SdkThemeService.subscribeToThemeChanged(e),i.onThemeChangedCallback=e}}}return e.prototype.onIframeUnload=function(){this.destroyGlobalRefreshEvent(),this.destroyThemeChangedCallback()},e.prototype.destroy=function(){this.destroyGlobalRefreshEvent(),this.destroyThemeChangedCallback()},e.prototype.destroyGlobalRefreshEvent=function(){this.globalRefreshEvent&&(this.globalRefreshEvent(),this.globalRefreshEvent=null)},e.prototype.destroyThemeChangedCallback=function(){this.onThemeChangedCallback&&(this.h5SdkThemeService.unsubscribeFromThemeChanged(this.onThemeChangedCallback),this.onThemeChangedCallback=null)},e}();e.H5SdkEventApiInitializer=n,angular.module("com.vmware.platform.ui").service("h5SdkEventService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n){this.open=function(t){n.openModal(t,e.remotePluginExtensionContext)},this.close=function(t){e.context&&e.context.closeModal&&e.context.closeModal(t)},this.setOptions=function(n){n&&(e.context&&e.context.setOptions&&e.context.setOptions(n),t.$apply())},this.getCustomData=function(){return e.context&&e.context.customData?e.context.customData:null}}return e}();e.H5SdkModalApi=t;var n=function(){function e(e,t,n){this.clarityModalService=e,this.$rootScope=n,this.$inject=["clarityModalService","logService","$rootScope"],this.logger=t("h5SdkModalService")}return e.$inject=["clarityModalService","logService","$rootScope"],e.prototype.openModal=function(t,n){function i(e){p.closeModal(e)}function r(e){e.title&&(p.modalOptions.dialogData.title=e.title),e.height&&(p.modalOptions.dialogData.pluginSize.height=e.height)}var o=this,a=e.DEFAULT_WIDTH;t.size&&t.size.width&&(t.size.width<e.MIN_WIDTH?(a=e.MIN_WIDTH,this.logger.info("Setting modal's width to "+e.MIN_WIDTH+", because it cannot be smaller than "+e.MIN_WIDTH)):t.size.width>e.MAX_WIDTH?(a=e.MAX_WIDTH,this.logger.info("Setting modal's width to "+e.MAX_WIDTH+", because it cannot be greater than "+e.MAX_WIDTH)):a=t.size.width);var s=e.DEFAULT_HEIGHT;t.size&&t.size.height&&(s=t.size.height);var c=t.title?t.title.trim():"",l=null!==t.closable&&void 0!==t.closable?!!t.closable:!0,u={title:c,pluginSize:{width:a,height:s},closable:l,url:t.url,iframeContext:{closeModal:i,contextObjects:t.contextObjects,setOptions:r,customData:t.customData},remotePluginExtensionContext:n},d={action:{}},f="resources/ui/views/plugins/pluginModalTemplate.html",p=this.clarityModalService.openModal(d,null,u,f);p.onCancelModal=function(e){if(t.onClosed)try{t.onClosed(e)}catch(n){o.logger.error("Error occurred while invoking the onClosed callback: ",n)}}},e.prototype.createH5SdkModalApi=function(e){return new t(e,this.$rootScope,this)},e.ONE_REM=24,e.DEFAULT_WIDTH=24*e.ONE_REM,e.MIN_WIDTH=12*e.ONE_REM,e.MAX_WIDTH=48*e.ONE_REM,e.DEFAULT_HEIGHT=13.5*e.ONE_REM,e}();e.H5SdkModalService=n,angular.module("com.vmware.platform.ui").service("h5SdkModalService",n)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t){var i=this;this.themeService=e,this.$log=t,this.$inject=["themeService","$log"],this.themeChangedCallbacks=[],this.DEFAULT_CLIENT_THEME_NAME=e.getKeys().light,this.CLIENT_THEME_NAME_TO_PLUGIN_THEME_NAME={},this.CLIENT_THEME_NAME_TO_PLUGIN_THEME_NAME[e.getKeys().light]=n.LIGHT,this.CLIENT_THEME_NAME_TO_PLUGIN_THEME_NAME[e.getKeys().dark]=n.DARK,e.subscribeToThemeChanged(function(){for(var e=i.getPluginTheme(),n=0;n<i.themeChangedCallbacks.length;n++)try{i.themeChangedCallbacks[n](e)}catch(r){t.error("Error while invoking themeChangedCallback with index "+n+"!",r)}})}return e.$inject=["themeService","$log"],e.prototype.getPluginTheme=function(){var e=this.themeService.getCurrentTheme();this.CLIENT_THEME_NAME_TO_PLUGIN_THEME_NAME[e]||(e=this.DEFAULT_CLIENT_THEME_NAME);var t=this.CLIENT_THEME_NAME_TO_PLUGIN_THEME_NAME[e];return{name:t}},e.prototype.subscribeToThemeChanged=function(e){-1===this.themeChangedCallbacks.indexOf(e)&&this.themeChangedCallbacks.push(e)},e.prototype.unsubscribeFromThemeChanged=function(e){var t=this.themeChangedCallbacks.indexOf(e);-1!==t&&this.themeChangedCallbacks.splice(t,1)},e}();e.H5SdkThemeService=t,function(e){e[e.LIGHT="light"]="LIGHT",e[e.DARK="dark"]="DARK"}(e.PluginThemeName||(e.PluginThemeName={}));var n=e.PluginThemeName;angular.module("com.vmware.platform.ui").service("h5SdkThemeService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(){}return e.prototype.setNavigationData=function(e){this.navigationData=e},e.prototype.getReturnedNavigationData=function(){return this.returnedNavigationData},e.prototype.updateNavigationData=function(e){var t=this.navigationData;this.navigationData=void 0,t&&t.viewId!==e&&(t=void 0),this.returnedNavigationData=t?t.customData:void 0},e}();e.IframeNavigationDataCache=t,angular.module("com.vmware.platform.ui").service("iframeNavigationDataCache",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n,i){this.defaultUriSchemeUtil=e,this.$sce=t,this.$http=n,this.$q=i}return e.prototype.associatePluginSessionWithClientId=function(e){var t=/^https?:\/\//i;return t.test(e)?this.$q.when(!0):this.$http.get(e,{headers:{"Cache-Control":"no-cache, no-store, max-age=0"}}).then(function(){return!0},function(){return!0})},e.prototype.buildUrl=function(e,t){var n=this.buildAndValidateParams(t);return e=this.appendParams(e,n),this.trustPluginUrl(e)},e.prototype.appendParams=function(t,n){return t=t.toString(),t+=t.indexOf("?")>0?"&":"?",t+=e.convertParamsToString(n)},e.convertParamsToString=function(e){return _.map(e,function(e,t){return t+"="+e}).join("&")},e.prototype.buildAndValidateParams=function(t){var n={locale:t.locale},i=t.objectId,r=i&&this.defaultUriSchemeUtil.isValidManagedObjectId(i);i&&(n.objectId=i.replace("/",e.FORWARD_SLASH_ENCODED2));var o;if(r){var a=this.defaultUriSchemeUtil.getPartsFromVsphereObjectId(i);o=a.type,n.objectType=o}var s=t.vcSelectorSelection;return s&&(n.serviceGuid=s.serviceGuid,n.sessionId=s.sessionKey,n.serviceUrl=s.serviceUrl),n},e.prototype.trustPluginUrl=function(e){return this.$sce.trustAsResourceUrl(e)},e.prototype.getUrlParameterValue=function(e,t){var n=null,i=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e);return i&&i.length>1&&(n=i[1].replace(/\+/g,"%20")),n},e.FORWARD_SLASH_ENCODED2="%252F",e.$inject=["defaultUriSchemeUtil","$sce","$http","$q"],e}();e.PluginUrlService=t,angular.module("com.vmware.platform.ui").service("pluginUrlService",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").factory("errorResponseInterceptor",["$q","$rootScope","vuiConstants","$log",function(e,t,n,i){"use strict";var r={type:"error",title:"",content:"",unhandledError:!0};return{responseError:function(n){if(n.config&&n.config.skipErrorInterceptor)return e.reject(n);if(500===n.status)r.title=n.statusText,r.content=n.data,t.$broadcast("notificationEvent",r);else if(400===n.status||404===n.status){r.title=n.statusText;var o=n.config.url;o&&o.length>1e3&&(o=o.substring(0,100)+"... ("+(o.length-100)+" more chars)"),r.content=o,t.$broadcast("notificationEvent",r)}else{var a="ResponseError "+n.statusText+", status: "+n.status+", data: "+(n.data?n.data.toString():"")+", url: "+(n.config?n.config.url:""),s=window.location.toString();-1===s.indexOf("localhost:9443")&&-1===s.indexOf("h5-acceptance-ui.eng.vmware.com")?i.error(a):(r.title=n.statusText,r.content=a,t.$broadcast("notificationEvent",r))}return e.reject(n)}}}]),angular.module("com.vmware.platform.ui").config(["$httpProvider",function(e){"use strict";e.interceptors.push("errorResponseInterceptor")}]),angular.module("com.vmware.platform.ui").config(["$httpProvider",function(e){e.interceptors.push(["$q",function(e){return{request:function(t){if(t.cancelOnDestroy){var n=e.defer();t.timeout=n.promise,t.cancelOnDestroy.$on("$destroy",function(){n.resolve()})}return t}}}])}]);var platform;!function(e){var t=function(){function e(e,t,n){var i=this;this.userSessionService=e,this.$window=t,this.$q=n,this.vac_url="https://vcsa.vmware.com",this.request=function(e){if(i.$window.h5.isLogoutInProgress)return i.$q.defer().promise;var t=i.userSessionService.webClientSessionId&&e.url&&!e.url.startsWith(i.vac_url);return t&&(e.headers[i.userSessionService.WEB_CLIENT_SESSION_ID]=i.userSessionService.webClientSessionId),e}}return e}();e.RequestInterceptor=t,angular.module("com.vmware.platform.ui").factory("requestInterceptor",["userSessionService","$window","$q",function(e,n,i){return new t(e,n,i)}]),angular.module("com.vmware.platform.ui").config(["$httpProvider",function(e){e.interceptors.push("requestInterceptor"),e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get.Pragma="no-cache"}])}(platform||(platform={})),function(){"use strict";function e(e,t,n){var i=!1,r={responseError:function(r){if(-1===r.status){var o=e.defer().promise;return o}if(401===r.status&&!i){if(!n.h5.isLoggedIn)return void(n.location.href="login");i=!0;var a=t.get("logoutService");a.logout({showNotification:!0})}return e.reject(r)},isErrorShown:function(){return i}};return r}angular.module("com.vmware.platform.ui").factory("responseErrorInterceptor",e),e.$inject=["$q","$injector","$window"],angular.module("com.vmware.platform.ui").config(["$httpProvider",function(e){e.interceptors.push("responseErrorInterceptor")}])}(),angular.module("com.vmware.platform.ui").factory("refreshHttpInterceptor",["$q","$rootScope",function(e,t){var n=0;return{request:function(i){return i&&i.skipLoadingNotification===!0||(n++,t.$broadcast("showRefreshSpinner")),i||e.when(i)},requestError:function(t){return e.reject(t)},response:function(i){return i.config&&i.config.skipLoadingNotification===!0||n--,0===n&&t.$broadcast("hideRefreshSpinner"),i||e.reject(i)},responseError:function(i){return i.config&&i.config.skipLoadingNotification===!0||n--,0===n&&t.$broadcast("hideRefreshSpinner"),e.reject(i)}}}]),angular.module("com.vmware.platform.ui").config(["$httpProvider",function(e){e.interceptors.push("refreshHttpInterceptor");var t=function(e,t){return e};e.defaults.transformRequest.push(t)}]),function(){"use strict";angular.module("com.vmware.platform.ui").factory("browserHistoryService",["$document","i18nService",function(e,t){function n(t,n,i){return e&&e[0]?n?void r(t,n,i):void o(null,t,i):void 0}function i(e,t){c===e&&(l=t,o(l))}function r(e,t,n){t&&(c!==t&&(c=t,l=null),o(l,e,n))}function o(t,n,i){var r="";t&&(r=t),n&&(u=a(n),d=i),s(u)&&(r?r+=" - "+u:r=u),r=r?p+r:f,i&&(d=i),d&&(r+=': "'+d+'"'),e&&e[0]&&(e[0].title=r)}function a(e){var t=e.getSelectedLeafNode();return t?t.name?t.name:t.label:""}function s(e){return e&&"(missing name)"!==e}var c,l,u,d,f=t.getString("Common","productName"),p=f+" - ";return{setBrowserTitle:n,notifyCurrentObjNameChanged:i}}])}();var platform;!function(e){"use strict";var t=function(){function e(e,t,n,i,r,o,a,s,c,l,u,d,f){this.$rootScope=e,this.$location=t,this.$http=n,this.$templateCache=i,this.$q=r,this.$log=o,this.navigationTreeService=a,this.navigationPreferenceService=s,this.navigatorRelationsService=c,this.browserHistoryService=l,this.urlService=u,this.telemetryTimeTrackerFactory=d,this.navigationConstants=f,this.route={},this.previousRoute={},this.offLocationChangeSuccess=null,this.retries=0}return e.prototype.getTree=function(){return this.tree},e.prototype.getRoute=function(){return this.route},e.prototype.getPreviousRoute=function(){return this.previousRoute},e.prototype.populateScope=function(e){var t=this;angular.extend(e,{_route:t.route,_navigate:t.navigate.bind(t),_navigateToObject:t.navigateToObject.bind(t),_navigateToViewAndObject:t.navigateToViewAndObject.bind(t),_navigateToView:t.navigateToView.bind(t)})},e.prototype.fetch=function(e,t){var n=this;if(this.tree&&this.extensionId&&this.extensionId===e.extensionId&&this.objectId&&this.objectId===e.objectId&&this.relatedItem===e.relatedItem)return this.navigationTreeService.cancelPrevious(),this.extensionId=null,this.objectId=null,this.relatedItem=void 0,this.$q.resolve(this.tree);if(this.tree&&this.extensionId&&this.extensionId===e.extensionId&&this.extensionId===this.navigationConstants.SEARCH_VIEW_EXTENSION_ID)return this.$q.resolve(this.tree);var i=!(t&&t.cancellable===!1);return this.navigationTreeService.fetchNavigationTree(e,i).then(function(t){return n.tree=t,n.extensionId=e.extensionId,n.objectId=e.objectId,n.relatedItem=e.relatedItem||void 0,t},function(e){return n.$q.reject(e)})},e.prototype.getRouteFromUrl=function(){var e=this.$location.search();"null"===e.objectId&&(e.objectId=null);var t=angular.copy(e);return e.extensionId||e.objectId||e.navigator?e.extensionId||e.navigator||!e.objectId||(t.extensionId=h5.ext):(t.extensionId=null,t.objectId=null,t._frontPage=!0),t.getAdditionalParams=function(e){var t=void 0===e?this:e,n={},i=["extensionId","objectId","_navigationParam"];for(var r in t)-1!==i.indexOf(r)||angular.isFunction(t[r])||(n[r]=t[r]);return n},t},e.prototype.navigateToServerObject=function(e,t){var n=this;this.applyUserRoutePreferences(e).then(function(e){return n.fetch(e)}).then(function(i){if(e.extensionId!==n.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID){var r=i.getById(e.extensionId);if(!r||!r.parent||r.parent.$childIndexToActivate<0){var o=n.tree.getSelectedLeafNode();e.extensionId=o.$id}}n.retries=0,n._navigationParam=t;var a=n.$location.search(),s=n.$location.search(e);a&&(a.extensionId&&_.contains(n.navigationConstants.NAVIGATOR_IDS,a.extensionId)||a.extensionId===e.extensionId&&a.objectId===e.objectId&&"tree"===a.navigator&&_.contains(n.navigationConstants.NAVIGATOR_IDS,e.navigator))&&s.replace()},function(t){return n.retries>=n.navigationConstants.RETRIES_THRESHOLD?(n.retries=0,n.$q.reject(t)):500!==t.status?n.$q.reject(t):(n.retries++,n.navigationPreferenceService.invalidate(e.objectId),n.navigate(n.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID,e.objectId),n.$q.reject(t))})},e.prototype.navigateToRelatedObject=function(e,t,n){var i=angular.extend({},{extensionId:this.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID,objectId:e});this.navigatorRelationsService.setRelationContext(t,n),this.$location.search(i)},e.prototype.navigate=function(e,t,n,i){i=i||this._navigationParam||!0,n=n||{},n.relatedItemParentId&&(n.relatedItem=e,e=n.relatedItemParentId,delete n.relatedItemParentId);var r=angular.extend({extensionId:e,objectId:t},n),o=this.$location.search();angular.equals(o,r)||r.extensionId===this.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID&&r.objectId===o.objectId&&r.navigator===o.navigator||(this.telemetryTimeTracker.startTimeTracking(),r.objectId?this.navigateToServerObject(r,i):(this._navigationParam=i,this.$location.search(r),this.telemetryTimeTracker.stopTimeTracking()))},e.prototype.init=function(){this.route=angular.copy(this.getRouteFromUrl()),this.populateScope(this.$rootScope),this.telemetryTimeTracker=this.telemetryTimeTrackerFactory.createTelemetryTracker(this.navigationConstants.NAVIGATION_REQUEST_DURATION_MEDIAN,this.navigationConstants.NAVIGATION_REQUEST_BUFFER_TIME_PROP),this.route=angular.copy(this.getRouteFromUrl()),this.populateScope(this.$rootScope)},e.prototype.doInitialRouting=function(){var e=this,t=this.route._frontPage?this.applyUserRoutePreferences(this.route):this.$q.when(this.route);return t.then(function(t){return t._frontPage&&e.$location.search({extensionId:t.extensionId||e.navigationConstants.DEFAULT_CLIENT_LOCATION}).replace(),e.onLocationChange({cancellable:!1,forceNavigate:!0}).then(function(){e.subscribeForLocationChange()},function(t){e.$log.error(t),e.subscribeForLocationChange()})})},e.prototype.navigateToObject=function(e,t){var n=angular.extend({navigator:"tree"},t);this.navigate(this.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID,e,n,{triggerONChange:!0})},e.prototype.navigateToViewAndObject=function(e,t,n){var i=angular.extend({navigator:"tree"},n);this.navigate(e,t,i,{triggerONChange:!0})},e.prototype.navigateToView=function(e,t){this.navigate(e,null,t,{triggerONChange:!0})},e.prototype.shouldReload=function(e,t,n,i){return n.objectId!==i.objectId},e.prototype.onLocationChange=function(e){var t=this;this.telemetryTimeTracker.stopTimeTracking();var n=this.getRouteFromUrl(),i=!(e&&e.cancellable===!1);e&&e.forceNavigate===!0&&(n.forceNavigate=!0);var r=this.fetch(n,{cancellable:i}).then(function(e){return t.handleRelatedItemLeafNode(e,n)},function(e){if(t.retries>=t.navigationConstants.RETRIES_THRESHOLD)return t.retries=0,t.$q.reject(e);if(500!==e.status)return t.$q.reject(e);t.retries++;var i=t.$location.search();return i.objectId?(i.extensionId=t.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID,t.navigationPreferenceService.invalidate(n.objectId)):i.extensionId=t.navigationConstants.HOME_EXTENSION_ID,t.subscribeForLocationChange(),t.$location.search(i).replace(),t.$q.reject(e)});return n._navigationParam=this._navigationParam,this._navigationParam=null,r.then(function(e){if(t.browserHistoryService.setBrowserTitle(e,n.objectId,n.query),e.constructor!==NavigationTree)throw"tree needs to be of type NavigationTreeModel";return t.tree=e,angular.copy(t.route,t.previousRoute),angular.copy(n,t.route),t.precacheTemplates(t.tree).then(function(){t.preCacheTemplateCallback(n)},function(e){t.$log.error("Failed to retrieve one or more html templates."+e),t.preCacheTemplateCallback(n)})})},e.prototype.precacheTemplates=function(e){var t=this,n=[];return e.everyNode(function(e){var i=e.contentSpec&&e.contentSpec.sandbox;e.$templateUrl&&!i&&n.push(t.$http.get(e.$templateUrl,{cache:t.$templateCache}))}),this.$q.all(n)},e.prototype.preCacheTemplateCallback=function(e){e.extensionId&&e.extensionId!==this.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID&&this.navigationPreferenceService.persistLastExtension(e.objectId,e.extensionId,e.relatedItem,e.navigator),this.$rootScope.$broadcast("vxRouteChangeSuccess",this.tree,this.route,this.previousRoute)},e.prototype.subscribeForLocationChange=function(){var e=this;this.offLocationChangeSuccess||(this.offLocationChangeSuccess=this.$rootScope.$on("$locationChangeSuccess",function(t,n,i){n=e.urlService.removeParameter(n,h5.listViewSelectedItemIdProperty),i=e.urlService.removeParameter(i,h5.listViewSelectedItemIdProperty),n!==i&&e.onLocationChange()}))},e.prototype.handleRelatedItemLeafNode=function(e,t){var n=e.getSelectedLeafNode();if(!(n.extensionObject&&n.extensionObject.contentSpec&&n.extensionObject.contentSpec.metadata&&(n.extensionObject.contentSpec.metadata.fetchRelatedAsChildren||n.extensionObject.contentSpec.metadata.showRelationsFor)))return this.$q.resolve(e);if(0!==n.$children.length)throw"Assumption violated: any extension with fetchRelatedAsChildren or showRelationsFor set should not have any children as they come from a different data structure";var i,r={relationsViewId:n.uid};return n.extensionObject.contentSpec.metadata.fetchRelatedAsChildren?i="relateditems/list/"+t.objectId:(i="relateditems/listspec/"+n.extensionObject.contentSpec.metadata.showRelationsFor,r.onlyFavorites=!1),this.$http({method:"get",url:i,params:r}).then(function(i){var r=i.data;n.$children=r,n.$selectedChildIndex=r.length?0:-1;for(var o=0;o<r.length;o++){var a=r[o],s=a.listSpec&&a.listSpec.contentSpec?a.listSpec.contentSpec.url:null;angular.extend(a,{$id:a.listSpec.uid,$children:[],$parent:n,$selectedChildIndex:-1,$templateUrl:s,liveRefreshEnabled:!0}),t.relatedItem===a.$id&&(n.$selectedChildIndex=o)}return e})},e.prototype.applyUserRoutePreferences=function(e){var t=this;return e.extensionId&&this.navigationConstants.SERVER_OBJECT_VIEW_EXTENSION_ID!==e.extensionId?this.$q.resolve(e):this.navigationPreferenceService.getLastExtension(e.objectId).then(function(t){return t&&t.extensionId&&(e.extensionId=t.extensionId),t&&t.relatedItem&&(e.relatedItem=t.relatedItem),e},function(e){t.$log.error("User preferences for the route not applied correctly."+e)})},e.$inject=["$rootScope","$location","$http","$templateCache","$q","$log","navigationTreeService","navigationPreferenceService","navigatorRelationsService","browserHistoryService","urlService","telemetryTimeTrackerFactory","navigationConstants"],e}();e.Navigation=t,angular.module("com.vmware.platform.ui").service("navigation",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").constant("navigationConstants",{DEFAULT_CLIENT_LOCATION:"vsphere.core.viTree.hostsAndClustersView",SERVER_OBJECT_VIEW_EXTENSION_ID:"vsphere.core.inventory.serverObjectViewsExtension",SEARCH_VIEW_EXTENSION_ID:"vsphere.core.search.domainView",NAVIGATOR_IDS:["vsphere.core.viTree.hostsAndClustersView","vsphere.core.viTree.vmsAndTemplatesView","vsphere.core.viTree.storageView","vsphere.core.viTree.networkingView"],HOME_EXTENSION_ID:"com.vmware.samples.dashboard.mainView",SHORTCUTS_EXTENSION_ID:"vsphere.core.controlcenter.domainView",HOSTS_AND_CLUSTERS_EXTENSION_ID:"vsphere.core.viTree.hostsAndClustersView",VMS_EXTENSION_ID:"vsphere.core.viTree.vmsAndTemplatesView",STORAGE_EXTENSION_ID:"vsphere.core.viTree.storageView",NETWORKING_EXTENSION_ID:"vsphere.core.viTree.networkingView",DATASTORES_EXTENSION_ID:"vsphere.core.viLibraries.domainView",GLOBAL_INVENTORY_LISTS_EXTENSION_ID:"vsphere.core.viHome.domainView",RETRIES_THRESHOLD:3,NAVIGATION_REQUEST_DURATION_MEDIAN:"navReqDurationMed",NAVIGATION_REQUEST_BUFFER_TIME_PROP:"telemetry.navigation.bufferTime"}),angular.module("com.vmware.platform.ui").factory("navigationPreferenceService",["localStorageService","defaultUriSchemeUtil","$q",function(e,t,n){function i(){d=!1}function r(){d=!0}function o(t){return d?e.getUserData(c(t)):n.resolve()}function a(t){return d?(e.setUserData(c(t),{}),!0):!1}function s(t,n,i,r){d&&(r&&"tree"!==r&&e.setUserData(c(),{extensionId:r}),e.setUserData(c(t),{extensionId:n,relatedItem:i}))}function c(e){var t=e?u+"."+l(e):u;return t}function l(e){return t.isRootFolder(e)?"RootFolder":t.getEntityType(e)}var u="navigation.history.extension",d=!0;return{disablePersistence:i,enablePersistence:r,getLastExtension:o,persistLastExtension:s,invalidate:a}}]);var NavigationTree=function(){function e(e){var t=this;this.root=e,this.everyNode(function(e){e.getSelectedChild=function(){return t.getSelectedChild(e)},e.getNonEmptyChildren=function(){for(var t=[],n=0;n<e.$children.length;n++){var i=e.$children[n];("resources/ui/views/TocView.html"!==i.$templateUrl||angular.isArray(i.$children)&&i.$children.length>0)&&t.push(i)}return t}})}return e.everyNode=function(t,n,i,r){n(t,r),t[i].forEach(function(r){e.everyNode(r,n,i,t)})},e.prototype.everyNode=function(t){return e.everyNode(this.root,t,"$children")},e.prototype.getSelectedLeafNode=function(){for(var e,t=this.root;t.getSelectedChild&&(e=t.getSelectedChild());)t=e;return t},e.prototype.getById=function(e){var t={};return this.everyNode(function(n,i){n.$id===e&&(t.node=n,t.parent=i)}),t},e.prototype.getNodeAtLevel=function(e){for(var t=this.root,n=0;e>n;n++)if(t=this.getSelectedChild(t),!t)return null;return t},e.prototype.getSelectedChild=function(e){return e&&-1!==e.$selectedChildIndex?e.$children[e.$selectedChildIndex]||null:null},e}();!function(){"use strict";function e(e,t,n,i){function r(n,i){var r={method:"get",url:"navigation/data/"+n.extensionId,params:{objectId:n.objectId},skipErrorInterceptor:!0},u=i?c.fetch(r):e(r);return u.then(function(e){if(!e){var i="undefined response to navigation/data/"+n.extensionId;return l.error(i),t.reject(i)}var r=e.data;return NavigationTree.everyNode(r,function(e,t){var n=s[e.error]||e.extensionObject.contentSpec&&(e.extensionObject.contentSpec.url||a)||o;angular.extend(e,{$id:e.error||e.extensionObject.uid,$children:e.children,$parent:t||null,$selectedChildIndex:e.childIndexToActivate,$templateUrl:n,$viewRetentionPolicy:e.extensionObject&&e.extensionObject.contentSpec&&e.extensionObject.contentSpec.viewRetentionPolicy?e.extensionObject.contentSpec.viewRetentionPolicy:null},e.extensionObject)},"children"),new NavigationTree(r)},function(e){return t.reject(e)})}var o="common-module-ui/resources/common-module/views/NotImplemented.html",a="common-module-ui/resources/common-module/views/NotSupported.html",s={OBJECT_NOT_FOUND:"resources/ui/views/objectnavigator/error/ObjectNotFound.html"},c=n(),l=i("navigationTreeService");return{fetchNavigationTree:r,cancelPrevious:c.cancel}}angular.module("com.vmware.platform.ui").factory("navigationTreeService",e),e.$inject=["$http","$q","httpCancellationService","logService"]}();var platform;!function(e){var t=function(){function e(){}return e.prototype.setRelationContext=function(e,t){this.relationContext={relation:e,relatedItemUri:t}},e.prototype.consumeRelationContext=function(){var e=this.relationContext;return this.relationContext=void 0,e},e}();e.NavigatorRelationsService=t,angular.module("com.vmware.platform.ui").service("navigatorRelationsService",t)}(platform||(platform={}));var sandbox;!function(e){var t="dataRefreshInvocationEvent",n=function(){function e(e,t){this.$rootScope=e,this.sandboxMessagingService=t,this.initialized=!1}return e.prototype.init=function(){var e=this;this.initialized||(this.initialized=!0,this.$rootScope.$on(t,function(){return e.sendGlobalRefreshMessage()}),this.sandboxMessagingService.subscribeForMessages(function(t,n){return e.onMessage(t,n)}))},e.prototype.sendGlobalRefreshMessage=function(){var e={message:"globalRefresh"};this.sandboxMessagingService.broadcastMessage(e)},e.prototype.onMessage=function(e,t){},e.$inject=["$rootScope","sandboxMessagingService"],e}();e.SandboxBridgeService=n,angular.module("com.vmware.platform.ui").service("sandboxBridgeService",n)}(sandbox||(sandbox={}));var sandbox;!function(e){var t=function(){function e(e){var t=this;this.$window=e,this.listeners=[],this.$window.addEventListener("message",function(e){return t.receiveMessage(e)},!1)}return e.prototype.broadcastMessage=function(e){_.each(this.$window.frames,function(t){return t.postMessage(e,"*")})},e.prototype.subscribeForMessages=function(e){-1===this.listeners.indexOf(e)&&this.listeners.push(e)},e.prototype.receiveMessage=function(e){_.each(this.listeners,function(t){return t(e.data,e.source)})},e.$inject=["$window"],e}();e.SandboxMessagingService=t,angular.module("com.vmware.platform.ui").service("sandboxMessagingService",t)}(sandbox||(sandbox={})),function(){"use strict";function e(e,t,n,i,r,o,a,s){function c(e,t,r){if(i.isUndefinedOrNull(e))return void v.error("ActionEval not found");if(!e.action)return void v.error("ActionEval's action not found");var o=e.action.uid;if(!e.invoker||0===e.invoker.length)return void v.error("No invoker specified for action: "+o);var a,c=l,u=!1;if(e.evaluationStatuses){var d=Object.keys(e.evaluationStatuses).length;if(u=d>1)if(e.available){var f=0;_.each(e.evaluationStatuses,function(e){e.available&&f++}),a=d===f?p(n.interpolate(e.action.confirmationTextAll,[f]),n.getString("Common","defaultConfirmation.allOK",f)):p(n.interpolate(e.action.confirmationTextSome,[f,d]),n.getString("Common","defaultConfirmation.someOK",f,d))}else a=p(e.action.confirmationTextNone,n.getString("Common","defaultConfirmation.noneOK")),c=m;else{if(!e.available)return void v.error("Unavailable action "+o+" for single object");a=p(e.action.confirmationText,"")}}var b=!r&&e.available&&e.additionalProperties&&e.additionalProperties[S]&&!_.contains(y,e.invoker);if(a){var I=g(e,a,t);return b?void s.buildConfirmationText(e.context.targetObjects,a).then(function(e){e&&(I.message=e),c(I)}):void c(I)}return!u&&b&&e.action.confirmationText!==h?void s.buildConfirmationText(e.context.targetObjects,"",!0).then(function(n){if(n){var i=g(e,a,t);i.message=n,c(i)}else t&&"function"==typeof t&&t()}):void(t&&"function"==typeof t&&t())}function l(e){_.defaults(e,{icon:"icon-warning-32",yesHandler:function(){},noHandler:function(){}}),_.extend(e,{yesLabel:n.getString("Common","yes.label"),noLabel:n.getString("Common","no.label")}),e.useClarity?d(e):u(e)}function u(n){var i=t.$new();i.alertOptions={title:n.title,text:n.message,icon:n.icon,visible:!0,confirmOptions:{label:n.yesLabel,visible:!0,disabled:!1,onClick:function(){n.yesHandler(),f()}},rejectOptions:{label:n.noLabel,visible:!0,disabled:!1,focused:!0,onClick:function(){n.noHandler(),f()}}};var r='<div id="action-confirmation" class="action-confirmation" vx-alert="alertOptions"></div>',o=angular.element(r),a=e(o)(i),s=n.parent||"#main-app-div";angular.element(s).append(a);
}function d(e){var t={title:e.title,subTitle:e.subTitle,message:e.message,icon:e.icon,preserveNewlines:!0,saveButtonLabel:e.yesLabel,cancelButtonLabel:e.noLabel,showXIcon:e.showXIcon,submit:e.yesHandler,onCancel:e.noHandler};_.isEmpty(e.clarityIcon)||(t.clarityIcon=e.clarityIcon),e.yesIsDefaultButton||(t.defaultButton="close"),o.openConfirmationModal(t)}function f(){angular.element("#action-confirmation").remove()}function p(e,t){return e?e!==h?e:null:t}function m(e){o.openConfirmationModal({title:e.title,message:e.message,submit:function(){},preserveNewlines:!0,saveButtonLabel:n.getString("Common","alert.ok"),cancelButtonLabel:null,hideCancelButton:!0,clarityIcon:{shape:"warning","class":"is-warning",size:48},showXIcon:!1})}function g(e,t,n){var i=e.action.confirmationTitle?e.action.confirmationTitle:e.action.label,r={useClarity:!0,title:i,message:t,yesHandler:n,icon:null,clarityIcon:{shape:"warning","class":"is-warning",size:48},showXIcon:!1};return e.context&&1===e.context.targetObjects.length&&_.extend(r,{subTitle:{objectId:a.getVsphereObjectId(e.context.targetObjects[0])}}),r}var v=r("actionConfirmationService"),h="CUSTOM",S="managedByExtensionKey",y=["com.vmware.vsphere.client.htmlbridge.HtmlActionDelegate","com.vmware.vsphere.client.pluginActions","com.vmware.vsphere.client.HtmlPluginHeadlessAction","com.vmware.vsphere.client.HtmlPluginModalAction"];return{confirmIfRequired:c,showConfirmationDialog:l,showWarningDialog:m}}angular.module("com.vmware.platform.ui").service("actionConfirmationService",e),e.$inject=["$compile","$rootScope","i18nService","jsUtils","logService","clarityModalService","defaultUriSchemeUtil","managedByMessageBuilderService"]}(),angular.module("com.vmware.platform.ui").factory("actionDialogService",["$q","$rootScope","vuiDialogService","dataService","i18nService",function(e,t,n,i,r){function o(e,t,n){return n.title&&-1===n.title.indexOf("{0}")?n.title:t?1===t.length?(a(t[0],n,e,n.title),e.action.label):r.getString("Common","dialogTitleFormatMultiple",t.length,e.action.label):e.action.label}function a(e,t,n,o){return i.getProperties(e,["name"]).then(function(e){e.name&&(o?t.title=r.interpolate(o,[e.name]):t.title=r.getString("Common","dialogTitleFormat",e.name,n.action.label))})}var s=function(e,i,r,a,s,c){var l=t.$new(),u=angular.extend({show:!0,iconClass:e.action.icon,contentUrl:a,actionDetails:{actionEval:e,availableTargets:i,dialogData:r},width:"400px",height:"200px"},s||{});s&&(u=angular.extend(s,u)),l.dialogOptions=u,l.dialogOptions.title=o(e,i,l.dialogOptions);var d=angular.merge({},c);return d=angular.extend(d,{scope:l,configObjectName:"dialogOptions"}),n(d)};return{openActionDialog:s}}]),angular.module("com.vmware.platform.ui").factory("actionsService",["$http","$window","logService","i18nService","vuiActionsMenuService","vuiConstants","$q","actionConfirmationService","jsUtils","$timeout","$analytics","dataService","keyboardShortcutMapper",function(e,t,n,i,r,o,a,s,c,l,u,d,f){"use strict";function p(e,t,n,i){var r={id:e.id,label:e.label,iconClass:e.icon,enabled:!0};return e.type===A.SEPARATOR?o.actions.SEPARATOR:(e.type===A.MENU?(e.id||(e.id=V()),r.items=e.children.map(function(e){return p(e,t,n,i)})):e.type===A.ACTION&&(r.onClick=function(t){i(e.id,n,t)},r.keyboardShortcut=f.getFormattedKeyboardShortcut(e.id)),t[r.id]=r,r)}function m(e,t){var n={id:"header_id",label:e,iconClass:t};return n}function g(){var e=i.getString("Common","contextMenu.noActionsItem"),t={id:V(),label:e,enabled:!1};return t}function v(){var e=i.getString("Common","contextMenu.loadingItem"),t={id:V(),label:e,enabled:!1};return t}function h(e,t){var n="actionsService/menu/",i={menuType:e};return H(n,i,{},t,"post")}function S(e,t){var n="actionsService/menus/"+e.join(",");return H(n,{},{},t,"post")}function y(e){var t="actionsService/toolbar/",n={listViewId:e};return H(t,n)}function b(e,t,n){var i=$(window).height(),r=e.outerHeight(!0);if(r>i-t){var a=r-e.height();e.css({maxHeight:i-a-t});var s=n.outerHeight(!0)-n.height(),c=i-(s+t+a);n.css({maxHeight:c}),n.addClass(o.actions.VUI_MENU_SCROLLER_CLASS)}}function I(){$(".k-menu.k-menu-vertical.k-context-menu span.k-link").each(function(e,t){if(t.offsetWidth<t.scrollWidth){var n=$(t);n.attr("title",n.text())}})}function C(){function e(e,n,r,o){var s=a.defer();if(null===n)return s.promise;var c=Object.keys(n),u=L(e);return 0!==c.length&&B(u,c,r).then(function(r){if(null!==r&&_.isArray(r)){if(e&&1===e.length){var a=e[0].name;r.forEach(function(e){e&&e.action&&e.action.confirmationText&&(e.action.confirmationText=i.interpolate(e.action.confirmationText,[a]))})}t(n,r,o),l(I,0),s.resolve()}},function(){P.error("Get Actions call Failed for targets "+u+" and actions "+c)}),s.promise}function t(e,t,i){t.forEach(function(t){i&&i.skipSetMenuItemEnabled||(e[t.action.uid].enabled=t.available),s[t.action.uid]=t}),null!==c&&s[c]&&(n(c),c=null)}function n(t,n,i){if(n&&n.length>1){var o={};o[t]={},e(n,o,!0,{skipSetMenuItemEnabled:!0}).then(function(){r(t)})}else r(t)}function r(e){if(!s[e])return void(c=e);var t=s[e];G(t)}function o(){return s}var s={},c=null;return{evaluateActions:e,setActionEvaluations:t,callInvoker:n,getActionEvalsByActionUid:o}}function w(e,t,n){var i=L(t),r={},o={},s=new C,u=a.defer();return h(e,i).then(function(e){var a;a=e.label?m(e.label,e.icon):U(t),c.isEmpty(e.children)?a.items=[g()]:a.items=e.children.map(function(e){return e.extendedPoint===M?p(e,o,t,s.callInvoker):p(e,r,t,s.callInvoker)}),a.focusable=n,(!t||t.length<=1)&&s.evaluateActions(t,r,!0),_.isEmpty(o)||(_.each(o,function(e){e.items.push(v())}),S(_.keys(o),i).then(function(e){T(o,s,t,e)})),l(function(){u.resolve(a)},0)})["catch"](function(){P.error("Get menu call Failed");var e=U(t);e.items=[g()],u.resolve(e)}),u.promise}function T(e,t,n,i){var r={};n&&1!==n.length||_.each(i.evaluations,function(e){r[e.action.uid]=e}),_.each(e,function(e){e.items=[]}),_.each(i.menus,function(i){var o=e[i.id];o.items=i.children.reduce(function(i,o){r[o.id];if(n){var a=p(o,e,n,t.callInvoker);i.push(a)}return i},[])}),_.each(e,function(e){e.items&&0===e.items.length&&e.items.push(g())}),i.evaluations&&t.setActionEvaluations(e,i.evaluations,{skipSetMenuItemEnabled:!1})}function E(e){var t=a.defer(),n={},i=new C;return y(e).then(function(e){return null===e?void l(function(){t.resolve([])},0):($.each(e,function(e,t){n[t.id]={id:t.id,label:t.label,iconClass:t.icon,enabled:!0,onClick:function(e){i.callInvoker(t.id,null,e)}}}),i.evaluateActions(null,n),void l(function(){t.resolve(n)},0))})["catch"](function(){P.error("Build actions toolbar failed for list view: "+e),l(function(){t.resolve([])},0)}),t.promise}function k(e,t,n){e&&(n||(n=D(e)),x(e,n)?d.getProperties(n[0],["name"]).then(function(n){e.action.confirmationText=i.interpolate(e.action.confirmationText,[n.name]),G(e,t)}):(n.length>1||e.available===!0&&1===n.length)&&G(e,t))}function D(e){var t=0,n=[];if(e&&e.evaluationStatuses)for(var i in e.evaluationStatuses)e.evaluationStatuses[i].available&&(n[t++]=i);return n}function x(e,t){return e.available===!0&&1===t.length&&e.action&&e.action.confirmationText&&e.action.confirmationText.includes("{0}")}function O(){return $("#"+R)}var P=n("actionsService"),A={MENU:"MENU",SEPARATOR:"SEPARATOR",ACTION:"ACTION"},N=0,R="applicationMenuContainer",M="vise.menus.context.solutionMenus",j="vise.menus.context,vise.menus.context.solutionMenus",L=function(e){if(null===e)return null;var t=[];return $.each(e,function(e,n){t.push(n.id)}),t},U=function(e){var t,n;if(e&&e.length>0){var r="";if(e.length>1)r=i.getString("Common","contextMenu.title.nObjects",e.length);else if(1===e.length){var o=e[0];r=o.name?o.name:i.getString("Common","contextMenu.title.oneObject"),o.primaryIconId&&(n=o.primaryIconId)}t=i.getString("Common","contextMenu.title",r)}return m(t,n)},V=function(){return(N++).toString()},F=function(e,t,n){n=n?n:!1;var i="actionsService/actions/evaluations/"+e,r={};t&&0!==t.length&&(r.targetUids=t);var o={};return o.skipErrorInterceptor=n,H(i,r,o)},B=function(e,t,n,i){return i=void 0===i||null===i?{}:i,e||(e=[]),_.isString(e)&&(e=[e]),t&&0!==t.length&&(i.actionUids=t),n&&(i.skipActionFilteringStage=!0),H("actionsService/actions/evaluations",i,{},e,"post")},H=function(t,n,i,r,o){return i=i?i:{},o=o||"get",e({method:o,url:t,params:n,data:r,skipLoadingNotification:!0,skipErrorInterceptor:i.skipErrorInterceptor?!0:!1}).then(function(e){return e.data})},G=function(e,t){var n=D(e);u.eventTrack(e.action.uid,{category:"h5.actions.trigger",label:n});var i=function(){return h5.actions[e.invoker](e,n,t)};s.confirmIfRequired(e,i)},q=function(e,t,n,i,o,s,l,d){var f=a.defer();i instanceof Array||(i=c.isUndefinedOrNull(i)?[]:[i]);var p=n.$new(),m=l;return!m&&e&&(m=e.target),w(t,i,d).then(function(e){p.actionsMenu=e;var t={scope:p,configObjectName:"actionsMenu",target:m,menuContainerId:R};c.isUndefinedOrNull(o)||c.isUndefinedOrNull(s)||(t.coordinates={x:o,y:s}),r.showMenu(t),I(),f.resolve(e)})["finally"](function(){var e=i.map(function(e){return e.id});u.eventTrack("h5.viewActions",{category:"h5.actions.view",label:e})}),f.promise},z=function(e,t,n,i,r,o,a){return q(e,j,t,n,i,r,o,a)},W=function(e,t,n,i){var r=Math.min(n,t.outerWidth()-e.outerWidth()),o=O();o.css({left:r+"px"}),o.css({top:i+"px"}),b(o,i,e)};return{getAction:F,getActions:B,getApplicationMenuContainerElement:O,getData:H,invokeAction:G,showActionsMenu:q,showObjectContextMenu:z,buildActionsToolbar:E,invokeActionWithConfirmation:k,calculateActionsMenuPosition:W}}]),angular.module("com.vmware.platform.ui").factory("alarmIssueActionService",["$http","$window","logService","i18nService","vuiActionsMenuService","mutationService","authorizationService","defaultUriSchemeUtil","$rootScope","vuiConstants","$q","jsUtils","$timeout","$analytics",function(e,t,n,i,r,o,a,s,c,l,u,d,f,p){"use strict";function m(e,t,n,i,o,a,s){var c=t.$new();c.menuDescriptor=g(n,i);var l=s;!l&&e&&(l=e.target);var u={scope:c,configObjectName:"menuDescriptor",target:l,menuContainerId:"applicationMenuContainer"};d.isUndefinedOrNull(o)||d.isUndefinedOrNull(a)||(u.coordinates={x:o,y:a}),r.showMenu(u),S(),p.eventTrack("h5.viewActions",{category:"h5.actions.view",label:i.key})}function g(e,t){var n=v(e,t),r=i.getString("Common","contextMenu.title.actions"),o=y(t),a=r+" - "+e.name,s={label:a,iconClass:o,items:n};return s}function v(e,t){var n={actionUidToMenuItemDescriptor:{},actionUidToEvaluatedAvailability:{},pendingAction:null},i=[];return _.forEach(k,function(r){var o=D[r],a=h(o,e,t,n);i.push(a),n.actionUidToMenuItemDescriptor[r]=a}),b(e,t,n),i}function h(e,t,n,i){return{enabled:!0,iconClass:e.iconClass,id:e.actionUid,label:e.label,onClick:function(t){return I(n,i,e.actionUid)}}}function S(){$(".k-menu.k-menu-vertical.k-context-menu span.k-link").each(function(e,t){if(t.offsetWidth<t.scrollWidth){var n=$(t);n.attr("title",n.text())}})}function y(e){switch(e.overallStatus){case"green":return"vsphere-icon-status-ok";case"yellow":return"vsphere-icon-status-warning";case"red":return"vsphere-icon-status-error";case"gray":return"vui-icon-datagrid-status-unknown";default:return"vui-icon-datagrid-status-unknown"}}function b(e,t,n){var i=[];_.forEach(k,function(r){var o=D[r],a=!0;"function"==typeof o.availabilityPreCheck&&(a=o.availabilityPreCheck(e,t)),a?_.isEmpty(o.requiredPrivileges)?(n.actionUidToEvaluatedAvailability[r]=!0,n.actionUidToMenuItemDescriptor[r].enabled=!0):Array.prototype.push.apply(i,o.requiredPrivileges):(n.actionUidToEvaluatedAvailability[r]=!1,n.actionUidToMenuItemDescriptor[r].enabled=!1)}),i=_.unique(i,!1),_.isEmpty(i)||a.checkPrivileges(s.getVsphereObjectId(t.entity),i).then(function(e){var r,o=_.object(i,e);for(var a in D)if(D.hasOwnProperty(a)&&(r=D[a],"boolean"!=typeof n.actionUidToEvaluatedAvailability[a])){var s=_.every(r.requiredPrivileges,function(e){return o[e]});n.actionUidToEvaluatedAvailability[a]=s,n.actionUidToMenuItemDescriptor[a].enabled=s}if(null!==n.pendingAction){r=D[n.pendingAction.uid];var c=n.pendingAction.deferred;I(t,n,r.actionUid).then(function(){c.resolve()})}})}function I(e,t,n){if(t.pendingAction=null,"undefined"==typeof t.actionUidToEvaluatedAvailability[n]){var i=u.defer();return t.pendingAction={uid:n,deferred:i},i.promise}return t.actionUidToEvaluatedAvailability[n]===!1?(w(n),u.reject()):h5.actions[n](null,null,C(e))}function C(e){return{alarm:s.extractManagedObjectReference(e.alarm),entity:e.entity,entityId:s.getVsphereObjectId(e.entity)}}function w(e){}var T=(n("alarmIssueActionService"),"vsphere.opsmgmt.alarms.acknowledge"),E="vsphere.opsmgmt.alarms.reset",k=[T,E],D={};return D[T]={actionUid:T,iconClass:"vx-icon-acknowledged",label:i.getString("CommonModuleUi","alarmAction.acknowledge.label"),requiredPrivileges:["Alarm.Acknowledge"],availabilityPreCheck:function(e,t){return t.acknowledged===!1}},D[E]={actionUid:E,iconClass:"vx-icon-reset_green",label:i.getString("CommonModuleUi","alarmAction.reset.label"),requiredPrivileges:["Alarm.SetStatus"],availabilityPreCheck:function(e,t){return null!==e.expression}},{showActionsMenu:m,buildAlarmActions:v}}]),function(){"use strict";angular.module("com.vmware.platform.ui").factory("alarmService",["$http","$q","i18nService","dataService","defaultUriSchemeUtil","logService",function(e,t,n,i,r,o){function a(n,i){var r=n?f:d,o=e({method:"GET",url:r,params:{objectId:n,count:i}}).then(function(e){if(!e){var n="undefined response to "+r;return p.error(n),t.reject(n)}return e.data});return o}function s(e){var t;switch(e){case"green":t="vsphere-icon-status-ok";break;case"yellow":t="vsphere-icon-status-warning";break;case"red":t="vsphere-icon-status-error";break;default:t="vui-icon-datagrid-status-unknown"}return t}function c(e){return e?"vx-icon-acknowledgedAlarm":""}function l(e){var t;switch(e){case"red":t=n.getString("Common","alarmsView.tableContentText.severity.critical");break;case"yellow":t=n.getString("Common","alarmsView.tableContentText.severity.warning");break;default:case"green":t=n.getString("Common","alarmsView.tableContentText.severity.green")}return t}function u(e){var t=e.acknowledged?n.getString("AlarmsUi","AlarmDetailsView.acknowledged",e.acknowledgedByUser):n.getString("AlarmsUi","AlarmDetailsView.new");return t}var d="alarms",f="entityAlarms",p=o("alarmService");return{getAlarms:a,getStatusIconClass:s,getAcknowledgedStatusIconClass:c,getSeverity:l,getAcknowledgedStatus:u}}])}(),angular.module("com.vmware.platform.ui").factory("alertService",["$rootScope","$compile","i18nService",function(e,t,n){"use strict";function i(n){c=e.$new(),c.alertOptions=n;var i=angular.element('<div id="alert-popup" class="action-confirmation" vx-alert="alertOptions"></div>');s=t(i)(c),angular.element("#main-app-div").append(s)}function r(e,t,r){function o(e){a(),_.isFunction(r)&&r(e)}var s={title:e,text:t,icon:"vui-icon32-error",visible:!0,confirmOptions:{label:n.getString("Common","alert.ok"),onClick:function(){o(l.CONFIRMED)}},rejectOptions:{visible:!1,onClick:function(){o(l.REJECTED)}}};i(s)}function o(e,t,r,o){var s={title:e,text:t,icon:"icon-warning-32",visible:!0,confirmOptions:{label:n.getString("Common","alert.ok"),visible:!0,disabled:!1,onClick:function(){a(),r()}},rejectOptions:{label:n.getString("Common","alert.cancel"),visible:!0,disabled:!1,focused:!0,onClick:function(){a(),o()}}};i(s)}function a(){e.$evalAsync(function(){c.$destroy(),s.remove()})}var s,c,l=Object.freeze({REJECTED:0,CONFIRMED:1});return{error:r,okCancel:o,closeReasons:l}}]);var platform;!function(e){var t=function(){function e(e){this.$injector=e}return Object.defineProperty(e.prototype,"ng2AuthorizationService",{get:function(){return this._ng2AuthorizationService||(this._ng2AuthorizationService=this.$injector.get("vcAuthorizationService")),this._ng2AuthorizationService},enumerable:!0,configurable:!0}),e.prototype.checkPrivilege=function(e,t){return this.ng2AuthorizationService.checkPrivilege(e,t)},e.prototype.checkPrivileges=function(e,t){return this.ng2AuthorizationService.checkPrivileges(e,t)},e.prototype.checkPrivilegesForMultipleObjects=function(e,t){return this.ng2AuthorizationService.checkPrivilegesForMultipleObjects(e,t)},e.prototype.checkGrantedPrivilege=function(e,t){return this.ng2AuthorizationService.checkGrantedPrivilege(e,t)},e.prototype.checkGrantedPrivileges=function(e,t){return this.ng2AuthorizationService.checkGrantedPrivileges(e,t)},e.prototype.checkGrantedPrivilegesForMultipleObjects=function(e,t){return this.ng2AuthorizationService.checkGrantedPrivilegesForMultipleObjects(e,t)},e.$inject=["$injector"],e}();e.AuthorizationServiceWrapper=t,angular.module("com.vmware.platform.ui").service("authorizationService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){this.$injector=e}return Object.defineProperty(e.prototype,"vcBrowserLanguageService",{get:function(){return this._vcBrowserLanguageService||(this._vcBrowserLanguageService=this.$injector.get("vcBrowserLanguageService")),this._vcBrowserLanguageService},enumerable:!0,configurable:!0}),e.prototype.get=function(){return this.vcBrowserLanguageService.get()},e.$inject=["$injector"],e}();e.BrowserLanguageServiceWrapper=t,angular.module("com.vmware.platform.ui").service("browserLanguage",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t){this.$q=e,this.$timeout=t}return e.$inject=["$q","$timeout"],e.prototype.executeOnChunks=function(e,t,n,i){var r=this,o=this.$q.defer(),a=[];return _.chunk(t,n).forEach(function(t,n){var o=n*i;a[n]=r.scheduleChunkExecution(e,t,o)}),this.$q.all(a).then(function(){o.resolve(!0)},function(e){o.reject(e)}),o.promise},e.prototype.scheduleChunkExecution=function(e,t,n){var i=this;return this.$timeout(function(){i.executeOnChunk(e,t)},n)},e.prototype.executeOnChunk=function(e,t){t.forEach(function(t){e(t)})},e}();e.ChunkExecutor=t,angular.module("com.vmware.platform.ui").service("chunkExecutor",t)}(platform||(platform={})),function(){"use strict";angular.module("com.vmware.platform.ui").constant("clarityConstants",{notifications:{type:{INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error"}},keys:{ENTER:13,ESC:27,TAB:9}})}(),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l,u,d){function f(e,t,n,i){var r=o.prepareModalScope(e,t,n,i);return r.submitModal=function(){n.submit&&n.submit()&&r.destroyModal()},v(r,i),r}function p(e){function n(){var e=r.modalOptions.submit();(e||void 0===e)&&r.destroyModal()}var i="resources/ui/views/dialogs/confirmationModal.html",r=t.$new();r.modalOptions=e,r.modalOptions.modalOpen=!0,_.defaults(r.modalOptions,{defaultButton:"submit",showXIcon:!0});var o=s.defer();return void 0===r.modalOptions.submit&&(r.modalOptions.submit=function(){o.resolve(!0)}),void 0===r.modalOptions.onCancel&&(r.modalOptions.onCancel=function(){o.resolve(!1)}),h(e),r.submitModal=n,r.onCancelModal=r.modalOptions.onCancel,b(r,e),v(r,i),o.promise}function m(e){function n(e){if(!S(e,"title"))throw Error("modalOptions.title is not defined or is empty.");if(!S(e,"contentTemplate"))throw Error("modalOptions.contentTemplate is not defined or is empty.")}function i(){if(!a.isSubmitInProgress&&"function"==typeof a.modalOptions.onSubmit){var e=a.modalOptions.onSubmit();e===!0?a.destroyModal():e!==!1&&void 0!==e&&(a.isSubmitInProgress=!0,e.then(function(e){e===!0&&a.destroyModal(),a.isSubmitInProgress=!1},function(){a.isSubmitInProgress=!1}))}}var o="resources/ui/views/dialogs/okCancelModal.html";n(e),h(e);var a=t.$new();a.modalOptions=_.extend(e?e:{},{modalOpen:!0,submitDisabled:_.has(e,"submitDisabled")?e.submitDisabled:!1}),a.onSubmitModal=i,a.onCancelModal=a.modalOptions.onCancel,a.$watch(function(){return a.modalOptions.alerts},function(e){_.forEach(e,function(e){switch(e.type){case r.notifications.type.ERROR:e.className="danger",e.iconShape="exclamation-circle";break;case r.notifications.type.WARNING:e.className="warning",e.iconShape="exclamation-triangle";break;case r.notifications.type.INFO:e.className="info",e.iconShape="info-circle";break;case r.notifications.type.SUCCESS:e.className="success",e.iconShape="check-circle";break;default:e.className="",e.iconShape=null}})}),b(a,e),v(a,o)}function g(e){var t="resources/ui/views/dialogs/popUpDialog.html";e.modalOptions=angular.extend(e.modalOptions||{},{modalOpen:!0}),v(e,t)}function v(t,o){function a(){kendo.resize(m,!0)}function s(){if(f("off"),$(window).off("resize",a),t.modalOptions.focusTarget){var e=t.modalOptions.focusTarget;d(function(){e&&(e.focus(),e=null)},0)}delete t.closeModal,t.$destroy(),m&&(m.remove(),m=null)}function l(e){_.isFunction(t.onCancelModal)&&t.onCancelModal(e),s()}function f(t){"on"===t?(e.on("keydown",v),e.find("body").on("keyup",p)):(e.off("keydown",v),e.find("body").off("keyup",p))}function p(e){var t=e.which||e.keyCode;return t===r.keys.ENTER||t===r.keys.ESC?(e.stopImmediatePropagation(),e.preventDefault(),!1):!0}var m;t.closeModal=l,t.destroyModal=s,void 0===t.modalOptions.focusTarget&&(t.modalOptions.focusTarget=c.popFocusableElement());var g=angular.element(e[0].body);i(o).then(function(e){f("on"),$(window).on("resize",a),m=n(e)(t),g.append(m),t.$watch("modalOptions.modalOpen",function(e,n){n&&!e&&t.$evalAsync("closeModal()")}),t.$on("$destroy",function(){f("off"),$(window).off("resize",a)})});var v=function(e){u.onKeydownHandler(e,l.bind(this))}}function h(e){if(_.has(e,"subTitle")&&_.isObject(e.subTitle))if(S(e.subTitle,"text"))e.subTitle=e.subTitle.text;else if(S(e.subTitle,"objectId")){var t=e.subTitle.objectId;e.subTitle="",a.getProperties(t,["name"]).then(function(t){t&&t.name&&(e.subTitle=t.name)})}else e.subTitle=""}function S(e,t){return _.has(e,t)&&y(e[t])}function y(e){return!_.isUndefined(e)&&!_.isNull(e)&&_.isString(e)&&!_.isEmpty(e)}function b(e,t){e.getOkBtnLabel=function(){return void 0!==t.saveButtonLabel?t.saveButtonLabel:l.getString("Common","saveButtonLabel")},e.getCancelBtnLabel=function(){return void 0!==t.cancelButtonLabel?t.cancelButtonLabel:l.getString("Common","cancelButtonLabel")}}return{openModal:f,openConfirmationModal:p,openOkCancelModal:m,openPopUp:g}}angular.module("com.vmware.platform.ui").service("clarityModalService",e),e.$inject=["$document","$rootScope","$compile","$templateRequest","clarityConstants","clarityModalServiceHelper","dataService","$q","focusTraceService","i18nService","vxModalKeyService","$timeout"]}(),function(){"use strict";function e(e,t,n){function i(t,n,i,o){var a=e.$new();return a.modalOptions={modalOpen:!0,iconClass:t&&t.action?t.action.icon:"",contentUrl:o,actionEval:t,availableTargets:n,dialogData:i,defaultButton:i?i.defaultButton:"",title:i?i.title:"",size:i?i.size:"",secondaryTitle:i?i.secondaryTitle:"",focusTarget:i&&i.focusTarget?$(i.focusTarget):null},r(a.modalOptions),a}function r(e){var t=e.availableTargets;t?_.isEmpty(t)||1===t.length?o(e):a(e):e.title=void 0}function o(e){var t=e.title;t&&s(t)?c(e):t&&!s(t)?u(e):t||(l(e),u(e))}function a(e){e.title=n.getString("Common","dialogTitleFormatMultiple",e.availableTargets.length,"")}function s(e){return-1!==e.indexOf("{0}")}function c(e){var i=e.availableTargets[0];i&&t.getProperties(i,["name"]).then(function(t){t&&t.name&&(e.title=n.interpolate(e.title,[t.name]),e.secondaryTitle=null)})}function l(e){e.title=e.actionEval.action.label.replace(/\.+$/g,"")}function u(e){var t=e.secondaryTitle;t||d(e)}function d(e){var n=e.availableTargets[0];n&&t.getProperties(n,["name"]).then(function(t){t&&t.name&&(e.secondaryTitle=t.name)})}return{prepareModalScope:i}}e.$inject=["$rootScope","dataService","i18nService"],angular.module("com.vmware.platform.ui").service("clarityModalServiceHelper",e),e.inject=["$rootScope","dataService","i18nService"]}(),function(){function e(e,t,n){function i(e,t,n,i,a){return e[t]&&e[t].length?o(e,t,n,i,a):r(e,t,n,i,a)}function r(e,i,r,o,c){e[i]||(e[i]=[]);var l=c?c:u(r,o);return n.when(l).then(function(n){var r=[];return _.forEach(o,function(e){var i;return e===t.actions.SEPARATOR?(i=a(),void(i&&r.push(i))):void(e&&e.actionId&&(i=s(n[e.actionId],f(e,n),e),i&&r.push(i)))}),e[i]=r,n})}function o(e,i,r,o,a){var s=null;return s=a?a:u(r,o),n.when(s).then(function(n){var r={};return _.forEach(o,function(e){r[e.actionId]=e}),_.forEach(e[i],function(e){if(e!==t.actions.SEPARATOR){var i=e.actionId,o=n[i];e.onClick=f(r[i],n),c(e,o),l(e,o)}}),n})}function a(){return t.actions.SEPARATOR}function s(e,t,n){if(e){var i=e.action.label,r=e.action.description;n.noLabel&&(i=null,r=e.action.label),n.customLabel&&(i=n.customLabel);var o={actionId:e.action.uid,tooltipText:r,label:i,iconClass:n.hideIcon?"":e.action.icon,onClick:t,isAvailableCustomCallback:n.isActionAvailable,isVisibleCustomCallback:n.isActionVisible};return c(o,e),l(o,e),o}}function c(e,t){return e?t?void(e.isAvailableCustomCallback?e.enabled=!!e.isAvailableCustomCallback(t):e.enabled=!!t.available):void(e.enabled=!1):void 0}function l(e,t){e&&(t||(e.visible=!0),e.isVisibleCustomCallback?e.visible=!!e.isVisibleCustomCallback(t):e.visible=!0)}function u(e,t){if(!t)return n.when({});var i=t.filter(function(e){return e&&e.actionId}).map(function(e){return e.actionId});if(!i||!i.length)return n.when({});var r=i.join("\n"),o=p[r];return o?o.targetIds=e:(o={targetIds:e},p[r]=o,o.request=d(e,i,r)),o.request.then(function(e){return angular.copy(e)})}function d(t,n,i){return e.getActions(t,n).then(function(e){var r=p[i];if(!angular.equals(t,r.targetIds))return d(r.targetIds,n,i);var o={};return _.forEach(e,function(e){o[e.action.uid]=e}),delete p[i],o})}function f(t,n){return function(i){var r=n[t.actionId];t.onInvokeAction&&t.onInvokeAction(r);var o=t.getActionInvocationContext?t.getActionInvocationContext():null;i&&i.currentTarget&&(o=o?angular.copy(o):{},o.focusTarget=i.currentTarget),e.invokeAction(r,o)}}var p=[];return{createActionBar:r,updateActionBar:i}}angular.module("com.vmware.platform.ui").service("commonActionBarService",e),e.$inject=["actionsService","vuiConstants","$q"]}(),function(){"use strict";function e(e,t,n){var i=(n("configurationService"),function(){return t.when(h5.configuration)}),r=_.memoize(function(e){return i().then(function(t){return t&&t.configParams?t.configParams[e]:void 0})}),o=_.memoize(function(e){return i().then(function(t){return t&&t.featureStates?t.featureStates[e]:void 0})}),a=_.memoize(function(e){return o(e).then(function(e){return!(!e||"ENABLED"!==e)})});return{getConfiguration:i,getProperty:r,isFeatureEnabled:a}}angular.module("com.vmware.platform.ui").factory("configurationService",e),e.$inject=["$http","$q","logService"]}(),function(){"use strict";function e(e){function t(){var t=$('div[class*="modal-backdrop"]'),n=[];if(0===t.length){var i=$('div[vx-extension-view-id="vsphere.core.inventory.serverObjectViewsExtension"] list-view div[kendo-grid]:first');if(i.length>0){var r=i.data("kendoGrid"),o=r.select();if(o.length>0)for(var a=0;a<o.length;a++){var s=r.dataItem(o[a]);n.push(s.id)}}else e._route.objectId&&n.push(e._route.objectId)}return n}var n={getSelection:t};return n}angular.module("com.vmware.platform.ui").factory("contextObjectService",e),e.$inject=["$rootScope"]}(),function(){"use strict";angular.module("com.vmware.platform.ui").service("datagridActionBarService",["commonActionBarService",function(e){function t(t,n,i,r){var o;return t.actionsOptions?(o=t.actionsOptions,t.toolbar=[{template:'<action-bar options="datagridOptions.actionsOptions"></action-bar>'}]):(t.actionBarOptions=t.actionBarOptions||{},o=t.actionBarOptions),e.updateActionBar(o,"actions",n,i,r)}return{updateActionBar:t}}])}();var platform;!function(e){var t=function(){function e(e){this.$injector=e}return Object.defineProperty(e.prototype,"vcDataService",{get:function(){return this._vcDataService||(this._vcDataService=this.$injector.get("vcDataService")),this._vcDataService},enumerable:!0,configurable:!0}),e.prototype.getData=function(e,t,n){return void 0===n&&(n={}),this.vcDataService.getData(e,t,n)},e.prototype.getProperties=function(e,t,n){return void 0===n&&(n={}),this.vcDataService.getProperties(e,t,n)},e.prototype.getPropertiesForObjects=function(e,t,n){return void 0===n&&(n={}),this.vcDataService.getPropertiesForObjects(e,t,n)},e.prototype.getPropertiesByRelation=function(e,t,n,i,r){return void 0===r&&(r={}),this.vcDataService.getPropertiesByRelation(e,t,n,i,r)},e.prototype.getPropertiesByFilter=function(e,t,n,i){return void 0===i&&(i={}),this.vcDataService.getPropertiesByFilter(e,t,n,i)},e.$inject=["$injector"],e}();e.DataService=t,angular.module("com.vmware.platform.ui").service("dataService",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").factory("dataServiceUtil",["$injector",function(e){var t=e.get("dataService"),n=e.get("vcDataServiceUtil");return{onModelChanged:function(e,n,i,r){e.$on("modelChanged",function(e,o){if(o&&o.objectId){var a=i(o);a.length&&t.getProperties(o.objectId,n).then(function(e){a.forEach(function(t){r(t,e)})})}})},getPropertiesForObjects:function(e,t,i){return n.getPropertiesForObjects(e,t,i)},getPropertiesForObjectsByRelation:function(e,t,i,r){return n.getPropertiesForObjectsByRelation(e,t,i,r)},createPropertyByObjectMap:function(e,t){return n.createPropertyByObjectMap(e,t)}}}]),angular.module("com.vmware.platform.ui").constant("datastoreBrowserConstants",{fileQueryType:{VM_DISK:parseInt("0x0001",16),FLOPPY_IMAGE:parseInt("0x0002",16),ISO_IMAGE:parseInt("0x0004",16),VM_CONFIG_FILES:parseInt("0x0008",16),ALL_FILES:parseInt("0x0010",16),FOLDERS:parseInt("0x0020",16),VM_DISK_TYPE_WITH_DETAILS:parseInt("0x0040",16)}}),angular.module("com.vmware.platform.ui").constant("datastoreTypeConstants",{VMFS:"VMFS",NFS:"NFS",NFS41:"NFS41",VSAN:"vsan",VVOL:"VVOL"}),function(){"use strict";angular.module("com.vmware.platform.ui").factory("dragAndDropManager",["logService","defaultUriSchemeUtil","dragAndDropRulesService","actionsService","validationExpressionParserService",function(e,t,n,i,r){function o(e,t,n,r){function o(e){if(_.isEmpty(e))return!1;var t=e[0],n=u(e);if(n)return!1;var i=s(t);return i?!0:!1}function a(e,t){return f._cachedActionContextsByDropTargetUid[e]=t,t}function s(e){if(!e)return null;var n=t.getEntityType(e.objRef),i=f._rulesLookupByDragObjectType[n];return i}function c(e,t,n){t.length>0&&i.getAction(e,t).then(function(e){e&&e.available===!0&&i.invokeAction(e,{dropTarget:n})})}function l(e,t){return _.isEmpty(e)||!t?[]:_.filter(e,function(e){return e.objRef!==t.objRef})}function u(e){var n=e[0],i=t.getEntityType(n.objRef),r=_.some(e,function(e){var n=t.getEntityType(e.objRef);return n!==i});return r}function d(e,n){var i=e[0],o=s(i);if(e.length>1&&!o.allowMultipleDragObjects)return[];var a=_.map(e,function(e){return e.id}),c=t.getEntityType(n.objRef),l=o.dropTargetTypesList.indexOf(c)>=0,u=r.evaluateValidationExpressions(o.validationExpressions,a,n.id,e,n);return l=l&&u.length>0,l?u:[]}var f=this;f._log=e("dragAndDropManager"),f._cachedActionContextsByDropTargetUid={},f._rulesLookupByDragObjectType={},n.getRules().then(function(e){f.setDragAndDropRules(e)}),f.clearCache=function(){f._cachedActionContextsByDropTargetUid={}},f.isDropValid=function(e,t){if(e=l(e,t),!t||!o(e))return!1;var n=f._cachedActionContextsByDropTargetUid[t.objRef];if("boolean"==typeof n)return n;var i=d(e,t),r=i.length>0;return a(t.objRef,!!r)},f.invokeAction=function(e,t){if(e=l(e,t),f.isDropValid(e,t)){var n=d(e,t);if(n.length>0){var i=s(e[0]);c(i.actionUid,n,t.objRef)}}},f.setDragAndDropRules=function(e){f._rulesLookupByDragObjectType=e}}return new o(e,t,n,r)}])}(),function(){"use strict";function e(e){var t=_.memoize(function(){return e({method:"get",url:"dragAndDrop/rules"}).then(function(e){return e.data})});return{getRules:t}}angular.module("com.vmware.platform.ui").factory("dragAndDropRulesService",e),e.$inject=["$http"]}(),angular.module("com.vmware.platform.ui").factory("entityStatusService",["i18nService",function(e){return{statusProperties:function(t){var n="vui-icon-datagrid-status-unknown",i=e.getString("Common","entityStatus.gray");return"green"===t?(n="vsphere-icon-status-ok",i=e.getString("Common","entityStatus.green")):"yellow"===t?(n="vsphere-icon-status-warning",
i=e.getString("Common","entityStatus.yellow")):"red"===t&&(n="vsphere-icon-status-error",i=e.getString("Common","entityStatus.red")),{iconClass:n,label:i}}}}]),function(){"use strict";angular.module("com.vmware.platform.ui").factory("$exceptionHandler",["$log","$injector",function(e,t){var n;return function(i,r){if(window.jasmine)throw i;window.h5.debug&&(window.jsErrors=window.jsErrors||{},window.jsErrors[i.message]=i.stack),n||(n=t.get("notificationService")),e.error.apply(e,arguments),n.notifyError(null,i.message,i.stack,!0)}}])}(),angular.module("com.vmware.platform.ui").factory("extensionCategoryUtil",[function(){"use strict";return{mergeCategories:function(e,t){if(!t||!t[0])return[];var n="_Uncategorized_vSphere_Extensions_",i="_Uncategorized_Plugin_Extensions_";e.push({uid:n}),e.push({uid:i});var r=_(t).groupBy(function(e){return e.categoryUid||(e.contentSpec&&e.contentSpec.sandbox?e.categoryUid=i:e.categoryUid=n),e.categoryUid}),o=_.chain(e).map(function(e){if(!r[e.uid])return null;var t=r[e.uid],n=t&&t[0]&&t[0].contentSpec&&t[0].contentSpec.sandbox;return{title:e.label,exts:r[e.uid],categoryId:e.uid,isExternalPlugin:n}}).compact().partition(function(e){return e.isExternalPlugin}).sortBy(function(e){var t=e.length&&e[0].isExternalPlugin;return t?1:0}).compact().flatten(!0).value();return o}}}]),angular.module("com.vmware.platform.ui").constant("extensionFrameworkConstants",{ViewRetentionPolicy:{NONE:"NONE",INHERIT:"INHERIT",SELF_ONLY:"SELF_ONLY",DESCENDANTS_ONLY:"DESCENDANTS_ONLY",SELF_AND_DESCENDANTS:"SELF_AND_DESCENDANTS"}}),angular.module("com.vmware.platform.ui").factory("extensionService",["$http",function(e){return{getExtensions:function(t,n){return e({method:"get",url:"extensions/"+t+"/"+n}).then(function(e){return e.data})},getHostedExtensions:function(t,n){var i;return angular.isDefined(n)&&null!==n&&(i={objectId:n}),e({method:"get",url:"hostedextensions/"+t,params:i}).then(function(e){return e.data})},checkForNewPlugins:function(){return e({method:"get",url:"checkForNewPlugins",skipLoadingNotification:!0}).then(function(e){return e.data})}}}]),function(){"use strict";function e(e){function t(t){n[t+"Enabled"]=function(){return!1},e.isFeatureEnabled(t).then(function(e){n[t+"Enabled"]=function(){return e}})}var n={};return t("h5uiVmLibraryActionAddFlag"),t("hardwareV14_vbs"),t("h5uiCLSoverVAPI"),t("h5uiOvfDeployFromLocal"),t("h5uiDirectIsoMountFromCL"),t("h5uiImportItemToCL"),t("h5uiMoveVmToHostAndCluster"),t("h5uiAddNetworkingBindToPnic"),t("h5uiNRP"),t("HWv14"),t("VMcrypt2"),t("DeferHistoryImport"),t("PMem"),t("VRDMA_ROCEV2"),t("HCI"),t("CL_Native_VMTX_Phase2"),t("CL_OVA_Support"),t("CL_VMTX_Sync"),t("h5uiLicensingOnlineSync"),n}angular.module("com.vmware.platform.ui").service("featureFlagsService",e),e.$inject=["configurationService"],window.featureFlagsService=e}(),function(){"use strict";function e(e){function t(e,t){if(!_.isString(e))return void i.error("Data argument should be a string");if(!_.isString(t)||_.isEmpty(t))return void i.error("Filename argument should be a not empty string");var r=new Blob([e],{type:"text/plain;charset=utf-8"});n(r,t,!0)}function n(e,t,n){saveAs(e,t,n)}var i=e("fileSaverService");return{save:t}}angular.module("com.vmware.platform.ui").service("fileSaverService",e),e.$inject=["logService"]}(),function(){"use strict";function e(e,t,n){function i(){return n.getProperty("vmcOnAws.url").then(function(t){e.open(t,"_blank")})}function r(t){a(t).then(function(t){e.open(t,"_blank")})}function o(e){return a(e)}function a(e){return e?n.getProperty("help.url.contextual").then(function(n){var i=c(n);i=l(i);var r=t({id:e});return i+="context?"+r}):n.getProperty("help.url").then(function(e){var t=c(e);return t=l(t)})}function s(){var e=h5.locale||"en-US";e=e.toLowerCase();var t;switch(e){case"zh-cn":t=e.split("-")[1];break;case"zh-tw":t=e.split("-")[1];break;default:t=e.split("-")[0]}return t}function c(e){if(void 0!==e){var t=e;return t.lastIndexOf("/")!==e.length-1&&(t=e+"/"),t}return"http://docs.vmware.com/"}function l(e){var t=e.replace("{0}",s());return t}return{showHelpPage:r,getHelpPageUrl:o,showVmcOnAwsPage:i}}angular.module("com.vmware.platform.ui").service("helpService",e),e.$inject=["$window","$httpParamSerializer","configurationService"]}(),function(){"use strict";function e(e,t,n,i,r,o,a,s){function c(){n.getUserSession().then(function(e){O=l(e)}),n.getAllServersInfo().then(function(e){P=u(e)}),window.h5.actions["com.vmware.vsphere.client.htmlbridge.HtmlActionDelegate"]=function(e,t){R[e.action.uid]=t,e.additionalData.dialogTitle?S(e,t):v(e)}}function l(e){var t=e;return t?t=_.pick(t,["userName","locale","clientId","hashedClientId"]):t}function u(e){var t=e;return t?(t=_.pick(t,["serversInfo","linkedServersInfo"]),t.serversInfo&&(t.serversInfo=f(t.serversInfo)),t.linkedServersInfo&&(t.linkedServersInfo=d(t.linkedServersInfo)),t):t}function d(e){var t=e;return t?t=_.map(t,f):t}function f(e){var t=e;return t?t=_.map(t,p):t}function p(e){var t=e;return t?(t=_.pick(t,["name","serviceUrl","serviceGuid","thumbprint","version","sessionKey","sessionCookie","ssoDomain","nodeId","serviceInstance","content","errorCode"]),t.ssoDomain&&(t.ssoDomain=m(t.ssoDomain)),t.serviceInstance&&(t.serviceInstance=angular.copy(t.serviceInstance)),t.content&&(t.content=angular.copy(t.content)),t):t}function m(e){var t=e;return t?t=_.pick(t,["id","name","type","isLocal"]):t}function g(){return O?angular.extend(O,P):null}function v(e){var t=e.additionalData.actionUrl;t.indexOf("?")<0&&(t+="?"),t+="&actionUid="+e.action.uid+"&locale="+O.locale,h(t,null,e.action.uid)}function h(t,n,i){var r={};M&&(R[i]=[M]);var o=R[i];if(!angular.isArray(o))throw new Error("invalid targets for action "+i);o.length>0&&(r.targets=o.toString()),n&&(r.json=JSON.parse(n)),e.post(t,null,{params:r}).then(function(e){if(e.data){var t=!1,n=null;if(e.data.actionUid&&(n=R[e.data.actionUid],n||F.error("Missing target objects or invalid action id: "+e.data.actionUid)),e.data.result){var i=e.data.result;if("boolean"==typeof i)t=i;else if("string"==typeof i&&e.data.uriType){t=!0;var r=i;n=[r]}}t&&e.data.operationType&&n&&I(e.data,n),e.data.errorMessage&&C(e.data),n&&e.data.actionUid&&(R[e.data.actionUid]=null)}})}function S(e,t){var n=U,i=V;if(e.additionalData.dialogSize){var r=e.additionalData.dialogSize.split(",");n=parseInt(r[0],10),(isNaN(n)||0>=n)&&(n=U),i=parseInt(r[1],10),(isNaN(i)||0>=i)&&(i=V)}var o=a.buildUrl(e.additionalData.actionUrl,{objectId:null,locale:O.locale}),s={actionUid:e.action.uid};t&&(s.targets=t.toString().replace(L,j)),o=a.appendParams(o,s),A={title:e.additionalData.dialogTitle,url:o,pluginSize:{width:n,height:i},iconClass:e.additionalData.dialogIcon?e.additionalData.dialogIcon:e.action.icon},N=T(e,t,A)}function y(e,n){t._navigateToViewAndObject(e,n)}function b(e,t){if(e){var n=o.getEntityType(e),i=[e],r={operationType:t,uriType:n};I(r,i)}}function I(e,n){var i=e.operationType.toUpperCase();if("ADD"!==i&&"CHANGE"!==i&&"DELETE"!==i&&"RELATIONSHIP_CHANGE"!==i)throw new Error("Invalid operation type "+e.operationType+(e.actionUid?" returned for action "+e.actionUid:""));var r=n[0],o={objectId:r,operationType:i};"ADD"===i&&(o.object={type:e.uriType}),t.$broadcast("modelChanged",o)}function C(e){var n=null;if(angular.isString(e.errorMessage))n=e.errorMessage;else{var i=e.errorMessage.key,o=e.errorMessage.bundleName,a=e.errorMessage.params;if(!i||!o)return void F.error("Invalid errorMessage object returned by action "+e.actionUid);n=t.i18n(o,i,a)}r.notifyError(null,n)}function w(e,t,n,i,r){if(t){M=r;var o=[r],s=a.buildUrl(t,{objectId:r,locale:O.locale});(!angular.isNumber(n)||0>=n)&&(n=U),(!angular.isNumber(i)||0>=i)&&(i=V);var c={action:{}};A={title:e,url:s,pluginSize:{width:n,height:i}},$=T(c,o,A)}}function T(e,t,n){var r=i.openModal(e,t,n,"resources/ui/views/plugins/htmlBridgePluginModalTemplate.html");return r.onCancelModal=function(){k(!0)},r}function E(){k(!1)}function k(e){return $?(e||$.closeModal(),$=null,void(M=null)):void(N&&(e||N.closeModal(),N=null))}function D(e){return null===A?void F.error("Invalid use of setDialogTitle API"):(A.title=e,void t.$apply())}function x(e,t){F.error("Not supported in HTML Client SDK 6.5")}var O=null,P=null,A=null,$=null,N=null,R={},M=null,j="%252F",L=/\//g,U=500,V=400,F=s("htmlBridgeService"),B={init:c,callActionsController:h,getUserSession:g,sendNavigationRequest:y,openModalDialog:w,closeDialog:E,setDialogTitle:D,setDialogSize:x,sendModelChangeEvent:b};return B}angular.module("com.vmware.platform.ui").service("htmlBridgeService",e),e.$inject=["$http","$rootScope","userSessionService","clarityModalService","notificationService","defaultUriSchemeUtil","pluginUrlService","logService"]}(),function(){"use strict";function e(e,t){return function(){function n(n){return i(),r=t.defer(),n=n||{},n.timeout=r.promise,e(n)}function i(){r&&(r.promise.$$timeoutId=-1,r.promise.$$state.pur=!0,r.reject("canceled"))}var r;return{fetch:n,cancel:i}}}angular.module("com.vmware.platform.ui").factory("httpCancellationService",e),e.$inject=["$http","$q"]}();var platform;!function(e){var t=function(){function e(e){var t=this;this.$injector=e,this.getString=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return(o=t.vcI18nService).getString.apply(o,[e,n].concat(i));var o},this.getEscapedString=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return(o=t.vcI18nService).getEscapedString.apply(o,[e,n].concat(i));var o},this.interpolate=function(e,n){return t.vcI18nService.interpolate(e,n)},this.interpolateAndEscape=function(e,n){return t.vcI18nService.interpolateAndEscape(e,n)},this.getLocale=function(){return t.vcI18nService.getLocale()}}return Object.defineProperty(e.prototype,"vcI18nService",{get:function(){return this._vcI18nService||(this._vcI18nService=this.$injector.get("vcI18nService")),this._vcI18nService},enumerable:!0,configurable:!0}),e.$inject=["$injector"],e}();e.I18nServiceWrapper=t,angular.module("com.vmware.platform.ui").service("i18nService",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").service("informationalDialogService",["$rootScope","vuiDialogService",function(e,t){return{display:function(n){var i=e.$new();i.informationalDialogOptions={title:n.title,contentUrl:"resources/ui/views/dialogs/InformationalDialog.html",show:!0,confirmOptions:{onClick:function(){return!0}},rejectOptions:{visible:!1},width:n.width||"400px"};var r={scope:i,configObjectName:"informationalDialogOptions"};i.informationalMessage=n.content,i.imageUrl=n.imagePath,t(r)}}}]),function(){"use strict";function e(){function e(e){return ipaddr.IPv4.isValid(e)&&o(e)}function t(e,t){if(!e)return!1;var n=e.trim();if(t){var i=n.indexOf("%");if(i>-1){var r=n.substring(i+1);if(!I.test(r))return!1;n=n.substring(0,i)}}return ipaddr.IPv6.isValid(n)}function n(t,n,i){if(!e(t)||!e(n)||!s(i))return!1;for(var r=t.split("."),o=n.split("."),a=i.split("."),c=0;4>c;c++)if((r[c]&a[c])!==(o[c]&a[c]))return!1;return!0}function i(n){return t(n)||e(n)}function r(n){if(!n||!e(n)&&!t(n))return n;var i=ipaddr.parse(n);return"undefined"!=typeof i.toNormalizedString?i.toNormalizedString():n}function o(e){var t=e.split(".");return 4!==t.length?!1:_.every(t,function(e){return e>=0&&255>=e})}function a(e){return e>=1&&128>=e}function s(e){if(!e)return!1;var t=[];if(_.each(e.split("."),function(e){e&&t.push(Number(e))}),4!==t.length||0===t[0])return!1;for(var n=0,i=0;i<t.length&&t[i]===v;i++)n++;if(n===t.length)return!0;if(!_.contains(h,t[n]))return!1;for(var r=n+1;r<t.length;r++)if(0!==t[r])return!1;return!0}function c(e,t){return l(e)===l(t)}function l(e){var t=ipaddr.parse(e);return"ipv4"===t.kind()&&(t=t.toIPv4MappedAddress()),t.toNormalizedString()}function u(e){var t=d(e),n=m(t.port),i=p(t.address);return n.valid&&i.valid?g(i.address,n.port):null}function d(e){var t=e.split(":");return t.length>2?f(e):{address:t[0],port:t[1]}}function f(e){var t=y.exec(e);return t?{address:t[1],port:t[3]}:{address:e}}function p(e){return ipaddr.isValid(e)?{valid:!0,address:ipaddr.parse(e).toString()}:{valid:!1}}function m(e){if(void 0===e)return{valid:!0,port:void 0};if(!b.test(e))return{valid:!1};var t=parseInt(e,10);return 0>=t?{valid:!1}:t>=S?{valid:!1}:{valid:!0,port:t}}function g(e,t){return{address:e,port:t}}var v=255,h=[0,128,192,224,240,248,252,254],S=Math.pow(2,16),y=new RegExp("^\\[(.*)\\](:(\\d+))?$"),b=new RegExp("^\\d+$"),I=/^\w+$/;return{parse:u,isSubnetMaskValid:s,isSubnetPrefixValid:a,isIpv4AddressValid:e,isIpv6AddressValid:t,isAddressValid:i,isSameIpv4Subnet:n,expandIpv6Address:r,equalIpv6Addresses:c}}angular.module("com.vmware.platform.ui").service("ipParserService",e)}(),function(){"use strict";function e(e){function t(t,n,r){var o=e({method:"GET",url:i,params:{objectId:t,pageSize:n,getActionEvaluations:r}}).then(function(e){return e.data});return o}function n(t,n,i){var o=e({method:"POST",url:r,params:{objectId:t,issueId:n},data:{details:i}}).then(function(e){return e.data});return o}var i="issues",r="issues/actions/evaluations",o={getIssues:t,evaluateActions:n};return o}angular.module("com.vmware.platform.ui").factory("issueService",e),e.$inject=["$http"]}(),function(){"use strict";function e(){function e(e){var t=r[e];if(t)return t.raw}function t(e){var t=r[e];if(t)return t.formatted}function n(e,t){r[e]={raw:t,formatted:i(t)}}function i(e){if(void 0!==e){for(var t=e.split("+"),n=0;n<t.length-1;n++)t[n]=t[n].trim().toLowerCase();return t[t.length-1]=t[t.length-1].trim().toUpperCase(),t.join(" + ")}}var r={},o={getKeyboardShortcut:e,getFormattedKeyboardShortcut:t,putKeyboardShortcut:n};return o}angular.module("com.vmware.platform.ui").factory("keyboardShortcutMapper",e),e.$inject=[]}(),function(){"use strict";function e(e,n,i,r,o,a,s){function c(e,t){Mousetrap.bind(e,function(e,n){return v[n]?!1:(m(),v[n]=!0,a.runInsideAngular(function(){d(n),t(e)}),!1)},"keydown"),Mousetrap.bind(e,function(e,t){return v[t]&&delete v[t],!1},"keyup")}function l(e,t){i.putKeyboardShortcut(t,e),c(e,p.bind({},t))}function u(e,t){i.putKeyboardShortcut(t,e),c(e,f.bind({},t))}function d(e,t){s.trackEvent("keyboard","shortcut",e,t)}function f(e,t){o.navigateToView(e)}function p(i,o){var a=n.getSelection();a.length>0&&e.getAction(i,a,!0).then(function(t){e.invokeActionWithConfirmation(t,{},a)})["catch"](function(e){if(e.status&&500===e.status){var n=e.data.message;if(n&&n.lastIndexOf(t,0)<0){var i={};i.content=n,i.type=r.type.ERROR,r.notify(i)}}})}function m(){$(document.body).mousedown()}var g={bindFunction:c,bindAction:l,bindNavigationShortcut:u,invokeNavigation:f},v={};return g}angular.module("com.vmware.platform.ui").factory("keyboardShortcutService",e),e.$inject=["actionsService","contextObjectService","keyboardShortcutMapper","notificationService","navigation","vxZoneService","telemetryService"];var t="No Action registered with ID"}(),function(){"use strict";angular.module("com.vmware.platform.ui").factory("listUtil",[function(){function e(e,t,n){var i=Number(e[n]),r=Number(t[n]);return isNaN(i)&&isNaN(r)?0:isNaN(i)?-1:isNaN(r)?1:r>i?-1:i>r?1:0}return{compareNumericValues:e}}])}(),function(){"use strict";function e(e,t,n,i){function r(e){var t=m?m.getItem(e):null;return t=angular.fromJson(t)}function o(e,t){if(t=angular.toJson(t),m)try{m.setItem(e,t)}catch(n){}}function a(e){if(m)try{m.removeItem(e)}catch(t){}}function s(e){var n=t.defer();return u().then(function(t){var i=r(e+t);n.resolve(i)}),n.promise}function c(e,t){u().then(function(n){o(e+n,t)})}function l(e){u().then(function(t){a(e+t)})}function u(){if(f)return f.promise;var e=t.defer();return n.getUserSession().then(function(t){t.userName?(f=e,f.resolve(t.userName.toLowerCase())):p.error("Error getting username from userSessionService")}),e.promise}function d(){try{if(e.localStorage)return e.localStorage}catch(t){p.error(t)}var n={};return{getItem:function(e){return n[e]},setItem:function(e,t){n[e]=t}}}var f,p=i("localStorageService"),m=d(),g={getData:r,setData:o,getUserData:s,setUserData:c,removeUserData:l};return g}angular.module("com.vmware.platform.ui").factory("localStorageService",e),e.$inject=["$window","$q","userSessionService","logService"]}(),function(){"use strict";function e(e,t,n,i){function r(e){var t=_.isObject(e)?e:{};t.showNotification===!0?i.error(a.title,a.message,o):o()}function o(){var n=t.get("vscVapiService");n.logout(),e.location.href=h5.logoutUrl,e.h5.isLogoutInProgress=!0}var a=function(){var e=_.partial(n.getString,"Common"),t=e("client.productName");return{title:e("error.connectionError.title"),message:e("error.notAuthenticatedError",t)}}(),s={logout:r};return s}angular.module("com.vmware.platform.ui").factory("logoutService",e),e.$inject=["$window","AngularInjector","i18nService","alertService"]}(),angular.module("com.vmware.platform.ui").config(["$logProvider",function(e){e.debugEnabled(!0)}]).value("logServiceWhiteList",/.*/).factory("logService",["$log","logServiceWhiteList","$location",function(e,t,n){t=t||/.*/;var i=n.search(),r=i.logLevel;return t=r?new RegExp(r,"i"):t,function(n){function i(e){return function(e){t=new RegExp(e)}}function r(i){var r=t?n.match(t)||i.match(t):!0;return(h5.debug||"log"!==i&&"info"!==i&&"debug"!==i)&&r?function(){e[i]||(i="log");var t=Array.prototype.slice.call(arguments);n&&t.unshift("["+n+"]"),e[i].apply(e,[t.join(" ")])}:angular.noop}return{log:r("log"),debug:r("debug"),info:r("info"),warn:r("warn"),error:r("error"),setLogLevel:i()}}}]),function(){"use strict";function e(e,t,n,i){function r(e){var t=_.isString(e)?e:"UnknownCaller";return{error:_.partial(o,t,"error"),warn:_.partial(o,t,"warn"),info:_.partial(o,t,"info"),debug:_.partial(o,t,"debug"),trace:_.partial(o,t,"trace")}}function o(t,n,i){var r;if(_.isString(i))r=i;else{if(!_.isObject(i))return void c.warn("Log to server message was not a string nor an object.");r=JSON.stringify(i)}a(t).then(function(t){e({method:"POST",url:"log/",data:{level:n,message:t+r}})})}function a(e){if(s)return s.promise;var n=t.defer();return i.getUserSession().then(function(t){var i=t?t:{},r="["+i.clientId+"]["+i.userName+"]["+e+"]: ";s=n,s.resolve(r)},function(){c.error("Error getting session from userSessionService")}),n.promise}var s,c=n("logToServerService");return r}angular.module("com.vmware.platform.ui").factory("logToServerService",e),e.$inject=["$http","$q","logService","userSessionService"]}(),function(){"use strict";function e(e){function t(e){return e&&e.length>0&&e.length<=o?!0:!1}function n(e){return r.test(e)}function i(e,t){return{error:e,result:t}}var r=/^([0-9a-fA-F]{2}[:\-\s.]){5}[0-9a-fA-F]{2}$/,o=17,a=e.getString("VmUi","NetworkConfig.MACFormatError");return this.validate=function(e){return t(e)&&n(e)?i(null,!0):i(a,!1)},this}angular.module("com.vmware.platform.ui").service("macAddressValidatorService",e),e.$inject=["i18nService"]}();var platform;!function(e){var t=function(){function e(e,t,n,i,r){this.$q=e,this.dataService=t,this.i18nService=n,this.defaultUriSchemeUtil=i,this.managedEntityConstants=r,this.MANAGED_BY_INFO_PROPERTY="managedByInfo",this.TEMPLATE_PROPERTY="template"}return e.prototype.buildConfirmationText=function(e,t,n){var i=this;if(void 0===t&&(t=""),void 0===n&&(n=!1),_.isEmpty(e))return this.$q.when();var r=this.defaultUriSchemeUtil.getVsphereObjectIds(e),o=this.retrieveManagedByProperties(r);return o.then(function(e){return i.buildMessage(r,e,n,t)},function(){return t})},e.prototype.buildWarningMessage=function(e,t,n){var i=this;if(void 0===t&&(t=!1),void 0===n&&(n={}),_.isEmpty(e))return this.$q.when();var r;return r=_.isEmpty(n)?this.retrieveManagedByProperties(e):this.$q.when(n),r.then(function(n){return i.buildMessage(e,n,t)},function(){})},e.prototype.retrieveManagedByProperties=function(e){var t=[this.MANAGED_BY_INFO_PROPERTY];return this.defaultUriSchemeUtil.getEntityType(e[0])===this.managedEntityConstants.VIRTUAL_MACHINE&&t.push(this.TEMPLATE_PROPERTY),this.dataService.getPropertiesForObjects(e,t,{skipErrorInterceptor:!0})},e.prototype.buildMessage=function(e,t,n,i){var r=this;void 0===n&&(n=!1),void 0===i&&(i="");var o,a;switch(this.defaultUriSchemeUtil.getEntityType(e[0])){case this.managedEntityConstants.VIRTUAL_MACHINE:o="singleVmManagedByWarning",a="multiVmManagedByWarning",t[e[0]][this.TEMPLATE_PROPERTY]&&(o="singleTemplateManagedByWarning",a="multiTemplateManagedByWarning");break;case this.managedEntityConstants.V_APP:o="singleVAppManagedByWarning",a="multiVAppManagedByWarning";break;default:o="singleEntityManagedByWarning",a="multiEntityManagedByWarning"}var s="",c=i?"\n\n"+i:"";if(n&&(c=this.i18nService.getString("Common","managedByWarningProceed")),1===e.length){var l=t[e[0]][this.MANAGED_BY_INFO_PROPERTY];return l?s=this.i18nService.getString("Common",o,l)+c:s}return _.each(e,function(e){var n=t[e][r.MANAGED_BY_INFO_PROPERTY];return n?void(s=r.i18nService.getString("Common",a)+c):void 0}),s},e.$inject=["$q","dataService","i18nService","defaultUriSchemeUtil","managedEntityConstants"],e}();e.ManagedByMessageBuilderService=t,angular.module("com.vmware.platform.ui").service("managedByMessageBuilderService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){this.$injector=e}return Object.defineProperty(e.prototype,"ng2MutationService",{get:function(){return this._ng2MutationService||(this._ng2MutationService=this.$injector.get("vcMutationService")),this._ng2MutationService},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t,n){return this.ng2MutationService.add(e,t,n)},e.prototype.addMulti=function(e,t,n){return this.ng2MutationService.addMulti(e,t,n)},e.prototype.apply=function(e,t,n,i){return this.ng2MutationService.apply(e,t,n,i)},e.prototype.applyByPropName=function(e,t,n,i){return this.ng2MutationService.applyByPropName(e,t,n,i)},e.prototype.applyOnMultiEntity=function(e,t,n,i){return this.ng2MutationService.applyOnMultiEntity(e,t,n,i)},e.prototype.applyMultiSpec=function(e,t,n,i){return this.ng2MutationService.applyMultiSpec(e,t,n,i)},e.prototype.applyMulti=function(e,t,n){return this.ng2MutationService.applyMulti(e,t,n)},e.prototype.remove=function(e,t,n,i){return this.ng2MutationService.remove(e,t,n,i)},e.prototype.removeOnMultiEntity=function(e,t,n,i){return this.ng2MutationService.removeOnMultiEntity(e,t,n,i)},e.prototype.validate=function(e,t,n){return this.ng2MutationService.validate(e,t,n)},e.prototype.validateSpec=function(e,t,n){return this.ng2MutationService.validateSpec(e,t,n)},e.prototype.validateMultiSpec=function(e,t){return this.ng2MutationService.validateMultiSpec(e,t)},e.prototype.validateOnMultiEntity=function(e,t,n){return this.ng2MutationService.validateOnMultiEntity(e,t,n)},e.$inject=["$injector"],e}();e.MutationServiceWrapper=t,angular.module("com.vmware.platform.ui").service("mutationService",t)}(platform||(platform={})),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l){function u(){return y}function d(e,t,n,i){e||(e=c.getString("Common","error.jsException.title")),f({title:e,content:t,stack:n,unhandledError:i})}function f(e){e.content||(e.content="");var t=e.content,n="";if("string"==typeof t){var o='<div id="errorMessage">',s=t.indexOf(o);s>0?t=t.substring(s+o.length,t.indexOf("</div>",s)):t.indexOf("<html")>=0&&(t=t.replace(/[\s\S]*<body>/,""),t=t.replace(/h1>/,"b>"),t=t.replace(/<img .*\/>/,""),t=t.replace(/<\/body>[\s\S]*/,"")),n=t}else"object"==typeof t?(t.message&&(n=t.message),t.cause&&(n+="\n"+c.getString("Common","notification.cause",t.cause)),t.de_properties&&(n+="\n\n"+c.getString("Common","notification.properties",t.de_properties)),t.de_objects&&(n+="\n\n"+c.getString("Common","notification.objects",t.de_objects)),t.stackTrace&&!e.stack&&(e.stack=t.stackTrace)):n=t.toString();e.type||(e.type=i.notifications.type.ERROR),e.content=e.displayAsHtml?n:_.escape(n).replace(/\n/g,"<br/>"),e.type===i.notifications.type.ERROR?a.isErrorShown()||p(e,n):r.notify(e)}function p(i,r){var a="localhost"===n.host;if(!a&&t.showErrorNotification){var u="javascript:_rootscope.showErrorNotification=false;var _elts = document.getElementsByClassName('vui-icon18-dialog-close');angular.element(_elts[_elts.length-1]).trigger('click');",d=c.getString("Common","notification.hideFutureErrorsInThisSession.label");i.content+='<br/><br/><i><a href="'+u+'">'+d+"</a></i>"}i.duration||(i.duration=b);var f=c.getString("Common","notification.addDetailsHere.label"),p="\n\n("+f+")";i.title===S&&(i.title=c.getString("Common","error.javaException.title"));var g={type:"error",title:i.title,message:r,stack:i.stack},v=!a&&(h5.isTelemetryEnabled||!h5.isReleaseBuild||h5.debug);if(v&&o.sendFeedback(g),!i.no_linkConfig){var I=c.getString("Common","notification.sendDetailsToVMware.label");i.linkConfig={label:I,onClick:function(){a&&o.sendFeedback(g),t.errMessage=r+p,t.stackTrace=g.stack,s.showFeedbackDialog(!0)}}}h=i,l.error("notificationService::handleError","\nmessage = ",g.message,"\nstack = ",g.stack);var C=(h5.debug||!i.unhandledError)&&t.showErrorNotification;C?m():(y=!0,e(function(){y=!1},b))}function m(){y=!1,r.notify(h),g()}function g(){e(function(){for(var e=document.getElementsByClassName("vui-popup vui-notification bottom-right"),t=0;t<e.length;t++)angular.element(e[t]).css("z-index","1051")},200)}function v(e){if(e){var n='<ul class="failed-tasks-notification"><li class="item"><span class="name">'+c.getString("Common","errorTask.name")+'</span><div ng-non-bindable><span class="value">'+_.escape(e.name)+'</span></div></li><li class="item"><span class="name">'+c.getString("Common","errorTask.target")+'</span><div ng-non-bindable><span class="value">'+_.escape(e.entityName)+'</span></div></li><li class="item"><span class="name">'+c.getString("Common","errorTask.status")+'</span><div ng-non-bindable><span class="value">'+_.escape(e.errorMessage)+"</span></div></li></ul>",o={title:c.getString("CommonUi","notification.operationFailed2"),content:n,type:i.notifications.type.ERROR,duration:I,linkConfig:{label:c.getString("Common","allTasks"),onClick:function(){t._navigateToView("vsphere.core.tasks.domainView")}}};r.notify(o),g()}}var h,S="Internal Server Error",y=!1;const b=6e4,I=15e3;t.showErrorNotification=h5.isErrorPopupEnabled,window._rootscope=t;var C={notify:f,notifyError:d,notifyTaskError:v,isWarningActive:u,showLastError:m,type:{INFO:i.notifications.type.INFO,SUCCESS:i.notifications.type.SUCCESS,WARNING:i.notifications.type.WARNING,ERROR:i.notifications.type.ERROR}};return C}angular.module("com.vmware.platform.ui").factory("notificationService",e),e.$inject=["$timeout","$rootScope","$location","vuiConstants","vuiNotificationService","feedbackService","responseErrorInterceptor","vFeedDialogService","i18nService","$log"]}();var platform;!function(e){var t=function(){function e(e){this.$injector=e}return Object.defineProperty(e.prototype,"downgradedNumberFormatterService",{get:function(){return this._downgradedNumberFormatterService||(this._downgradedNumberFormatterService=this.$injector.get("vcNumberFormatterService")),this._downgradedNumberFormatterService},enumerable:!0,configurable:!0}),e.prototype.format=function(e,t){return this.downgradedNumberFormatterService.format(e,t)},e.prototype.formatStorage=function(e,t,n,i){return this.downgradedNumberFormatterService.formatStorage(e,t,n,i)},e.prototype.formatBandwidth=function(e,t,n,i,r){return this.downgradedNumberFormatterService.formatBandwidth(e,t,n,i,r)},e.$inject=["$injector"],e}();e.NumberFormatterServiceWrapper=t,angular.module("com.vmware.platform.ui").service("numberFormatterService",t)}(platform||(platform={})),function(){"use strict";function e(e){function t(t,n){return e.get(t,{params:n}).then(function(e){return e.data})}function n(e){var n=o.fetchObjectTypeSpec(e),i=[];return t(n,i)}function i(){var e=o.fetchAllObjectTypeSpecs();return t(e)}var r={getObjectTypeSpec:_.memoize(n),getAllObjectTypeSpecs:_.memoize(i)},o={fetchObjectTypeSpec:function(e){return"objectTypes/"+e+"/"},fetchAllObjectTypeSpecs:function(){return"objectTypes/"}};return r}angular.module("com.vmware.platform.ui").factory("objectTypesService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,n,i,r,o){function a(){r.getProperty("vc60.periodic.refresh.rate").then(function(e){var t=parseInt(e,10);-1!==t&&(t.toString()===e&&t>10&&(v=1e3*t),s())},function(){s()})}function s(){e.$watch(function(){return e._route.objectId},function(e){l(e)}),e.$on(i.MODEL_CHANGED_EVENT,f)}function c(){o.runOutsideAngular(function(){null!==g&&(clearInterval(g),g=null)})}function l(e){return c(),p=0,e&&n.isValidManagedEntityId(e)?void n.is65VcOrLater(e).then(function(t){t?m=null:(m=e,u(e),o.runOutsideAngular(function(){g=setInterval(u,v,e)}))}):void(m=null)}function u(t){t&&d(t).then(function(t){var n;if(!(t.hasOwnProperty("@generation")&&t["@generation"].length>0))return m=null,void c();if(t["@generation"][0].key===m){if(n=t["@generation"][0].value,m&&p&&n!==p){var r={operationType:"CHANGE",objectId:m,source:h};o.runInsideAngular(function(){e.$broadcast(i.MODEL_CHANGED_EVENT,r)})}p=n}})}function d(e){return t.getProperties(e,["@generation"])}function f(e,t){t.source!==h&&t.objectId===m&&m&&l(m)}var p,m,g=null,v=2e4,h="periodicRefreshService",S={init:a};return e.$on("$destroy",function(){c()}),S}angular.module("com.vmware.platform.ui").factory("periodicRefreshService",e),e.$inject=["$rootScope","dataService","vcService","vcH5ConstantsService","configurationService","vxZoneService"]}(),angular.module("com.vmware.platform.ui").factory("persistenceService",["$http",function(e){function t(t,n){return e.get(t,{params:n}).then(function(e){return e?e.data:[]})}function n(t,n){return e.post(t,n).then(function(e){return e.data})}function i(t,n){return e["delete"](t,{params:n}).then(function(e){return e.data})}function r(e){return e&&e.replace(/^\s+|\s+$/g,"")?!1:!0}return{getMetadata:function(e,n){n=n||"";var i={key:e.key,value:e.value,op:e.op,path:n},r="persistence/metadata/";return t(r,i)},getData:function(e,n){n=n||"";var i={key:e.key,value:e.value,op:e.op,path:n},r="persistence/data/";return t(r,i)},setData:function(e,t,i,o,a){if(!r(e)&&t&&!r(o)){i["com.vmware.usersettings.category.uid"]=o,i.uid=e,i["com.vmware.usersettings.uid"]=e;var s={uid:e,additionalData:i},c={contentType:a,metadata:s,value:t},l="persistence/save/";return n(l,c)}},removeData:function(e){var t="persistence/remove/",n={uid:e};return i(t,n)},reset:function(){var e="persistence/reset/";return i(e)}}}]),window.vSphereClientSDK={};var WEB_PLATFORM=function(){"use strict";function e(e,t){return(new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[void 0,""])[1].replace(/\+/g,"%20")||null}function t(){_.each(c,function(e,t){if("visible"!==e.document.visibilityState)delete c[t];else try{e.handler()}catch(n){delete c[t]}})}function n(e){var t=e.getElementsByTagName("head")[0],n=o.domXmlSerializer.serializeToString(t);return i(n)}function i(e){return e.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0)}function r(t){var n={getClientType:l.getClientType,getClientVersion:l.getClientVersion,getRootPath:l.getRootPath,setGlobalRefreshHandler:l.setGlobalRefreshHandler,openModalDialog:l.openModalDialog,closeDialog:l.closeDialog,setDialogTitle:l.setDialogTitle,setDialogSize:l.setDialogSize,getUserSession:l.getUserSession,getString:l.getString,sendNavigationRequest:l.sendNavigationRequest,callActionsController:l.callActionsController,sendModelChangeEvent:l.sendModelChangeEvent};t.vSphereClientSDK=t.vSphereClientSDK||{},t.vSphereClientSDK.getWebPlatformApi=function(t){function i(){return n.getRootPath.call(l)}function r(){return n.getClientType.call(l)}function o(){return n.getClientVersion.call(l)}function a(){return e(C,"locale")}function s(){return e(C,"objectId")}function c(){return e(C,"targets")}function u(){return e(C,"actionUid")}function d(){var t={serviceGuid:e(C,"serviceGuid"),sessionId:e(C,"sessionId"),serviceUrl:e(C,"serviceUrl")};return t}function f(e,i){n.setGlobalRefreshHandler.call(l,e,t.document)}function p(e,t,i,r,o){n.openModalDialog.call(l,e,t,i,r,o)}function m(){n.closeDialog.call(l);
}function g(e){n.setDialogTitle.call(l,e)}function v(e,t){n.setDialogSize.call(l,e,t)}function h(e,t,i){return n.getString.call(l,e,t,i)}function S(){return n.getUserSession.call(l)}function y(e,t){n.sendNavigationRequest.call(l,e,t)}function b(e,t){n.callActionsController.call(l,e,t)}function I(e,t){n.sendModelChangeEvent.call(l,e,t)}if(!t||!t.location)return console.log("Function called with invalid window parameter: ",t),null;var C=t.location.href,w={getClientType:r,getClientVersion:o,getRootPath:i,getLocale:a,getObjectId:s,getActionTargets:c,getActionUid:u,getVcSelectorInfo:d,setGlobalRefreshHandler:f,openModalDialog:p,closeDialog:m,setDialogTitle:g,setDialogSize:v,getUserSession:S,getString:h,sendNavigationRequest:y,callActionsController:b,sendModelChangeEvent:I};return w}}var o=null,a=null,s=null,c={},l={onAngularLoad:function(e,n,i,c){o=e,this.dataService=n,a=i,s=window.Zone.current,"angular"!==s.name&&console.warn("The web platform APIs run outside the angular ng zone."),r(c),o.$on("dataRefreshInvocationEvent",t),o.domXmlSerializer=new XMLSerializer},dataService:null,getString:function(e,t,n){var i=[e,t];return angular.isDefined(n)&&(i=i.concat(n)),o.i18n.apply(o,i)},apply:function(e){o.$apply(e)},getRootPath:function(){return"/ui"},getClientType:function(){return"html"},getClientVersion:function(){var e=this.getString("CommonUi","client.version");return e=e.split("-")[0]},getUserSession:function(){return s.run(a.getUserSession,this)},sendNavigationRequest:function(e,t){s.run(a.sendNavigationRequest,this,[e,t])},callActionsController:function(t,n){var i=e(t,"actionUid");if(!i)throw new Error("missing actionUid parameter in callActionsController url: "+t);s.run(a.callActionsController,this,[t,n,i])},closeDialog:function(){s.run(a.closeDialog,this)},setDialogTitle:function(e){s.run(a.setDialogTitle,this,[e])},setDialogSize:function(e,t){s.run(a.setDialogSize,this,[e,t])},openModalDialog:function(e,t,n,i,r){s.run(a.openModalDialog,this,[e,t,n,i,r])},sendModelChangeEvent:function(e,t){s.run(a.sendModelChangeEvent,this,[e,t])},setGlobalRefreshHandler:function(e,t){if(!t)return void console.error("setGlobalRefreshHandler() is missing the view document as 2nd parameter");if(!angular.isFunction(e))return void console.error("setGlobalRefreshHandler() first parameter must be a function");var i=n(t);c[i]={handler:e,document:t}}};return l}();!function(){"use strict";angular.module("com.vmware.platform.ui").service("portletActionBarService",["commonActionBarService",function(e){function t(t,n,i,r){return e.updateActionBar(t,"actions",n,i,r)}return{updateActionBar:t}}])}();var platform;!function(e){var t=function(){function e(e){this.dataService=e}return e.prototype.getResourceInfo=function(e,t,n){void 0===n&&(n={});var i=t+".@info";return this.dataService.getProperties(e,[t,i],n).then(function(e){var r=e[t],o=e[i],a={datasetSupported:!0,properties:[]};if(r&&n.supportedKey){var s=_.find(r.properties,function(e){return e.name===n.supportedKey});a.datasetSupported=!(!s||!s.value)}return r&&a.datasetSupported&&_.reduce(r.properties,function(e,t){if(t.name===n.supportedKey)return e;var i={key:t.name,label:t.name,value:t.value};if(o){var r=_.find(o.properties,function(e){return e.name===t.name});r&&(i.label=r.title,i.type=r.valueTypeName,i.description=r.description,i.staticValueSpace=r.staticValueSpace)}return e.push(i),e},a.properties),a})},e.$inject=["dataService"],e}();e.ResourceService=t,angular.module("com.vmware.platform.ui").service("resourceService",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").factory("scopeUtil",[function(){return{watchUntilTrue:function(e,t,n){var i=e.$watch(t,function(e){e&&(n(e),i())})}}}]),angular.module("com.vmware.platform.ui").factory("searchService",["$rootScope",function(e){function t(t){e.$broadcast("searchEvent")}var n={},i={query:void 0,searchState:void 0,searchType:void 0,results:{}};return n.searchStates={searchInProgress:0,searchComplete:1,searchDestroyed:2},n.searchTypes={simple:0,advanced:1},n.getSearchData=function(){return i},n.setSearchData=function(e,n,r,o){i={query:r,searchState:e,searchType:o,results:n},t()},n}]),angular.module("com.vmware.platform.ui").factory("simpleObjectStorageService",["$q",function(e){function t(){function t(e){return o[e]}function n(e,t){o[e]=t}function i(n){return e.when(t(n))}function r(e,t){n(e,t)}var o={},a={getData:t,setData:n,getUserData:i,setUserData:r};return a}return{getObjectStorage:t}}]);var platform;!function(e){var t=function(){function e(e){this.$injector=e}return Object.defineProperty(e.prototype,"vscSpbmReplicationGroupInfoService",{get:function(){return this._vscSpbmReplicationGroupInfoService||(this._vscSpbmReplicationGroupInfoService=this.$injector.get("vscSpbmReplicationGroupInfoService")),this._vscSpbmReplicationGroupInfoService},enumerable:!0,configurable:!0}),e.prototype.extractReplicationGroupInfos=function(e,t,n){return this.vscSpbmReplicationGroupInfoService.extractReplicationGroupInfos(e,t,n)},e.prototype.getReplicationGroupName=function(e){return this.vscSpbmReplicationGroupInfoService.getReplicationGroupName(e)},e.prototype.equalReplicationGroupIds=function(e,t){return this.vscSpbmReplicationGroupInfoService.equalReplicationGroupIds(e,t)},e.prototype.equalReplicationGroupInfos=function(e,t){return this.vscSpbmReplicationGroupInfoService.equalReplicationGroupInfos(e,t)},e.prototype.isAutoReplicationGroup=function(e){return this.vscSpbmReplicationGroupInfoService.isAutoReplicationGroup(e)},e.prototype.validateVmReplicationGroupAssignments=function(e){return this.vscSpbmReplicationGroupInfoService.validateVmReplicationGroupAssignments(e)},e.$inject=["$injector"],e}();e.SpbmReplicationGroupInfoService=t,angular.module("com.vmware.platform.ui").service("spbmReplicationGroupInfoService",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").service("storageProfileService",["defaultUriSchemeUtil","dataService","i18nService","$q","$timeout","authorizationService",function(e,t,n,i,r,o){function a(e,t,n,i){var r=i&&e.homeStorageProfile?e.homeStorageProfile.profileId.uniqueId:R,o=_.find(n,function(e){return e.id===r});if(e.diskAssignments&&e.diskAssignments.length>0){var a=_.find(e.diskAssignments,function(e){return e.diskId.split(":")[1]===t.key.toString()});a&&(o={label:a.profile.name,id:a.profile.profileId.uniqueId})}return{options:n,selection:o}}function s(e,t){return{options:t,selection:e}}function c(){return{label:n.getString("Common","VmStorageProfile.DatastoreDefault"),id:R}}function l(n){var i=e.createVmomiUri("Folder","group-d1",n),r=t.getPropertiesByRelation(i,j,L,[U,V],{skipErrorInterceptor:!0});return r.then(function(e){return p(e)})}function u(t,r){var o=e.createVmomiUri("Folder","group-d1",t);return i.all({privilegeData:v(o),profilesData:f(t,r)}).then(function(e){var t=e.privilegeData,i=e.profilesData;return t[G]?i:new common_ui.StorageProfilesData([],void 0,void 0,void 0,n.getString("Common","storage.policy.dropdown.no.permissions"))})}function d(e){return t.getPropertiesForObjects(e,[B,H]).then(function(t){var n={vmProfileAssignments:{},vmReplicationGroupAssignments:{}};return _.forEach(e,function(e){t&&t[e]&&(n.vmProfileAssignments[e]=t[e][B],n.vmReplicationGroupAssignments[e]=t[e][H])}),n},function(){return{vmProfileAssignments:{},vmReplicationGroupAssignments:{}}})}function f(t,n){var i=n||{},r=l(t,i),o={storageProfiles:[]};return r.then(function(t){var n=i.vmId?e.getManagedObjectReference(i.vmId):void 0;t&&(o.storageProfiles=t),i.includeKeepExisting&&o.storageProfiles.splice(0,0,b(R));var r=new common_ui.StorageProfilesData(o.storageProfiles,n,null);return r},function(e){var t="";return e.data&&e.data.message&&(t=e.data.message.replace("com.vmware.vim.binding.vmodl.MethodFault: ","")),g(t)})}function p(e){e=_.sortBy(e,function(e){return e.profileContent.name.toLowerCase()});var t=[];return t.push(c()),e&&(t=t.concat(_.map(e,function(e){var t="",n="";e.profileContent&&(t=e.profileContent.name,n=e.profileContent.profileId.uniqueId);var i=e.profileContent;return i.iofilterInfo=e.iofilterInfo,{label:t,id:n,profileObj:i}}))),t}function m(t,n){var i,r=p(t),o=n.vmId?e.getManagedObjectReference(n.vmId):void 0;return n.includeKeepExisting&&r.splice(0,0,b(R)),i=new common_ui.StorageProfilesData(r,o,null)}function g(e){return new common_ui.StorageProfilesData([],void 0,void 0,void 0,e)}function v(e){return o.checkGrantedPrivilege(e,G).then(function(e){var t={};return t[G]=e,t})}function h(e){if(e){const t=e._type;if("com.vmware.vim.binding.vim.vm.DefinedProfileSpec"===t)return e.profileId;if("com.vmware.vim.binding.vim.vm.DefaultProfileSpec"===t)return R}}function S(e,t){var n="com.vmware.vim.binding.vim.vm.DefaultProfileSpec"===t._type?R:t.profileId,i=_.find(e,function(e){return n===e.id});return i}function y(e,t){if(e===R||!e)return{_type:"com.vmware.vim.binding.vim.vm.DefaultProfileSpec"};var n={_type:"com.vmware.vim.binding.vim.vm.DefinedProfileSpec",profileId:e};return t&&t.id&&(n.replicationSpec={_type:"com.vmware.vim.binding.vim.vm.replication.ReplicationSpec",replicationGroupId:t.id}),n}function b(e){var t={};return e&&e!==R&&(t.id=e),t.label=n.getString("Common","VmStorageProfile.KeepExisting"),t.keepExistingProfileAssignments=!0,t}function I(e,t,n,i,r){var o=this.buildStorageProfile(n,e,t,r);return this.makeProfile(o.selection.id,i)}function C(e,t){if(!e||!t)return i.when(null);var n="Datastore"===t.type?T(e,[t],[]):T(e,[],[t]);return this.requestCompatibleStorage(n).then(function(e){return e&&e.compatibilityResults?{compatibilityResult:e.compatibilityResults&&e.compatibilityResults.length?e.compatibilityResults[0]:null,replicationGroupInfo:e.replicationGroupInfo}:{}})}function w(e,t,n){return T(e&&e.selectedProfile?e.selectedProfile.profileObj:null,t,n)}function T(e,t,n){var i={_type:"com.vmware.vsphere.client.common.spbm.spec.CompatibleStorageQuerySpec",profile:e,datastoreRefs:t,storagePodsRefs:n};return i.profile&&(i.profile._type="com.vmware.vim.binding.pbm.profile.CapabilityBasedProfile"),i}function E(t,n,i){var r={_type:"com.vmware.vsphere.client.common.spbm.spec.CompatibleStorageQuerySpec",profile:null,vmRefs:_.map(t,function(t){return e.getManagedObjectReference(t)}),datastoreRefs:n,storagePodsRefs:i};return r}function k(n){if(!n||$(n.datastoreRefs)&&$(n.storagePodsRefs)||(!n.profile||null===n.profile.id||n.profile.id===R)&&!n.vmRefs){var o=i.defer();return r(function(){o.resolve(null)},0),o.promise}var a;a=$(n.datastoreRefs)?n.storagePodsRefs[0].serverGuid:n.datastoreRefs[0].serverGuid;var s=e.createVmomiUri("Folder","group-d1",a);return t.getProperties(s,[F],{propertyParams:[{propertyName:F,parameterType:n._type,parameter:n}]}).then(function(e){return e?e[F]:null})}function D(e){return e?e.id===R?!0:!1:!0}function x(e){var t=_.find(e,function(e){return O(e)});return t}function O(e){if(!e)return!1;var t=e.profileObj;if(!t)return!1;var n=t.constraints;if(_.isEmpty(n)||_.isEmpty(n.subProfiles))return!1;var i=_.any(n.subProfiles,function(e){return!e||_.isEmpty(e.capability)?!1:_.any(e.capability,function(e){return e&&e.id&&e.id.namespace?"pmem"===e.id.namespace.toLowerCase():!1})});return i}function P(e){if(!e)return!1;var t=e.profileObj||e;return t&&t.iofilterInfo?_.some(t.iofilterInfo,function(e){return"ENCRYPTION"===e.filterType}):!1}function A(e,t){if(e){var n=t.key.toString(),i=_.find(e.diskAssignments,function(e){return e.diskId.split(":")[1]===n});return i}}function $(e){return!e||0===e.length}function N(e,t,n){if(e===t)return!0;if(!e||!t)return!1;if(e._type!==t._type)return!1;if("com.vmware.vim.binding.vim.vm.EmptyProfileSpec"===e._type||"com.vmware.vim.binding.vim.vm.DefaultProfileSpec"===e._type)return!0;if(e.profileId!==t.profileId)return!1;if(!n)return!0;if(e.replicationSpec===t.replicationSpec)return!0;const i=e.replicationSpec&&e.replicationSpec.replicationGroupId&&e.replicationSpec.replicationGroupId.deviceGroupId&&e.replicationSpec.replicationGroupId.deviceGroupId.id,r=t.replicationSpec&&t.replicationSpec.replicationGroupId&&t.replicationSpec.replicationGroupId.deviceGroupId&&t.replicationSpec.replicationGroupId.deviceGroupId.id;if(i!==r)return!1;const o=e.replicationSpec&&e.replicationSpec.replicationGroupId&&e.replicationSpec.replicationGroupId.faultDomainId&&e.replicationSpec.replicationGroupId.faultDomainId.id,a=t.replicationSpec&&t.replicationSpec.replicationGroupId&&t.replicationSpec.replicationGroupId.faultDomainId&&t.replicationSpec.replicationGroupId.faultDomainId.id;return o!==a?!1:!0}var R="defaultId",M="vmHomeProfileId",j="pbmProfiles",L="PbmRequirementStorageProfile",U="profileContent",V="iofilterInfo",F="pbmCompatibleStorage",B="vmStorageProfileAssignments",H="vmReplicationGroupAssignments",G="StorageProfile.View";return{makeProfile:y,makeProfileFromDevice:I,fetchProfiles:l,getDefaultProfile:c,getProfileIdFromSpec:h,findProfile:S,requestVmProfileAndReplicationGroupAssignments:d,requestCompatibleStorage:k,requestCompatibilityResultForDatastore:C,createCompatibleStorageQuerySpecForProfile:w,createCompatibleStorageQuerySpecForVms:E,buildStorageProfile:a,buildStorageProfileInCreateMode:s,fetchStorageProfilesData:u,findPmemStorageProfile:x,isPmemStorageProfile:O,isDefaultStorageProfile:D,isEncryptionStorageProfile:P,findDiskAssignment:A,areProfileSpecsEqual:N,buildStorageProfilesData:m,buildErrorStorageProfilesData:g,DEFAULT_ID:R,VM_HOME_PROFILE_ID:M}}]);var platform;!function(e){var t=function(){function e(e){this.cssClassBlacklist=e}return e}();e.CssPathOptions=t;var n=function(){function e(e,t){this.node=e,this.telemetryHelperService=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this.telemetryHelperService.isElementNode(this.node)?this.node.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classList",{get:function(){return this.telemetryHelperService.isElementNode(this.node)?this.telemetryHelperService.getElementClassList(this.node):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.telemetryHelperService.isElementNode(this.node)?this.telemetryHelperService.getElementIndex(this.node):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.node.nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.node.nodeName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textContents",{get:function(){return this.telemetryHelperService.isElementNode(this.node)?this.telemetryHelperService.getElementDirectTextContents(this.node):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmbeddedNodeWrapper",{get:function(){return this.telemetryHelperService.isEmbeddedNode(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentNodeWrapper",{get:function(){var t=this.telemetryHelperService.getParentNode(this.node);return t?new e(t,this.telemetryHelperService):null},enumerable:!0,configurable:!0}),e}();e.TelemetryDomNodeWrapper=n}(platform||(platform={}));var platform;!function(e){var t="tid-",n=function(){function e(){}return e.prototype.getNodeWrapperCssPath=function(e,t){void 0===t&&(t={cssClassBlacklist:[]});for(var n=[],i=e;i;){var r=i.nodeName.toLowerCase();if(!i.parentNodeWrapper&&!this.isDocumentNode(i))return"";if(i.isEmbeddedNodeWrapper){if(!this.isElementNode(i)){i=i.parentNodeWrapper;continue}}else if("body"===r||"html"===r||!this.isElementNode(i)){i=i.parentNodeWrapper;continue}var o="",a=this.getClassesSelector(i,t);if(i.id?(o+="#"+this.escapeCssIdentifier(i.id),o+=a.classSelector):(o+=this.escapeCssIdentifier(r),o+=a.classSelector,a.containsTid||(o+=this.getIndexSelector(i))),n.push(o),i=i.parentNodeWrapper,a.containsTid)break}return n.reverse().join(" > ")},e.prototype.getText=function(e){return e.textContents&&0!==e.textContents.length?e.textContents[0].trim():""},e.prototype.getEncodedText=function(e){var t=this.getText(e);if(!t)return"";var n;return n="undefined"!=typeof CryptoJS?CryptoJS.SHA256(t).toString():"[Error: CryptoJS has not loaded properly]"},e.prototype.generateTelemetryIdClass=function(e){return e?t+e.replace(/\s+|\./g,"-").toLowerCase():""},e.prototype.getElementClassList=function(e){var t=[];return e&&e.classList&&(t=Array.prototype.slice.apply(e.classList)),t},e.prototype.getElementIndex=function(e){for(var t=0,n=e.previousElementSibling;n;)t++,n=n.previousElementSibling;return t},e.prototype.getElementDirectTextContents=function(e){for(var t=[],n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];this.isTextNode(i)&&"string"==typeof i.textContent&&t.push(i.textContent)}return t},e.prototype.getParentNode=function(e){var t=e.parentNode;if(this.isEmbeddedNode(e)&&this.isDocumentNode(e)){var n=e;n.defaultView&&n.defaultView.frameElement&&(t=n.defaultView.frameElement)}return"function"==typeof window.ShadowRoot&&e instanceof window.ShadowRoot&&(t=e.host),t?t:null},e.prototype.isEmbeddedNode=function(e){var t=e.ownerDocument;return this.isDocumentNode(e)&&(t=e),t!==document},e.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},e.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},e.prototype.isDocumentNode=function(e){return e.nodeType===Node.DOCUMENT_NODE},e.prototype.getClassesSelector=function(e,n){var i=this,r=[],o=!1,a=[];if(e.classList)if(r=e.classList,e.id)a=r.filter(function(e){return 0===e.indexOf(t)}),o=a.length>0;else for(var s=function(e){var i=r[e];if(0===i.indexOf(t))a=[i],o=!0;else{var s=_.find(n.cssClassBlacklist,function(e){return-1!==i.indexOf(e)});s||a.push(i)}},c=0;c<r.length&&!o;c++)s(c);a=_.map(a,function(e){return i.escapeCssIdentifier(e)});var l=a.reduce(function(e,t){return e+("."+t)},"");return{classSelector:l,containsTid:o}},e.prototype.escapeCssIdentifier=function(e){return CSS.escape(e)},e.prototype.getIndexSelector=function(e){var t=e.index;return null===t||0>=t?"":":nth-child("+(t+1)+")"},e}();e.TelemetryHelperService=n,angular.module("com.vmware.platform.ui").service("telemetryHelperService",n)}(platform||(platform={}));var platform;!function(e){var t=e.TelemetryDomNodeWrapper,n=function(){function e(e,n,i,r,o,a,s,c){var l=this;this.rootScope=e,this.http=n,this.configurationService=i,this.telemetryHelperService=r,this.logService=o,this.userSessionService=a,this.vxZoneService=s,this.$location=c,this.PLUGIN_DATA_COLLECTION_TIMEOUT=15e3,this.CONNECTION_STATE_CATEGORY="connectionState",this.CONNECTION_STATE_ACTION="connectionState",this.CONNECTION_LOST_EVENT="connectionLost",this.CONNECTION_RESTORED_EVENT="connectionRestored",this.MOUSE_EVENT_TYPE_TO_ACTION={click:"click",contextmenu:"right-click"},this.telemetryOptions={cssClassBlacklist:["ng-","fill-parent"]},this.trackMouseEvent=function(e,t){var n=l.MOUSE_EVENT_TYPE_TO_ACTION[e];if(n){var i=l.telemetryHelperService.getNodeWrapperCssPath(t,l.telemetryOptions);-1!==i.indexOf("tid-global-refresh-button")&&(n="global-refresh");var r=l.telemetryHelperService.getEncodedText(t),o=l.$location.absUrl();o.indexOf("debugTelemetry")>-1&&(l.log.debug(i),r&&(l.log.debug("Obfuscated label: "+r),l.log.debug("Unobfuscated label: "+l.telemetryHelperService.getText(t)))),h5.isTelemetryEnabled&&""!==i&&l.trackEvent(n,"element",i,r)}},this.windowMouseEventHandler=function(e){var n=new t(e.target,l.telemetryHelperService),i=l.$location.absUrl();(e&&e.isTrusted!==!1||i.indexOf("allowUntrustedTelemetryEvents")>-1)&&l.trackMouseEvent(e.type,n)},this.startTrackingMouseEvents=function(e){for(var t in l.MOUSE_EVENT_TYPE_TO_ACTION)e.addEventListener(t,l.windowMouseEventHandler)},this.stopTrackingMouseEvents=function(e){for(var t in l.MOUSE_EVENT_TYPE_TO_ACTION)e.removeEventListener(t,l.windowMouseEventHandler)},this.collectPluginData=function(){l.vxZoneService.runOutsideAngular(function(){setTimeout(function(){l.http.get("plugins").then(function(e){e&&e.data&&_.each(e.data,function(e){var t=_.extend({pluginId:e.id},_.pick(e,"name","vendor","version","description","state","vmwareCertifiedMessage"));_paq.push(["trackCustom","h5_ui_plugin",t])})})},l.PLUGIN_DATA_COLLECTION_TIMEOUT)})},this.trackBackendConnectionState=function(){!function(e){l.rootScope.$on("backendConnectionLostEvent",function(){e&&(e=!1,l.sendConnectionEvent(l.CONNECTION_LOST_EVENT))}),l.rootScope.$on("backendConnectionRestoredEvent",function(){e||(e=!0,l.sendConnectionEvent(l.CONNECTION_RESTORED_EVENT))})}(!0)},this.sendConnectionEvent=function(e){l.trackEvent(l.CONNECTION_STATE_CATEGORY,l.CONNECTION_STATE_ACTION,e,"")},this.initTelemetry=function(){window._paq=window._paq||[];var e=h5.installationId;e||(e="internal_installation");var t="",n=h5.i18n.languageResource.CommonUi;n&&(t=n["client.version"]),_paq.push(["initProduction",!0,h5.telemetryCollectorId,e,"h5_ui",t]),_paq.push(["enableLinkTracking"]),h5.telemetryCookieDomain&&_paq.push(["setCookieDomain",h5.telemetryCookieDomain]),_paq.push(["setUrlCallback",function(e){var t=document.createElement("a");return t.href=e,t.pathname+t.search+t.hash}]),l.userSessionService.getUserSession().then(function(e){_paq.push(["setCustomDimension","userSessionLocale",e.locale])})},this.log=o("telemetryService")}return e.prototype.trackEvent=function(e,t,n,i){h5.isTelemetryEnabled&&"undefined"!=typeof _paq&&_paq.push(["trackEvent",e,t,n,i])},e.prototype.init=function(){var e=this;this.configurationService.getProperty("ui.telemetry.enabled").then(function(t){t&&"TRUE"!==t.toUpperCase()&&(h5.isTelemetryEnabled=!1),h5.isTelemetryEnabled&&(e.initTelemetry(),e.collectPluginData(),e.trackBackendConnectionState()),e.startTrackingWindowEvents(window),e.rootScope.$on("$destroy",function(){e.stopTrackingWindowEvents(window)})})},e.prototype.startTrackingWindowEvents=function(e){this.startTrackingMouseEvents(e)},e.prototype.stopTrackingWindowEvents=function(e){this.stopTrackingMouseEvents(e)},e.$inject=["$rootScope","$http","configurationService","telemetryHelperService","logService","userSessionService","vxZoneService","$location"],e}();e.TelemetryService=n,angular.module("com.vmware.platform.ui").service("telemetryService",n)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(){}return e.prototype.startTimeTracking=function(){},e.prototype.stopTimeTracking=function(){},e}();e.NoOpTimeTracker=t;var n=function(){function e(e,t,n,i,r,o){this.$timeout=e,this.configurationService=t,this.telemetryService=n,this.telemetryParameterName=i,this.bufferTimeProp=r,this.vxZoneService=o,this.MIN_NUMBER_OF_TIMES_TO_BUFFER=3,this.startTime=0,this.pendingTimeout=!1,this.buffer=[]}return e.prototype.startTimeTracking=function(){this.currentBufferItem={},this.currentBufferItem.start=Date.now()},e.prototype.stopTimeTracking=function(){this.currentBufferItem&&(this.currentBufferItem.duration=Date.now()-this.currentBufferItem.start,this.addItem(this.currentBufferItem))},e.prototype.addItem=function(e){h5.isTelemetryEnabled&&this.telemetryParameterName&&(this.buffer.push(e),this.startTime||(this.startTime=e.start),this.buffer.length>=this.MIN_NUMBER_OF_TIMES_TO_BUFFER&&this.sendTelemetry())},e.prototype.sendTelemetry=function(){var e=this;this.configurationService.getProperty(this.bufferTimeProp).then(function(t){if(!e.pendingTimeout){var n=Date.now()-e.startTime;e.pendingTimeout=!0;var i=Math.max(0,t-n);e.vxZoneService.runOutsideAngular(function(){e.$timeout(function(){var t=e.findMedian();e.telemetryService.trackEvent(e.telemetryParameterName,t),e.buffer=[],e.startTime=0,e.pendingTimeout=!1},i)})}})},e.prototype.findMedian=function(){var e=Math.floor(this.buffer.length/2),t=this.buffer.sort(function(e,t){return e.duration-t.duration})[e].duration;return this.buffer.length%2!==0&&(t=(t+this.buffer[e-1].duration)/2),t},e.$inject=["$timeout","telemetryService","configurationService","vxZoneService"],e}();e.TelemetryTimeTracker=n;var i=function(){function e(e,t,n,i){this.$timeout=e,this.telemetryService=t,this.configurationService=n,this.vxZoneService=i}return e.$inject=["$timeout","telemetryService","configurationService","vxZoneService"],e.prototype.createTelemetryTracker=function(e,i){return h5.isTelemetryEnabled?new n(this.$timeout,this.configurationService,this.telemetryService,e,i,this.vxZoneService):new t},e}();e.TelemetryTimeTrackerFactory=i,angular.module("com.vmware.platform.ui").service("telemetryTimeTrackerFactory",i)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n,i){this.$http=e,this.$sce=t,this.$interpolate=n,this.$templateCache=i}return e.prototype.renderTemplateWithScope=function(e,t){return this.$http.get(this.$sce.getTrustedResourceUrl(e),{cache:this.$templateCache}).then(function(e){return this.$interpolate(e.data)(t)}.bind(this))},e.prototype.getHtmlEscapingTemplateRenderFunction=function(e){var t="<div ng-non-bindable>"+e+"</div>";return _.template(t,{escape:/\{\{(.+?)\}\}/,interpolate:/(.)^/,evaluate:/(.)^/})},e.$inject=["$http","$sce","$interpolate","$templateCache"],e}();e.TemplateHelperService=t,angular.module("com.vmware.platform.ui").service("templateHelperService",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").service("timeFormatterService",["i18nService","localStorageService","browserLanguage",function(e,t,n){"use strict";function i(e){var t=_.find(u,function(t){return t.id===e});return t||d}function r(e){return _.find(u,function(t){return e&&e.id&&e.id===t.id})}function o(e,t,i){var r=new Date(e);if(!e||isNaN(r.getTime())||!isFinite(r.getTime()))return"";if(!i){var o=v[d.id].formatter;return t&&v[t.id]&&(o=v[t.id].formatter),o.format(r)}var a=v[d.id].hour12;t&&v[t.id]&&(a=v[t.id].hour12);var s=Object.assign({hour12:a},i);return r.toLocaleString(n.get(),s)}function a(e,t){return p().then(function(n){return o(e,n,t)})}var s={id:"DateTimeBrowserDefault",displayName:e.getString("Common","changeDateTimeFormat.BrowserDefault.label")},c={id:"DateTimeFormat12",displayName:e.getString("Common","changeDateTimeFormat.12Hour.label")},l={id:"DateTimeFormat24",displayName:e.getString("Common","changeDateTimeFormat.24Hour.label")},u=[s,c,l],d=s,f="timeFormat",p=function(){return t.getUserData(f).then(function(e){return i(e)})},m={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric"},g=n.get(),v={};return v[d.id]={formatter:Intl.DateTimeFormat(g,Object.assign({},m)),hour12:void 0},v[c.id]={formatter:Intl.DateTimeFormat(g,Object.assign({hour12:!0},m)),hour12:!0},v[l.id]={formatter:Intl.DateTimeFormat(g,Object.assign({hour12:!1},m)),hour12:!1},{formatDate:a,timestampToText:o,setUserTimeFormatPreference:function(e){r(e)&&t.setUserData(f,e.id)},getUserTimeFormatPreference:p,getKnownFormats:function(){return u}}}]);var platform;!function(e){var t=function(){function e(){this.SCHEME="scheme",this.AUTHORITY="authority",this.PATH="path",this.QUERY="query",this.FRAGMENT="fragment"}return e.prototype.stripTags=function(e){return e.replace(/<[^>]+>/gi,"")},e.prototype.removeParameter=function(e,t){var n=this.parse(e),i=n.fragment;if(i){var r=i.startsWith("?")?i.substring(1):i,o=_.reject(r.split("&"),function(e){return e.indexOf(t)>=0}),a=o.join("&");a?(i.startsWith("?")&&(a="?"+a),n[this.FRAGMENT]=a):n[this.FRAGMENT]=void 0}return this.recompose(n)},e.prototype.recompose=function(e){var t="";return e[this.SCHEME]&&(t+=e[this.SCHEME]+":"),e[this.AUTHORITY]&&(t+="//"+e[this.AUTHORITY]),t+=e[this.PATH],e[this.QUERY]&&(t+="?"+e[this.QUERY]),e[this.FRAGMENT]&&(t+="#"+e[this.FRAGMENT]),t},e.prototype.parse=function(e){var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=e.match(t);return{scheme:n[2],authority:n[4],path:n[5],query:n[7],fragment:n[9]}},e}();e.URLService=t,angular.module("com.vmware.platform.ui").service("urlService",t)}(platform||(platform={})),function(){angular.module("com.vmware.platform.ui").factory("userPrivilegeService",["dataService","defaultUriSchemeUtil",function(e,t){function n(e,t){return this.getUserPrivileges(e).then(function(e){return e.grantedPrivileges&&e.grantedPrivileges.indexOf(t)>=0})}function i(n){var i;return i="object"==typeof n?t.getVsphereObjectId(n):n,e.getProperties(i,["grantedPrivileges"])}return{checkUserPrivilege:n,getUserPrivileges:i}}])}();var platform;!function(e){var t=function(){function e(e){this.defaultUriSchemeUtil=e,this.DRAG_OBJECTS="DRAG_OBJECTS",this.DRAG_OBJECTS_DATA="DRAG_OBJECTS_DATA",this.DROP_TARGET="DROP_TARGET",this.DROP_TARGET_DATA="DROP_TARGET_DATA"}return e.prototype.evaluateValidationExpressions=function(e,t,n,i,r){var o=this.defaultUriSchemeUtil.getEntityType(n);if(!e||0===e.length)return t;for(var a=e.length,s=0;a>s;s++){var c=e[s];if(c&&c.dropTargetTypes){var l=c.dropTargetTypes.split(","),u=_.find(l,function(e){return e===o});if(!u)continue}if(t=this.evaluateValidationExpressionMulti(t,n,i,r,c.expression),0===t.length)return t}return t},e.prototype.evaluateValidationExpressionMulti=function(e,t,n,i,r){if(!e||0===e.length)return[];var o=this.parseExpression(r);if(!o)return e;var a=[],s=new RegExp(this.DRAG_OBJECTS);if(r.match(s))_.each(e,function(e){this.evaluateValidationExpression(e,t,n,i,o)&&a.push(e)}.bind(this));else{var c="";this.evaluateValidationExpression(c,t,n,i,o)&&(a=e)}return a},e.prototype.parseExpression=function(e){var t,n="("+this.DRAG_OBJECTS+")|("+this.DROP_TARGET+")|("+this.DRAG_OBJECTS_DATA+")|("+this.DROP_TARGET_DATA+")",i=new RegExp("(.+)\\(("+n+")+,{0,1}("+n+")*\\)"),r=e.match(i);return r&&r[1]&&r[2]&&(t={method:r[1],operand1:r[2],operand2:r[7]}),t},e.prototype.evaluateValidationExpression=function(e,t,n,i,r){if(!h5.dragAndDropValidationMethods[r.method])return!0;var o,a=this.getOperand(r.operand1,e,t,n,i);return r.operand2&&(o=this.getOperand(r.operand2,e,t,n,i)),h5.dragAndDropValidationMethods[r.method](a,o)},e.prototype.getOperand=function(e,t,n,i,r){switch(e){case this.DRAG_OBJECTS:return t;case this.DROP_TARGET:return n;case this.DRAG_OBJECTS_DATA:return i;case this.DROP_TARGET_DATA:return r;default:return""}},e.$inject=["defaultUriSchemeUtil"],e}();e.ValidationExpressionParserService=t,angular.module("com.vmware.platform.ui").service("validationExpressionParserService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t){this.$http=e,this._globalNotificationService=t}return e.prototype.notify=function(){var e=this;this.getUserSessionServerErrors().then(function(t){t&&!_.isEmpty(t.data)&&e._globalNotificationService.notify({content:t.data.join("\n"),type:"info"})})},e.prototype.getUserSessionServerErrors=function(){return this.$http({method:"GET",url:"usersession/userSessionServerErrors"})},e.$inject=["$http","globalNotificationService"],e}();e.VcErrorsNotificationService=t,angular.module("com.vmware.platform.ui").service("vcErrorsNotificationService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){this.$injector=e}return Object.defineProperty(e.prototype,"ng2VcService",{get:function(){return this._ng2VcService||(this._ng2VcService=this.$injector.get("vcVcService")),this._ng2VcService},enumerable:!0,configurable:!0}),e.prototype.isValidManagedEntityId=function(e){return this.ng2VcService.isValidManagedEntityId(e)},e.prototype.is51VcOrLater=function(e){return this.ng2VcService.is51VcOrLater(e)},e.prototype.is65VcOrLater=function(e){return this.ng2VcService.is65VcOrLater(e)},e.prototype.is66VcOrLater=function(e){return this.ng2VcService.is66VcOrLater(e)},e.$inject=["$injector"],e}();e.VcServiceWrapper=t,angular.module("com.vmware.platform.ui").service("vcService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(){}return e.prototype.escapeSpecialCharacters=function(e){return e&&"string"==typeof e?e.replace(/%/g,"%25").replace(/\//g,"%2f").replace(/\\/g,"%5c"):e},e.prototype.unescapeSpecialCharacters=function(e){return e&&"string"==typeof e?e.replace(/%25/g,"%").replace(/%2f/g,"/").replace(/%5c/g,"\\"):e},e}();e.VimEntityEscapingService=t,angular.module("com.vmware.platform.ui").service("vimEntityEscapingService",t);
}(platform||(platform={})),angular.module("com.vmware.platform.ui").factory("visibilityAwareDataUpdateNotificationService",["$rootScope","visibilityMonitorService",function(e,t){function n(e){var t=arguments,n=_.values(s);n=_.filter(n,function(n){if(n.notifyOnShow)return!1;var i=n.dataUpdateEventsConfig[e.name];if(!i)return!1;var r=i.checker;return _.isFunction(r)?r.apply(void 0,t):!0}),i(n,e.name,t)}function i(e,n,i){var r=_.map(e,function(e){return e.element[0]}),o=t.getVisibilityStatus(r);_.each(e,function(e,t){var r=o[t];if(r){var a=e.dataUpdateEventsConfig[n].handler;a.apply(void 0,i)}else e.notifyOnShow=!0})}function r(e){return function(t,n){t===!0&&e.notifyOnShow&&(e.notifyOnShow=!1,e.refreshHandler())}}function o(t){_.each(t.dataUpdateEventsConfig,function(t,i){if(!c[i]){var r=e.$on(i,n);c[i]={removeFunction:r,subscribersCount:0}}c[i].subscribersCount++})}function a(e){_.each(e.dataUpdateEventsConfig,function(e,t){c[t].subscribersCount--,c[t].subscribersCount<=0&&(c[t].removeFunction(),delete c[t])})}var s={},c={},l=0,u=function(e,n,i){if(!e)throw new Error("element can not be null");if(_.isNumber(e.length)||(e=[e]),1!==e.length||!_.isElement(e[0]))throw new Error("element must be a DOM element or a jQuery object pointing to a single DOM element");if(!_.isFunction(n))throw new Error("refreshHandler is required and must be a function");if(!_.isObject(i)||_.isEmpty(i))throw new Error("dataUpdateEventsConfig must be a non-empty object");_.each(i,function(e,t){if(!_.isObject(e))throw new Error('dataUpdateEventConfig for "'+t+'" is not an object');if(!_.isFunction(e.handler))throw new Error('dataUpdateEventConfig.handler for "'+t+'" is required and must be an function');if(!_.isUndefined(e.checker)&&!_.isNull(e.checker)&&!_.isFunction(e.checker))throw new Error('dataUpdateEventConfig.checker for "'+t+'" must be undefined, null or a function')}),e=$(e),l++;var a=l,c=s[a]={id:a,element:e,refreshHandler:n,dataUpdateEventsConfig:angular.copy(i),notifyOnShow:!1,visibilityMonitorServiceSubscriberId:null};return c.visibilityMonitorServiceSubscriberId=t.subscribeForVisibilityChange(e,r(c)),o(c),a},d=function(e){if(!_.isNumber(e))throw new Error("invalid subscriberId: "+e);if(e in s){var n=s[e];t.unsubscribe(n.visibilityMonitorServiceSubscriberId),n.visibilityMonitorServiceSubscriberId=null,a(n),delete s[e]}};return e.$on("$destroy",function(){_.each(_.keys(s),function(e){d(Number(e))}),c={},l=0}),{subscribeForDataUpdate:u,unsubscribe:d}}]),angular.module("com.vmware.platform.ui").factory("visibilityMonitorService",["$rootScope","$timeout","logService","vxZoneService",function(e,t,n,i){function r(){var t,n=_.values(u),r=_.map(n,function(e){return e.element[0]}),o=c;do{t=[];var s=g(r);_.each(n,function(e,n){var i=e.oldVisibilityValue,r=s[n];r!==i&&(e.oldVisibilityValue=r,t.push(_.partial(e.callback,r,i)))}),t.length>0&&i.runInsideAngular(function(){e.$apply(function(){_.each(t,function(e){try{e()}catch(t){a.error("Visibility change refresh callback failed with error: "+t)}})})}),o--}while(t.length>0&&o>=0);0>o&&a.warn("TTL expired while performing checkVisibilityAndSendNotifications")}function o(e,t,n){f[n]=setTimeout(function(){try{e()}catch(i){}o(e,t,n)},t)}var a=n("visibilityMonitorService"),s="checkVisibilityAndSendNotificationsTimeout",c=5,l=250,u={},d=0,f={},p=function(e,t){if(!e)throw new Error("element can not be null");if(_.isNumber(e.length)||(e=[e]),1!==e.length||!_.isElement(e[0]))throw new Error("element must be a DOM element or a jQuery object pointing to a single DOM element");if(!_.isFunction(t))throw new Error("callback is required and must be a function");e=$(e),d++;var n=d;return u[n]={id:n,element:e,callback:t,oldVisibilityValue:g(e)[0]},n},m=function(e){if(!_.isNumber(e))throw new Error("invalid subscriberId: "+e);e in u&&delete u[e]},g=function(e){if(!e||!_.isNumber(e.length))throw new Error("elements is required and must be an array of DOM elements or a jQuery object");var t,n=[];for(t=0;t<e.length;t++){if(!_.isElement(e[t]))throw new Error("elements["+t+"] is not a DOM element");n.push(e[t])}return _.map(n,function(e){return $.contains(document.documentElement,e)})};return i.runOutsideAngular(function(){o(r,l,s)}),e.$on("$destroy",function(){_.each(_.keys(u),function(e){m(Number(e))}),d=0,i.runOutsideAngular(function(){clearTimeout(f[s])}),f={}}),{subscribeForVisibilityChange:p,unsubscribe:m,getVisibilityStatus:g,$$checkVisibilityAndSendNotifications:r}}]);var platform;!function(e){var t=function(){function e(){this.selectedSettings=[]}return e.prototype.getSelectedSettings=function(){return this.selectedSettings},e.prototype.setSelectedSettings=function(e){this.selectedSettings=e},e}();e.VxGridSettingsService=t,angular.module("com.vmware.platform.ui").service("vxGridSettingsService",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").factory("vxViewUtil",[function(){var e=0;return{getNode:function(t){e++;var n=angular.extend({$id:e,$selectedChildIndex:-1,$children:[]},t);return new NavigationTree(n).getNodeAtLevel(0)}}}]),function(){"use strict";function e(e){function t(e){_.each(e.wizardConfig.pages,function(e){e.state=r.DISABLED});var t=_.map(e.wizardConfig.pages,function(e){return function(){return e.state}});t.push("wizardConfig.currentPage"),e.$watchGroup(t,function(){n(e.wizardConfig)})}function n(e){var t=_.filter(e.pages,function(e){return e.state!==r.SKIPPED}),n={};n.state=r.COMPLETED,_.each(t,function(t){if(n.state===r.COMPLETED)t.state=t.state===r.DISABLED?r.INCOMPLETE:t.state;else if(n.state===r.INCOMPLETE)t.state=n===e.currentPage?r.INCOMPLETE:r.DISABLED;else{if(n.state!==r.DISABLED)throw Error("Unsupported page state: "+n.state);t.state=r.DISABLED}n=t})}function i(e,t){t?e.state===r.SKIPPED&&(e.state=r.DISABLED):e.state=r.SKIPPED}var r=e.wizard.pageState;return{registerWizardForDefaultStateManagementStrategy:t,applyDefaultStateManagementStrategy:n,togglePageVisibility:i}}angular.module("com.vmware.platform.ui").service("pageStateManagementService",e),e.$inject=["vuiConstants"]}(),function(){"use strict";function e(e,t){var n=function(n,i){return function(){return e.when(n()).then(function(e){if(!_.isArray(e)&&!_.isBoolean(e))throw Error("validationFunction must return an array or boolean the promise resolved with array or boolean");if(_.isArray(e)){var n=e;return n.length>0?(i.currentPage.state=t.wizard.pageState.INCOMPLETE,i.validationBanner.messages=_.map(n,function(e){return{text:e,type:t.validationBanner.type.ERROR}}),!1):(i.currentPage.state=t.wizard.pageState.COMPLETED,!0)}return _.isBoolean(e)?(e?i.currentPage.state=t.wizard.pageState.COMPLETED:i.currentPage.state=t.wizard.pageState.INCOMPLETE,e):void 0},function(){return i.currentPage.state=t.wizard.pageState.COMPLETED,!0})["finally"](function(){i.loading=!1})}};return n}angular.module("com.vmware.platform.ui").service("simpleValidationCommit",e),e.$inject=["$q","vuiConstants"]}(),function(){"use strict";function e(e,t){function n(e){_.forEach(e.wizardConfig.pages,function(t){t.validationParams&&t.validationParams.length>0&&i(e,t,t.validationParams)})}function i(t,n,i){t.$watchGroup(i,function(){n.state===e.wizard.pageState.COMPLETED&&(n.state=e.wizard.pageState.INCOMPLETE)})}function r(e){_.each(e.wizardConfig.pages,function(n){if(n.onCommit){if(n.validationFunction)throw new Error("The page has onCommit callback and validationFunction.")}else n.validationFunction&&(n.onCommit=t(o(n.validationFunction,e),e.wizardConfig))})}function o(e,t){return function(){var n=_.map(t.wizardConfig.currentPage.validationParams,function(e){return t.$eval(e)});return e.apply(null,n)}}this.initWizardValidation=function(e){r(e),n(e)}}angular.module("com.vmware.platform.ui").service("wizardValidationService",e),e.$inject=["vuiConstants","simpleValidationCommit"]}(),angular.module("com.vmware.platform.ui").factory("vxZoneService",[function(){var e=null,t=null;return window.Zone&&window.Zone.current&&(e=window.Zone.current.parent||window.Zone.current,t="angular"===window.Zone.current.name?window.Zone.current:null),{runOutsideAngular:function(t){e?e.run(t):t()},runInsideAngular:function(e){t?t.run(e):e()}}}]),angular.module("com.vmware.platform.ui").factory("appPingerService",["configurationService","userSessionService","vxZoneService","$rootScope","$log",function(e,t,n,i,r){"use strict";function o(){t.ping()}function a(e){t.sessionPing(e).then(function(e){if(e===c)return void m.stopConnectionMonitor();if(!(e===l||e>=s))return _.isUndefined(e)?void(p&&(p=!1,i.$emit("backendConnectionLostEvent"),r.debug("Server connection lost."))):void(e>=200&&s>e&&!p&&(p=!0,i.$emit("backendConnectionRestoredEvent"),r.debug("Server connection restored.")))})}var s=400,c=401,l=0,u=6e5,d=null,f=null,p=!0,m={start:function(){m.startConnectionMonitor(),m.startSessionKeepAlive()},stop:function(){m.stopConnectionMonitor(),m.stopSessionKeepAlive()},startConnectionMonitor:function(){e.getProperty("connecton.state.check.interval").then(function(e){var t=parseInt(e,10);return _.isNaN(t)||0>=t?void r.debug("Connection state monitoring is disabled."):(t=1e3*t,m.stopConnectionMonitor(),n.runOutsideAngular(function(){f=setInterval(a,t,Math.round(t/2))}),void r.debug("Started connection state monitor; check interval =",t+"ms"))})},stopConnectionMonitor:function(){n.runOutsideAngular(function(){null!==f&&(clearInterval(f),f=null)})},startSessionKeepAlive:function(){m.stopSessionKeepAlive(),n.runOutsideAngular(function(){d=setInterval(o,u)})},stopSessionKeepAlive:function(){n.runOutsideAngular(function(){null!==d&&(clearInterval(d),d=null)})}};return i.$on("$destroy",function(){m.stop()}),m}]),function(){"use strict";function e(e,t,n,i,r){function o(){s();var e=_.throttle(function(){f.resetSessionTimeout()},1e3*l);$(t[0].body).on(u,function(){i.runOutsideAngular(function(){e()})})}function a(){d||s()}function s(){n.getProperty("session.timeout").then(function(t){0>=t||i.runOutsideAngular(function(){clearTimeout(c),c=setTimeout(function(){var t=e.$broadcast("sessionExpired");t.defaultPrevented?f.resetSessionTimeout():(d=!0,r.logout())},60*t*1e3)})})}var c,l=30,u=["mousedown","keydown"].join(" "),d=!1,f={init:o,resetSessionTimeout:a};return f}angular.module("com.vmware.platform.ui").factory("sessionTimeoutService",e),e.$inject=["$rootScope","$document","configurationService","vxZoneService","logoutService"]}(),angular.module("com.vmware.platform.ui").factory("userSessionExService",["$http","$q","logService",function(e,t,n){"use strict";var i=n("userSessionExService");return{acquireCloneTicket:function(t){return e({method:"GET",url:"usersessionex/acquireCloneTicket/"+t}).then(function(e){return e.data||i.error("Null response for clone ticket"),e.data})}}}]);var platform;!function(e){var t=function(){function e(e){this.$injector=e,this.WEB_CLIENT_SESSION_ID="webClientSessionId",this.VC_NO_ERROR_CODE="noError"}return Object.defineProperty(e.prototype,"vcUserSessionService",{get:function(){return this._vcUserSessionService||(this._vcUserSessionService=this.$injector.get("vcUserSessionService")),this._vcUserSessionService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webClientSessionId",{get:function(){return this.vcUserSessionService.webClientSessionId},enumerable:!0,configurable:!0}),e.prototype.getUserSession=function(){return this.vcUserSessionService.getUserSession()},e.prototype.getServerInfo=function(e){return this.vcUserSessionService.getServerInfo(e)},e.prototype.getAllServersInfo=function(){return this.vcUserSessionService.getAllServersInfo()},e.prototype.ping=function(){return this.vcUserSessionService.ping()},e.prototype.sessionPing=function(e){return void 0===e&&(e=5e3),this.vcUserSessionService.sessionPing(e)},e.$inject=["$injector"],e}();e.UserSessionService=t,angular.module("com.vmware.platform.ui").service("userSessionService",t)}(platform||(platform={})),function(){"use strict";angular.module("com.vmware.platform.ui").controller("AlarmPopupController",["$scope","i18nService","navigation","defaultUriSchemeUtil","objectTypesService","alarmIssueActionService",function(e,t,n,i,r,o){e.alarm=e.vuiSignPost.innerContentScope.alarm,e.i18n=t.getString,n.populateScope(e),e.triggeringObjectClicked=function(){e._navigateToObject(e.alarm.triggeringObjectId)},e.definedInObjectClicked=function(){r.getAllObjectTypeSpecs().then(function(t){var n=i.getPartsFromVsphereObjectId(e.alarm.definedInObjectId).type,r=t[n].namespace;e._navigateToViewAndObject(r+".alarmDefinitionsView",e.alarm.definedInObjectId,{alarmId:i.getVsphereObjectId(e.alarm.vimAlarmInfo.alarm)})})},e.actions=o.buildAlarmActions(e.alarm.vimAlarmInfo,e.alarm.vimAlarmState),e.alarmActionClicked=function(t){t.onClick().then(function(){e.closeSignPost()})}}])}(),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l,u,d,f,p,m){function g(){c.initializeLiveUpdates().then(function(e){e("/topic/alarms")})}function v(){n.safeApply(e,function(){k.datagridOptions.data=h()})}function h(){return k.alarms=N.sortedAlarms(),_.map(k.alarms,function(e){return{object:e.triggeringObjectName,status:e.severity,iconClass:e.iconStatusClass,name:e.title,isAcknowledgedIconClass:e.iconAcknowledgedClass,acknowledgedByUser:e.acknowledgedByUser,acknowledgedTime:e.acknowledgedOn,vimAlarmInfo:e.vimAlarmInfo,vimAlarmState:e.vimAlarmState,triggeredOn:e.triggeredOn,triggeredOnString:e.triggeredOnString}})}function S(e){return d.formatDate(e.details.alarmState.time).then(function(t){return e.details.alarmState.triggeredOnString=t,e})}function y(e){return e.data?d.formatDate(e.data.time).then(function(t){return e.data.triggeredOnString=t,e}):f.when(e)}function b(e){k.alarms=[];var t=[];_.each(e,function(e){var n=S(e);n.then(N.processInitialAlarm),t.push(n)}),f.all(t).then(function(){v()})}function I(e,t){var n=[];_.each(t.updates,function(e){var t=y(e);t.then(C),n.push(t)}),f.all(n).then(function(){v()})}function C(e){return e.isDelta?e.isDelta&&e.data?N.processUpdatedAlarmFromWebsocket(e):e.isDelta&&!e.data?N.processRemovedAlarmFromWebsocket(e):void 0:N.processNewAlarmFromWebsocket(e)}function w(){function e(){var e=o.shift();delete i[e]}function t(e){var t=_.findIndex(o,e);-1!==t&&o.splice(t,1),delete i[e]}function n(e){return{iconAcknowledgedClass:a.getAcknowledgedStatusIconClass(e.acknowledged),iconStatusClass:a.getStatusIconClass(e.overallStatus),severity:a.getSeverity(e.overallStatus),triggeredOn:e.time,triggeredOnString:e.triggeredOnString,acknowledgedOn:e.acknowledgedTime,acknowledgedByUser:e.acknowledgedByUser}}var i={},o=[];this.processInitialAlarm=function(e){var t=e.details.alarmInfo,n=e.details.alarmState,s={title:t.name,description:t.description,iconAcknowledgedClass:a.getAcknowledgedStatusIconClass(n.acknowledged),iconStatusClass:a.getStatusIconClass(n.overallStatus),severity:a.getSeverity(n.overallStatus),status:a.getAcknowledgedStatus(n),acknowledgedOn:n.acknowledgedTime,acknowledgedByUser:n.acknowledgedByUser,triggeredOn:n.time,triggeredOnString:n.triggeredOnString,triggeringObjectId:r.getVsphereObjectId(n.entity),triggeringObjectName:e.entityName,definedInObjectId:r.getVsphereObjectId(t.entity),definedInObjectName:e.details.definedInEntityName,vimAlarmInfo:t,vimAlarmState:n};i[n.key]=s,o.push(n.key)},this.processNewAlarmFromWebsocket=function(t){var n=t.data,s=t.metadata,c=n.key,l=t.metadata[c];if(l){var u={title:l.name,description:l.description,iconAcknowledgedClass:a.getAcknowledgedStatusIconClass(n.acknowledged),iconStatusClass:a.getStatusIconClass(n.overallStatus),severity:a.getSeverity(n.overallStatus),status:a.getAcknowledgedStatus(n),acknowledgedOn:n.acknowledgedTime,acknowledgedByUser:n.acknowledgedByUser,triggeredOn:n.time,triggeredOnString:n.triggeredOnString,triggeringObjectId:r.getVsphereObjectId(n.entity),triggeringObjectName:s.issueInfo.entityName,definedInObjectId:r.getVsphereObjectId(l.entity),definedInObjectName:s.alarmInfoName,vimAlarmInfo:l,vimAlarmState:n};i[c]=u,o.length===P&&e(),o.push(c)}},this.processUpdatedAlarmFromWebsocket=function(e){var t=e.data,r=t.key;r in i&&angular.extend(i[r],n(t),{vimAlarmState:t})},this.processRemovedAlarmFromWebsocket=function(e){var n=e.source;n in i&&t(n)},this.sortedAlarms=function(){return _.sortBy(i,"triggeredOn").reverse().slice(0,x)}}function T(e){var t=e.vimAlarmState,n=u.getColumnRenderer("link"),i=t.entity,o=r.createVmomiUri(i.type,i.value,i.serverGuid);return n(o,e.object,null,!1)}function E(e){var t=e.vimAlarmInfo,n=u.getColumnRenderer("link"),i=t.entity,o=r.createVmomiUri(i.type,i.value,i.serverGuid);return n(o,e.name,null,!1,{extensionName:"vsphere.core.folder.alarmDefinitionsView"})}var k=this,D=25,x=30,O=150,P=D*O,A="live.updates.alarms.enabled";k.alarms=[],k.alarmTabExtId="vsphere.opsmgmt.alarms.triggeredAlarmsView";var $=u.getColumnRenderer("link");k.datagridOptions={columnDefs:[{displayName:i.getString("AlarmsUi","alarmsView.tableHeaderText.object"),field:"object",template:T,sortable:!0,searchable:!0},{displayName:i.getString("AlarmsUi","alarmsView.tableHeaderText.status"),field:"status",template:function(e){var t=e.status,n=e.iconClass;return $(null,t,n)},sortable:!0,searchable:!0},{displayName:i.getString("AlarmsUi","alarmsView.tableHeaderText.name"),field:"name",template:E,sortable:!0,searchable:!0},{displayName:i.getString("AlarmsUi","alarmsView.tableHeaderText.triggered"),field:"triggeredOnString",sortable:!0,searchable:!0},{displayName:i.getString("AlarmsUi","alarmsView.tableHeaderText.acknowledgedTime"),field:"isAcknowledgedIconClass",template:function(e){return $(null,d.timestampToText(e.acknowledgedTime),e.isAcknowledgedIconClass)},sortable:!0,searchable:!0},{displayName:i.getString("AlarmsUi","alarmsView.tableHeaderText.acknowledgedByUser"),field:"acknowledgedByUser",template:function(e){return $(null,e.acknowledgedByUser,e.acknowledgedByUser)},sortable:!0,searchable:!0}],sortMode:l.grid.sortMode.SINGLE,columnMenu:{sortable:!1,messages:{columns:i.getString("CommonUi","listview.showColumnsMenu"),filter:i.getString("CommonUi","listview.filterMenu")}},selectionMode:l.grid.selectionMode.SINGLE,noInput:!0,height:"100%",resizable:!0,reorderable:!0,selectedItems:[],sortOrder:[{field:"startTimeString",dir:"desc"}]};var N=new w;this.getAllAlarms=function(){return a.getAlarms().then(b)},p.getProperty(A).then(function(e){"false"!==e?(t.$on("reOpenWebSocketsEvent",g),c.initializeLiveUpdates().then(function(e){t.$on("alarms",I),e("/topic/alarms")})):k.getAllAlarms()}),this.showActionsMenu=function(t){s.showActionsMenu(t,e,t.data[0].vimAlarmInfo,t.data[0].vimAlarmState,t.clientX,t.clientY,t.currentTarget)},this.navigateToTriggeredAlarmsPage=function(t,n){t.stopPropagation();var i=r.getPartsFromVsphereObjectId(n.triggeringObjectId).type;o.getObjectTypeSpec(i).then(function(t){return e._navigateToViewAndObject(t.namespace+".triggeredAlarmsView",n.triggeringObjectId)})}}angular.module("com.vmware.platform.ui").component("alarmsView",{templateUrl:"resources/ui/views/alarms/AlarmsView.html",controller:e}),angular.module("com.vmware.platform.ui").component("alarmsViewWrapper",{template:"<alarms-view></alarms-view>",controller:function(){}}),e.$inject=["$scope","$rootScope","vuiUtils","i18nService","defaultUriSchemeUtil","objectTypesService","alarmService","alarmIssueActionService","websocketMessagingService","vuiConstants","columnRenderersRegistry","timeFormatterService","$q","configurationService","feedbackService"]}();var resources={theme:{light:"header-7",dark:"header-7"},product:{defaultName:"vSphere Client"},menu:{homeMenuNavigatorNodeId:"vsphere.core.navigator.launcher"}};angular.module("com.vmware.platform.ui").controller("ControlBarViewController",["$scope","$rootScope","userSessionService","logService","actionsService","$analytics","timeFormatterService","configurationService","vFeedDialogService","vscFeedbackInvoker","themeService","vcChangeThemesService",function(e,t,n,i,r,o,a,s,c,l,u,d){"use strict";function f(e){var t=$("#"+e),n=t.offset();return n.top=t.parent().height(),n}function p(t,n){e.isUpdating=t,e.lastRefreshedTimeStamp=n}function m(){v(resources.theme[u.getCurrentTheme()])}function g(){d.onVCThemeChanged$.subscribe(function(e){e&&v(e)})}function v(t){e.themeClass=t}function h(){s.isFeatureEnabled("h5uiVcTheme").then(function(t){(e.h5uiVcTheme=t)&&g()})}var S=this,y=i("ControlBarViewController"),b=t.i18n,I=h5.name||resources.product.defaultName;e.isFeedbackToolEnabled=!0,e.h5uiFeedbackTool=!1,e.themeClass="",e.h5uiVcTheme=!1,s.getProperty("feedbackTool.enabled").then(function(t){e.isFeedbackToolEnabled="true"===t}),s.isFeatureEnabled("h5uiFeedbackTool").then(function(t){e.h5uiFeedbackTool=t}),e.homeMenuNavigatorNodeId=resources.menu.homeMenuNavigatorNodeId,e.userMenuType="vise.menus.user",e.helpMenuType="vise.menus.help",e.userMenuLabel=b("Common","ariaLabel.userMenu.link"),e.helpMenuLabel=b("Common","ariaLabel.helpMenu.link"),e.productNavigationMenuLabel=b("Common","ariaLabel.productNavigation.link"),e.showSpinner=!0,e.isCodeCaptureVisible=!1,e.connectionAlive=!0,S.$onInit=function(){m(),h()},S.$onDestroy=function(){},n.getUserSession().then(function(t){t.userName?(e.userName=t.userName,o.setUsername(t.userName.toLowerCase())):y.warn("Error getting username from userSessionService"),t.hashedClientId?"undefined"!=typeof _paq&&null!==_paq&&_paq.push(["setCustomDimension","app-session",t.hashedClientId]):y.warn("Error getting session ID from userSessionService"),e.showSpinner=!1}),angular.extend(e,{isUpdating:!1,lastRefreshedTimeStamp:"",productName:I,showPerf:h5.debug}),t.$on("backendConnectionLostEvent",function(){e.connectionAlive&&e.$apply(function(){e.connectionAlive=!1})}),t.$on("backendConnectionRestoredEvent",function(){e.connectionAlive||e.$apply(function(){e.connectionAlive=!0,t.$broadcast("dataRefreshInvocationEvent",null)})}),e.showMenu=function(t,n,i,o){var a=f(o),s=document.body.getBoundingClientRect().width-t.target.getBoundingClientRect().right-parseInt($(t.target).css("margin-right"));r.showActionsMenu(t,i,e,null,a.left,a.top).then(function(e){var t=r.getApplicationMenuContainerElement();switch(n){case"right":t.css({left:"",width:"",right:s+"px"}).children("UL").css({position:"static"})}})},e.onDropdownMenuItemClickEvent=function(e){r.invokeAction(e.references.evaluation,null)},e.productHomePresent=function(){return e.rootExtId&&e.rootExtId.trim().length>0?!0:!1},e.showEnhancedFeedbackModal=function(){var t=-1!==navigator.userAgent.indexOf("Firefox");e.h5uiFeedbackTool&&!t?l.openFeedbackModal():c.showFeedbackDialog()},e.isFeedbackModalOpen=function(){return 1===document.getElementsByClassName("feedback-modal").length},e.onRefresh=function(){e.connectionAlive&&t.$broadcast("dataRefreshInvocationEvent",null)},e.$on("dataRefreshStateChanged",function(e,t){t.numOfActiveJobs>0?p(!0,""):a.formatDate(t.time).then(function(e){var n="";null!==t.time&&(n=b("Common","updatedTimeStamp",e)),p(!1,n)})}),e.$on("showRefreshSpinner",function(){e.showSpinner=!0}),e.$on("hideRefreshSpinner",function(){e.showSpinner=!1}),e.onCodeCaptureVisibilityChanged=function(t){e.isCodeCaptureVisible=t}}]),function(){"use strict";function e(e,t,n){function i(e){return-1===e.icon.indexOf(".png")}function r(e,t){e&&t&&(c.categories=n.mergeCategories(e,t))}function o(t){angular.isDefined(t.targetViewUid)&&e._navigateToView(t.targetViewUid)}var a,s,c=this;c.categories=[],c.hasClass=i,c.onSelect=o,t.getExtensions("vise.home.shortcuts",null).then(function(e){for(var t=0;t<e.length;t++)!e[t].icon||/^\s*$/.test(e[t].icon)?e[t].icon="vx-icon-defaultShortcut":e[t].isPluginShortcut&&(e[t].icon="controlcenter-shortcut-plugin-icon "+e[t].icon);s=e,r(a,s)}),t.getExtensions("vsphere.core.controlcenter.shortcutCategories",null).then(function(e){a=e,r(a,s)})}angular.module("com.vmware.platform.ui").controller("ControlCenterViewController",e),e.$inject=["$scope","extensionService","extensionCategoryUtil"]}(),function(){"use strict";function e(e){var t={scope:{primaryTitle:"<?"},restrict:"A",compile:function(){return{pre:function(){},post:function(t,n){e(function(){var e=n.find("div[role=dialog]");if(e.length){var t="dialog-title-"+Date.now(),i="dialog-description-"+Date.now();e.find("h3.modal-title").attr("id",t),e.find(".modal-body").attr("id",i),e.attr({role:"alertdialog","aria-labelledby":t,"aria-modal":"true","aria-describedby":i,tabindex:0})}},0)}}}};return t}angular.module("com.vmware.platform.ui").directive("alertDialogRole",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){function t(t,n,i){e(function(){var e=n.find("button.btn-primary");e.length>0&&e[0].focus()},0)}var n={scope:{primaryTitle:"<?"},restrict:"A",compile:function(e,n){return{pre:function(){},post:t}}};return n}angular.module("com.vmware.platform.ui").directive("focusPrimaryButton",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l){function u(e){E.enabled=e&&0!==C,D.enabled=e&&w}function d(e){return r.get("events/",{params:{serverGuid:e.serverGuid,key:e.key,chainId:e.chainId}}).then(function(t){p.selectedEvent&&p.selectedEvent.key===e.key&&(p.relatedEventsListOptions.data=t.data.filter(function(t){return t.key!==e.key}),t.data.forEach(function(e){c.formatDate(parseInt(e.createdTime)).then(function(t){e.formattedCreatedTime=t})}),p.hasRelatedEvents=0!==p.relatedEventsListOptions.data.length)})}function f(){p.pendingRequest!==!0&&(p.pendingRequest=!0,u(!1),r.get("events/",{params:{objectId:e._route.objectId,requestedPage:C,targetEventType:S||void 0}}).then(function(e){p.eventsListOptions.data=e.data,w=e.data&&e.data.length===v,e.data.forEach(function(e){c.formatDate(parseInt(e.createdTime)).then(function(t){e.formattedCreatedTime=t})})})["finally"](function(){p.pendingRequest=!1,u(!0)}))}var p=this,m=t.getString.bind(t,"EventUi"),g=o.getColumnRenderer("object-name"),v=100,h=e._view.$id,S=e._view.contentSpec&&e._view.contentSpec.metadata&&e._view.contentSpec.metadata.targetEventType,y=s.getColumnChangeHandler(h,e),b=/(vprob|esx)\./,I="http://www.vmware.com/esx/support/askvmware/index.php",C=0,w=!1;p.pendingRequest=!1;var T=m("eventPrevPage"),E={id:1,tooltipText:T,label:T,enabled:!1,iconClass:"vui-icon-object-nav-history-left-hover",onClick:function(){C--,f()}},k=m("eventNextPage"),D={id:2,tooltipText:k,label:k,enabled:!1,iconClass:"vui-icon-object-nav-history-right-hover",onClick:function(){C++,f()}},x=[{displayName:m("eventConsoleView.eventDescriptionColumn.headerText"),field:"contextSensitiveMessage",template:function(e){var t=e.contextSensitiveMessage;return'<div><i class="icon-vSphere-events"></i><span ng-non-bindable><span title="'+_.escape(t)+'">'+_.escape(t)+"</span></span></div>"}},{displayName:m("eventConsoleView.eventTypeColumn.headerText"),field:"categoryName",template:function(e){var t="vui-icon-datagrid-status-unknown";switch(e.categoryKey){case"info":t="vui-icon-datagrid-status-info";break;case"error":t="vsphere-icon-status-error";break;case"user":t="vui-icon-user";break;case"warning":t="vsphere-icon-status-warning"}return'<div><i class="'+t+'"></i>'+e.categoryName+"</div>"}},{displayName:m("eventConsoleView.eventTriggeredOnColumn.headerText"),field:"createdTime",searchable:!1,template:function(e){return"<div>"+e.formattedCreatedTime+"</div>"}},{displayName:m("eventConsoleView.relatedTaskColumn.headerText"),field:"taskInfoName"},{displayName:m("eventConsoleView.eventTargetColumn.headerText"),field:"targetEntityName",template:function(e){return g(["targetEntityId","targetIcon","targetEntityName","labelIds"],e)}},{displayName:m("eventConsoleView.userColumn.headerText"),field:"userName"},{displayName:m("eventConsoleView.nativeTypeColumn.headerText"),field:"nativeEventType"}];p.eventsListOptions={data:[],sortOrder:[{field:"createdTime",dir:"desc"},{field:"key",dir:"desc"}],actionBarOptions:{actions:[E,D]},sortMode:i.grid.sortMode.SINGLE,selectionMode:i.grid.selectionMode.SINGLE,selectedItems:[],height:"100%",resizable:!0,reorderable:!0,columnMenu:{sortable:!1,messages:{columns:t.getString("CommonUi","listview.showColumnsMenu"),filter:t.getString("CommonUi","listview.filterMenu")}},columnHide:y,columnReorder:y,columnResize:y,columnShow:y},s.applyPersistedState(x,h).then(function(e){p.eventsListOptions.columnDefs=e,f()}),e.$watch(function(){return p.eventsListOptions.selectedItems},function(e){p.showAskVmware=!1,e.length>0?(p.selectedEvent=e[0],b.test(p.selectedEvent.nativeEventType)&&(p.showAskVmware=!0),p.hasRelatedEvents=!1,p.relatedEventsListOptions.data=[],d(p.selectedEvent)):(p.selectedEvent=null,p.hasRelatedEvents=!1)}),p.splitterOptions={orientation:i.splitter.orientation.VERTICAL,panes:[{min:"140px",size:"75%"},{min:"100px"}]},p.relatedEventsListOptions={columnDefs:[{displayName:m("eventConsoleView.eventTriggeredOnColumn.headerText"),width:"20%",field:"createdTime",searchable:!1,template:function(e){return["<div>",'<i class="icon-vSphere-events"></i>',e.formattedCreatedTime,"</div>"].join("")}},{displayName:m("eventConsoleView.eventDescriptionColumn.headerText"),field:"contextSensitiveMessage",width:"80%",template:function(e){return["<div>",'<linked-text text="dataItem.linkableFormattedMessage" targets="dataItem.linkableEntities" fallback-text="dataItem.fullFormattedMessage" title="{{dataItem.fullFormattedMessage}}">',"</linked-text>","</div>"].join("")}}],data:[],sortMode:i.grid.sortMode.SINGLE,selectionMode:i.grid.selectionMode.SINGLE,selectedItems:[],height:"100%",resizable:!0},p.refresh=f,p.openHelp=function(e){n.getUserSession().then(function(t){var n=I+"?"+angular.element.param({eventtype:e.nativeEventType,language:t.locale});a.open(n)})},p.getSelectedEventTargetType=function(){return p.selectedEvent?l.getLocalizedEntityType(p.selectedEvent.targetEntityId):null}}angular.module("com.vmware.platform.ui").controller("EventsViewController",e),e.$inject=["$scope","i18nService","userSessionService","vuiConstants","$http","columnRenderersRegistry","$window","listViewColumnService","timeFormatterService","resourceUtil"]}(),angular.module("com.vmware.platform.ui").directive("allowedCharacters",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$parsers.push(function(e){var t=e.toString().replace(new RegExp("[^"+n.allowedCharacters+"]","g"),"");return i.$setViewValue(t),i.$render(),t})}}}]),angular.module("com.vmware.platform.ui").controller("GenericPortletController",["$scope","dataService",function(e,t){function n(){return e.loadingData?void 0:(e.loadingData=!0,t.getData(r,e.portlet._view.contentSpec.metadata.modelClass,{queryName:e.portlet._view.uid+":GenericPortletController."+n.name}).then(function(t){e.data=t})["finally"](function(){e.loadingData=!1}))}var i=e.portlet._view.contentSpec.metadata.liveRefreshProperties;i&&(e.liveRefreshProperties=i.split(",").map(function(e){return e.trim()}));var r=e._route.objectId;e.watchForObjects=[r],e.loadingData=!1,e.getPortletData=n,angular.extend(e,{data:{}}),n()}]),function(){"use strict";function e(e,t,n,i,r,o,a,s,c){function l(){d().read(),f()}function u(){return a.find(".k-grid-content").parent()}function d(){var e=u();return e.data("kendoGrid").dataSource}function f(e){var t={};g.datagridOptions.actionsOptions={};var n=[];s.updateActionBar(g.datagridOptions,[g.objectId],n,t),_.each(e,function(e){c.evaluateActions(g.objectId,e.issueUid,e.details).then(function(i){_.each(i,function(i){t[i.invoker]=i,n.push({actionId:i.invoker,getActionInvocationContext:function(){return e}})}),s.updateActionBar(g.datagridOptions,[g.objectId],n,t)})})}var p=n.getColumnRenderer("link-and-text"),m=n.getColumnRenderer("issue-status"),g=this;g.objectId=e._route.objectId;var v={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};e.$on("dataRefreshInvocationEvent",function(){l()}),e.$on("modelChanged",function(){l()}),g.pendingRequest=!1,g.datagridOptions={actionBarOptions:{},pageable:!0,pageConfig:{displayMode:o.grid.displayMode.VIRTUAL_SCROLLING,size:50},data:{url:"issues",params:{objectId:g.objectId},dataType:o.grid.dataType.JSON,method:o.grid.dataMethod.GET,data:"summaryItemSpecs",total:"totalMatchedObjectCount",
change:function(e){e.items&&i.getUserTimeFormatPreference().then(function(t){e.items.forEach(function(e,n){if(e.timestamp){var r=i.timestampToText(e.timestamp,t,v);$(".dateText").html(function(e,t){return e===n?r:t})}})})}},selectionMode:o.grid.selectionMode.SINGLE,selectedItems:[],height:"99%",resizable:!0,reorderable:!0,pageSize:50,columnDefs:[{displayName:t.getString("Common","issueList.descriptionColumnLabel"),field:"description",template:function(e){var t=e.details;return p(e.entityId,e.entityName,t?t.entityLablesIds:null,e.description)}},{displayName:t.getString("Common","issueList.typeColumnLabel"),field:"issueType"},{displayName:t.getString("Common","issueList.timestampColumnLabel"),field:"dateText",template:'<span class="dateText">#:dateText#</span>'},{displayName:t.getString("Common","issueList.statusColumnLabel"),field:"status",template:function(e){return m(e.status)}}]},e.$watch("ctrl.datagridOptions.selectedItems",function(){var e=g.datagridOptions.selectedItems;f(e)}),this.showActionsMenu=function(t){"Triggered Alarm"===t.data[0].issueType&&r.showActionsMenu(t,e,t.data[0].details.alarmInfo,t.data[0].details.alarmState,t.clientX,t.clientY,t.currentTarget)},e.$on("IssueChangeEvent",l)}angular.module("com.vmware.platform.ui").controller("CommonIssuesViewController",e),e.$inject=["$scope","i18nService","columnRenderersRegistry","timeFormatterService","alarmIssueActionService","vuiConstants","$element","datagridActionBarService","issueService"]}();var platform;!function(e){var t=function(){function t(t){this.exportType=e.ExportColumnType,this.isSelectionInvalid=!0,this.i18n=t.getString}return t.prototype.$onInit=function(){this.selectedExportType=this.selectedItemsCount>1?this.exportType.SELECTED_ONLY:this.exportType.ALL,this.selectedRowsOnlyEnabled=this.selectedItemsCount>0,this.columns=_.values(this.columnsById),this.onSelectionChange()},t.prototype.onSelectAllChange=function(){var e=this;return _.isEmpty(this.columns)?void(this.isSelectionInvalid=!0):(_.each(this.columns,function(t){t.selected=e.selectAll}),void(this.isSelectionInvalid=!this.selectAll))},t.prototype.onSelectionChange=function(){this.isSelectionInvalid=!_.some(this.columns,function(e){return e.selected})},t.$inject=["i18nService"],t}();e.ExportListController=t;var n=function(){function e(){this.controller=t,this.templateUrl="resources/ui/views/listview/export/export-list.component.html",this.bindings={selectedExportType:"=",selectedItemsCount:"<",columnsById:"=",isSelectionInvalid:"=",generatingFile:"<"}}return e}();e.ExportListComponent=n,angular.module("com.vmware.platform.ui").component("exportList",new n)}(platform||(platform={}));var platform;!function(e){var t=com.vmware.vise.mvc.listview.ListViewExportSpec;!function(e){e[e.ALL=0]="ALL",e[e.SELECTED_ONLY=1]="SELECTED_ONLY"}(e.ExportColumnType||(e.ExportColumnType={}));var n=e.ExportColumnType,i=function(){function e(){this._type="com.vmware.vsphere.client.export.ExportColumn"}return e}();e.ExportColumn=i;var r=function(){function e(){this._type="com.vmware.vsphere.client.export.ReportDeletionSpec"}return e}();e.ReportDeletionSpec=r;var o=function(){function e(e,t,n,i,r,o,a,s,c,l,u,d){this.clarityModalService=e,this.i18nService=t,this.defaultUriSchemeUtil=n,this.mutationService=i,this.$window=r,this.$httpParamSerializer=o,this.$q=a,this.logService=s,this.browserService=c,this.$http=l,this.listViewColumnService=u,this.vxZoneService=d,this.FILE_FORMAT="csv",this.EXTENSION_COLUMN="extension",this.CUSTOM_COLUMN="custom",this.i18n=this.i18nService.getString,this.logger=s("exportListService")}return e.prototype.open=function(e,t,n){var i=this,r=_.isEmpty(t)?0:t.length,o={exportType:NaN,selectedItemsCount:r,columnsById:n,generatingFile:!1};this.clarityModalService.openOkCancelModal({title:this.i18n("Common","ExportDialog.exportDialogTitle"),contentTemplate:"resources/ui/views/listview/export/export-list.view.html",onSubmit:function(){o.generatingFile=!0;var r=i.buildExportSpec(e,o.exportType,t,n);return i.generateFile(r).then(function(e){return o.generatingFile=!1,e}).then(function(e){return i.downloadFile(e)},function(e){return i.logError("Generate CSV file failed",e),!0})},onCancel:function(){return i.downloadWindow=void 0},defaultButton:"submit",dialogData:o,submitButtonTitle:this.i18n("Common","ExportDialog.save")})},e.prototype.showBlockingPopupModal=function(){var e={title:this.i18n("Common","ExportDialog.blockingPopup.title"),message:this.i18n("Common","ExportDialog.blockingPopup.message"),preserveNewlines:!0,hideCancelButton:!0,clarityIcon:{shape:"warning","class":"is-warning",size:48},showXIcon:!1,submit:function(){return!0}};this.clarityModalService.openConfirmationModal(e)},e.prototype.buildExportSpec=function(e,r,o,a){var s=this,c=[],l=_.values(a);l.forEach(function(e){if(e.selected){var t=new i;t.title=e.title,t.propertyName=e.propertyName,t.uid=e.uid,t.type=s.listViewColumnService.isValidCustomAttrId(e.uid)?s.CUSTOM_COLUMN.toUpperCase():s.EXTENSION_COLUMN.toUpperCase(),c.push(t)}});var u=[];r===n.SELECTED_ONLY&&o.forEach(function(e){u.push(e.id)});var d=new t;return d.listViewSpec=JSON.parse(e),d.selectedObjectIds=u,d.columns=c,d.format=this.FILE_FORMAT.toUpperCase(),d},e.prototype.generateFile=function(e){var t={method:"POST",url:"list/export",contentType:"application/json",data:e};return this.$http(t)},e.prototype.downloadFile=function(e){var t=this;if(e.data.error)throw this.logError("Error generating CSV file",e.data.error),new Error(this.i18n("Common","ExportError.exportFailure"));var n="ExportDialog.defaultReportFileName",i=this.$httpParamSerializer({filename:this.i18n("Common",n)+this.FILE_FORMAT}),o=e.data.entity,a=e.data.result,s=a+"?"+i,c=encodeURI(o.replace(/\//g,"%2F")),l=new r;l.reportObjectRef=a;var u=this.$q.defer();return this.browserService.areBlockingPopupsAllowed().then(function(e){if(t.downloadWindow=t.$window.open(s,"_blank"),!t.downloadWindow||!e)return t.showBlockingPopupModal(),void t.removeFile(c,l).then(function(){return u.resolve(!1)});var n=function(){t.vxZoneService.runInsideAngular(function(){t.downloadWindow=void 0,t.removeFile(c,l).then(function(){return u.resolve(!0)})})};t.browserService.isSafari?t.downloadWindow.onunload=n:t.downloadWindow.onbeforeunload=n}),u.promise},e.prototype.removeFile=function(e,t){var n=this;return this.mutationService.remove(e,t._type,t).then(void 0,function(e){n.logError("Remove CSV file failed",e)})},e.prototype.logError=function(e,t){this.logger.error(e+": "+JSON.stringify(t))},e.$inject=["clarityModalService","i18nService","defaultUriSchemeUtil","mutationService","$window","$httpParamSerializer","$q","logService","browserService","$http","listViewColumnService","vxZoneService"],e}();e.ExportListService=o,angular.module("com.vmware.platform.ui").service("exportListService",o)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){this.DENIED_CLASS="k-denied",this.DENIED_ICON_CLASS="vsphere-icon-drag-and-drop-reject",this.ALLOWED_ICON_CLASS="vsphere-icon-drag-and-drop-accept",this._dragAndDropManager=e}return e.prototype.dragstart=function(e,t){this._sourceItems=t,e.currentTarget.itemsData=t,this._dragAndDropManager.clearCache()},e.prototype.hint=function(e,t){var n="";return t&&1===t.length&&t[0].name&&(n=t[0].name),$("<div class='k-header k-drag-clue' />").html(_.escape(n)).prepend("<span class='k-icon k-drag-status "+this.DENIED_CLASS+" "+this.DENIED_ICON_CLASS+"'/>")},e.prototype.drag=function(e){var t=this.getDropDataItem(e);return t?(t.id&&(t.objRef=t.id),this._sourceItems&&1===this._sourceItems.length&&this._sourceItems[0].objRef===t.objRef?void this.markDropAsDisallowed():this._dragAndDropManager.isDropValid(this._sourceItems,t)?void this.markDropAsAllowed():void this.markDropAsDisallowed()):void this.markDropAsDisallowed()},e.prototype.dragend=function(e){var t=$(".k-drag-clue span");t.hasClass(this.ALLOWED_ICON_CLASS)&&$(".k-drag-clue").remove()},e.prototype.drop=function(e){},e.prototype.markDropAsAllowed=function(){var e=$(".k-drag-clue span");e.removeClass(this.DENIED_CLASS),e.removeClass(this.DENIED_ICON_CLASS),e.addClass(this.ALLOWED_ICON_CLASS)},e.prototype.markDropAsDisallowed=function(){var e=$(".k-drag-clue span");e.removeClass(this.ALLOWED_ICON_CLASS),e.addClass(this.DENIED_CLASS),e.addClass(this.DENIED_ICON_CLASS)},e.prototype.getDropDataItem=function(e){if(e.target&&e.dropTarget){var t=$(e.dropTarget.targetElement).data("kendoTreeView");if(t)return this.getTreeDataItem(e,t);var n=$(e.dropTarget.targetElement).data("kendoGrid");return n?this.getGridDataItem(e,n):void 0}},e.prototype.getTreeDataItem=function(e,t){var n=$(e.target).closest(".k-item");if(n)return t.dataItem(n)},e.prototype.getGridDataItem=function(e,t){var n=$(e.target).closest("tr");if(n)return t.dataItem(n)},e}();e.ListViewDragAndDropHandler=t,angular.module("com.vmware.platform.ui").factory("listViewDragAndDropHandler",["dragAndDropManager",function(e){return new t(e)}])}(platform||(platform={}));var platform;!function(e){function t(e){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,i,r){var o=t.$eval(r.listViewDraggable),a=new n(e);a.setListViewDraggable(i,o)}]}}t.$inject=["listViewDragAndDropHandler"];var n=function(){function e(e){this.listViewDragAndDropHandler=e,this.DRAGSTART="dragstart",this.DRAG="drag",this.DRAGEND="dragend",this.HINT="hint"}return e.prototype.setListViewDraggable=function(e,t){var n=this;if("true"===t){this._element=e;var i=this.getGrid();i.kendoDraggable({group:"gridGroup",filter:".k-grid-content tr",hint:function(e){return n.onHint(e)},dragstart:function(e){n.onDragStart(e)},cursorOffset:{top:10,left:10},drag:function(e){n.onDrag(e)},dragend:function(e){n.onDragEnd(e)}})}},e.prototype.getGrid=function(){return this._element.children("div[kendo-grid]")},e.prototype.onDragStart=function(e){this.invokeHandler(this.acquireHandler(this.DRAGSTART),e,e.currentTarget)},e.prototype.onDrag=function(e){this.invokeHandler(this.acquireHandler(this.DRAG),e,null)},e.prototype.onDragEnd=function(e){this.invokeHandler(this.acquireHandler(this.DRAGEND),e,e.currentTarget)},e.prototype.onHint=function(e){return this.invokeHandler(this.acquireHandler(this.HINT),null,e)},e.prototype.invokeHandler=function(e,t,n){if(e){var i;if(n){var r=this.getGrid(),o=r.data("kendoGrid"),a=[n];if(o.options.selectable){var s=o.select();s.length>1&&(a=s)}i=_.map(a,function(e){var t;return t=o.dataItem(e),t.objRef=t.id,t})}return e.call(this.listViewDragAndDropHandler,t,i)}},e.prototype.acquireHandler=function(e){var t=this.listViewDragAndDropHandler[e];return t},e}();e.ListViewDraggable=n,angular.module("com.vmware.platform.ui").directive("listViewDraggable",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){this._dragAndDropManager=e}return e.prototype.drop=function(e){var t=e.draggable.currentTarget.itemsData,n=$(e.target).closest("tr"),i=$(e.dropTarget).data("kendoGrid"),r=i.dataItem(n);this._dragAndDropManager.invokeAction(t,r),e.preventDefault()},e}();e.ListViewDropTargetHandler=t,angular.module("com.vmware.platform.ui").factory("listViewDropTargetHandler",["dragAndDropManager",function(e){return new t(e)}])}(platform||(platform={}));var platform;!function(e){function t(e){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,i,r){var o=t.$eval(r.listViewDropTarget);if(o){var a=new n(i,e);t.$on("$destroy",function(){a.destroyDropTarget()})}}]}}t.$inject=["listViewDropTargetHandler"];var n=function(){function e(e,t){this._listViewDropTargetHandler=t,this.initListViewDropTarget(e)}return e.prototype.initListViewDropTarget=function(t){var n=this,i=t.children("div[kendo-grid]");i.kendoDropTarget({group:e.DROP_TARGET_GROUP_NAME,filter:".k-grid-content tr",drop:function(e){n.onDropFromGridGroup(e)}})},e.prototype.onDropFromGridGroup=function(e){this._listViewDropTargetHandler.drop(e)},e.prototype.destroyDropTarget=function(){kendo.ui.DropTarget.destroyGroup(e.DROP_TARGET_GROUP_NAME)},e.DROP_TARGET_GROUP_NAME="gridGroup",e}();e.ListViewDropTargetController=n,angular.module("com.vmware.platform.ui").directive("listViewDropTarget",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").directive("listView",[function(){return{restrict:"E",scope:{listViewId:"@",listViewType:"=",objectId:"=",relationId:"=",inverseRelation:"=",showRelationsFor:"=",rightClickable:"@",navigatable:"@",preselectComparator:"&",selectionMode:"@",isDraggable:"@",showCheckboxesOnMultiSelection:"&",showFilter:"@",showExport:"@",onSelectionChanged:"&",filterId:"@",filterParams:"=",propertyParams:"=",getModels:"&models",liveRefreshEnabled:"=",usePersistentSelectionContext:"@",overrideMetadataFromServer:"@",showLoadingIndicatorWhileFetchingColumns:"@",loadingIndicatorSize:"@"},templateUrl:"resources/ui/views/listview/ListViewTemplate.html",controller:"ListViewController"}}]);var platform;!function(e){var t=function(){function e(e,t,n,i,r,o,a,s,c){this.$q=e,this.localStorageService=t,this.dataService=n,this.$timeout=i,this.$http=r,this.logService=o,this.defaultUriSchemeUtil=a,this.vcService=s,this.telemetryService=c,this.vmomiListViewTypes=["VirtualMachine","HostNetwork","AnyNetwork","Network","AnyDistributedVirtualSwitch","DistributedVirtualSwitch","VMwareDistributedVirtualSwitch","DistributedVirtualPortgroup","OpaqueNetwork","Datastore","StoragePod","AnyStorage","Folder","VirtualApp","HostSystem","ClusterComputeResource","ComputeResource","AnyComputeResource","ResourcePool","Datacenter"],this.customAttributeObjectType="CustomFieldDef",this.log=this.logService("listViewColumnService")}return e.prototype.getPersistedColumnsDef=function(e){return this.getPersistedData(e)},e.prototype.createListColumnsDefs=function(e,t,n){this.fallBackUidsToHeaderText(e);var i=_.indexBy(e,"uid");return this.applyPersistedColumnDefinitions(i,t,n)},e.prototype.fallBackUidsToHeaderText=function(e){for(var t in e){var n=e[t];void 0===n.uid&&(n.uid=n.displayName)}},e.prototype.isValidCustomAttrId=function(e){return e?this.vcService.isValidManagedEntityId(e)&&this.defaultUriSchemeUtil.getEntityType(e)===this.customAttributeObjectType:!1},e.prototype.saveColumnDefs=function(e,t,n){var i,r=this,o={};n&&this.vcService.isValidManagedEntityId(n)&&(i=this.defaultUriSchemeUtil.getPartsFromVsphereObjectId(n).serverGuid),o.columns=_.map(t,function(e){if(null===e)return{};var t=parseInt(e.width,10);return{headerText:e.title,visible:e.hidden!==!0,width:t,uid:e.uid}}),this.getPersistedColumnsDef(e).then(function(t){if(!t)return void r.setPersistedData(e,o);var n=_.filter(t.columns,function(t){if(!i||!r.isValidCustomAttrId(t.uid))return!1;var n=r.defaultUriSchemeUtil.getPartsFromVsphereObjectId(t.uid).serverGuid;return r.isLinkedVcList(e)?n===i:n!==i});_.each(n,function(e){var t=_.some(o.columns,function(t){return t.uid===e.uid});t||o.columns.push(e)}),t.sorting&&(o.sorting=t.sorting),r.setPersistedData(e,o),r.telemetryService.trackEvent("listView","columns",JSON.stringify(o.columns))})},e.prototype.saveGridState=function(e,t,n){var i={};n&&(i.sorting=n),t&&t.columns&&(i.columns=t.columns),this.setPersistedData(e,i)},e.prototype.applyPersistedState=function(e,t){var n=this;return this.fallBackUidsToHeaderText(e),this.getPersistedData(t).then(function(i){if(i&&i.columns){var r=_.indexBy(e,"uid");return n.applyPersistedColumnDefinitions(r,i.columns,t)}return e})},e.prototype.getColumnChangeHandler=function(e,t){var n=this,i=null;t.$on("destroy",function(){i&&(n.$timeout.cancel(i),i=null)});var r=function(r){i&&n.$timeout.cancel(i),i=n.$timeout(function(){n.saveColumnDefs(e,r.sender.columns,t.objectId)},100)};return r},e.prototype.getCustomAttributeFields=function(e,t,n){this.$q.defer();if(-1===this.vmomiListViewTypes.indexOf(e))return this.$q.resolve({});var i=[{property:"applicableType",operator:"EQUAL",comparableValue:e}],r=t&&this.vcService.isValidManagedEntityId(t);if(r&&!this.isLinkedVcList(n)){var o=this.defaultUriSchemeUtil.getPartsFromVsphereObjectId(t).serverGuid;o&&i.push({property:"@instanceUuid",operator:"EQUAL",comparableValue:o})}var a={criteria:i,operator:"AND"};return this.dataService.getPropertiesByFilter(a,["key","name"],["CustomFieldDef"])},e.prototype.appendCustomAttributeColumnDefs=function(e,t){var n=this;return t&&_.map(t,function(t,i){var r=n.defaultUriSchemeUtil.getManagedObjectReference(i);e.push({headerText:t.name,requestedProperties:["customValue","@instanceUuid"],visible:!1,exportProperty:r.serverGuid+":"+t.key,columnRenderer:"custom-attr",width:200,columnRendererConfig:{key:t.key,serverGuid:r.serverGuid},uid:i})}),e},e.prototype.getListOptions=function(e,t,n){var i=this,r=this.$q.defer(),o=this.fetchListOptions(e,t,n),a=this.getPersistedColumnsDef(e),s=[o,a];if(t){var c=this.getCustomAttributeFields(t,n,e);s.push(c)}return this.$q.all(s).then(function(t){if(!t||!t[0])return void r.resolve({columnDataSourceInfos:[],metadata:{}});var n=t[0];if(n.columnDataSourceInfos=i.appendCustomAttributeColumnDefs(n.columnDataSourceInfos,t[2]),t[1]&&(t[1].columns||t[1].sorting)){if(t[1].sorting){var o=t[1].sorting;n.sort=i.createListSorting(n.columnDataSourceInfos,o)}if(t[1].columns){var a=t[1].columns;n.columnDataSourceInfos=i.createListColumnsDefs(n.columnDataSourceInfos,a,e)}r.resolve(n)}else r.resolve(n)}),r.promise},e.prototype.fetchListOptions=function(e,t,n){var i={};return angular.isDefined(t)&&null!==t&&(i.listViewType=t),angular.isDefined(n)&&null!==n&&(i.objectId=n),this.$http({method:"get",url:"list/listOptions/"+e,params:i}).then(function(e){return e.data})},e.prototype.getListViewColumnDefKey=function(e){return e+"_ListViewColumnDef"},e.prototype.isLinkedVcList=function(e){return"vsphere.core.vc.list"===e},e.prototype.applyPersistedColumnDefinitions=function(e,t,n){var i,r={},o=[];for(i=0;i<t.length;i++){var a=t[i],s=e[a.uid];s?(null===a.width||isNaN(a.width)||(s.width=a.width),null!==a.visible&&(s.visible=a.visible),r[a.uid]=!0,o.push(s)):a.uid&&this.log.log("Missing column definition:"," uid: "+a.uid+" title: "+a.headerText+";","List view id:",n)}return _.keys(e).forEach(function(t){r[t]!==!0&&o.push(e[t])}),o},e.prototype.getPersistedData=function(e){return this.localStorageService.getUserData(this.getListViewColumnDefKey(e))},e.prototype.setPersistedData=function(e,t){this.localStorageService.setUserData(this.getListViewColumnDefKey(e),t)},e.prototype.createListSorting=function(e,t){for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];if(t.column===o.sortProperty)return[t];o.sortedByDefault&&"false"!==o.sortedByDefault&&n.push({column:o.sortProperty,dir:"asc"})}return n},e.$inject=["$q","localStorageService","dataService","$timeout","$http","logService","defaultUriSchemeUtil","vcService","telemetryService"],e}();e.ListViewColumnService=t,angular.module("com.vmware.platform.ui").service("listViewColumnService",t)}(platform||(platform={})),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l,u,d,f,p,m,g,v,h,S,y,b,I,C,w,T,E){function k(e){var t=l.grid.selectionMode.SINGLE;if(e)switch(e.toLowerCase()){case l.grid.selectionMode.NONE:t=l.grid.selectionMode.NONE;break;case l.grid.selectionMode.SINGLE:t=l.grid.selectionMode.SINGLE;break;case l.grid.selectionMode.MULTI:t=l.grid.selectionMode.MULTI}return t}function D(e){var t=n.find(".k-grid").data("kendoGrid");return t?void(t.element&&t.resize(e)):void et.warn("No kendo grid")}function x(){et.debug("Starting the periodic refresh handler with period",Ot,"ms."),T.runOutsideAngular(function(){xt=setInterval(A,Ot)})}function O(){et.debug("Stopping the periodic live refresh handler."),T.runOutsideAngular(function(){xt&&(clearInterval(xt),xt=null)})}function P(){O(),x()}function A(){if(N(),!Rt&&Et&&0!==Et.length){var e=Et.splice(0,Et.length);M(e)}}function N(){var e=(ot+at-Ot)/1e3,t=_t.length,n=Math.floor((_.now()-kt)/Ot);if(e>t)n>e&&(_t.splice(0,1),Ot>ot&&(Ot-=st,P()));else{for(var i=!0,r=!0,o=_t[0],a=1;t>a;++a){var s=_t[a],c=_t[a-1];i=i&&s>c,r=r&&c>s,o+=s}var l=o/t,u=Ot;i||l>Ot+st&&Ot>ot?u-=st:(r||Ot-st>l&&at>Ot)&&(u+=st),Ot!==u&&(Ot=u,P()),_t.splice(0,1)}}function R(){et.debug("Refreshing to reflect a live update.");var e=kt;kt=_.now(),_t.push(kt-e)}function M(e){var n=function(e){return Ke.dataModels?_.some(Ke.dataModels,function(t){var n=e.source.type;return t===n||gt[t]&&_.contains(gt[t],n)}):!0},i=function(e){var t=e.data.type;return t===C.PROPERTIES_UPDATE||t===C.DELETE_OBJECT},r=Le();if(r){var o=Ae(r),a=function(e){return _.indexOf(o,e)>=0},s=[],c=!1,l=!1;_.each(e,function(e){var r=e.source,o=I.getVsphereObjectId(r);if(o===t.objectId)return l=!0,void(c=!0);if(n(e)){var u=e.data.type;switch(u){case C.PARENT_UPDATE:U(o);break;case C.DELETE_OBJECT:U(o),ue(o)&&ce(o);break;default:L(o)}return a(o)?void(c=!0):void((e.data.isNameUpdate||!i(e))&&s.push(o))}}),s=_.unique(s);for(var u=[],d=0;d<s.length;++d){var f=s[d],p=Pt[f];if(p){if(_.contains(p.parentIds,t.objectId)){et.debug("Cache hit, skipping inverse relation checks."),c=!0;break}}else u.push(f)}return c?void T.runOutsideAngular(function(){setTimeout(function(){Oe(),R()},l?tt:0)}):t.inverseRelation?void(0!==u.length&&T.runOutsideAngular(function(){setTimeout(function(){F(u).then(function(e){var n=B(e);j.apply(void 0,n);var i=_.chain(n).pluck("parentIds").flatten().unique().value(),r=_.any(i,function(e){return e===t.objectId});r&&(Oe(),R())})},tt)})):void et.debug("Missing inverse relation for list view with id:",ht)}}function j(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];V(e.length),_.each(e,function(e){_.has(Pt,e.entityId)||++At,Pt[e.entityId]={timestamp:_.now(),parentIds:e.parentIds}})}function L(e){_.has(Pt,e)&&(Pt[e].timestamp=_.now())}function U(e){_.has(Pt,e)&&(delete Pt[e],--At)}function V(e){e=angular.isDefined(e)&&e>=0?e:0;var t=At+e;if(t>=ct){var n=_.sortBy(_.pairs(Pt),function(e){return e[1].timestamp}),i=lt+t-ct;n.splice(0,i),Pt=_.object(n),At=n.length,et.debug("Related entities cache evicted.")}}function F(e){var n=_.groupBy(e,function(e){return I.getPartsFromVsphereObjectId(e).type}),r="ListViewController.requestInverseRelations";t.listViewId&&(r+="; listViewId="+t.listViewId),t.relationId&&(r+="; relationId="+t.relationId);var o=_.map(_.values(n),function(e){return d.getPropertiesForObjects(e,[t.inverseRelation],{queryName:r,skipLoadingNotification:!0})});return i.all(o)}function B(e){var n=[];return _.each(e,function(e){_.each(_.keys(e),function(i){var r=e[i][t.inverseRelation];n.push({entityId:i,parentIds:_.map(_.isArray(r)?r:[r],function(e){return I.getVsphereObjectId(e)})})})}),n}function H(e,t){var n=t.operationType,i=t.objectId;if(Ve(i,n))return!0;switch(n){case"ADD":return"string"==typeof t.object?!0:t.object.type===St;case"CHANGE":case"DELETE":var r=Le();return!(!r||!r.get(i))}return!1}function G(e,n){t.onSelectionChanged&&t.onSelectionChanged({newItems:e,oldItems:n}),ze(e)}function q(e,n){var i=n.operationType,r=n.objectId;"DELETE"===i&&$t[r]&&delete $t[r],r===t.objectId&&"CHANGE"===i?T.runOutsideAngular(function(){setTimeout(function(){Et=[],Pe(Ze.Hidden)},tt)}):(Et=[],Pe(Ze.Hidden))}function z(e,n){var i=Ce(e,n),r=[];i.forEach(function(e){e.visible&&r.push(e.uid)}),Ke.requestedProperties=Ee(r),Ke.dataModels=xe(r,t.getModels()),Tt=ke(r);var s=[];t.showExport&&(Qe=He(),s.push(Qe));var c=W(),u=o.post(bt,c),d={columnDefs:i,pageConfig:{displayMode:l.grid.displayMode.VIRTUAL_SCROLLING,size:jt},data:{transport:{read:function(e){var t=W(e),n=u?u:o.post(bt,t);return u=void 0,n.then(function(t){a(function(){e.success(t.data)},0)},function(t){a(function(){e.error(t)},0)})}},data:"data",total:"totalResultCount"},actionBarOptions:{actions:Mt},selectedItems:[],height:"100%",selectionMode:Wt,showCheckboxesOnMultiSelection:Kt,resizable:!0,reorderable:!0,columnMenu:{sortable:!1,messages:{columns:p.getString("CommonUi","listview.showColumnsMenu"),filter:p.getString("CommonUi","listview.filterMenu")}},columnHide:he,columnReorder:yt,columnResize:yt,columnShow:he,dataBound:Se,sortOrder:Ft,vuiFooter:{actions:s}};return w.isIe&&(d.pageConfig.size=50),d}function W(e){var t={constraintObjectId:Ke.constraintObjectId,queryFilterId:Ke.queryFilterId,filterParams:Ke.filterParams,propertyParamSpecs:Ke.propertyParamSpecs,requestedProperties:Ke.requestedProperties,dataModels:Ke.dataModels,searchTerm:Ke.searchTerm,searchableProperties:Ke.searchableProperties,take:e?e.data.take:jt,skip:e?e.data.skip:0,sort:e?e.data.sort:Ft,listViewId:ht,isLiveRefreshRequest:It};return K(t),t}function K(e){e.sort&&(_.isEqual(Je,e.sort)||(Je=e.sort,me()),e.sort=e.sort.map(function(e){var t=_.clone(e);return t.field=Te(e.field),t})),Xe=JSON.stringify(e)}function Y(){return m.getListOptions(ht,St,vt)}function X(e){var n=e.columnRenderer||"text",i=c.getColumnRenderer(n),r=e.columnRendererConfig||{};return angular.isDefined(t.navigatable)&&(r.navigatable="true"===t.navigatable),function(t){return i(e.requestedProperties,t,r)}}function J(){return i(function(e){if(Nt&&(Nt=!1),!Be())return void e();var t=je();if(!t)return void e();var n=k(Wt);n===l.grid.selectionMode.SINGLE?(Q(t),e()):n===l.grid.selectionMode.MULTI&&Z(t).then(function(){e()})})}function Q(e){var t=e.select(),n=e.dataItem(t);if(n){var i=n.get(nt);ae(e.dataSource,i,n)}else le(),me()}function Z(t){return i(function(n){var i=e.event,r=t.select(),o=!1;if(i&&("click"===i.type&&"checkbox"===i.target.type||"mouseup"===i.type||"mousedown"===i.type||"contextmenu"===i.type))if("click"===i.type&&"checkbox"===i.target.type){var a=angular.element(i.target.parentElement);if("columnheader"===a.attr("role"))if(i.target.checked===!0){var s=t.dataSource.total();s>0&&(Ct=0,wt=s-1,o=!0,ie(t).then(function(){n()}))}else i.target.checked===!1&&(le(),me());else oe(t)}else"mousedown"===i.type&&0===r.length?(le(),me()):("mouseup"===i.type&&(ee(t,i),r.length>1&&!i.shiftKey&&!i.ctrlKey&&!i.metaKey&&(Ct=Math.min(r[0].rowIndex,r[r.length-1].rowIndex),wt=Math.max(r[0].rowIndex,r[r.length-1].rowIndex),o=!0,ie(t).then(function(){n()}))),1===r.length&&ne(t,i,r[0]),i.shiftKey&&(o=!0,ie(t).then(function(){n()})));else oe(t);o||n()})}function ee(e,t){var n=te(e,t);if(n){var i=$e(e.dataSource,n);if(-1!==i)if(t.shiftKey)wt=i;else{Ct=i;var r=n.get(nt);(t.ctrlKey||t.metaKey)&&ue(r)?ce(r):se(r,n)}}}function te(e,t){var n=angular.element(t.target).closest("tr"),i=e.dataItem(n);if(!i||!i.get)return null;var r=i.get(nt);return r?i:null}function ne(e,t,n){var i=e.dataSource,r=e.dataItem(n),o=r.get(nt);if("mouseup"!==t.type||(t.ctrlKey||t.metaKey||t.shiftKey)){if("contextmenu"===t.type){var a=e.dataItem(n).get(nt);ue(a)||ae(i,a,r)}}else ae(i,o,r)}function ie(e){return i(function(i){var r=!1;le(),re(e);for(var a=Math.min(Ct,wt),s=Math.max(Ct,wt),c=e.items(),l=!1,u=0;u<c.length;++u){var d=c[u],f=e.dataItem(d),p=$e(e.dataSource,f);if(-1===p){l=!0;break}p>=a&&s>=p?pe(d)||de(d):pe(d)&&fe(d)}if(l){for(var u=0;u<c.length;++u)fe(c[u]);return void i()}var m=s-a+1;if(_.values($t).length<m){var g=_e(),v={constraintObjectId:Ke.constraintObjectId,queryFilterId:Ke.queryFilterId,filterParams:Ke.filterParams,dataModels:Ke.dataModels,requestedProperties:Ee(g),sort:De(e),searchTerm:t.searchTerm,searchableProperties:ke(g),skip:a,take:m,listViewid:ht,isLiveRefreshRequest:!1};r=!0,kendo.ui.progress(n,!0),o.post(bt,v).then(function(e){if(e&&e.data){var t=e.data,r=angular.isArray(t.data)?t.data:[];_.each(r,function(e){$t[e.id]=e})}kendo.ui.progress(n,!1),i()})}r||i()})}function re(e){var t=Math.min(Ct,wt),n=Math.max(Ct,wt);Ne(e.dataSource,function(e,i,r){if(r>=t&&n>=r){var o=i.get(nt);se(o,i)}})}function oe(e){_.each(e.items(),function(t){var n=e.dataItem(t),i=n.get(nt);t.className.indexOf("k-state-selected")>=0?se(i,n):ue(i)&&ce(i)})}function ae(e,t,n){le();var i=$e(e,n);-1!==i&&(Ct=wt=i,se(t,n))}function se(e,t){$t[e]=t}function ce(e){delete $t[e]}function le(){$t=Object.create(null)}function ue(e){return!!$t[e]}function de(e){$(e).addClass("k-state-selected")}function fe(e){$(e).removeClass("k-state-selected")}function pe(e){return e.className.indexOf("k-state-selected")>=0}function me(){Ct=wt=0}function ge(){var e=Le();return e?void _.each(_.keys($t),function(t){e.get(t)||ce(t)}):void le()}function ve(){if(Be()){var e=je();if(e){var t=[],n=We();_.each(e.items(),function(i){var r=e.dataItem(i).get(nt);($t[r]||n&&n===r)&&t.push(i)}),Nt=t.length>0,e.select(t)}}}function he(e){if(yt.apply(null,arguments),t.searchTerm||!e.column.hidden){var n=e.sender;zt(n.columns),Ie(n)}}function Se(e){var n=e.sender;if(ye(),ge(),ve(),Ie(n),be(n),t.showExport&&Qe){var i=n.items().length,r=i>0;Qe.tooltip=Ge(r),Qe.disabled=!r}var o=Ue();_.isEqual(o,t.datagridOptions.selectedItems)||G(o,t.datagridOptions.selectedItems)}function ye(){if("true"===t.showFilter){var e=Me();if(e){var n=e.find(".k-grid-toolbar");n.length>0&&n.append(mt)}}}function be(e){var t=e.dataSource.sort();t&&m.getPersistedColumnsDef(ht).then(function(e){var n=Ft.length>0?Ft[0].field:"",i=Ft.length>0?Ft[0].dir:"";if(e&&e.sorting&&(n=e.sorting.column,i=e.sorting.dir),0===t.length)return void m.saveGridState(ht,e,null);if(t[0].field&&t[0].dir&&(n!==t[0].field||i!==t[0].dir)){var r={column:Te(t[0].field),dir:t[0].dir};m.saveGridState(ht,e,r)}})}function Ie(e){m.getPersistedColumnsDef(ht).then(function(t){if(!t){for(var n=e.columns||[],i=angular.element(e.element).find("> div > div > table tr:first-child th"),r=angular.element(e.element).find("> div.k-grid-header > div > table colgroup col"),o=angular.element(e.element).find("> div.k-grid-content > div > table colgroup col"),a=k(Wt)===l.grid.selectionMode.MULTI&&Kt,s=0,c=0,u=0,d=0,f=n;d<f.length;d++){var p=f[d];if(!p.hidden){++c;var g=parseFloat(p.width);0===g&&u++,s+=g}}if(c!==u){var v=e.size().width-s;if(v>rt+it){var h=a&&c>=2?1:0;n.forEach(function(e,t){e.hidden||h===t&&i.length>0&&void 0!==i[t]&&(e.width=parseFloat(e.width)+v-rt-rt*u-it,angular.element(r[t]).width(e.width+"px"),angular.element(o[t]).width(e.width+"px"),m.saveColumnDefs(ht,n))})}}}})}function Ce(e,t){var n=0;return t&&t.map(function(e){Ft.push({field:we(e.column),dir:e.dir})}),e.map(function(e){!t&&e.sortedByDefault&&"false"!==e.sortedByDefault&&Ft.push({field:we(e.sortProperty),dir:"asc"}),Bt[e.uid]=e.requestedProperties,qt[e.uid]=e.resourceModels;var i=e.filterProperty||e.sortProperty;e.searchable&&i&&(Ht[e.uid]=i.indexOf(ut)<0?[i]:i.split(ut).map(function(e){return e.trim()})),e.exportProperty&&(Gt[e.uid]=e.exportProperty);var r;return e.sortProperty?r=e.sortProperty:e.exportProperty?r=e.exportProperty:(r="vwm_column_"+n.toString(),n++),{displayName:_.escape(e.headerText),field:we(r),width:e.width+"px",encoded:!1,visible:e.visible!==!1,sortable:!!e.sortProperty,searchable:!1,template:X(e),uid:e.uid}})}function we(e){return"['"+e+"']"}function Te(e){return e&&(e=e.replace(/^\['(.*?)'\]$/,"$1")),e}function Ee(e){var t=[];return e.forEach(function(e){var n=Bt[e];n&&n.forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}),t}function ke(e){var t=[];return e.forEach(function(e){var n=Ht[e];n&&n.length>0&&(1===n.length&&t.indexOf(n[0])<0?t.push(n[0]):t=_.union(t,n))}),t}function _e(){var e=je();return e?_.pluck(_.filter(e.columns,function(e){return!e.hidden}),"uid"):[]}function De(e){return _.map(e.dataSource.sort(),function(e){return{dir:e.dir,field:Te(e.field)}})}function xe(e,t){var n=[],i=!1;return e.forEach(function(e){var t=qt[e];t?t.forEach(function(e){-1===n.indexOf(e)&&n.push(e)}):i=!0}),i&&!_.contains(n,St)&&St&&n.push(St),0===n.length&&(t?n=t:n.push(f.OBJECT_MODEL)),n}function Oe(){It=!0,Pe(Ze.Hidden),It=!1}function Pe(e){angular.isUndefined(e)&&(e=Ze.Visible),t.searchTerm?(t.searchTerm!==Ye&&(le(),me()),Ke.searchTerm=t.searchTerm,Ke.searchableProperties=Tt):(Ke.searchTerm=void 0,Ke.searchableProperties=void 0);var n=Le();if(n){var i=null;if(Rt=!0,e===Ze.Hidden&&angular.isDefined(n._events))try{i=n._events.progress,delete n._events.progress}catch(r){i=null}n.read().then(function(){if(D(!0),null!==t.searchTerm&&void 0!==t.searchTerm&&t.searchTerm!==Ye){var e=Fe();null!==e&&e.focus()}T.runInsideAngular(function(){Rt=!1,null!==i&&(n._events.progress=i),Ye=t.searchTerm})})}}function Ae(e){var t=e.data()||[],n=_.pluck(t,nt);
return Ne(e,function(e,t){var i=t.get(nt);i&&-1===_.indexOf(n,i)&&n.push(i)}),n}function $e(e,t){if(!e)return-1;for(var n=t.get(nt),i=Re(e),r=0;r<i.length;++r){var o=i[r],a=o.data.get(nt);if(a===n)return o.index}return-1}function Ne(e,t){_.each(Re(e),function(e){t(e.range,e.data,e.index)})}function Re(e){var t=[],n=e._ranges;if(!angular.isArray(n))return t;for(var i=0;i<n.length;++i){var r=n[i],o=r.data;if(o&&o.length)for(var a=0;a<o.length;++a){var s=o[a];t.push({range:r,data:s,index:r.start+a})}}return t}function Me(){var e=n.find(".k-grid-content");return e&&e.parent()}function je(){var e=Me();return e&&e.data("kendoGrid")}function Le(){var e=je();return e&&e.dataSource}function Ue(){return _.values($t)}function Ve(e,t){return e===vt&&"CHANGE"===t}function Fe(){return n.find(".k-header input")}function Be(){var e=k(Wt);return e===l.grid.selectionMode.SINGLE||e===l.grid.selectionMode.MULTI}function He(){return{label:p.getString("Common","exportTitle"),tooltip:Ge(!0),icon:"vsphere-icon-export-line_16x16",action:function(){var e=t.datagridOptions.selectedItems,n=qe();E.open(Xe,e,n)},disabled:!1}}function Ge(e){return e?p.getString("Common","exportToolTip"):p.getString("Common","exportNaToolTip")}function qe(){var e=je(),t={};return e.columns.forEach(function(e){if(Gt[e.uid]){var n={title:_.unescape(e.title),selected:!e.hidden,propertyName:Gt[e.uid],uid:e.uid};t[e.uid]=n}}),t}function ze(e){if("true"===t.usePersistentSelectionContext){var n=s.search(),i=n[h5.listViewSelectedItemIdProperty]||null,r=1===e.length?e[0].id:null;r!==i&&s.search(h5.listViewSelectedItemIdProperty,r).replace()}}function We(){return"true"===t.usePersistentSelectionContext?s.search()[h5.listViewSelectedItemIdProperty]:null}var Ke,Ye,Xe,Je,Qe,Ze,et=y("ListViewController"),tt=1500,nt="id",it=20,rt=200,ot=5e3,at=15e3,st=2e3,ct=5e3,lt=500,ut=",",dt=p.getString("Common","filter.label"),ft=p.getString("Common","applyFilter.label"),pt='<div class="filter-input pull-right"><button class="nav-icon fa fa-filter filter-button" ng-click="doSearch()" aria-label="'+ft+'" /></button><input type="text" ng-model="searchTerm" ng-trim="true" ng-change="debouncedRefreshCallback()" ng-keypress="keyPress($event)" placeholder="'+dt+'"/></div>',mt=r(pt)(t),gt={AnyNetwork:["Network","DistributedVirtualPortgroup","OpaqueNetwork"],HostNetwork:["Network","OpaqueNetwork"],AnyDistributedVirtualSwitch:["VmwareDistributedVirtualSwitch","DistributedVirtualSwitch"]},vt=t.objectId,ht=t.listViewId,St=t.listViewType,yt=m.getColumnChangeHandler(ht,t),bt="list/ex/",It=!1,Ct=0,wt=0,Tt=[],Et=[],kt=_.now(),_t=[],Dt=!1,xt=null,Ot=ot,Pt=Object.create(null),At=0,$t=Object.create(null),Nt=!1,Rt=!1,Mt=[],jt=100,Lt=!1;if(function(e){e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden"}(Ze||(Ze={})),t.doSearch=function(){Pe()},t.keyPress=function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),Pe())},t.debouncedRefreshCallback=_.debounce(function(){t.searchTerm!==Ye&&Pe()},2e3),t.comparatorWrapper=function(e){return t.preselectComparator({item:e})},t.liveRefreshEnabled&&t.objectId&&b.isValidManagedEntityId(t.objectId)){var Ut=v.getProperty("live.updates.lists.enabled"),Vt=b.is65VcOrLater(t.objectId);i.all([Ut,Vt]).then(function(e){if(e&&0!==e.length){var n=e[0]&&"TRUE"===e[0].toUpperCase(),i=e[1];if(Dt=n&&i){var r=I.getPartsFromVsphereObjectId(t.objectId).serverGuid;h.openInventory(r),x()}}})}t.filterId?(Ke={constraintObjectId:vt,queryFilterId:t.filterId},t.filterParams&&(Ke.filterParams=t.filterParams),t.propertyParams&&(Ke.propertyParamSpecs=t.propertyParams),t.$watch(function(){return t.objectId},function(e,n){e!==n&&(vt=e,Ke.constraintObjectId=vt,t.propertyParams&&(Ke.propertyParamSpecs=t.propertyParams),Pe())})):Ke={constraintObjectId:vt,queryFilterId:"relatedItemsListFilterId",filterParams:[t.relationId,t.showRelationsFor].filter(function(e){return!!e})};var Ft=[],Bt={},Ht={},Gt=[],qt={},zt=_.debounce(function(e){var n=_e();Ke.requestedProperties=Ee(n),Ke.dataModels=xe(n,t.getModels()),Tt=ke(n),Pe()},1500),Wt=k(t.selectionMode),Kt=void 0!==t.showCheckboxesOnMultiSelection()?t.showCheckboxesOnMultiSelection():!0;if("boolean"!=typeof Kt)throw Error("showCheckboxesOnMultiSelection should evaluate to boolean, but it is a "+typeof Kt);t.showActionsMenu=function(e){if("true"===t.rightClickable){var n=e.clientX,i=e.clientY,r=Wt===l.grid.selectionMode.MULTI?Ue():e.data;u.showObjectContextMenu(e,t,r,n,i)}},t.$watch("datagridOptions.selectedItems",function(e,n){e=e||[],n=n||[],_.isEqual(e,n)||J().then(function(){var e=Ue();t.hasOwnProperty("readOnlySelectedItems")&&(t.readOnlySelectedItems=e),G(e,n)})}),t.resizeGrid=D;var Yt={};Yt[f.DATA_REFRESH_INVOCATION_EVENT]={handler:Pe},Yt[f.MODEL_CHANGED_EVENT]={handler:q,checker:H},t.liveRefreshEnabled&&(Yt.navTree={handler:function(e,t){var n=t.updates||[];Array.prototype.push.apply(Et,n),Lt=!0},checker:function(e,t){return Dt&&vt&&!_.isEmpty(t.updates)?!0:!1}});var Xt=S.subscribeForVisibilityChange(n,function(e){if(e){if(!Lt)return;Lt=!1,Pe()}else Et.length&&(Lt=!0,Et=[])}),Jt=g.subscribeForDataUpdate(n,Pe,Yt);t.$on("$destroy",function(){null!==Xt&&(S.unsubscribe(Xt),Xt=null),null!==Jt&&(g.unsubscribe(Jt),Jt=null),O(),mt.remove()}),Y().then(function(e){"true"===t.overrideMetadataFromServer&&Object.keys(e.metadata).length?(e.metadata.selectionMode&&(Wt=k(e.metadata.selectionMode)),e.metadata.isDraggable&&(t.isDraggable=e.metadata.isDraggable),Kt="true"===e.metadata.showCheckboxesOnMultiSelection):Wt=k(t.selectionMode),t.datagridOptions=z(e.columnDataSourceInfos,e.sort)}),u.buildActionsToolbar(ht).then(function(e){Mt=_.values(e),t.datagridOptions&&Mt.length>0&&(t.datagridOptions.actionBarOptions.actions=Mt)})}angular.module("com.vmware.platform.ui").controller("ListViewController",e),e.$inject=["$window","$scope","$element","$q","$compile","$http","$timeout","$location","columnRenderersRegistry","vuiConstants","actionsService","dataService","vcH5ConstantsService","i18nService","listViewColumnService","visibilityAwareDataUpdateNotificationService","configurationService","websocketMessagingService","visibilityMonitorService","logService","vcService","defaultUriSchemeUtil","treeUpdatesConstants","browserService","vxZoneService","exportListService"]}(),angular.module("com.vmware.platform.ui").directive("bottomPanel",[function(){return{restrict:"E",templateUrl:"resources/ui/views/mainlayout/AppBottomPanelView.html",link:function(e){e.loader.bottomPanelViewLoaded=!0}}}]),function(){"use strict";function e(e,n){function i(t,i,r){function o(){var i=e.getTree();if(i){var r=i.getNodeAtLevel(0);r&&(t.addTitleBar=r.extensionObject&&r.extensionObject.applyDefaultChrome,t.addTitleBar&&(t.title=r.name,t.icon=r.icon),t.showVCenterSelector=r.contentSpec?r.contentSpec.showVCenterSelector:!1,t.showVCenterSelector?n.getAllServersInfo().then(function(e){t.servicesInfo=e.serversInfo,t.servicesInfo&&t.servicesInfo.length>0&&(t.vcService=t.servicesInfo[0])}):t.vcService=null)}}t.$on("vxRouteChangeSuccess",function(e,t,n,i){o()})}return{restrict:"E",template:t,link:i}}angular.module("com.vmware.platform.ui").directive("centerPanel",e);var t='<div id="center-pane" class="vui-panel top-level">   <div class="center-pane-container" ng-class="{\'center-pane-with-a-title\':addTitleBar}">      <div ng-class="{titlebar: addTitleBar}" ng-if="addTitleBar">         <span class="titlebar-left-icons">            <i ng-class="icon"></i>         </span>         <span class="titlebar-text">{{title}}</span>      </div>      <div ng-if="showVCenterSelector" class="titlebar">         <label > {{::i18n("Common", "VcSelector.label")}}</label>          <select            ng-model="$parent.vcService"            ng-options="vcenter as vcenter.name for vcenter in servicesInfo track by vcenter.serviceGuid"         ></select>      </div>      <div class="panel-inner" vx-view rootview>      </div>   </div></div>';e.$inject=["navigation","userSessionService"]}(),function(){"use strict";function e(e,t,n,i,r,o,a){var s=this,c=i("ChangePasswordDialogController");s.validator=o.create(),t.getUserSession().then(function(t){t.userName?(e.modalOptions.title=n.getString("Common","changepassword.primaryTitle"),e.modalOptions.secondaryTitle=t.userName):c.error("Error getting username from userSessionService")}),t.getAllServersInfo().then(function(e){s.vcId=a.getRootFolder(e.serversInfo[0].serviceGuid)}),s.isValidPassword=function(){var e=[];return s.newPassword!==s.confirmPassword&&e.push(n.getString("CommonUi","PasswordValidator.error")),e},s.onCancel=function(){e.closeModal()},s.onSave=function(){var e=s.validator.validate();if(e&&e.length)return!1;var t={oldPassword:s.currentPassword,newPassword:s.newPassword};r.apply(s.vcId,"com.vmware.vsphere.client.sso.admin.model.PasswordSpec",t),s.onCancel()},s.okButtonDisabled=function(){return!(s.currentPassword&&s.newPassword&&s.confirmPassword&&s.vcId)}}angular.module("com.vmware.platform.ui").controller("ChangePasswordDialogController",e),e.$inject=["$scope","userSessionService","i18nService","logService","mutationService","vxValidatorFactory","defaultUriSchemeUtil"]}(),function(){"use strict";function e(e,t,n,i,r,o,a,s,c){function l(){var e={preventLogout:!1},t=s.$broadcast("onUserLogout",e);return t.defaultPrevented?void c.when(e.preventLogout).then(function(e){e||o.logout()}):void o.logout()}function u(){i.showHelpPage()}function d(){i.showVmcOnAwsPage()}function f(e,t,i){n.openModal(e,t,i,"resources/ui/views/mainlayout/ChangePasswordDialog.html")}function p(){a.changeTheme()}_.extend(e.h5.actions,{"vsphere.core.actions.logout":l,"vsphere.core.actions.openHelp":u,"vsphere.core.actions.changePassword":f,"vsphere.core.actions.switchTheme":p,"vsphere.core.actions.openVmcOnAws":d})}angular.module("com.vmware.platform.ui").run(e),e.$inject=["$window","configurationService","clarityModalService","helpService","i18nService","logoutService","themeService","$rootScope","$q"]}(),angular.module("com.vmware.platform.ui").directive("leftPanel",[function(){return{restrict:"E",template:'<div class="vui-panel top-level left-panel"><object-navigator></object-navigator></div>'}}]),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l,u,d,f,p,m,g,v,h,S,y,b,I,C,w,T,E,k,D){function x(e,t){m.notify(t)}function O(){P(!0)}function P(e){C.initialize("wss://"+r.location.host+"/ui/messaging",n),a.getConfiguration().then(function(t){var n=function(e){return e&&"TRUE"===e.toUpperCase()},i=t.configParams,r=n(i[V]),o=n(i[F]),a=n(i[B]);(r||o||a)&&C.initializeLiveUpdates().then(function(t){r&&t("/topic/object-details"),(o||a)&&t("/topic/navTree"),t("/topic/data-notifications"),e&&C.reOpenChangeLogs()})})}function A(){u.bindNavigationShortcut("ctrl+alt+home",p.HOME_EXTENSION_ID),u.bindNavigationShortcut("ctrl+alt+1",p.SHORTCUTS_EXTENSION_ID),u.bindNavigationShortcut("ctrl+alt+2",p.HOSTS_AND_CLUSTERS_EXTENSION_ID),u.bindNavigationShortcut("ctrl+alt+3",p.VMS_EXTENSION_ID),u.bindNavigationShortcut("ctrl+alt+4",p.STORAGE_EXTENSION_ID),u.bindNavigationShortcut("ctrl+alt+5",p.NETWORKING_EXTENSION_ID),u.bindNavigationShortcut("ctrl+alt+6",p.DATASTORES_EXTENSION_ID),u.bindNavigationShortcut("ctrl+alt+7",p.GLOBAL_INVENTORY_LISTS_EXTENSION_ID),u.bindFunction("ctrl+alt+s",function(){angular.element("#search-term-ref").focus()}),u.bindAction("ctrl+alt+h","vsphere.core.actions.openHelp")}var N=$("#loading-container");N.length&&(N[0].hidden=!0);var R="panelStates",M=33,j=220,L=350,U=225,V="live.updates.objectstate.enabled",F="live.updates.navtree.enabled",B="live.updates.lists.enabled",H=9,G="hide-object-navigator",q="left-panel";r.h5.__getPendingHttpRequests=function(){var t,n,i,o=_.clone(e.pendingRequests),a=_.clone(r.pendingJqueryRequests),s=_.clone(r.pendingXhrs);for(t=0;t<a.length;t++)n="jquery_"+t,i={},i[n]=a[t],o.push(i);var c=_.keys(s);for(t=0;t<c.length;t++)n="xhr:"+c[t],i={},i[n]=s[c[t]],o.push(i);return o},function(e){function t(){var t=e._data(document,"events");return(t||{}).keydown||[]}if(!r.jasmine){var n=e.fn.on;e.fn.on=function(){if(this[0]!==document)return n.apply(this,arguments);var e=t().length,i=n.apply(this,arguments),r=t(),o=r.length-e;return 0!==o&&r.length>1&&r.unshift.apply(r,r.splice(-o).reverse()),i}}}($),f.init(),I.runOutsideAngular(function(){$(document).on("keydown",function(e){e.keyCode===H&&$(document.body).addClass("user-tabbing")})}),I.runOutsideAngular(function(){$(document).on("mousedown",function(e){$(document.body).removeClass("user-tabbing")})}),i.loader=i.loader||{},i.onHeaderLoaded=function(){i.loader.headerLoaded=!0},i.skipToMainContent=function(){var e=$("#center-pane");e&&(e.attr("tabIndex",-1),e.focus())},i.$watch("loader",function(e,r){function o(){if(d){var e=f.getTree();if(e){var t=e.getNodeAtLevel(0);if(t){var n=!d.element.hasClass(G);t.navigationVisible!==n&&(t.navigationVisible===!1?(d.options.panes[0].collapsible=!0,d.element.toggleClass(G,!0),d.collapse(q)):(d.element.toggleClass(G,!1),d.expand(q),d.options.panes[0].collapsible=!1))}}}}function a(e){e?(c.collapse(l),l.addClass("collapsed")):(c.expand(l),l.removeClass("collapsed")),p.isBottomPaneCollapsed=e,S.setUserData(R,p)}var s,c,l,u,d,p,m=i.loader;m.naviLoaded&&m.bottomPanelViewLoaded&&m.headerLoaded&&(f.doInitialRouting(),S.getUserData(R).then(function(e){p=e||{isBottomPaneCollapsed:!1,bottomPaneHeight:j,leftPaneWidth:U},I.runOutsideAngular(function(){s=angular.element("#vertical-panel").kendoSplitter({orientation:"vertical",panes:[{collapsible:!1},{collapsed:p.isBottomPaneCollapsed,collapsible:!0,size:(p.bottomPaneHeight||j)+"px",max:L+"px",min:j+"px",collapsedSize:M+"px"}]}),c=s.data("kendoSplitter"),c.bind("resize",_.debounce(function(e){var t=$("#bottom-panel-pane").height();if(!(j>t))return p.bottomPaneHeight=t,S.setUserData(R,p),!0},5e3)),l=$("#bottom-panel-pane"),$("clr-tabs ul.nav").click(function(e){a(e.target.isEqualNode(e.delegateTarget)?l.height()>M:!1)}),$("#toggle-bottom-panel").click(function(e){a(l.height()>M)}),$("clr-tab-link .nav-item").on("click",function(){var e=$("clr-tab-content.active"),t=$("#"+this.parentNode.id.replace("clrTabLink","clrTabContent"));e!==t&&(e&&e.removeClass("active"),t.addClass("active"))})}),I.runOutsideAngular(function(){var e=angular.element("#horizontal-panel");u=e.kendoSplitter({panes:[{collapsible:!1,size:(p.leftPaneWidth||U)+"px",max:parseInt(angular.element("#horizontal-panel").width()/2)+"px",min:U+"px"},{collapsible:!1}]})}),n.$on("resizePanel",function(){t(function(){angular.element("#horizontal-panel").data("kendoSplitter")&&angular.element("#horizontal-panel").data("kendoSplitter").resize(!0),angular.element("#vertical-panel").data("kendoSplitter")&&angular.element("#vertical-panel").data("kendoSplitter").resize(!0)},0)}),d=u.data("kendoSplitter"),d.bind("resize",_.debounce(function(e){var t=angular.element("#horizontal-panel left-panel").width();if(!(U>t))return p.leftPaneWidth=t,S.setUserData(R,p),!0},5e3)),i.splitterReady=!0}),i.$on("vxRouteChangeSuccess",function(e,t,n,i){o()}))},!0),i.vFeedDialogService=b,n.languageLoaded=!0,n.$on("reOpenWebSocketsEvent",O),n.$on("notificationEvent",x),i.showLastError=function(){m.showLastError()},i.$watch(function(){return m.isWarningActive()},function(){i.showWarningIcon=m.isWarningActive()}),angular.extend(n,{rootExtId:h5.ext});var z=v.getKeys().dark,W=v.getKeys().darkThemePlugin;v.subscribeToThemeChanged(function(e){e!==z||S.getData(W)||(g.notify({content:d.getString("CommonUi","NoticeBannerView.darkTheme"),type:"info"}),S.setData(W,!0))}),performanceService.onAngularLoad(n),E.init(),D.init(),P(),WEB_PLATFORM.onAngularLoad(n,s,l,r),c.init(),l.init(),w.init(),h.init(),y.init(),o.start(),T.init(),k.notify(),A()}angular.module("com.vmware.platform.ui").controller("MainTemplateController",e),e.$inject=["$http","$timeout","$rootScope","$scope","$window","appPingerService","configurationService","dataService","feedbackService","htmlBridgeService","keyboardShortcutService","i18nService","navigation","navigationConstants","notificationService","globalNotificationService","themeService","periodicRefreshService","localStorageService","sessionTimeoutService","vFeedDialogService","vxZoneService","websocketMessagingService","sandboxBridgeService","telemetryService","pluginNotificationService","vcErrorsNotificationService","vcExpirationNotificationService"]}(),angular.module("com.vmware.platform.ui").directive("objectNavigator",[function(){return{restrict:"E",templateUrl:"resources/ui/views/objectnavigator/ObjectNavigator.html",controller:"ObjectNavigatorController"}}]),angular.module("com.vmware.platform.ui").controller("CategoryNodeController",CategoryNodeController),CategoryNodeController.$inject=["$scope","objectNavigatorService","$location","objectNavigatorAccessibilityServiceFactory","$element"],function(){"use strict";function e(e,i,r,o,a,s,c,l,u){function d(e,t){m.selectedObjectByTreeId[t]=e}function f(e,t){S=t,y[S.treeId]=!0;var n=b[S.treeId];n&&p(n)}function p(e){u.triggerThemeChange(e),i._navigate("vsphere.core.inventory.serverObjectViewsExtension",e,{navigator:S.navigationTargetUid})}var m=this,g=(a("InventoryTreeViewController"),i._view.viewDetails.context),v=n(o,f),h=t(g,v),S=v[h],y={},b={};m.treeConfig={dragAndDrop:!0,refreshEnabled:!0,dragAndDropEventHandler:c},y[S.treeId]=!0,i.tabOptions={tabType:r.tabs.type.PRIMARY,selectedTabIndex:h,tabs:v},m.selectedObjectByTreeId={},g&&g.viewState&&g.viewState.selectedObject&&(m.selectedObjectByTreeId[S.treeId]=g.viewState.selectedObject),m.shouldSelectAfterTabChange=!1,m.hidingVms=!1,i.$watch("_view.viewDetails.context",function(e,n){if(e!==n){var r=e,o=t(r,v),a=v[o];if(S!==a&&(i.tabOptions.selectedTabIndex=o,S=a,y[S.treeId]=!0,m.shouldSelectAfterTabChange=!0),r)if(r.viewState){if(!r.viewState.selectedObject)return;m.shouldSelectAfterTabChange||d(r.viewState.selectedObject,S.treeId)}else{var s=b[S.treeId];s&&m.onChange(s,S.treeId)}}}),i.$watch(function(){return l.find(".vui-tab-content.active")[0]},function(e,t){if(e!==t&&t&&m.shouldSelectAfterTabChange){var n=i._view.viewDetails.context;if(n&&n.viewState){var r=n.viewState.selectedObject;d(r,S.treeId)}m.shouldSelectAfterTabChange=!1}}),e.$on("hidingVms",function(e,t){m.hidingVms=t}),m.onChange=function(e,t){b[t]=e,S.treeId===t&&(m.selectedObjectByTreeId[t]!==e&&(m.selectedObjectByTreeId[t]=e),p(e))},m.$onDestroy=function(){u.triggerThemeChange("notObjectId")},m.showActionsMenu=function(e){var t={id:e.data.id,name:e.data.text,primaryIconId:e.data.spriteCssClass},n=e.clientX,r=e.clientY,o=e.delegateTarget;s.showObjectContextMenu(null,i,t,n,r,o)},m.isTreeLoadingAllowed=function(e){return y[e]===!0}}function t(e,t){if(!e)return 0;for(var n=0;n<t.length;n++)if(e.uid===t[n].id)return n;return i.warn("InventoryTreeView did not find the tree tab to navigate to. Defaulting to the first tree tab."),0}function n(e,t){var n=[{id:"vsphere.core.navigator.hostsClustersTree",iconClass:"vsphere-icon-cluster-24x",tooltipText:e.getString("inventory","navigator.viHostsAndClusters"),contentUrl:"hosts_clusters_inv_tree.html",onClick:t,treeId:"vsphere.core.physicalInventorySpec",navigationTargetUid:"vsphere.core.viTree.hostsAndClustersView"},{id:"vsphere.core.navigator.vmTemplatesTree",iconClass:"vsphere-icon-vm-templates-24x",tooltipText:e.getString("inventory","navigator.viVmsAndTemplates"),contentUrl:"vms_templates_inv_tree.html",onClick:t,treeId:"vsphere.core.virtualInventorySpec",navigationTargetUid:"vsphere.core.viTree.vmsAndTemplatesView"},{id:"vsphere.core.navigator.storageTree",iconClass:"vsphere-icon-datastore-24x",tooltipText:e.getString("inventory","navigator.viStorage"),contentUrl:"inv_data_storage_tree.html",onClick:t,treeId:"vsphere.core.storageInventorySpec",navigationTargetUid:"vsphere.core.viTree.storageView"},{id:"vsphere.core.navigator.networkingTree",iconClass:"vsphere-icon-network-24x",tooltipText:e.getString("inventory","navigator.viNetworking"),contentUrl:"inv_networking_tree.html",onClick:t,treeId:"vsphere.core.networkingInventorySpec",navigationTargetUid:"vsphere.core.viTree.networkingView"}];return n}var i;angular.module("com.vmware.platform.ui").controller("InventoryTreeViewController",e),e.$inject=["$rootScope","$scope","vuiConstants","i18nService","logService","actionsService","inventoryTreeViewDragAndDropHandler","$element","vcChangeThemesService"]}(),function(){"use strict";angular.module("com.vmware.platform.ui").factory("inventoryTreeViewDragAndDropHandler",["dragAndDropManager",function(e){function t(e){function t(e){e.setStatusClass("vsphere-icon-drag-and-drop-accept")}function n(e){e.preventDefault(),e.setStatusClass("vsphere-icon-drag-and-drop-reject")}function i(e){e.setValid&&e.setValid(!1),e.preventDefault()}var r={"insert-middle":!0,"insert-top":!0,"insert-bottom":!0},o=this;o.sourceItem=null,o.targetItem=null,o.lastKnownStatusClass=void 0,o.dragstart=function(t){o.lastKnownStatusClass=void 0,o.sourceItem=t.vxDataItem,e.clearCache()},o.drag=function(i){if(o.lastKnownStatusClass=i.statusClass,r[i.statusClass])return void n(i);var a=i.vxDataItem;return a?o.sourceItem===a?void n(i):e.isDropValid([o.sourceItem],a)?void t(i):void n(i):void n(i)},o.dragend=function(e){},o.drop=function(t){var n=o.lastKnownStatusClass;if(o.lastKnownStatusClass=void 0,r[n])return void i(t);var a=[o.sourceItem];return t.draggable&&t.draggable.currentTarget&&(a=t.draggable.currentTarget.itemsData),o.targetItem=t.vxDataItem,e.isDropValid(a,o.targetItem)?(e.invokeAction(a,o.targetItem),void t.preventDefault()):void i(t)}}return new t(e)}])}(),function(){"use strict";function e(e,t,n,i,r,o,a,s,c){function l(t,n){var r={queryFilterId:"relatedItemsListFilterId",filterParams:[t,n],requestedProperties:I,dataModels:[t]},s="list/ex/";e.gridOpts={columnDefs:[{displayName:"Name",field:"name",template:function(e){var t=_.escape(e.name+o.getTaggingLabelString(e.labelIds)),n=o.getItalicClassName(e.labelIds,e.primaryIconId);return'<div ng-non-bindable><span class="object-navigator-icon"><span class="'+e.primaryIconId+'"></span></span><span class="object-navigator-label '+n+'" title="'+t+'">'+t+'</span><span class="vui-icon-object-nav-pan" style="display: none;"></span></div>'}}],pageable:!0,pageConfig:{displayMode:a.grid.displayMode.VIRTUAL_SCROLLING,hidePager:!0},data:{url:s,params:r,dataType:a.grid.dataType.JSON,method:a.grid.dataMethod.POST,contentType:"application/json",processData:!1,beforeSend:function(e,t){t.data=JSON.stringify(t.data)},data:"data",total:"totalResultCount"},selectedItems:[],height:"100%",selectionMode:a.grid.selectionMode.SINGLE,resizable:!0,sortOrder:[{field:"name",dir:"asc"}],dataBound:function(t){e.virtualListCount=t.sender.dataSource.total(),i.find("#navigator-virtual-list .k-grid-header").css("display","none"),f()},change:function(){for(var e=this.select(),t=[],n=0;n<e.length;n++){var i=this.dataItem(e[n]);t.push(i)}f(t[0],0===t.length)}}}function u(){var t=e._view.viewDetails.context;b=t.metadata.showRelationsFor,d().then(function(){l(e.relation.relationId,b)})}function d(){return t.get("relateditems/summary?objectType="+b+"&fetchCount=false").then(function(t){var n=t.data;e.relation=n[0]})}function f(t,n){C.selectedElement=i.find("#navigator-virtual-list .k-state-selected td");var r=C.selectedElement.find(".vui-icon-object-nav-pan"),o=r.length>0&&!r.is(":hidden");return t?void(o?(C.selectedObject=t,m(t)):(C.selectedObject=t,e._navigate("vsphere.core.inventory.serverObjectViewsExtension",t.id),r.show(),i.find(".vui-icon-object-nav-pan:visible").each(function(){r.is($(this))||$(this).hide()}))):n?void(C.selectedObject=null):void p()}function p(){if(C.selectedObject){var t=y();if(t)for(var n=t.dataSource.data(),i=0;i<n.length;i++)if(n[i].id===C.selectedObject.id){t.select("tr:eq("+i+")"),e.gridOpts.selectedItems&&(e.gridOpts.selectedItems[0]=n[i]);break}}}function m(t){e.objectnavigator.switchView({url:"resources/ui/views/objectnavigator/RelatedItemsView.html",context:t,historyDescription:{icon:t.primaryIconId,title:t.name},navigate:{extensionId:"vsphere.core.inventory.serverObjectViewsExtension",objectId:t.id}})}function g(){C.selectedElement&&C.selectedElement.find(".vui-icon-object-nav-pan").hide();var e=y();e&&e.clearSelection(),C.selectedObject=null}function v(){function t(){g(),e.node.viewOpenedUponFocus?e.objectnavigator.switchView({url:e.node.viewOpenedUponFocus.url,context:e.node.viewOpenedUponFocus,historyDescription:{icon:e.node.icon,title:e.node.title},navigate:{extensionId:e.node.navigationTargetUid}}):e._navigate(e.node.navigationTargetUid)}if(e.node)return void t();var n=e._view.viewDetails.context,i=n?n.uid:"";c.getView(i).then(function(n){n&&n.navigationTargetUid&&(e.node=n,t())})}function h(t){var n=t.clientX,i=t.clientY,o=t.data;r.showObjectContextMenu(t,e,o,n,i)}function S(e){var t=i.find("#navigator-virtual-list > div");t&&t.find("tr[data-uid="+e.uid+"] .object-navigator-icon > span").prop("class",e.primaryIconId)}function y(){return i.find("#navigator-virtual-list > div").data("kendoGrid")}var b,I=["primaryIconId","name","labelIds"],C=this;e.showActionsMenu=h,e.getData=u,e.openDomainView=v,u(),e.$on("dataRefreshInvocationEvent",function(){u()}),e.$on("modelChanged",function(e,t){var i=t.objectId,r=t.operationType,a=y();if(a)if("DELETE"===r){for(var c=a.dataSource.data(),l=0;l<c.length;l++)if(c[l].id===i){a.dataSource.remove(c[l]);break}if(C.selectedObject&&i===C.selectedObject.id){var d=n.search();d.forceNavigate=!0,n.search(d),delete d.forceNavigate}}else"CHANGE"===r?s.getProperties(i,I).then(function(e){for(var t=_.escape(e.name+o.getTaggingLabelString(e.labelIds)),n=a.dataSource.data(),r=0;r<n.length;r++){var s=n[r];if(s.id===i){s.name===t?s.primaryIconId!==e.primaryIconId&&(s.primaryIconId=e.primaryIconId,S(s)):u();break}}}):u()})}angular.module("com.vmware.platform.ui").controller("ObjectListViewController",e),e.$inject=["$scope","$http","$location","$element","actionsService","resourceUtil","vuiConstants","dataService","objectNavigatorService"]}(),function(){"use strict";angular.module("com.vmware.platform.ui").factory("objectNavigatorAccessibilityServiceFactory",["vuiTreeAccessibilityServiceFactory","vxZoneService",function(e,t){return{create:function(n,i){var r=e.create(n,i);return r.expand=function(){this.currentFocusedElement&&"false"===this.currentFocusedElement.getAttribute("aria-expanded")&&(this.currentFocusedElement.setAttribute("aria-expanded","true"),t.runInsideAngular(function(){$("[vx-collapse-icon] i",this.currentFocusedElement).click()}))},r.collapse=function(){this.currentFocusedElement&&"true"===this.currentFocusedElement.getAttribute("aria-expanded")&&(this.currentFocusedElement.setAttribute("aria-expanded","false"),t.runInsideAngular(function(){$("[vx-collapse-icon] i",this.currentFocusedElement).click()}))},r.select=function(){var e=this;$(this.currentFocusedElement).is("[ng-click]")?t.runInsideAngular(function(){$(e.currentFocusedElement).click()}):t.runInsideAngular(function(){$("[vx-collapse-icon] i",e.currentFocusedElement).click()})},r}}}])}(),angular.module("com.vmware.platform.ui").controller("ObjectNavigatorController",["$scope","objectNavigatorService","vxViewUtil","$q","dataService","dataServiceUtil","defaultUriSchemeUtil","$timeout","extensionFrameworkConstants","feedbackService","$log","treeNodesVisibilityStateService","notificationService","i18nService",function(e,t,n,i,r,o,a,s,c,l,u,d,f,p){function m(e,t,n){(n||e.extensionId!==t.extensionId||e.objectId!==t.objectId||e.navigator!==t.navigator||e._navigationParam&&e._navigationParam.replaceSameHistory)&&(!e._navigationParam||e._navigationParam.triggerONChange)&&g(e,t)}function g(e,n){var i=e;if(e.forceNavigate||e.extensionId!==n.extensionId||e.objectId!==n.objectId||e.navigator!==n.navigator)return t.getNaviData(e.extensionId,e.objectId,e.navigator,n.navigator).then(function(e){v(e,i)},function(e){u.error("Failed to retrieve navigation data."+e)})}function v(e,t){var n=e.viewSpec;if(n){n.viewState=e.viewState,n._uid=e.uid;var o=e.title||null===t.objectId||void 0===t.objectId||"resources/ui/views/objectnavigator/error/ObjectNotFound.html"===n.url,a=o?i.when(e):r.getProperties(e.uid,["name","primaryIconId"]).then(function(t){return angular.extend(e,{id:t.id,title:t.name,icon:t.primaryIconId}),e});a.then(function(e){var i=angular.extend({extensionId:t.extensionId,objectId:t.objectId,_navigationParam:t._navigationParam},t.getAdditionalParams());I.switchView({url:n.url,context:n,historyDescription:{title:e.title||"(not found)",icon:e.icon},navigate:i})},function(e){u.error("Get properties for navigation data has failed."+e)})}}function h(t,i,r,o){var a=null,s=null;return e.history[e.history.currentIndex]&&e.history[e.history.currentIndex].naviView&&(s=e.history[e.history.currentIndex].naviView.$templateUrl),null===a&&(a={state:{},historyDescription:r,navigate:o,viewDetails:{context:i,description:r}}),s===t&&e.history[e.history.currentIndex].naviView.viewDetails.context.uid===i.uid?(e.history[e.history.currentIndex].naviView.viewDetails.context=i,e.history[e.history.currentIndex].naviView.viewDetails.description=r,a.naviView=e.history[e.history.currentIndex].naviView):a.naviView=n.getNode(angular.extend({$templateUrl:t,$viewRetentionPolicy:c.ViewRetentionPolicy.NONE,viewDetails:{context:i,description:r}})),a}function S(){e.history.showMenu=!1,e.switchTo(e.history.currentIndex-1)}function y(){e.history.showMenu=!1,e.switchTo(e.history.currentIndex+1)}function b(t){e.history.showMenu=!0}e.history=[],e.history.currentIndex=-1,e.$on("vxRouteChangeSuccess",function(e,t,n,i){return n.forceNavigate?void m(n,i,!0):void(angular.equals(i,{})||m(n,i))}),o.onModelChanged(e,["name","primaryIconId"],function(t){return _(e.history).filter(function(e){return e&&e.naviView&&e.naviView.viewDetails&&e.naviView.viewDetails.context&&e.naviView.viewDetails.context.id===t.objectId})},function(e,t){e.historyDescription.title=t.name,e.historyDescription.icon=t.primaryIconId});var I=e.objectnavigator={getState:function(){return e.history[e.history.currentIndex].state},getCurrentViewNavigationReqDetails:function(){return e.history[e.history.currentIndex].navigate},switchView:function(t){var n=t.url,i=t.context,r=t.historyDescription;n=n||e.history[e.history.currentIndex].naviView.$templateUrl,i._url=RegExp(".*/(.*).html").exec(n)[1];var o=h(n,i,r,t.navigate);e.history.currentIndex++,e.history.length=e.history.currentIndex,e.history.push(o),i.viewState&&i.metadata&&"vmsAutoShown"===i.metadata.treeVisibilityStateChanged&&(d.notifyForChange("vsphere.core.physicalInventorySpec","VirtualMachine",!0),f.notify({title:p.getString("Common","notification.inventoryTee.nodesVisibilityChange.title"),content:p.getString("Common","notification.inventoryTee.nodesVisibilityChange.message"),type:"info"}),angular.extend(t.navigate,{forceNavigate:!0})),t.navigate&&e._navigate(t.navigate.extensionId,t.navigate.objectId,e._route.getAdditionalParams(t.navigate),t.navigate._navigationParam)}};e.switchTo=function(t){e.history.currentIndex=t,e.history[e.history.currentIndex].naviView.viewDetails.context=e.history[t].viewDetails.context,e.history[e.history.currentIndex].naviView.viewDetails.description=e.history[t].viewDetails.description;var n=e.history[t].navigate;n&&e._navigate(n.extensionId,n.objectId,e._route.getAdditionalParams(n)),e.history.showMenu=!1},e.getPrevious=function(){return e.history[e.history.currentIndex-1]},e.hasPrevious=function(){var t=e.history.currentIndex-1;return t>=0},e.hasNext=function(){var t=e.history.currentIndex+1;return t<e.history.length},e.onPrevClick=S,e.onNextClick=y,e.showHistoryMenu=b,e.switchToHistoryView=function(t){e.switchTo(e.history.length-1-t),e.history.showMenu=!1},e.hideHistoryMenu=function(){e.history.showMenu=!1},e.loader.naviLoaded=!0}]);var platform;!function(e){"use strict";var t=function(){function e(e,t,n){this.$http=e,this.$q=t,this.log=n("objectNavigatorService")}return e.prototype.getNaviData=function(e,t,n,i){var r=this;return this.$http({method:"GET",url:"navigator/navigate/"+e,params:{context:t,navigator:n,prevNavigator:i}}).then(function(t){if(!t){var n="undefined response to navigator/navigate/"+e;
return r.log.error(n),r.$q.reject(n)}return t.data})},e.prototype.getView=function(e,t){var n=e?e:"",i={method:"GET",url:"navigator/node?nodeId="+n};return t&&angular.extend(i,t),this.$http(i).then(function(e){return e.data})},e.$inject=["$http","$q","logService"],e}();e.ObjectNavigatorService=t,angular.module("com.vmware.platform.ui").service("objectNavigatorService",t)}(platform||(platform={})),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l,u,d,f,p){function m(e){return x.isBottomPanelLoading=!0,x.relatedItems=[],e?(x.selectedRelation=e,void I(e)):void(x.isBottomPanelLoading=!1)}function g(t){e._navigate("vsphere.core.inventory.serverObjectViewsExtension",t.id),x.selectedObjectId=t.id}function v(t){e.gridOpts=null,e.objectnavigator.switchView({url:"resources/ui/views/objectnavigator/RelatedItemsView.html",context:t,historyDescription:{icon:t.primaryIconId,title:t.name},navigate:{extensionId:"vsphere.core.inventory.serverObjectViewsExtension",objectId:t.id}})}function h(){x.selectedRelation=null,x.selectedObjectId=null,D=e._view.viewDetails.context,D.id||(D.id=D._uid),S(!0)}function S(e,t,n){y(e,t,n).then(function(){b();var e=d.consumeRelationContext()||{};e.relation&&x.nodes.forEach(function(t){t.relationId===e.relation&&(x.selectedRelation=t)}),m(x.selectedRelation),e.relatedItemUri&&g({id:e.relatedItemUri})})}function y(e,n,i){return t.get("relateditems/summary/"+D.id+"?fetchCount=false").then(function(t){C(e,n,i),x.nodes=t.data})}function b(){var e=x.nodes;e.forEach(function(e){t.get("relateditems/summary/"+D.id+"?relationId="+e.relationId).then(function(t){e.count=t.data&&t.data[0]?t.data[0].count:null})})}function I(t){var n=e._view.viewDetails.context;E(n.id,t.relationId,t.type),x.isBottomPanelLoading=!1}function C(t,i,r){if(t&&D.name)return void(x.focusObject=D);var s=e._view.viewDetails.context.id;if(r){var c=r.updates.some(function(e){var t=e.data,n=a.createVmomiUri(t.type,t.value,t.serverGuid);return s===n});if(!c)return}i&&s!==i.objectId||n.getProperties(s,["name","primaryIconId","labelIds"]).then(function(t){D.name=t.name;var n=f.parseIcon(t.primaryIconId);e.iconNs=n[0],D.primaryIconId=n[1],D.taggingLabel=o.getTaggingLabelString(t.labelIds),x.focusObject=D})}function w(){e._navigate("vsphere.core.inventory.serverObjectViewsExtension",x.focusObject.id),x.selectedObjectId=null}function T(t){var n=t.clientX,r=t.clientY,o=t.data;i.showObjectContextMenu(t,e,o,n,r)}function E(t,n,i){var a={constraintObjectId:t,queryFilterId:"relatedItemsListFilterId",filterParams:[n],requestedProperties:["primaryIconId","name","labelIds"],dataModels:[i||r.OBJECT_MODEL]},s="list/ex/";e.gridOpts={columnDefs:[{displayName:"Name",field:"name",template:function(e){var t=_.escape(e.name+o.getTaggingLabelString(e.labelIds)),n=o.getItalicClassName(e.labelIds,e.primaryIconId);return'<div ng-non-bindable><span class="object-navigator-icon"><span class="'+e.primaryIconId+'"></span></span><span class="object-navigator-label '+n+'" title="'+t+'">'+t+'</span><span class="vui-icon-object-nav-pan" style="display: none;"></span></div>'}}],pageable:!0,pageConfig:{displayMode:c.grid.displayMode.VIRTUAL_SCROLLING,hidePager:!0},data:{url:s,params:a,dataType:c.grid.dataType.JSON,method:c.grid.dataMethod.POST,contentType:"application/json",processData:!1,beforeSend:function(e,t){t.data=JSON.stringify(t.data)},data:"data",total:"totalResultCount"},selectedItems:[],height:"100%",selectionMode:c.grid.selectionMode.SINGLE,resizable:!0,sortOrder:[{field:"name",dir:"asc"}],dataBound:function(t){e.virtualListCount=t.sender.dataSource.total(),x.kendoGrid||(x.kendoGrid=l.find("#related-items-virtual-list > div").data("kendoGrid")),l.find("#related-items-virtual-list .k-grid-header").css("display","none"),x.kendoGrid.resize()}},e.$watch("gridOpts.selectedItems",function(e){if(e&&0!==e.length&&(!x.selectedObject||x.selectedObject.id!==e[0].id)){x.selectedObject=e[0],x.selectedElement&&(x.selectedElement.off("click"),x.selectedElement.find(".vui-icon-object-nav-pan").hide()),x.selectedElement=l.find("#related-items-virtual-list .k-state-selected td"),x.selectedElement.find(".vui-icon-object-nav-pan").show();var t=x.selectedElement.find(".vui-icon-object-nav-pan");t.on("click",function(){v(x.selectedObject)}),g(x.selectedObject)}})}function k(){u.replace();var e=u.search();e.forceNavigate=!0,u.search(e),delete e.forceNavigate}var D,x=this;s(function(){p.create($(l).get(0),e)}),x.splitterOptions={orientation:c.splitter.orientation.VERTICAL,panes:[{size:"50%",min:"120px"},{size:"50%",min:"120px"}]},x.navigateToFocusObject=w,e.showActionsMenu=T,x.selectRelation=m,x.selectObject=g,e.preselectComparator=function(e){return e.id===x.selectedObjectId},h(),e.$on("dataRefreshInvocationEvent",function(){S(!1)}),e.$on("modelChanged",function(t,n){if("DELETE"===n.operationType){if(e._view.viewDetails.context.id===n.objectId)return void k();if(!x.kendoGrid)return void S(!1,n);for(var i=x.kendoGrid.dataSource.data(),r=0;r<i.length;r++)if(i[r].id===n.objectId){x.kendoGrid.dataSource.remove(i[r]);break}n.objectId===x.selectedObjectId&&k(),b()}else S(!1,n)}),e.$watch("_view.viewDetails.context",function(e,t){e!==t&&e&&h()})}angular.module("com.vmware.platform.ui").controller("RelatedItemsController",e),e.$inject=["$scope","$http","dataService","actionsService","vcH5ConstantsService","resourceUtil","defaultUriSchemeUtil","$timeout","vuiConstants","$element","$location","navigatorRelationsService","iconService","objectNavigatorAccessibilityServiceFactory"]}(),angular.module("com.vmware.platform.ui").config(["$httpProvider",function(e){e.interceptors.push(["$q",function(e){return{request:function(t){return performanceService.httpStart(t),t||e.when(t)},requestError:function(t){return performanceService.httpStop(t.config),e.reject(t)},response:function(t){return performanceService.httpStop(t.config),t||e.when(t)},responseError:function(t){return performanceService.httpStop(t.config),e.reject(t)}}}])}]);var performanceService=function(){function e(e){o(),S.startTimestamp=Date.now(),performance.clearResourceTimings(),r(e)}function t(e){if(e&&b)return void r(e);var t=performance.getEntries(),i=t.length;0!==m||i!==p||g?(p=t.length,g=!1,r(e)):n(t)}function n(e){S.endTimestamp=h,S.uiTimeInSeconds=Number(v/1e3).toFixed(2),S.timeInSeconds=Math.round((S.endTimestamp-S.startTimestamp)/10)/100;for(var t=e.length,n=0,r=null,o=null,a=0;t>a;a++)if(o=e[a],o.initiatorType===c&&!s(o.name,l)){var d=i(o);if(S.perfEntries.push(d),r&&o.responseEnd<r.responseEnd)continue;n+=r&&o.startTime<r.responseEnd?o.responseEnd-r.responseEnd:o.duration,r=o}if(S.perfEntries.sort(function(e,t){return t.duration-e.duration}),S.ajaxCallsCount=S.perfEntries.length,0!==S.ajaxCallsCount){S.ajaxTimeInSeconds=Number(n/1e3).toFixed(2);var p=angular.element("#main-app-div").scope();S.watchersCount=p?p.$root.$$watchersCount:"N/A",console.log(S),y=S,null!==f&&f.$broadcast(u,S)}}function i(e){var t={},n=e.name;if(h5&&h5.contextPath){var i=h5.contextPath;t.name=n.substring(n.indexOf(i)+i.length)}return t.duration=Number(e.duration/1e3).toFixed(2),t}function r(e){setTimeout(function(){t(e)},d)}function o(){S=new PerformanceData,p=-1,h=null,g=!1,v=0}function a(e){return null===e||void 0===e||null===e.url?!1:s(e.url,l)?!1:!0}function s(e,t){return-1!==e.indexOf(t,e.length-t.length)}var c="xmlhttprequest",l=".html",u="perfCycleCompleted",d=600,f=null,p=-1,m=0,g=!1,v=0,h=null,S=null,y=null,b=!0,I={getPerformanceData:function(){return y},getHistoricPerformanceData:function(){return null},init:function(){if(h5.debug){try{performance.clearResourceTimings()}catch(t){return}$(document).click(function(t){e(!1)}),e(!0)}},httpStart:function(e){m++,a(e)&&(b=!1)},httpStop:function(){m--},digestStart:function(e){g=!0},digestStop:function(e){g=!0,h=Date.now(),v+=e},onAngularLoad:function(e){f=e}};return I.init(),I}();angular.module("com.vmware.platform.ui").controller("PerformanceViewController",["$scope","$rootScope",function(e,t){"use strict";function n(t,n){e.$apply(function(){i(n)})}function i(t){e.perfData=t,e.isTimeAboveThreshold=r,e.areWatchersAboveThreshold=o,_.isObject(e.perfData)&&e.perfData.perfEntries.splice(c)}function r(){return _.isObject(e.perfData)&&e.perfData.timeInSeconds>a}function o(){return _.isObject(e.perfData)&&e.perfData.watchersCount>s}var a=3,s=2e3,c=5,l="perfCycleCompleted";i(),$(document).click(function(){e.showList=!1,t.$$phase||e.$apply()}),e.showPerfEntries=function(t){e.showList=!0,t.stopPropagation()},e.$on(l,n)}]),angular.module("com.vmware.platform.ui").config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){var t=e.$digest;return e.$digest=function(e){var n=Date.now();performanceService.digestStart(),t.apply(this,e);var i=Date.now()-n;performanceService.digestStop(i)},e}])}]);var platform;!function(e){var t=function(){function e(e,t,n){var i=this;this.$scope=e,this.$rootScope=t,this.$location=n,this.selectedRpxcId=null,this.showDropdown=!1,this.dropdownItems=[],this.childRpxcIdToNavigationNode={},e.$on("viewDidLoad",function(){i.update()}),e.$on("viewDidUpdate",function(){i.update()}),this.update(!0)}return Object.defineProperty(e.prototype,"selectedChildContextNavigationNode",{get:function(){return null!==this.selectedRpxcId&&this.childRpxcIdToNavigationNode.hasOwnProperty(this.selectedRpxcId)?this.childRpxcIdToNavigationNode[this.selectedRpxcId]:null},enumerable:!0,configurable:!0}),e.prototype.onRefresh=function(){var e=_.extend({},this.$location.search(),{sdkUpdateRpxcSelector:Math.random()});this.$location.search(e)},e.prototype.update=function(e){var t=this.$scope._view.remotePluginExtensionContext;this.childRpxcIdToNavigationNode=_.object(_.map(t.descriptors,function(e){var t={};return t.extensionObject={uid:e.extensionId,remotePluginExtensionContext:e.extensionContext,contentSpec:{sandbox:!0,url:e.url}},t.$id=t.extensionObject.uid,t.$templateUrl=t.extensionObject.contentSpec.url,t.contentSpec=t.extensionObject.contentSpec,t.remotePluginExtensionContext=t.extensionObject.remotePluginExtensionContext,[e.extensionContext.contextId,t]})),this.showDropdown=t.descriptors.length>0,this.dropdownItems=_.map(t.descriptors,function(e){return{id:e.extensionContext.contextId,instanceLabel:e.instanceLabel,instanceUrl:e.instanceUrl,versionLabel:e.versionLabel,vCenterNames:e.vCenterNames.concat()}});var n=null;if(e){var i=this.$location.search();i&&"string"==typeof i.rpxcId&&(n=i.rpxcId)}else n=this.selectedRpxcId;"string"==typeof n&&this.childRpxcIdToNavigationNode.hasOwnProperty(n)?this.selectedRpxcId=n:t.descriptors.length>0?this.selectedRpxcId=t.descriptors[0].extensionContext.contextId:this.selectedRpxcId=null},e.$inject=["$scope","$rootScope","$location"],e}();angular.module("com.vmware.platform.ui").controller("RemotePluginExtensionContextSelectorController",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t){var n=this;this.$scope=e,this.pluginUrlService=t;var i=e._route?e._route.objectId:null;this.url=e._view.$templateUrl,this.urlParams={objectId:i},this.viewId=e._view.$id,this.remotePluginExtensionContext=e._view.remotePluginExtensionContext,e._view.contentSpec.showVCenterSelector&&e.$watch("vcService",function(t,i){i!==t&&(n.urlParams.vcSelectorSelection=e.vcService)})}return e.$inject=["$scope","pluginUrlService"],e}();angular.module("com.vmware.platform.ui").controller("sandboxTemplateController",t)}(platform||(platform={})),angular.module("com.vmware.platform.ui").controller("RIStackEditorController",["$scope","$http",function(e,t){function n(){return t({method:"POST",url:"mutation/"+i,params:{propertyName:e._view.propertyName},data:e.data.values})}var i=e._route.objectId;angular.extend(e._container,{title:e._view.title,onClose:function(e){return e.cancel?void 0:n()}}),angular.extend(e,{data:e._view.data})}]),angular.module("com.vmware.platform.ui").controller("QuickSearchViewController",["$scope","$http","$httpParamSerializer",function(e,t,n){function i(t,n){if(angular.isDefined(n)&&angular.isDefined(t)){var i={query:t,searchType:"simple"};return void e._navigate(n,void 0,i,{triggerONChange:!0,replaceSameHistory:!0})}angular.isDefined(t)&&e._navigateToObject(t.id)}function r(e){var i=_.isString(e)?e:"",r=n({query:i,opId:":"+(Math.floor(1e9*Math.random())+1e9)}),o="search/quicksearch/?"+r;return t.get(o).then(function(e){return e.data})}e.typeAheadConfig={isInputRefocused:!0,dataSource:r,onSelectCallback:i}}]);var platform;!function(e){var t=function(){function e(e,t,n,i){var r=this;this.$rootScope=e,this.vxViewUtil=t,this.i18nService=n,this.extensionFrameworkConstants=i,this.rootScopeDeregisterFns=[e.$on("refreshSearchResults",function(e,t){r.searchResponse=null,setTimeout(function(){return r.handleSearchResponseChange(t)},0)}),e.$on("searchOperationChanged",function(e,t){r.searchOperationResponse=null,r.searchResponse.savedSearch=null,setTimeout(function(){return r.handleSearchOperationResponseChange(t)},0)})]}return e.prototype.$onDestroy=function(){for(var e,t=0,n=this.rootScopeDeregisterFns;t<n.length;t++)(e=n[t])()},e.prototype.isAllResultsType=function(){return"ALL_RESULTS"===this.searchResponse.selection.type},e.prototype.hasNoResults=function(){return 0===this.searchResponse.selection.count},e.prototype.getViewNode=function(){return this.vxViewUtil.getNode({$templateUrl:this.searchResponse.selection.listUrl,$viewRetentionPolicy:this.extensionFrameworkConstants.ViewRetentionPolicy.NONE,title:this.searchResponse.selection.labelPlural,icon:this.searchResponse.selection.icon,filterId:"simpleSearchListFilterId",filterParams:this.searchResponse.selection.objectUids,dataModels:[this.searchResponse.selection.type],$id:this.searchResponse.selection.listUid,listSpec:{contentSpec:{metadata:this.searchResponse.selection.listMetadata}}})},e.prototype.handleSearchResponseChange=function(e){this.searchResponse=e,this.searchOperationResponse=null,this.isAllResultsType()||this.hasNoResults()?this.viewNode=null:this.viewNode=this.getViewNode()},e.prototype.handleSearchOperationResponseChange=function(e){e&&(this.searchOperationResponse=e,this.searchResponse.savedSearch=e.savedSearch)},e.$inject=["$rootScope","vxViewUtil","i18nService","extensionFrameworkConstants"],e}(),n=function(){function e(){this.controller=t,this.templateUrl="resources/ui/views/search/search-center-pane.html"}return e}();e.SearchCenterPaneComponent=n,angular.module("com.vmware.platform.ui").component("searchCenterPane",new n)}(platform||(platform={})),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l){function u(e){this.searchType=y,this.query=e,this.getContext=function(){return{query:this.query,searchType:this.searchType}},this.isValid=function(){return!!this.query&&!!this.searchType}}function d(e){t.currentSearchState=e}function f(){t.searchContext.isValid()&&t._navigate(S,null,t.searchContext.getContext(),{triggerONChange:!0})}function p(){t.tabs=[],t.searchTimeStamp=void 0,t.currentSearchState=""}function m(){t.searchContext.isValid()&&(p(),d(C.searchInProgress),h(o.searchStates.searchInProgress),g(t.searchContext.query).then(function(e){v(e)}))}function g(e){var t=_.isString(e)?e:"",r=i({query:t,opId:":"+(Math.floor(1e9*Math.random())+1e9)}),o=b+r;return n.get(o).then(function(e){return e.data})}function v(e){p(),h(o.searchStates.searchComplete,e),0===e.length?d(C.noResults):(t.searchTimeStamp=c.timestampToText(new Date),d(C.searchComplete));for(var n=0;n<e.length;n++){var i=r.getNode({$templateUrl:e[n].listUrl,$viewRetentionPolicy:s.ViewRetentionPolicy.NONE,title:e[n].labelPlural,icon:e[n].icon,filterId:"simpleSearchListFilterId",filterParams:e[n].objectUids,dataModels:[e[n].type],$id:e[n].listUid,listSpec:{contentSpec:{metadata:e[n].listMetadata}}});t.tabs.push(i)}}function h(e,n,i,r){i=i||t.searchContext.query,r=r||t.searchContext.searchType,o.setSearchData(e,n,i,r)}var S="vsphere.core.search.domainView",y="simple",b="search/simplesearch/summary/?",I=a.getString,C={searchInProgress:I("Common","searching"),noResults:I("Common","noResultsFound"),searchComplete:I("Common","resultsFound")};t.$on("$destroy",function(){h(o.searchStates.searchDestroyed)}),e.$on("navSelectionChanged",function(e,n){t.selectedSearchNode=n.selection}),t.getSelectedSearchTab=function(){return _.find(t.tabs,function(e){return t.selectedSearchNode&&t.selectedSearchNode.listUid===e.$id})},t.getSearchText=function(){return t.currentSearchState===C.searchComplete?I("Common","resultsFoundWithData",t.searchContext.query):""},e.$on("refreshSearchResults",function(e,t){v(t.selection)}),t.$watch("_route.query",function(e,n){t.searchContext.query=t._route.query,t.searchContext.searchType=t._route.searchType,t.searchContext.searchType||(t.searchContext.searchType=y),m()}),t.getSearchState=function(){return t.currentSearchState},t.doSearch=f,t.searchContext=new u("",y),p()}angular.module("com.vmware.platform.ui").controller("SearchViewController",e),e.$inject=["$rootScope","$scope","$http","$httpParamSerializer","vxViewUtil","searchService","i18nService","extensionFrameworkConstants","timeFormatterService","featureFlagsService"]}(),angular.module("com.vmware.platform.ui").directive("vxQuicksearchPopup",[function(){var e=[13,27,38,40];return{restrict:"A",scope:{vxQuicksearchPopup:"="},templateUrl:"resources/ui/views/search/QuickSearchPopupTemplate.html",replace:!0,link:function(t,n,i){var r,o,a=t.vxQuicksearchPopup;angular.extend(t,{i18n:t.$root.i18n}),t.$watch("vxQuicksearchPopup.results",function(e){return angular.isUndefined(e)?void s():(r=0,o=[],t.activeIdx=-1,t.noResults=_.isEmpty(e),e=_.sortBy(e,function(e){return e.label}),_.each(e,function(e){o.push.apply(o,e.results),_.each(e.results,function(e){e.index=r,r+=1})}),t.results=e,t.resultCount=r,void(r+=1))});var s=function(){t.activeIdx=-1,t.results=void 0};a.onKeyPress=function(e){l(e)},t.isOpen=function(){return angular.isDefined(t.results)||a.searching},t.isActive=function(e){return t.activeIdx===e},t.selectActive=function(e){t.activeIdx=e},t.selectMatch=function(e){c(e)},t.isSearching=function(){return a.searching},t.doSearch=function(){a.doSearch&&a.doSearch()};var c=function(e){if(e===t.resultCount){var n="vsphere.core.search.domainView";a.onSelectCallback(a.searchTerm,n)}a.onSelectCallback(o[e]),s()},l=function(n){-1!==e.indexOf(n.which)&&(t.isOpen()||13===n.which)&&(n.preventDefault(),n.stopPropagation(),40===n.which||9===n.which?t.activeIdx=(t.activeIdx+1)%r:38===n.which?t.activeIdx=(t.activeIdx>0?t.activeIdx:r)-1:13===n.which?t.isOpen()?t.activeIdx>=0&&(c(t.activeIdx),s()):t.doSearch():27===n.which&&s(),t.$apply())}}}}]),angular.module("com.vmware.platform.ui").directive("vxTypeahead",["$parse","$timeout","$document",function(e,t,n){return{require:["ngModel"],restrict:"A",link:function(i,r,o,a){var s,c=i.$eval(o.vxTypeahead),l=c.dataSource,u=150;e(o.ngModel);c.doSearch=function(){d(a[0].$modelValue),c.isInputRefocused&&r.focus()},i.$watch(function(){return a[0].$modelValue},function(e){d(e)});var d=function(e){f(),e&&e.length>=0?(t.cancel(s),s=t(function(){p(e)},u)):f()},f=function(){c.results=void 0,c.searching=!1,c.searchTerm=void 0},p=function(e){var t=a[0].$viewValue;return t&&0!==t.length?(c.searching=!0,void l(e).then(function(t){e&&e===a[0].$viewValue&&t&&(c.searchTerm=e,c.searching=!1,c.results=t)})):void f()};r.bind("keydown",function(e){c.onKeyPress&&c.onKeyPress(e)});var m=function(e){r[0]!==e.target&&f()};n.bind("click",m),i.$on("$destroy",function(){n.unbind("click",m)})}}}]),angular.module("com.vmware.platform.ui").controller("ServerObjectViewController",["$scope","dataService","actionsService","browserHistoryService","configurationService","defaultUriSchemeUtil","websocketMessagingService","$window","iconService","i18nService","logService",function(e,t,n,i,r,o,a,s,c,l,u){function d(){var n=["name"];e._view.getSelectedChild()&&n.push("primaryIconId"),t.getProperties(f,n).then(function(t){if(t.primaryIconId){var n=c.parseIcon(t.primaryIconId);t.iconNs=n[0],t.primaryIconId=n[1]}e.currentObject=t,i.notifyCurrentObjNameChanged(f,t.name)})}var f=e._route.objectId;r.getProperty("live.updates.objectstate.enabled").then(function(e){if(e&&"TRUE"===e.toUpperCase()&&o.isValidManagedObjectId(f)){var t=o.getPartsFromVsphereObjectId(f).serverGuid;a.openInventory(t)}}),e.watchForObjects=[f],e.getViewData=d;var p="",m="";if(o.isValidManagedObjectId(f))try{m=o.getPartsFromVsphereObjectId(f).type,p=l.getString("Common","fieldType."+m)}catch(g){u.error(g)}e.translatedObjectType=p,e.isVmObject=o.isValidManagedObjectId(f)&&"VirtualMachine"===m,e.showActionsMenu=function(t){var i=angular.element(s.document.body),r=$(t.target),o=r.offset(),a=o.left,c=o.top+r.height();n.showObjectContextMenu(t,e,e.currentObject,a,c,null,!0).then(function(e){var t=angular.element(s.document.querySelector("#vui-actions-menu"));n.calculateActionsMenuPosition(t,i,a,c)})},d()}]),function(){"use strict";function e(){return{restrict:"EA",replace:!0,templateUrl:"resources/ui/views/settings/vxGridviewSettings.html",scope:{vxGridviewSettings:"="},controller:t,controllerAs:"gridviewSettings",bindToController:!0}}function t(e,t,n,i,r,o){function a(){return n.getResourceInfo(c.objectId,c.propertyName).then(function(e){return c.riDatagridOptions.data=s(e),c.riDatagridOptions.data})}function s(e){var t="--",n=[];return angular.forEach(e.properties,function(e){n.push({key:e.key,value:e.value+""||t,description:e.description||t})},n),n}var c=this;c.$onInit=function(){c.objectId=this.vxGridviewSettings.objectId,c.propertyName=this.vxGridviewSettings.propertyName;var t=r.getString;c.liveRefreshProperties=this.vxGridviewSettings.liveRefreshProperties,c.delayRefreshTimeInMsecs=this.vxGridviewSettings.delayRefreshTimeInMsecsOnObjectUpdate,c.watchForObjects=[c.objectId],c.getData=a,c.riDatagridOptions={columnDefs:[{displayName:t("ResourceFw","settingsGrid.header.key"),field:"key",template:"#:key#",width:"240px"},{displayName:t("ResourceFw","settingsGrid.header.value"),field:"value",template:"#:value#",width:"240px"},{displayName:t("ResourceFw","settingsGrid.header.summary"),field:"description",template:"#:description#",width:"160px"}],resizable:!0,data:[],sortMode:i.grid.sortMode.SINGLE,actionBarOptions:{actions:[]},selectionMode:i.grid.selectionMode.SINGLE,selectedItems:[],height:"100%"},a(),this.vxGridviewSettings.setSelectedAdvancedOption&&e.$watch(function(){return c.riDatagridOptions.selectedItems},function(e){o.setSelectedSettings(e)})}}angular.module("com.vmware.platform.ui").directive("vxGridviewSettings",e),t.$inject=["$scope","$timeout","resourceService","vuiConstants","i18nService","vxGridSettingsService"]}(),function(){"use strict";function e(){var e={restrict:"EA",replace:!0,template:'<div class="settingsBlockHeader"><h2 class="settingsBlockTitle">{{settingsBlockHeader.vxSettingsBlockHeader.title}}</h2><div vx-refreshable watch-objects="{{settingsBlockHeader.objectsToWatch}}" refresh="settingsBlockHeader.calculateActionAvailability(settingsBlockHeader.actions)"></div><button ng-repeat="action in settingsBlockHeader.actions" ng-class="action.enabled ? settingsBlockHeader.enabledBtnCssClasses : settingsBlockHeader.disabledBtnCssClasses" ng-disabled=!action.enabled ng-click="settingsBlockHeader.invokeAction(action)">{{action.label}}</button></div>',scope:{vxSettingsBlockHeader:"="},controller:t,controllerAs:"settingsBlockHeader",bindToController:!0};return e}function t(e,t,n){function i(t){var n=[];if(null===t||void 0===t||0===t.length)return n;for(var i=e.getString("Common","settingsView.defaultEditActionLabel"),r=0;r<t.length;r++){var o=t[r],a=o.label?o.label:i,s={actionId:o.actionId,label:a,enabled:!1};n.push(s)}return n.reverse()}function r(e){return angular.isDefined(e.actionEvaluation)?void t.invokeAction(e.actionEvaluation,{objectId:c.objectId}):void l.log("Action Evaluation for the action is null - check if you have defined the action in the action framework properly")}function o(e){var t=e.map(function(e){return e.actionId});return t}function a(e,t){for(var n=0,i=e.length;i>n;n++)for(var r=e[n].action.uid,o=e[n].available,a=0,s=t.length;s>a;a++){var c=t[a].actionId;if(c===r){t[a].enabled=o,t[a].actionEvaluation=e[n];break}}}function s(e){var n=o(e);n&&n.length>0&&t.getActions([c.objectId],n).then(function(e){a(e,c.actions)})}var c=this,l=n("SettingsBlockHeaderController");this.$onInit=function(){c.enabledBtnCssClasses=["btn","btn-default","settingsBlockButton"],c.disabledBtnCssClasses=["btn","btn-default","settingsBlockButton","disabled"],c.objectId=this.vxSettingsBlockHeader.objectId;var e=i(this.vxSettingsBlockHeader.actions);c.actions=e,c.invokeAction=r,c.calculateActionAvailability=s,c.objectsToWatch=[c.objectId],s(e)}}angular.module("com.vmware.platform.ui").directive("vxSettingsBlockHeader",e),t.$inject=["i18nService","actionsService","logService"]}(),function(){"use strict";function e(){var e={templateUrl:"resources/ui/views/settings/vxStackviewSettings.html",scope:{vxStackviewSettings:"="},controller:t,controllerAs:"stackviewSettings",bindToController:!0};return e}function t(e,t,n){function i(){t.getResourceInfo(r.objectId,r.propertyName,{supportedKey:r.supportedKey}).then(function(t){r.datasetSupported=t.datasetSupported,r.stackViewData={blocks:[]};var i=[];angular.forEach(t.properties,function(t){if(angular.isDefined(t.value)&&"password"!==t.type){var n=e("dataFormat")(t.value,t.type);n||(n="--"),r.formatValueCallback&&i.push(r.formatValueCallback(t.key,n)),this.push({label:t.label,content:n})}},r.stackViewData.blocks),i.length>0&&n.all(i).then(function(e){_.each(e,function(e,t){r.stackViewData.blocks[t].content=e})})})}var r=this;r.$onInit=function(){r.objectId=this.vxStackviewSettings.objectId,r.propertyName=this.vxStackviewSettings.propertyName,r.formatValueCallback=this.vxStackviewSettings.formatValueCallback,r.delayRefreshTimeInMsecs=this.vxStackviewSettings.delayRefreshTimeInMsecsOnObjectUpdate,r.supportedKey=this.vxStackviewSettings.supportedKey,r.liveRefreshProperties=this.vxStackviewSettings.liveRefreshProperties,r.liveRefreshEnabled=this.vxStackviewSettings.liveRefreshEnabled,r.datasetSupported=!0,r.unsupportedMessage=this.vxStackviewSettings.unsupportedMessage,r.watchForObjects=[r.objectId],r.getData=i,i()}}angular.module("com.vmware.platform.ui").directive("vxStackviewSettings",e),t.$inject=["$filter","resourceService","$q"]}(),function(){"use strict";angular.module("com.vmware.platform.ui").constant("issuesListConstants",{issueType:{VM_QUESTION_ISSUE:"VmQuestionIssue",ALARM_ISSUE:"AlarmIssue",CONFIG_ISSUE:"ConfigIssue"}})}(),function(){"use strict";function e(e,t,n,i,r,o,a){function s(){if(C.pendingRequest!==!0){C.pendingRequest=!0;var e=n.getIssues(C.objectId,C.ISSUE_COUNT_TO_SHOW,!0);e.then(function(e){C.totalCount=e.totalMatchedObjectCount,C.summaryIssuesGroups=[c("ERROR",e.summaryItemSpecs),c("WARNING",e.summaryItemSpecs),c("INFO",e.summaryItemSpecs),c("QUESTION",e.summaryItemSpecs),c(null,e.summaryItemSpecs)],C.summaryIssuesGroups=_.filter(C.summaryIssuesGroups)})["finally"](function(){C.pendingRequest=!1})}}function c(e,t){var n=_.filter(t,function(t){return t.status===e});return n.length?{status:e,ariaLabel:l(e),icon:w[e],issues:n.map(function(e){return new p(e)})}:null}function l(e){switch(e){case"WARNING":return t.getString("CommonModuleUi","issueType.warningsAriaLabel");case"ERROR":return t.getString("CommonModuleUi","issueType.errorsAriaLabel");case"QUESTION":return t.getString("CommonModuleUi","issueType.questionsAriaLabel");case"INFO":return t.getString("CommonModuleUi","issueType.infoAriaLabel");default:return t.getString("CommonModuleUi","issueType.infoAriaLabel")}}function u(e,t){e&&e.available&&i.invokeAction(e,t)}function d(e){r._navigateToViewAndObject("vsphere.core.inventory.serverObjectViewsExtension",e)}function f(e,t){r._navigateToViewAndObject(e,t)}function p(e){this.issueUid=e.issueUid,e.descriptionKey?this.description=" "+C.i18n("Common",e.descriptionKey):this.description=" "+e.description;const n=this.description.indexOf(C.VMWARE_KB_SITE);if(n>=0){const i=this.description.substring(n+C.VMWARE_KB_SITE.length),r=/[\d]+/.exec(i);r&&(this.kbNumber=r[0])}this.type=e.issueType,this.entityName=e.entityName?e.entityName+":":"",this.entityId=e.entityId,this.details=e.details,this.actionEvaluations=e.actionEvaluations;var o=e.entityName?e.entityName+" "+this.description:this.description;_.forEach(this.actionEvaluations,function(e){if(e.additionalData&&e.additionalData["issueAction.ariaLabelLocalizationKey"]){var n=e.additionalData["issueAction.ariaLabelLocalizationKey"].split(":");e.ariaLabel=t.getString(n[0],n[1],o)}})}function m(e,t){if(!C.pendingRequest){var n=_.filter(t.updates,function(e){return v(e)&&a.getVsphereObjectId(e.data.entity)===C.objectId});return n.length>0?void s():void _.each(t.updates,function(e){if(!v(e)){var t=g(e)?h:S;y(e.source,t)}})}}function g(e){return e.isDelta&&e.data}function v(e){return!e.isDelta&&e.data}function h(e,t){return e.details&&e.details.alarmState&&e.details.alarmState.alarm?a.getVsphereObjectId(e.details.alarmState.alarm)===a.getVsphereObjectId(t):!1}function S(e,t){return e.details&&e.details.alarmState?e.details.alarmState.key===t:!1}function y(e,t){_.each(C.summaryIssuesGroups,function(n){if(n){var i=_.findIndex(n.issues,function(n){return t(n,e)});-1!==i&&(n.issues.splice(i,1),C.totalCount--,0===n.issues.length&&b(n))}})}function b(e){var t=_.findIndex(C.summaryIssuesGroups,function(t){return t.status===e.status});-1!==t&&C.summaryIssuesGroups.splice(t,1)}function I(){o.getProperty("live.updates.alarms.enabled").then(function(e){"true"===e&&(C.cancelLiveRefresh=r.$on("alarms",m))})}var C=this;C.pendingRequest=!1,C.i18n=t.getString,C.VMWARE_KB_SITE="https://kb.vmware.com/s/article/",C.ISSUE_COUNT_TO_SHOW=4,C.summaryIssuesGroups=[],C.totalCount=0,C.navigateToServerObjectViewsExtension=d,C.navigate=f,C.invokeAction=u,C.getIssues=s,C.$onInit=function(){s(),I(),e.$on("IssueChangeEvent",s),e.$on("$destroy",function(){C.cancelLiveRefresh&&C.cancelLiveRefresh()})};var w={WARNING:{shape:"exclamation-triangle",className:"alert-warning",ariaLabel:"Common:issueStatus.warning"},ERROR:{shape:"exclamation-circle",className:"alert-danger",ariaLabel:"Common:issueStatus.error"},INFO:{shape:"info-circle",className:"alert-info",ariaLabel:"Common:issueStatus.info"},QUESTION:{shape:"info-circle",className:"alert-info",ariaLabel:"Common:issueStatus.questions"},"null":{shape:"info-circle",className:"alert-info",ariaLabel:"Common:issueStatus.info"}}}angular.module("com.vmware.platform.ui").controller("IssuesListController",e),e.$inject=["$scope","i18nService","issueService","actionsService","$rootScope","configurationService","defaultUriSchemeUtil"]}(),function(){"use strict";function e(e,t,n,i){function r(e){return e===s}function o(e,t){var n={};_.each(t,function(e){n[e._view.contentSpec.url]=e});var i=e.length!==t.length;return _.each(e,function(t,r){var o=n[t._view.contentSpec.url];o?e[r]=o:i=!0}),i?e:t}function a(t,n){if(!t||!Array.isArray(t))return c.error("Portlet view spec is null or not an array: ",t),[];var i=t.filter(function(e){return e.contentSpec&&e.contentSpec.url?!0:(c.log("Flex portlet ignored: "+e.name),!1)});return i.map(function(t){var i,r=null;return t.contentSpec.sandbox?(i=t.contentSpec.url,r={objectId:n}):i=e.trustAsResourceUrl(t.contentSpec.url),{title:t.name,contentUrl:i,contentUrlParams:r,sandbox:t.contentSpec.sandbox,remotePluginExtensionContext:t.remotePluginExtensionContext,_view:t}})}const s="VmUi";var c=t("summaryService");return{createPortlets:a,updatePortlets:o,isVmView:r}}angular.module("com.vmware.platform.ui").service("summaryService",e),e.$inject=["$sce","logService","htmlBridgeService","pluginUrlService"]}(),function(){"use strict";function e(e,t,n,i,r,o,a,s){function c(){l(),u()}function l(){var e={key:"uid",op:"=",value:v};r.getData(e).then(function(e){if(e&&1===e.length&&e[0].value){var t=angular.fromJson(e[0].value);t.showSummaryStatus&&(m.showSummary=t.showSummaryStatus&&m.isVmView)}})}function u(){p=e._route?e._route.objectId:null,
e.portletOptions={portlets:[]},e.$on(a.MODEL_CHANGED_EVENT,function(e,t){p===t.objectId&&d()}),e.$on("$destroy",function(){g&&t.cancel(g)}),e.$on(a.DATA_REFRESH_INVOCATION_EVENT,d),d()}function d(){e._view=e._view?e._view:{},e._route=e._route?e._route:{},0===e.portletOptions.portlets.length&&(g=t(function(){m.loading=!0},1e3)),n.getHostedExtensions(e._view.$id,e._route.objectId).then(function(e){f(e),g&&t.cancel(g),g=null,m.loading=!1})}function f(t){var n=o.createPortlets(t,p),i=e.portletOptions.portlets,r=o.updatePortlets(n,i);r!==i&&(e.portletOptions.portlets=r)}var p,m=this,g=null,v="com.vmware.usersetting.summaryview.status",h="com.vmware.usersetting.summaryview";m.loading=!1,m.newSummaryEnabled=!1,m.showSummary=!1,m.isVmView=o.isVmView(e._view.contentSpec.metadata.resourceBundle),c(),s.isFeatureEnabled("h5uiVmSummary").then(function(t){e._view&&e._view.contentSpec&&e._view.contentSpec.metadata&&(m.newSummaryEnabled=t&&m.isVmView)}),m.newSummarySignpost={title:i.getString("Common","summary.newSummary.title")},m.showSignPostMessage=function(){return m.showSummary?i.getString("Common","summary.newSummary.content"):i.getString("Common","summary.newSummary.contentOff")},m.toggleNewSummary=function(){r.setData(v,angular.toJson({showSummaryStatus:!m.showSummary}),{},h),m.showSummary=!m.showSummary&&m.isVmView}}angular.module("com.vmware.platform.ui").controller("SummaryViewController",e),e.$inject=["$scope","$timeout","extensionService","i18nService","persistenceService","summaryService","vcH5ConstantsService","configurationService"]}(),function(){function e(){return{restrict:"EA",templateUrl:"resources/ui/views/summary/vxIssuesListTemplate.html",scope:{objectId:"@vxObjectId",issuesExtensionId:"@vxIssuesExtensionId"},controller:"IssuesListController",controllerAs:"issuesListCtrl",bindToController:!0}}angular.module("com.vmware.platform.ui").directive("vxIssuesList",e)}(),angular.module("com.vmware.platform.ui").directive("vxSummary",["$rootScope","dataService","i18nService","actionsService","configurationService",function(e,t,n,i,r){return{scope:{model:"@vxSummary",imageUrl:"@vxSummaryImage",resourceBundle:"@vxResourceBundle",summaryImageTemplate:"@vxSummaryImageTemplate",actionIds:"@vxSummaryActionIds",liveRefreshProperties:"@"},templateUrl:"resources/ui/views/summary/vxSummaryTemplate.html",link:function(o,a,s){function c(){var e=[],n=o.model.split(",");_.each(n,function(n,i){t.getData(o.entityReference,n,{queryName:o.entityReference+":vxSummary."+c.name+"."+i}).then(function(t){var n=t&&t.summaryItems?t.summaryItems:[];angular.forEach(n,function(e){e.feature?r.isFeatureEnabled(e.feature).then(function(t){e.available=t}):e.available=!0}),e[i]=t,o.summaryData={},l(o.summaryData,e)})}),u()}function l(e,t){_.each(t,function(t){t&&_.each(_.keys(t),function(n){if(e[n]instanceof Array){var i=e[n].concat(t[n]);e[n]=i}else e[n]=t[n]})})}function u(){var e=o.actionIds&&o.actionIds.split(",");e&&e.length&&i.getActions([o.entityReference],e).then(function(e){o.actionItems=_.map(e,function(e){return{label:e.action.label,ariaLabel:e.action.description,isEnabled:e.available,onClick:function(){e.available&&i.invokeAction(e)}}})})}angular.extend(o,{i18n:o.$root.i18n}),o.liveRefreshProperties?o.liveRefreshProps=_.map(o.liveRefreshProperties.split(","),function(e){return e.trim()}).filter(function(e){return 0!==e.length}):o.liveRefreshProps=[],o.entityReference=e._route.objectId,o.getObjSummaryData=c,o.getSummaryItemValue=function(e){return null!==e.value&&""!==e.value?e.value:" "},o.getSummaryItemLabel=function(e){return e.label?n.getString(o.resourceBundle,e.label):" "},o.getFreeCapacity=function(e){return e.progress>100?n.getString("Common","ResourceAllocationComponent.overusedCapFormat",e.free):n.getString("Common","ResourceAllocationComponent.freeCapFormat",e.free)},o.getBadgeTooltip=function(e){return e.isToolTipLocalized?e.toolTip:n.getString(o.resourceBundle,e.toolTip)},o.summaryData={},c()}}}]),angular.module("com.vmware.platform.ui").directive("vxSummaryItem",["i18nService","defaultUriSchemeUtil","navigation","urlService",function(e,t,n,i){function r(e){e.signPostLinkText=e.i18n(e.resourceBundle,"summaryView.ipAddressLinkFormat",e.item.value.length),e.signPostParams={message:l(e),title:e.signPostTitle,"class":"ip-sign-post",iconClass:"vsphere-icon-vm-on"};var t=[e.signPostLinkText,i.stripTags(e.signPostParams.title),i.stripTags(e.signPostParams.message)];e.signPostLinkAriaLabel=t.join(", ")}function o(e){e.signPostLinkText=e.i18n(e.resourceBundle,"summaryView.tools.moreInfo"),e.signPostParams={message:c(e),title:e.signPostTitle,width:"440px","class":"vm-tools-sign-post",iconClass:"vsphere-icon-vm-on"};var t=[e.i18n(e.resourceBundle,"summaryView.tools.moreInfoAriaLabel"),i.stripTags(e.signPostParams.title),i.stripTags(e.signPostParams.message)];e.signPostLinkAriaLabel=t.join(", ")}function a(e){e.signPostLinkText=e.i18n(e.resourceBundle,"summaryView.managedByLinkLabel"),e.signPostParams={message:u(e),title:e.signPostTitle,width:"440px","class":"vm-tools-sign-post",iconClass:"vsphere-icon-vm-on"}}function s(e){e.signPostLinkText=e.i18n(e.resourceBundle,"DvsSummaryView.versionLinkText"),e.signPostParams={message:e.item.value[1],title:e.signPostTitle,width:"440px","class":"dvs-upgrade-sign-post",iconClass:"vsphere-icon-dv-switch"}}function c(e){var t="<strong>"+e.i18n(e.resourceBundle,"summaryView.tools")+"</strong>",n=_.map(e.item.value.second,function(t){var n='<span class="vm-tools-info-label">'+e.i18n(e.resourceBundle,t.label)+'</span><span class="vm-tools-info-value">'+t.value+"</span>";return'<li class="vm-tools-info-row">'+n+"</li>"});return t+"<ul>"+n.join("\n")+"</ul>"}function l(e){var t="<strong>"+e.i18n(e.resourceBundle,"summaryView.ipAddressLabel")+"</strong>",n=_.map(e.item.value,function(e){return"<li>"+e+"</li>"});return t+"<ul>"+n.join("\n")+"</ul>"}function u(t){var n="<strong>"+t.i18n(t.resourceBundle,"summaryView.managedBy")+"</strong>",i=e.getString("Common","managedBy.summaryView.vm.tooltip",t.item.value);return n+"<ul><li>"+i+"</li></ul>"}return{templateUrl:"resources/ui/views/summary/vxSummaryItemTemplate.html",scope:{item:"=",resourceBundle:"=",signPostTitle:"="},link:function(i){i.SUMMARY_TOOLS_LABEL="summaryView.tools",i.SUMMARY_MANAGED_BY_LABEL="summaryView.managedBy",i.i18n=e.getString,i.showingIPs="summaryView.ipAddressLabel"===i.item.label,i.showingTools=i.SUMMARY_TOOLS_LABEL===i.item.label,i.showingManagedBy=i.SUMMARY_MANAGED_BY_LABEL===i.item.label,i.showingDvsUpgradeVersion="DvsSummaryView.version"===i.item.label,i.showSignPost=i.showingTools||i.showingManagedBy||i.showingDvsUpgradeVersion&&i.item.value.length>1||i.showingIPs&&i.item.value.length>1,i.showingMoRef=i.item.value&&i.item.value.second&&i.item.value.second.type&&i.item.value.second.serverGuid&&i.item.value.second.value,i.getSummaryItemValue=function(e){return i.showingTools||i.showingMoRef?e.value.first:i.showingDvsUpgradeVersion?e.value[0]:i.showingIPs?_.first(e.value):e.value},i.getSummaryItemLabel=function(e){return e.label?i.i18n(i.resourceBundle,e.label):" "},i.onMoRefLinkClicked=function(e){var i=t.getVsphereObjectId(e.value.second);n.navigateToObject(i)},i.showingManagedBy&&a(i),i.showingTools&&o(i),i.showingIPs&&r(i),i.showingDvsUpgradeVersion&&s(i)}}}]),angular.module("com.vmware.platform.ui").directive("vxNaviTabHeaders",["navigation","telemetryHelperService",function(e,t){var n={first:"resources/ui/views/tabs/vxNaviTabHeadersTemplate.html",second:"resources/ui/views/tabs/vxNaviSubTabHeadersTemplate.html",details:"resources/ui/views/tabs/vxNaviDetailsTabHeadersTemplate.html"};return{scope:{_view:"=vxNaviTabHeaders",nameField:"=?"},templateUrl:function(e,t){return n[t.level||"first"]},link:function(n,i,r,o){n.nameField=n.nameField||"name",e.populateScope(n),angular.extend(n,{_generateTid:function(e){return t.generateTelemetryIdClass(e+" navi-tab-header")}}),n.relatedItemParentId=function(e){var t;return e&&e.contentSpec&&e.contentSpec.metadata&&(e.contentSpec.metadata.fetchRelatedAsChildren||e.contentSpec.metadata.showRelationsFor)&&(t=e.$id),t}}}}]),angular.module("com.vmware.platform.ui").directive("vxNaviTocHeaders",["extensionService","navigation","extensionCategoryUtil","$q","telemetryHelperService","vxNaviTocHeadersAccessibilityService",function(e,t,n,i,r,o){return{scope:{_view:"=vxNaviTocHeaders",categoriesId:"="},templateUrl:"resources/ui/views/tabs/vxNaviTocHeadersTemplate.html",link:function(a,s){function c(){return e.getHostedExtensions(a._view.$id,a._route.objectId).then(function(e){return _.each(e,function(e){e.$id=e.uid}),i.when(e)})}function l(){return e.getExtensions(a.categoriesId,a._route.objectId)}function u(e,t){a.categories=n.mergeCategories(e,t),a.expanded=a.categories.map(function(e){return!0}),a.loaded=!0}t.populateScope(a),angular.extend(a,{_generateTid:function(e){return r.generateTelemetryIdClass(e+" navi-toc-header")}}),a.refreshToc=function(){var e=[c()];a.categoriesId&&e.push(l()),i.all(e).then(function(e){var t=e[0],n=e.length>1?e[1]:null;n?u(n,t):a.categories=[{title:"",exts:t}]})},a.toggleCollapseExpand=function(e){a.expanded[e]=!a.expanded[e]};var d=new o(s);a.handleFocus=d.handleFocus.bind(d),a.handleKeydown=d.handleKeydown.bind(d),a.handleBlur=d.handleBlur.bind(d),a.categoriesId?l().then(function(e){u(e,a._view.$children),a.refreshToc()}):(angular.extend(a,{loaded:!0,categories:[{title:"",exts:a._view.$children}],expanded:[!0]}),a.refreshToc())}}}]);var platform;!function(e){var t,n=function(){function e(e){return function(t){return new r(e,t)}}return e.$inject=["$timeout"],e}();!function(e){e[e.First=":first"]="First",e[e.Last=":last"]="Last"}(t||(t={}));var i=t,r=function(){function e(e,t){this.$timeout=e,this.ariaId="vx-navi-toc-headers-view-active",this.EXTENSION_ITEM="li",this.CATEGORY_TITLE="div.toc-tabs-title",this.EXPANDED="[aria-expanded='true']",this.COLLAPSED="[aria-expanded='false']",this.SELECTED="[aria-selected='true']",this.TOC_VIEW="div.toc-headers-view",this.CATEGORY_SECTION="div.toc-headers-category",this.SELECTED_EXTENSION_ITEM=this.CATEGORY_SECTION+" "+this.EXTENSION_ITEM+this.SELECTED,this.STATE_FOCUSED="state-focused",this.ATTR_ID="id",this.ARIA_ACTIVEDESCENDANT="aria-activedescendant",this.tocView=t.find(this.TOC_VIEW),this.tocView.attr(this.ATTR_ID)&&(this.ariaId=this.ariaId+"-"+this.tocView.attr(this.ATTR_ID))}return e.prototype.handleFocus=function(e){var t=this.tocView.find(this.SELECTED_EXTENSION_ITEM),n=this.getCategoryTitle(t),i=n&&n.is(this.COLLAPSED)?n:t;this.focusItem(i)},e.prototype.handleKeydown=function(e){var t;if(this.currentFocus)switch(e.keyCode){case $.ui.keyCode.DOWN:t=this.currentFocus.is(this.EXTENSION_ITEM)?this.findNextForTocExtension():this.findNextForCategoryTitle(),this.focusItem(t);break;case $.ui.keyCode.UP:t=this.currentFocus.is(this.EXTENSION_ITEM)?this.findPrevForTocExtension():this.findPrevForCategoryTitle(),this.focusItem(t);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this.clickCurrent();break;case $.ui.keyCode.RIGHT:if(!this.currentFocus.is(this.CATEGORY_TITLE)||this.currentFocus.is(this.EXPANDED))return;this.clickCurrent();break;case $.ui.keyCode.LEFT:if(this.currentFocus.is(this.CATEGORY_TITLE))return void(this.currentFocus.is(this.EXPANDED)&&this.clickCurrent());if(t=this.getCategoryTitle(this.currentFocus),!t)return;this.focusItem(t);break;case $.ui.keyCode.HOME:t=this.findCategoryTitle(i.First),t||(t=this.findExtension(i.First)),t&&this.focusItem(t);break;case $.ui.keyCode.END:t=this.findExtension(i.Last),t||(t=this.findCategoryTitle(i.Last)),t&&this.focusItem(t)}},e.prototype.handleBlur=function(e){this.unfocusCurrent()},e.prototype.findNextForTocExtension=function(){var e=this.currentFocus.next();if(e.length)return e;var t=this.currentFocus.closest(this.CATEGORY_SECTION),n=this.findNextForCategory(t);return n},e.prototype.findNextForCategory=function(e){var t,n=e.next();if(n.length)t=this.findFirstForCategory(n);else{var r=e.parent().find(this.CATEGORY_SECTION+i.First);t=this.findFirstForCategory(r)}return t},e.prototype.findFirstForCategory=function(e){var t=e.find(this.CATEGORY_TITLE),n=t.length?t:e.find(this.EXTENSION_ITEM+i.First);return n},e.prototype.findNextForCategoryTitle=function(){var e=this.currentFocus.closest(this.CATEGORY_SECTION),t=this.currentFocus.is(this.EXPANDED);if(t){var n=e.find(this.EXTENSION_ITEM+i.First);if(n)return n}var r=this.findNextForCategory(e);return r},e.prototype.findPrevForTocExtension=function(){var e=this.currentFocus.prev();if(e.length)return e;var t=this.currentFocus.closest(this.CATEGORY_SECTION),n=t.find(this.CATEGORY_TITLE);if(n.length)return n;var i=this.findPrevForCategory(t);return i},e.prototype.findPrevForCategory=function(e){var t,n=e.prev();if(n.length)t=this.findLastInsideCategory(n);else{var r=e.parent().find(this.CATEGORY_SECTION+i.Last);t=this.findLastInsideCategory(r)}return t},e.prototype.findLastInsideCategory=function(e){var t,n=e.find(this.CATEGORY_TITLE);if(n.length){var r=n.is(this.EXPANDED);t=r?e.find(this.EXTENSION_ITEM+i.Last):n}else t=e.find(this.EXTENSION_ITEM+i.Last);return t},e.prototype.findPrevForCategoryTitle=function(){var e=this.currentFocus.closest(this.CATEGORY_SECTION),t=this.findPrevForCategory(e);return t},e.prototype.getCategoryTitle=function(e){var t=e.closest(this.CATEGORY_SECTION).find(this.CATEGORY_TITLE);return t.length?t:null},e.prototype.focusItem=function(e){this.unfocusCurrent(),this.currentFocus=e,this.currentFocus.addClass(this.STATE_FOCUSED);var t=this.currentFocus.attr(this.ATTR_ID)||this.ariaId;this.currentFocus.attr("id",t),this.tocView.attr(this.ARIA_ACTIVEDESCENDANT,t),this.currentFocus.get(0).scrollIntoViewIfNeeded?this.currentFocus.get(0).scrollIntoViewIfNeeded():this.currentFocus.get(0).scrollIntoView&&this.currentFocus.get(0).scrollIntoView()},e.prototype.unfocusCurrent=function(){this.currentFocus&&(this.currentFocus.removeClass(this.STATE_FOCUSED),this.ariaId===this.currentFocus.attr(this.ATTR_ID)&&this.currentFocus.removeAttr(this.ATTR_ID),this.tocView.removeAttr(this.ARIA_ACTIVEDESCENDANT),this.currentFocus=null)},e.prototype.clickCurrent=function(){var e=this;this.currentFocus&&this.$timeout(function(){e.currentFocus.click()},10)},e.prototype.findCategoryTitle=function(e){var t=this.tocView.find(this.CATEGORY_TITLE+e);return t.length?t:null},e.prototype.findExtension=function(e){var t=this.tocView.find(this.EXTENSION_ITEM+e);return t.length?t:null},e.$inject=["$timeout"],e}();e.VxNaviTocHeadersAccessibilityService=r,angular.module("com.vmware.platform.ui").service("vxNaviTocHeadersAccessibilityService",n)}(platform||(platform={})),angular.module("com.vmware.platform.ui").directive("vxTabbedView",["$compile","$timeout","telemetryHelperService",function(e,t,n){return{scope:{tabs:"=",selectedTab:"=?",params:"=?",control:"=?"},templateUrl:"resources/ui/views/tabs/vxTabbedViewTemplate.html",link:function(i,r){function o(e){return c.hasOwnProperty(e.name)}function a(t){var n=i.$new(!0);i.params&&_.extend(n,i.params),t.tabParams&&_.extend(n,t.tabParams);var r=e('<div class="fill-parent"><div class="fill-parent" ng-include="\''+t.templateUrl+"'\" ></div></div>")(n);return c[t.name]={tabElement:r,tabScope:n},r}function s(e){var t=c[e];t&&(t.tabScope.$destroy(),t.tabElement.remove(),delete c[e])}i.selectedTab=i.selectedTab||i.tabs[0];var c={};angular.extend(i,{_generateTid:function(e){return n.generateTelemetryIdClass(e+" tabbed-view")}}),i.control&&(i.control.clearCache=function(e){_.forEach(_.keys(c),function(t){e&&e.name===t||s(t)})},i.control.selectTab=function(e){i.selectedTab=e}),i.$watch(function(){return i.selectedTab},function(e,t){if(t&&e!==t&&o(t)&&c[t.name].tabElement.detach(),e){var n;n=o(e)?c[e.name].tabElement:a(e),r.find("#vxTabContent").append(n)}}),i.selectTab=function(e){i.selectedTab=e,t(function(){i.$broadcast("resize")},0,!1)},i.$on("$destroy",function(){_.forEach(_.keys(c),s)})}}}]);var platform;!function(e){var t=function(){function e(){}return e}();e.RecentTasksColumnDef=t;var n=function(){function e(){}return e}(),i=function(){function e(e,t,n,i,r,o,a){var s=this;this.i18nService=e,this.vuiLocale=t,this.columnRenderersRegistry=n,this.timeFormatterService=i,this.persistenceService=r,this.$timeout=o,this.telemetryService=a,this.i18n=this.i18nService.getString,this.RECENT_TASKS_COLUMNS_STATE="com.vmware.usersetting.recenttasks.columns",this.RECENT_TASKS_COLUMNS_STATE_CATEGORY="com.vmware.usersetting.recenttasks",this.PERSISTENCE_OBJ_KEY={key:"uid",op:"=",value:this.RECENT_TASKS_COLUMNS_STATE},this.CUSTOM_TEXT_FILTER={extra:!1,messages:{info:this.vuiLocale.datagrid.colFilterInfo,filter:this.vuiLocale.datagrid.filter,clear:this.vuiLocale.datagrid.clear},operators:{string:{contains:this.vuiLocale.datagrid.contains}},ui:function(e){for(var t=e.parent();t.children().length>1;)$(t.children()[0]).remove();t.prepend('<input data-bind="value:filters[0].value" class="k-textbox" type="text">')}},this.DEFAULT_COLUMN_DEFS_BY_TITLE={},this.DEFAULT_COLUMN_DEFS=this.getDefaultColumnDefs(),this.DEFAULT_COLUMN_DEFS.forEach(function(e){s.DEFAULT_COLUMN_DEFS_BY_TITLE[e.title]=e}),this.DEFAULT_SORT=this.getDefaultSort()}return e.prototype.fetchColumnsData=function(){var e=this,n={},i=this.persistenceService.getData(this.PERSISTENCE_OBJ_KEY);return i.then(function(i){if(!(i&&i.length&&0!==i.length&&i[0]&&i[0].value))return n.columnDefs=e.DEFAULT_COLUMN_DEFS,n.sort=e.DEFAULT_SORT,n;var r,o=[],a={};try{var s=angular.fromJson(i[0].value);o=s.sort,r=_.filter(s.columns,function(t){return e.DEFAULT_COLUMN_DEFS_BY_TITLE[t.title]}).map(function(n){var i=e.DEFAULT_COLUMN_DEFS_BY_TITLE[n.title],r=new t;return r.title=i.title,r.field=i.field,r.filterable=i.filterable,r.template=i.template,n.width&&(r.width=n.width),r.hidden=n.hidden,a[r.title]=!0,r})}catch(c){r=e.DEFAULT_COLUMN_DEFS}if(r.length!==e.DEFAULT_COLUMN_DEFS.length)for(var l=0;l<e.DEFAULT_COLUMN_DEFS.length;l++)a[e.DEFAULT_COLUMN_DEFS[l].title]||r.push(e.DEFAULT_COLUMN_DEFS[l]);return n.columnDefs=r,n.sort=o,n})},e.prototype.persistColumnsState=function(e){var t,i=this;return e.$on("destroy",function(){t&&(i.$timeout.cancel(t),t=void 0)}),function(e){t&&i.$timeout.cancel(t),t=i.$timeout(function(){var t=e.sender.columns,r={};r.columns=_.filter(t,function(e){return e}).map(function(e){var t=parseInt(e.width),i=new n;return i.title=e.title,i.hidden=e.hidden,i.width=t?t:void 0,i});var o=e.sender.dataSource;o&&o.sort()&&(r.sort=o.sort()),i.persistenceService.setData(i.RECENT_TASKS_COLUMNS_STATE,angular.toJson(r),{},i.RECENT_TASKS_COLUMNS_STATE_CATEGORY),i.telemetryService.trackEvent("recentTasks","columns",JSON.stringify(r.columns))},100)}},e.prototype.renewUserTimeFormat=function(){var e=this;return this.timeFormatterService.getUserTimeFormatPreference().then(function(t){e.dateFormat=t})},e.prototype.getDefaultColumnDefs=function(){var e=this,n=new t;n.title=this.i18n("Common","taskNameHeader"),n.field="description",n.filterable=this.CUSTOM_TEXT_FILTER;var i=new t;i.title=this.i18n("Common","taskTargetHeader"),i.field="entityName",i.filterable=this.CUSTOM_TEXT_FILTER,i.template=this.targetRenderer.bind(this);var r=new t;r.title=this.i18n("Common","taskStatusHeader"),r.field="state",r.filterable=this.CUSTOM_TEXT_FILTER,r.template=this.columnRenderersRegistry.getColumnRenderer("recent-task-state");var o=new t;o.title=this.i18n("Common","taskDetailsHeader"),o.field="details",o.filterable=this.CUSTOM_TEXT_FILTER;var a=new t;a.title=this.i18n("Common","taskInitiatorHeader"),a.field="initiator",a.filterable=this.CUSTOM_TEXT_FILTER,a.template='<div title="#:initiator#">#:initiator#</div>';var s=new t;s.title=this.i18n("Common","taskQueueTimeHeader"),s.field="queuedForMilliseconds",s.filterable=this.CUSTOM_TEXT_FILTER,s.template=function(e){return e.timeInQueueString?e.timeInQueueString:""};var c=new t;c.title=this.i18n("Common","taskStartTimeHeader"),c.field="startTimeString",c.filterable=this.CUSTOM_TEXT_FILTER,c.template=function(t){return e.timeFormatterService.timestampToText(t.startTime,e.dateFormat)};var l=new t;l.title=this.i18n("Common","taskCompleteTimeHeader"),l.field="completionTimeString",l.filterable=this.CUSTOM_TEXT_FILTER,l.template=function(t){return e.timeFormatterService.timestampToText(t.completionTime,e.dateFormat)};var u=new t;return u.title=this.i18n("Common","taskvServerHeader"),u.field="service",u.filterable=this.CUSTOM_TEXT_FILTER,u.template=this.getServerRenderer.bind(this),[n,i,r,o,a,s,c,l,u]},e.prototype.getDefaultSort=function(){return[{dir:"desc",field:"startTimeString"}]},e.prototype.targetRenderer=function(e){var t=this.columnRenderersRegistry.getColumnRenderer("object-link"),n=["entityUid","entityName",e.entityIcon,"",e.targetExists];return t(n,e,{isKendoGrid:!0})},e.prototype.getServerRenderer=function(e){var t=this.columnRenderersRegistry.getColumnRenderer("object-link"),n=["rootFolderUid","service"];return t(n,e,{isKendoGrid:!0})},e.$inject=["i18nService","vuiLocale","columnRenderersRegistry","timeFormatterService","persistenceService","$timeout","telemetryService"],e}();e.RecentTasksColumnsService=i,angular.module("com.vmware.platform.ui").service("recentTasksColumnsService",i)}(platform||(platform={})),function(){"use strict";function e(e,t,n,i,r,o,a,s,c){function l(){v.i18n=t.getString,v.taskConstants=n,v.taskStatuses=[{id:n.status.ALL,title:t.getString("Common","allTasksLabel")},{id:n.status.RUNNING,title:t.getString("Common","runningTasksLabel")},{id:n.status.ERROR,title:t.getString("Common","failedTasksLabel")}],v.moreTasksLabel=t.getString("Common","allTasks");var r=s.persistColumnsState(a);s.fetchColumnsData().then(function(e){const n=e.columnDefs;v.datagridOptions={columns:n,dataSource:{pageSize:50},dataBound:function(e){var t=v.getGridSort();t&&!_.isEqual(t,v.lastSort)&&(v.lastSort=t,r(e))},scrollable:{virtual:!0},pageable:{numeric:!1,previousNext:!1},sortable:{mode:"single",allowUnsort:!0},columnMenu:{sortable:!1,messages:{columns:t.getString("CommonUi","listview.showColumnsMenu"),filter:t.getString("CommonUi","listview.filterMenu")}},filterable:!0,resizable:!0,reorderable:!0,columnShow:r,columnHide:r,columnReorder:r,columnResize:r,navigatable:!0},v.grid=o.find(".vui-datagrid").kendoGrid(v.datagridOptions),o.find(".k-pager-wrap.k-grid-pager").append("<vui-datagrid-footer-bar></vui-datagrid-footer-bar>"),$(v.grid).find("th.k-header.k-with-icon[role='columnheader']").addClass(function(){var e=$(this),t="recent-tasks-column-"+e.attr("data-field");return c.generateTelemetryIdClass(t)}),v.grid.data("kendoGrid").bind("columnMenuInit",v.onColumnMenuInit),v.dataSource=v.grid.data("kendoGrid").dataSource,v.lastSort=e.sort,v.setGridSort(v.lastSort),i.onPartialUpdate(v.onPartialUpdate),f()}),v.onPartialUpdate=function(){u()},v.refreshTaskGrid=function(){u(),m()},v.navigateToTasks=function(){e._navigateToView("vsphere.core.tasks.domainView")},v.getGridFilters=function(){var e=g();return e?e.filter():null},v.setGridFilters=function(e){var t=g();t&&t.filter(e)},v.getGridSort=function(){var e=g();return e?e.sort():null},v.setGridSort=function(e){var t=g();t&&t.sort(e)},v.onColumnMenuInit=function(e){var t="column-"+e.field;$(e.container).find("li.k-item.k-sort-asc").addClass(c.generateTelemetryIdClass("recent-tasks-"+t+"-sort-asc")),$(e.container).find("li.k-item.k-sort-desc").addClass(c.generateTelemetryIdClass("recent-tasks-"+t+"-sort-desc")),$(e.container).find('span.k-link > input[type="checkbox"]').each(function(e,t){var n=$(t).attr("data-field"),i="recent-tasks-"+n+"-checkbox";$(t).closest("li.k-item").addClass(c.generateTelemetryIdClass(i))}),$(e.container).find("form.k-filter-menu > div > div > button").each(function(e,n){var i=n.type;if("submit"===i||"reset"===i){var r="recent-tasks-"+t+"-filter-"+i;$(n).addClass(c.generateTelemetryIdClass(r))}})}}function u(){var e=v.getGridFilters(),t=v.getGridSort();g().data(d()),v.setGridFilters(e),v.setGridSort(t)}function d(){if(!v.selectedTaskStatus)return[];var e=i.getTasks();return e=r.filterTasksByStatus(e,v.selectedTaskStatus),_.sortBy(e,"startTime").reverse()}function f(){r.loadFiltersData().then(function(e){if(v.selectedTaskStatus=n.status.ALL,e&&1===e.length&&e[0].value){var t=angular.fromJson(e[0].value);t.selectedTaskStatus&&(v.selectedTaskStatus=t.selectedTaskStatus)}p(u)})}function p(e){return s.renewUserTimeFormat().then(function(){e&&e()})}function m(){r.saveFiltersData(v.selectedTaskStatus)}function g(){return v.dataSource}var v=this;l(),a.$on("dataRefreshInvocationEvent",function(){p(u)}),a.$on("$destroy",function(){if(v.grid){var e=v.grid.data("kendoGrid");e&&(e.unbind("columnMenuInit"),e.destroy())}})}angular.module("com.vmware.platform.ui").component("recentTasksView",{templateUrl:"resources/ui/views/tasks/RecentTasksView.html",controller:e}),angular.module("com.vmware.platform.ui").component("recentTasksViewWrapper",{template:"<recent-tasks-view></recent-tasks-view>",controller:function(){}}),e.$inject=["$rootScope","i18nService","taskConstants","recentTasksStoreService","taskFilterService","$element","$scope","recentTasksColumnsService","telemetryHelperService"]}(),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l,u,d,f){function p(t,n){var i=[],a=[],s=[];n.updates&&_.each(n.updates,function(e){if(e.isDelta){var t=v(e,k);t&&(i.push(t),s.push(t))}else{var n=g(e,k);a.push(n),s.push(n)}});var c=_.map(n.deleted,h);0!==i.length&&r.all(i).then(function(t){e.$broadcast(o.events.UPDATED,t.map(function(e){return e.taskRef}));var n=t.filter(function(e){return e.state===o.status.SUCCESS});n.length&&e.$broadcast(o.events.COMPLETED,n)}),0!==a.length&&r.all(a).then(function(t){e.$broadcast(o.events.ADDED,t.map(function(e){return e.key}))}),e.$broadcast(o.events.DELETED,c);var l=function(){w=!1,T&&(T=!1,I.forEach(function(e){e(n)}))};w?r.all(s).then(function(){T=!0,w||d(l,E)}):(r.all(s).then(function(){I.forEach(function(e){e(n)})}),w=!0,d(l,E))}function m(t,n){var i=C[y(t,n)];if(i&&!i.pendingCancel){var r={title:s.getString("Common","cancelTaskTitle"),message:s.getString("Common","cancelTaskDescription"),submit:function(){var t=i.taskUid;return c.apply(t,"com.vmware.vise.core.model.monitor.TaskStateSpec",{cancel:"true"}),i.pendingCancel=!0,e.$broadcast(o.events.UPDATED,[i.key]),!0}};a.openConfirmationModal(r)}}function g(e,n){var i=angular.extend({},e.data),r=y(i.key,i.serverGuid);C[r]=i,i.onCancelTaskClicked=function(){m(this.key,this.serverGuid)};const o=t.setDerivedProperties(i,e.metadata,n).then(function(){return i.key});return o}function v(e,n){var i=y(e.data.taskRef.value,e.data.taskRef.serverGuid),r=C[i];if(!r)return b.error("Cannot update task id: ",e.data.taskRef.value," partialUpdateItem:",e," all tasks: ",C),null;const o=t.updateTask(r,e,n);return o}function h(e){var t=e.value;return delete C[y(t,e.serverGuid)],t}function S(e){var t=e.error;if(t&&t.message){var n={name:e.description,entityName:e.entityName,errorMessage:t.message};f.notifyTaskError(n)}}function y(e,t){return e+":"+t}var b=n("recentTasksStoreService"),I=[],C={},w=!1,T=!1;const E=1e3;var k;return u.getUserTimeFormatPreference().then(function(t){k=t,i.getUserSession().then(function(t){t.userName?(l.initializeLiveUpdates().then(function(t){e.$on(o.events.RECENT_TASKS,p),t("/topic/recent-tasks"),e.$on("dataRefreshInvocationEvent",function(){C={},l.initializeLiveUpdates().then(function(e){e("/topic/recent-tasks")})})}),e.$on(o.events.FAILED,function(e,t){S(t)})):b.error("No userName set in userSession")},function(){b.error("Error getting username from userSessionService")})}),{getTasks:function(){return _.values(C)},getTask:function(e,t){return C[y(e,t)]},onPartialUpdate:function(e){I.push(e)},cancelTask:m}}angular.module("com.vmware.platform.ui").factory("recentTasksStoreService",e),e.$inject=["$rootScope","taskFormatter","logService","userSessionService","$q","taskConstants","clarityModalService","i18nService","mutationService","websocketMessagingService","timeFormatterService","$timeout","notificationService"]}();var h5_client;!function(e){var t;!function(e){var t=function(){function e(e,t,n,i,r,o,a,s,c){this.$scope=e,this.$rootScope=t,this.i18nService=n,this.dataService=i,this.vuiConstants=r,this.timeFormatterService=o,this.defaultUriSchemeUtil=a,this.$q=s,this.scheduledTaskTimeService=c;var l=this;this.objectId=l.$scope._route.objectId,this.viewId=l.$scope._view.$id,l.i18n=l.i18nService.getString,l.setupGridOptions(),l.getScheduledTasksData()}return e.prototype.getScheduledTasksData=function(){var e=this;return this.dataService.getProperties(this.objectId,"allScheduledTasks").then(function(t){e.dataGridOptions.data=e.formatScheduledTaskData(t)})},e.prototype.formatScheduledTaskData=function(e){var t=this,n=e.allScheduledTasks.items.map(function(e){return e.properties[0].value.lastRunInfo?(e.properties[0].value.lastRunTime=e.properties[0].value.lastRunInfo.startTime||"",e.properties[0].value.lastRunResult=e.properties[0].value.lastRunInfo.state||""):(e.properties[0].value.lastRunTime="",e.properties[0].value.lastRunResult=""),e.properties[0].value.schedule=t.getSchedule(e.properties[0].value.recurrence),e.properties[0].value});return n},e.prototype.setupGridOptions=function(){var e=this,t=[{displayName:this.i18n("ScheduledOpsUi","columnHeader.task"),field:"name",width:"30%"},{displayName:this.i18n("ScheduledOpsUi","columnHeader.schedule"),field:"schedule"},{displayName:this.i18n("ScheduledOpsUi","columnHeader.lastRun"),field:"lastRunTime",template:function(t){return e.timeFormatterService.timestampToText(Number(t.lastRunTime))}},{displayName:this.i18n("ScheduledOpsUi","columnHeader.lastRunResult"),field:"lastRunResult"},{displayName:this.i18n("ScheduledOpsUi","columnHeader.nextRun"),field:"nextRunTime",template:function(t){return e.timeFormatterService.timestampToText(Number(t.nextRunTime))}}];this.dataGridOptions={onChange:function(t){e.showSelectedItemData(t)},columnDefs:t,data:[],sortOrder:[{field:"lastRunTime",dir:"desc"}],sortMode:this.vuiConstants.grid.sortMode.SINGLE,selectionMode:this.vuiConstants.grid.selectionMode.SINGLE,selectedItems:[],height:"100%",resizable:!0,reorderable:!0,columnMenu:{sortable:!1,messages:{columns:this.i18n("CommonUi","listview.showColumnsMenu"),filter:this.i18n("CommonUi","listview.filterMenu")}}},this.lastRunDatagridOptions={columnDefs:[{displayName:this.i18n("ScheduledOpsUi","columnHeader.launchedOn"),field:"startTime",template:function(t){return e.timeFormatterService.timestampToText(Number(t.startTime))}},{displayName:this.i18n("ScheduledOpsUi","columnHeader.duration"),field:"timeInExecutionString"},{displayName:this.i18n("ScheduledOpsUi","columnHeader.runResult"),field:"state"}],data:[]},this.splitterOptions={orientation:this.vuiConstants.splitter.orientation.VERTICAL,panes:[{min:"140px",size:"50%"},{min:"100px"}]}},e.prototype.getSelectedScheduledExecutionTasksData=function(e){return this.dataService.getProperties(e,"scheduledTaskExecutionInfo").then(function(e){return _.map(e.scheduledTaskExecutionInfo.items[0].properties[0].value,function(e){return e.result[0].result})})},e.prototype.getSelectedScheduledTasksData=function(e){var t=this;return this.dataService.getProperties(e,"scheduledTaskInfo").then(function(e){return e.scheduledTaskInfo.items[0].properties[0].value.lastModifiedTime=t.timeFormatterService.timestampToText(Number(e.scheduledTaskInfo.items[0].properties[0].value.lastModifiedTime)),e.scheduledTaskInfo.items[0].properties[0].value.nextRunTime=t.timeFormatterService.timestampToText(Number(e.scheduledTaskInfo.items[0].properties[0].value.nextRunTime)),e.scheduledTaskInfo.items[0].properties[0].value})},e.prototype.showSelectedItemData=function(e){var t=this;if(e.length>0){this.selectedScheduledTask=e[0];var n=this.defaultUriSchemeUtil.getVsphereObjectId(this.selectedScheduledTask.scheduledTask);return this.$q.all([this.getSelectedScheduledExecutionTasksData(n),this.getSelectedScheduledTasksData(n)]).then(function(e){t.scheduledTaskInfo=e[1],t.lastRunDatagridOptions.data=e[0]})}},e.prototype.getSchedule=function(e){var t=this.i18n("ScheduledOpsUi","recurrence.unknown");
return e.interval?e.weekday||e.day?t=this.i18n("ScheduledOpsUi","recurrence.monthly"):"undefined"!=typeof e.sunday?t=this.i18n("ScheduledOpsUi","recurrence.weekly"):e.hour?t=this.i18n("ScheduledOpsUi","recurrence.daily"):e.minute&&(t=this.i18n("ScheduledOpsUi","recurrence.hourly")):e.minute?t=this.i18n("ScheduledOpsUi","recurrence.afterStartup"):e.runAt&&(t=this.i18n("ScheduledOpsUi","recurrence.once")),t},e.prototype.getScheduleForDisplay=function(e){var t=this.i18n("SchedulingUi","recurrence.unknown");return e&&(t=e.interval?e.weekday?this.i18n("SchedulingUi","recurrence.monthlyByWeekLong",e.interval,this.scheduledTaskTimeService.getWeekOffset(e),this.scheduledTaskTimeService.getWeekday(e),this.scheduledTaskTimeService.getTime(e)):"undefined"!=typeof e.day?this.i18n("SchedulingUi","recurrence.monthlyLong",e.interval,this.scheduledTaskTimeService.getDay(e),this.scheduledTaskTimeService.getTime(e)):"undefined"!=typeof e.sunday?this.i18n("SchedulingUi","recurrence.weeklyLong",e.interval,this.scheduledTaskTimeService.getDaysOfWeek(e),this.scheduledTaskTimeService.getTime(e)):e.hour?this.i18n("SchedulingUi","recurrence.dailyLong",e.interval,this.scheduledTaskTimeService.getTime(e)):e.minute?this.i18n("SchedulingUi","recurrence.hourlyLong",e.interval,e.minute):this.i18n("SchedulingUi","recurrence.minutelyLong",e.interval):"undefined"!=typeof e.day&&null===e.runAt?this.i18n("SchedulingUi","recurrence.nowLong"):e.minute?this.i18n("SchedulingUi","recurrence.afterStartupLong",e.minute):this.i18n("SchedulingUi","recurrence.onceLong",this.timeFormatterService.timestampToText(e.runAt))),t},e.$inject=["$scope","$rootScope","i18nService","dataService","vuiConstants","timeFormatterService","defaultUriSchemeUtil","$q","scheduledTaskTimeService"],e}();angular.module("com.vmware.platform.ui").controller("scheduledTasksViewController",t)}(t=e.platform||(e.platform={}))}(h5_client||(h5_client={}));var platform;!function(e){var t=function(){function e(e,t){this.i18nService=e,this.timeFormatterService=t,this.i18n=this.i18nService.getString}return e.prototype.currentDate=function(){return new Date},e.prototype.getTime=function(e){var t=this.currentDate();return this.timeFormatterService.timestampToText(t.setUTCHours(e.hour,e.minute),null,{hour:"numeric",minute:"numeric"})},e.prototype.getDay=function(e){var t=this.computeLocalDayShift(e.hour,e.minute),n=this.getAdjustedMonthDay(e.day,t);return n},e.prototype.getAdjustedMonthDay=function(e,t){var n=e+t;return n>31&&(n=1),1>n&&(n=31),n},e.prototype.getMinutes=function(e){var t=this.currentDate();return this.timeFormatterService.timestampToText(t.setUTCMinutes(e.minute),null,{minute:"numeric"})},e.prototype.computeLocalDayShift=function(e,t){var n=this.currentDate();return n.setUTCHours(e,t),n.getDate()===n.getUTCDate()?0:n.getTimezoneOffset()<0?1:-1},e.prototype.getAdjustedWeeklyScheduler=function(e,t){var n={monday:void 0,tuesday:void 0,wednesday:void 0,thursday:void 0,friday:void 0,saturday:void 0,sunday:void 0};switch(t){case 0:n.monday=e.monday,n.tuesday=e.tuesday,n.wednesday=e.wednesday,n.thursday=e.thursday,n.friday=e.friday,n.saturday=e.saturday,n.sunday=e.sunday;break;case-1:n.monday=e.tuesday,n.tuesday=e.wednesday,n.wednesday=e.thursday,n.thursday=e.friday,n.friday=e.saturday,n.saturday=e.sunday,n.sunday=e.monday;break;case 1:n.monday=e.sunday,n.tuesday=e.monday,n.wednesday=e.tuesday,n.thursday=e.wednesday,n.friday=e.thursday,n.saturday=e.friday,n.sunday=e.saturday}return n},e.prototype.getDaysOfWeek=function(e){var t=this.computeLocalDayShift(e.hour,e.minute),n=this.getAdjustedWeeklyScheduler(e,t),i="";return n.monday&&(i+=this.i18n("SchedulingUi","dayShort.1")+","),n.tuesday&&(i+=this.i18n("SchedulingUi","dayShort.2")+","),n.wednesday&&(i+=this.i18n("SchedulingUi","dayShort.3")+","),n.thursday&&(i+=this.i18n("SchedulingUi","dayShort.4")+","),n.friday&&(i+=this.i18n("SchedulingUi","dayShort.5")+","),n.saturday&&(i+=this.i18n("SchedulingUi","dayShort.6")+","),n.sunday&&(i+=this.i18n("SchedulingUi","dayShort.0")+","),i},e.prototype.getAdjustedDayOfWeek=function(e,t){return 0===t?e:"monday"===e?0>t?"sunday":"tuesday":"tuesday"===e?0>t?"monday":"wednesday":"wednesday"===e?0>t?"tuesday":"thursday":"thursday"===e?0>t?"wednesday":"friday":"friday"===e?0>t?"thursday":"saturday":"saturday"===e?0>t?"friday":"sunday":"sunday"===e?0>t?"saturday":"monday":e},e.prototype.getWeekOffset=function(e){var t=e.offset;return"first"===t?this.i18n("SchedulingUi","week.0"):"second"===t?this.i18n("SchedulingUi","week.1"):"third"===t?this.i18n("SchedulingUi","week.2"):"fourth"===t?this.i18n("SchedulingUi","week.3"):"last"===t?this.i18n("SchedulingUi","week.4"):""},e.prototype.getWeekday=function(e){var t=e.weekday,n=this.computeLocalDayShift(e.hour,e.minute),i=this.getAdjustedDayOfWeek(t,n);return"monday"===i?this.i18n("SchedulingUi","day.1"):"tuesday"===i?this.i18n("SchedulingUi","day.2"):"wednesday"===i?this.i18n("SchedulingUi","day.3"):"thursday"===i?this.i18n("SchedulingUi","day.4"):"friday"===i?this.i18n("SchedulingUi","day.5"):"saturday"===i?this.i18n("SchedulingUi","day.6"):"sunday"===i?this.i18n("SchedulingUi","day.0"):"weekday"===i?this.i18n("SchedulingUi","day.7"):"weekendDay"===i?this.i18n("SchedulingUi","day.8"):""},e.$inject=["i18nService","timeFormatterService"],e}();e.ScheduledTaskTimeService=t,angular.module("com.vmware.platform.ui").service("scheduledTaskTimeService",t)}(platform||(platform={})),function(){"use strict";function e(e,t,n,i,r,o,a,s,c,l,u,d,f,p,m){function g(){T.tasksListOptions.data=T.tasksListOptions.data.map(function(e){return e})}function v(e){B.enabled=e&&0!==x,G.enabled=e&&P}function h(e){T.tasksListOptions.data=e,P=e&&e.length===O}function S(){T.pendingRequest!==!0&&(T.pendingRequest=!0,v(!1),r.get("tasks/",{params:{objectId:E,requestedPage:x,pageSize:O,requestingPreviousPage:R}}).then(function(e){return h(e.data),N={},s.all(e.data.map(function(e){(e.state===l.status.RUNNING||e.state===l.status.PAUSED)&&(N[e.key]=e);var t=u.getTask(e.key,e.serverGuid);return t&&angular.extend(e,t),a.setDerivedProperties(e)}))}).then(h)["finally"](function(){T.pendingRequest=!1,v(!0)}))}function y(e){return r.get("events/",{params:{serverGuid:e.serverGuid,chainId:e.eventChainId}}).then(function(t){T.selectedTask&&T.selectedTask.key===e.key&&(T.relatedEventsListOptions.data=t.data,T.hasRelatedEvents=0!==T.relatedEventsListOptions.data.length)})}function b(e){return r.get("tasks/errorStack",{params:e}).then(function(e){return e.data})}function I(e,t,n){var i=Number(e[n]),r=Number(t[n]);return r>i?-1:i>r?1:0}function C(e,t){return _.some(t,function(e){return e.value in N})}function w(e,t){_.each(t,function(e){var t=e.value;if(t in N){var n=N[t],i=u.getTask(t,e.serverGuid);angular.extend(n,i)}}),g()}var T=this,E=e._route.objectId,k=e._view.$id,D=d.getColumnChangeHandler(k,e),x=0,O=100,P=!1,A=!1,$=null;T.pendingRequest=!1;var N={},R=!0,M=n.getString.bind(n,"Common"),j=o.getColumnRenderer("object-link"),L=o.getColumnRenderer("text"),U=o.getColumnRenderer("task-status-first-line"),V=function(e,t){return j(["entityUid","entityName",e.entityIcon,"",e.targetExists],e,{focusable:t?!0:!1})},F=M("taskPrevPage"),B={id:1,tooltipText:F,label:F,enabled:!1,iconClass:"vui-icon-object-nav-history-left-hover",onClick:function(){R=!1,x--,S()}},H=M("taskNextPage"),G={id:2,tooltipText:H,label:H,enabled:!1,iconClass:"vui-icon-object-nav-history-right-hover",onClick:function(){R=!0,x++,S()}},q=[{displayName:M("taskNameHeader"),field:"description",template:function(e){return L(["description"],e)}},{displayName:M("taskTargetHeader"),field:"entityName",template:V},{displayName:M("taskStatusHeader"),field:"state",sortable:function(e,t){var n=e.statusSummary,i=t.statusSummary;return i>n?-1:n>i?1:0},template:o.getColumnRenderer("task-state")},{displayName:M("taskDetailsHeader"),field:"details",template:function(e){return L(["details"],e)}},{displayName:M("taskInitiatorHeader"),field:"initiator",template:function(e){return L(["initiator"],e)}},{displayName:M("taskQueueTimeHeader"),field:"queuedForMilliseconds",sortable:function(e,t){return I(e,t,"queuedForMilliseconds")},template:function(e){return L(["timeInQueueString"],e)}},{displayName:M("taskStartTimeHeader"),field:"startTime",template:function(e){return L(["startTimeString"],e)}},{displayName:M("taskCompleteTimeHeader"),field:"completionTime",template:function(e){return L(["completionTimeString"],e)}},{displayName:M("taskTotalTimeHeader"),field:"timeInExecution",sortable:function(e,t){return I(e,t,"timeInExecution")},template:function(e){return L(["timeInExecutionString"],e)}},{displayName:M("taskvServerHeader"),field:"service",template:function(e){return j(["rootFolderUid","service"],e)}},{visible:!1,template:function(e){return e.key}}];d.applyPersistedState(q,k).then(function(r){T.tasksListOptions={columnDefs:r,data:[],sortOrder:[{field:"startTime",dir:"desc"}],actionBarOptions:{actions:[B,G]},sortMode:i.grid.sortMode.SINGLE,selectionMode:i.grid.selectionMode.SINGLE,selectedItems:[],height:"100%",resizable:!0,reorderable:!0,columnMenu:{sortable:!1,messages:{columns:n.getString("CommonUi","listview.showColumnsMenu"),filter:n.getString("CommonUi","listview.filterMenu")}},columnHide:D,columnReorder:D,columnResize:D,columnShow:D},S(!1),e.$watch(function(){return T.tasksListOptions.selectedItems},function(e,n){if(1===e.length){if(A===!0)return void(A=!1);var i=e[0];if(1===n.length&&n[0].key===i.key)return;T.selectedTask=i,T.selectedTask.errorStack=!1,i.statusTemplate=U(i),i.targetTemplate=V(i,!0),i.errorReportArgs={taskId:i.key,parentTaskId:i.parentTaskId,eventId:i.eventChainId,serverGuid:i.serverGuid},b(i.errorReportArgs).then(function(e){e.length>1&&(e.shift(),e[0]&&(i.errorStack=e))}),i.result?i.resultTemplate=L(["result"],i):i.resultType?c.getObjectTypeSpec(i.resultType).then(function(e){i.resultEntityIcon=e.icon,i.resultTemplate=j(["resultEntityUid","resultName",i.resultEntityIcon],i)}):i.resultTemplate=j(["resultEntityUid","resultName"],i),T.hasRelatedEvents=!1,y(i)}else if(1===n.length){T.selectedTask=n[0],A=!0;var r=t.find("[kendo-grid]").data("kendoGrid"),o=r.tbody.find("tr:contains('"+n[0].key+"')");o.length&&r.select(o)}else T.selectedTask=null});var o={};o[f.DATA_REFRESH_INVOCATION_EVENT]={handler:function(){S()}},o[l.events.ADDED]={handler:function(){S()}},o[l.events.UPDATED]={handler:w,checker:C},$=p.subscribeForDataUpdate(t,S,o)}),T.relatedEventsListOptions={columnDefs:[{displayName:n.getString("EventUi","eventConsoleView.eventTriggeredOnColumn.headerText"),width:"20%",field:"createdTime",searchable:!1,template:function(e){return["<div>",'<span class="icon-vSphere-events"></span>',"<span>",m.timestampToText(parseInt(e.createdTime)),"</span>","</div>"].join("")}},{displayName:n.getString("EventUi","eventConsoleView.eventDescriptionColumn.headerText"),field:"contextSensitiveMessage",width:"80%",template:function(e){return["<div>",'<linked-text text="dataItem.linkableFormattedMessage" targets="dataItem.linkableEntities" fallback-text="dataItem.fullFormattedMessage" title="{{dataItem.fullFormattedMessage}}">',"</linked-text>","</div>"].join("")}}],data:[],sortMode:i.grid.sortMode.SINGLE,selectionMode:i.grid.selectionMode.SINGLE,selectedItems:[],height:"100%",resizable:!0},T.splitterOptions={orientation:i.splitter.orientation.VERTICAL,panes:[{min:"140px",size:"75%"},{min:"100px"}]},e.$on("$destroy",function(){null!==$&&(p.unsubscribe($),$=null)})}angular.module("com.vmware.platform.ui").controller("TaskConsoleViewController",e),e.$inject=["$scope","$element","i18nService","vuiConstants","$http","columnRenderersRegistry","taskFormatter","$q","objectTypesService","taskConstants","recentTasksStoreService","listViewColumnService","vcH5ConstantsService","visibilityAwareDataUpdateNotificationService","timeFormatterService"]}(),angular.module("com.vmware.platform.ui").constant("taskConstants",{status:{ALL:"all",RUNNING:"RUNNING",ERROR:"ERROR",CANCELED:"CANCELED",SUCCESS:"SUCCESS",PAUSED:"PAUSED"},events:{RECENT_TASKS:"recent-tasks",UPDATED:"TASKS_UPDATED",ADDED:"TASKS_ADDED",DELETED:"TASKS_DELETED",COMPLETED:"TASKS_COMPLETED",FAILED:"taskFailed"}}),angular.module("com.vmware.platform.ui").factory("taskFilterService",["persistenceService","taskConstants",function(e,t){var n="com.vmware.usersetting.recenttasks.filters",i="com.vmware.usersetting.recenttasks";return{saveFiltersData:function(t){e.setData(n,angular.toJson({selectedTaskStatus:t}),{},i)},loadFiltersData:function(){var t={key:"uid",op:"=",value:n};return e.getData(t)},filterTasksByStatus:function(e,n){function i(e){return e.state===n}return n!==t.status.ALL?_.filter(e,i):e}}}]),angular.module("com.vmware.platform.ui").factory("taskFormatter",["$filter","i18nService","taskConstants","objectTypesService","$q","timeFormatterService",function(e,t,n,i,r,o){"use strict";var a={};return a[n.status.ERROR]="vsphere-icon-status-error",a[n.status.CANCELED]="vui-icon-task-canceled",a[n.status.SUCCESS]="vsphere-icon-status-ok",a[n.status.RUNNING]="vui-icon-task-running",a[n.status.PAUSED]="vui-icon-task-paused",a[n.status.QUEUED]="vui-icon-task-queued",{formatDate:function(e){return o.formatDate(e)},getProgressString:function(e){return t.getString("Common","tasksFormat.progressPercent",e)},getClientStatus:function(e){return e.state===n.status.RUNNING?(e.progress<0&&(e.progress=0),this.getProgressString(e.progress)):this.getClientErrorOrSimpleStatus(e)},hasClientError:function(e){return e.state===n.status.ERROR&&null!==e.error},getClientErrorOrSimpleStatus:function(e){return e.state===n.status.ERROR&&null!==e.error&&e.error.message?e.error.message:this.getSimpleStatus(e.state)},getSimpleStatus:function(e){return t.getString("Common",e.toLowerCase())},getTaskIconByState:function(e){return e in a?a[e]:"vsphere-icon-status-unknown"},setDerivedProperties:function(e,n,a){var s=r.defer();return e.statusSummary=this.getClientStatus(e),e.initiatorName=this.getInitiatorName(e,n),e.targetExists=null!==e.entity&&"ContentLibrary"!==e.entityType&&"ContentLibraryItem"!==e.entityType,e.startTime&&(e.queuedForMilliseconds=e.startTime-e.queueTime,e.timeInQueueString=t.getString("Common","msStringFormat",e.queuedForMilliseconds)),a?(e.startTimeString=o.timestampToText(e.startTime,a),e.completionTimeString=o.timestampToText(e.completionTime,a)):(this.formatDate(e.startTime).then(function(t){e.startTimeString=t}),this.formatDate(e.completionTime).then(function(t){e.completionTimeString=t})),"rootFolder"===e.entityType?(e.entityIcon="vsphere-icon-vcenter",s.resolve(e)):i.getObjectTypeSpec(e.entityType).then(function(t){e.entityIcon=t.icon})["finally"](function(){s.resolve(e)}),s.promise},updateTask:function(e,t,n){return t.deltaProperties.forEach(function(n){e[n]=t.data[n]}),this.setDerivedProperties(e,t.metadata,n)},convertInitiatorToUsername:function(e){var t,n,i,r="\\";return e.indexOf(r)>-1?(i=e.split(r),t=i[0],n=i[1],(n+"@"+t).toLowerCase()):e},getInitiatorName:function(e,t){var n;return t&&t.reason&&t.reason.userName?n=this.convertInitiatorToUsername(t.reason.userName):e.initiator&&(n=this.convertInitiatorToUsername(e.initiator)),n}}}]),function(){"use strict";function e(e,t,n,i,r,o,a){function s(){S||(S=n.get("notificationService")),i.getUserSession().then(function(e){b=e,w=b.userName.replace("@VSPHERE.LOCAL","")}),o.getProperty("installation.id").then(function(e){y=e,y||(y="internal_installation")}),I=r.getString("CommonUi","client.version");var e=I.substring(I.indexOf("-")+1);C="0"===e?I:'<a href="https://buildweb.eng.vmware.com/ob/'+e+'">'+I+"</a>"}function c(){return T}function l(){return A}function u(e){var t=b?b.userName.replace("@VSPHERE.LOCAL",""):"";e.email?e.email.match(P)?A=e.email:e.email=null:e.email=A;var n=e.email?e.email:c()?t:"";n=btoa(n);var i="debug"===e.type,r="error"===e.type||i;if(!r||!h(e)){e.message||(e.message="");var o=e.message;r&&(o=p(o));var a=b?b.hashedClientId:0,s=r?"h5_ui_errors":"h5_ui_feedback",l=window.navigator.userAgent+", language="+window.navigator.language,u={"@type":s,product:"vSphere H5 Client",version:I,user:n,client_id:a,creation_date:Date.now(),message:o,url:m(),ua:l};if(e.rating&&(u.rating=e.rating),e.canvas){var f=document.createElement("canvas"),g=3*e.canvas.width/4,v=3*e.canvas.height/4;f.width=g,f.height=v;var S=f.getContext("2d");S.drawImage(e.canvas,0,0,e.canvas.width,e.canvas.height,0,0,g,v);var y=f.toDataURL("image/png");y=y.substr(22),u.screenshot=y,e.image=y}if(e.stack&&!i){var C=new Error(o);C.stack=e.stack,StackTrace.fromError(C).then(function(t){var n=e.stack.indexOf("\n");n>0&&(e.stack=e.stack.substring(0,n));for(var i=0;i<t.length;i++)e.stack+="\n  at "+t[i].toString();e.stack=p(e.stack),r?u.stack_trace=e.stack:u.message+="\nstack-trace: "+e.stack,d(e,u)})["catch"](function(t){$.error("updateStack failed: "+t),u.stack_trace=p(u.stack_trace),d(e,u)})}else i&&(u.stack_trace=e.stack),d(e,u)}}function d(e,n){var i="feedback"===e.type&&h5.isReleaseBuild?h5.feedbackCollectorId:h5.telemetryCollectorId,r="https://vcsa.vmware.com/ph/api/hyper/send?_v=1.0&_c="+i+"&_i="+y,o={method:"POST",url:r,withCredentials:!1,data:n,skipLoadingNotification:!0,eventHandlers:{readystatechange:function(t){"feedback"===e.type&&0===t.currentTarget.status&&v()}}};t(o).then(function(){g(e)},function(t){"feedback"===e.type&&v()})}function f(e,t){if(!h5.isReleaseBuild||h5.debug){var n={};if(n.type="debug",n.message="DEBUG MSG: "+e,t)try{n.message+="\nDEBUG DATA: "+JSON.stringify(t,null,2)}catch(i){}n.stack="",StackTrace.get().then(function(e){for(var t=0;t<e.length;t++)n.stack+="\n  at "+e[t].toString();n.stack=p(n.stack),u(n)})["catch"](function(){n.stack=p(n.stack),u(n)})}}function p(e){return e=e.replace(E,"<host>"),e=e.replace(k,"<name>"),e=e.replace(D,"<ip-address>"),e=e.replace(x,"<ip-address>"),e=e.replace(O,"<filepath>")}function m(){var e=window.location.toString();return e.replace(E,"")}function g(t){if("feedback"===t.type){var n=r.getString("Common","feedback.thankYou")+(t.email?" "+_.escape(t.email):"")+"! "+(t.email?r.getString("Common","feedback.willContactYou"):""),i={type:e.notifications.type.INFO,title:r.getString("Common","feedback.sent"),content:n,duration:1e4,linkConfig:{label:"",onClick:angular.noop}};S.notify(i)}}function v(){var t=r.getString("Common","feedback.error"),n={type:e.notifications.type.ERROR,title:r.getString("Common","feedback.notSent"),content:t,duration:1e4,no_linkConfig:!0};S.notify(n)}function h(e){for(var t=0;t<N.length;t++){var n=N[t];if(n.message===e.message)return n.count++%100===0?(e.message+=" (count = "+n.count+")",!1):!0}return!1}var S,y,b,I,C,w="",T=!1,E=/https:\/\/[^\/]*\//gim,k=/\b(name|named|host)[\W]+['"(].+['")]/gim,D=/\b(?:[0-9]{1,3}\.){3}[0-9]{1,3}\b/gm,x=/\b(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}\b/gm,O=/(\bfile\b|\bpath\b).*(\/\S+)/gim,P=/^[a-z0-9._%+-]+@[a-z0-9.-]+$/i,A="",$=a("feedbackService"),N=[{message:"Out of memory",count:0},{message:"Nicht genügend Arbeitsspeicher.",count:0}];return{init:s,isInternalUser:c,sendFeedback:u,sendDebugMessage:f,getEmail:l}}angular.module("com.vmware.platform.ui").factory("feedbackService",e),e.$inject=["vuiConstants","$http","$injector","userSessionService","i18nService","configurationService","logService"]}(),function(){"use strict";angular.module("com.vmware.platform.ui").controller("VfeedDialogController",["$scope","$element","$rootScope","vuiConstants","$document","$http","feedbackService","i18nService","themeService",function(e,t,n,i,r,o,a,s,c){function l(t){e.smileyStyles[k]={},k=t,e.smileyStyles[k]=c.getCurrentTheme()===c.getKeys().light?w:T}function u(){var e=M?R[0].contentDocument.body:document.body,n=angular.element(e);if(!M){var i=document.getElementsByClassName("modal-backdrop"),r=angular.element(i[i.length-1]);r.detach()}var o=document.getElementsByClassName("wizard-steps-list"),a=null;o.length>0&&(a=angular.element(document.getElementsByClassName("wizard-steps-list")[0]),a.removeClass("wizard-steps-list"));var s={allowTaint:!0};html2canvas(n,s).then(function(e){M||n.append(r),a&&a.addClass("wizard-steps-list"),E=e;var i=t.find(".canvas-div");E.setAttribute("class","canvas"),i.append(E),m(),v(),d()})}function d(){var n=t.find(".add-screenshot"),i=t.find(".remove-screenshot"),r=t.find(".canvas-div"),o=t;e.hasCanvas()?(o.css("width","100%"),r.show(),n.hide(),i.show()):(o.css("width","320px"),r.hide(),n.show(),i.hide())}function f(){E=null;var e=t.find(".canvas-div");e.empty(),S(),d()}function p(){if(e.cc_emails=[],!e.message)return 1;if(e.feedbackForm.$error.email)return 2;if(!e.cc)return 0;var t=null;t=e.cc.indexOf(",")>0?e.cc.split(","):e.cc.split(" ");for(var n=0;n<t.length;n++){var i=t[n].trim(),r=i.length-11,o=i.indexOf("@vmware.com"),a=i.indexOf("@pivotal.io");if(0>=o&&0>=a||o>0&&o!==r||a>0&&a!==r)return 3;e.cc_emails.push(i)}return 0}function m(){b=document.createElement("canvas"),b.width=E.width,b.height=E.height,I=b.getContext("2d");try{I.drawImage(E,0,0)}catch(e){console.log(e)}y=E.getContext("2d")}function g(e,t,n){var i=_.length-1;_[i].push(e),D[i].push(t),x[i].push(n),O[i].push(F)}function v(){y.clearRect(0,0,y.canvas.width,y.canvas.height),b&&y.drawImage(b,0,0),y.lineJoin="round";for(var e=0;e<_.length;e++)for(var t=0;t<_[e].length;t++)y.strokeStyle=O[e][t]===U?"#df4b26":"#cccccc",y.lineWidth=O[e][t]===U?5:20,y.beginPath(),x[e][t]&&t?y.moveTo(_[e][t-1],D[e][t-1]):y.moveTo(_[e][t]-1,D[e][t]),y.lineTo(_[e][t],D[e][t]),y.closePath(),y.stroke()}function h(){_.pop(),D.pop(),x.pop(),O.pop(),v()}function S(){_=[],D=[],x=[],O=[],v()}var y,b,I,C=1e3,w={border:"1px solid blue"},T={border:"1px solid #49AFD9"},E=null,k=0,_=[],D=[],x=[],O=[],P=t.find(".canvas"),A=!0,$=!1,N=!1;e.smileyStyles=c.getCurrentTheme()===c.getKeys().light?[w,{},{}]:[T,{},{}],e.selectSmiley=l,e.addScreenshot=u,e.removeScreenshot=f,e.clearAllLines=S,e.undo=h;var R=window.document.getElementsByClassName("sandbox-iframe"),M=!1;if(R&&R.length>0){var j=R[0].getAttribute("ng-src");M=j&&0===j.indexOf("/ui/dashboard-ui"),e.showiFrameWarning=!M}e.email=a.getEmail(),e.email||(e.emailPlaceholder=s.getString("Common","feedback.optionalEmail")),e.cc=null;var L=null;n.errMessage?(e.message=s.getString("Common","feedback.errorMessage")+" "+n.errMessage,n.errMessage=null,L=n.stackTrace,n.stackTrace=null,k=-1):e.message="",e.charsLeft=C;var U=0,V=1,F=U;e.useMarkerPen=function(){F=U},e.useEraserPen=function(){F=V},e.hasCanvas=function(){return null!==E},e.handleKeypress=function(e){13===e.which&&e.stopPropagation()},e.signPostParams={message:s.getString("Common","feedback.helpMessageJSVersion",s.getString("Common","feedback.helpMessageUrl")),title:s.getString("Common","feedback.help")},e.$watch("message",function(t){t&&t.length>C&&(e.message=t.substring(0,C)),e.charsLeft=C-e.message.length}),d(),e.useMarkerPen();var B=document.getElementsByClassName("vui-dialog");if(B.length>0){var H=angular.element(B[0]);H.css("max-width","90%"),H.css("max-height","90%"),H.css("overflow-y","auto");var G=angular.element(B[0].getElementsByClassName("titlebar-text"));G.css("max-width","100%")}var q=!1;e.dialogOptions.confirmOptions.onClick=function(){if(q)return!0;var t=p();if(0===t){var n={type:"feedback",email:e.email.substring(0,100),cc_emails:e.cc_emails,rating:k+1,message:e.message,stack:L,canvas:E};return a.sendFeedback(n),q=!0,e.dialogOptions.data.message=e.message,e.dialogOptions.data.email=e.email,!0}return e.dialogOptions.validationBanner.messages=[{text:1===t?s.getString("Common","feedback.typeMessage"):2===t?s.getString("Common","feedback.enterValidEmail"):"CC only vmware.com addresses",type:i.validationBanner.type.ERROR}],!1},P.mousedown(function(e){if($===!1){_.push([]),D.push([]),x.push([]),O.push([]);var t=E.parentElement.parentElement.parentElement.parentElement.parentElement,n=t.parentElement,i=e.pageX-E.offsetParent.offsetLeft-n.offsetLeft+t.scrollLeft-4,r=e.pageY-E.offsetParent.offsetTop-n.offsetTop+t.scrollTop-2;A=!0,$=!0,g(i,r),v()}}),P.mousemove(function(e){if(A===!0&&N===!1){var t=E.parentElement.parentElement.parentElement.parentElement.parentElement,n=t.parentElement,i=e.pageX-E.offsetParent.offsetLeft-n.offsetLeft+t.scrollLeft-4,r=e.pageY-E.offsetParent.offsetTop-n.offsetTop+t.scrollTop-2;N=!0,g(i,r,!0),v()}else N===!0&&(N=!1)}),P.mouseup(function(){N=!1,$=!1,A=!1,v()}),P.mouseleave(function(){A=!1})}])}(),function(){"use strict";function e(e,t,n){function i(i){r&&r.destroy();var o=e.$new();o.dialogOptions={show:!0,confirmOptions:{label:n.getString("Common","feedback.send")},rejectOptions:{label:n.getString("Common","feedback.cancel"),onClick:function(){return!0}},data:{message:null,email:null}},i?(o.dialogOptions.title=n.getString("Common","feedback.errorTitle"),o.dialogOptions.contentUrl="resources/ui/views/vfeed/vFeedError.html"):(o.dialogOptions.title=n.getString("Common","feedback.title"),o.dialogOptions.contentUrl="resources/ui/views/vfeed/vFeedDialog.html"),r=t({scope:o,configObjectName:"dialogOptions",positionClass:"vfeed-dialog"})}var r=null;return{showFeedbackDialog:i}}angular.module("com.vmware.platform.ui").factory("vFeedDialogService",e),e.$inject=["$rootScope","vuiDialogService","i18nService"]}();var platform;!function(e){var t;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t||(t={}));var n=function(){function e(e,t,n,i,r,o,a){this.logService=e,this.$rootScope=t,this.$q=n,this.webSocketPingService=i,this.vxZoneService=r,this.webSocketService=o,this.$log=a,this.WEB_SOCKET_CLOSE_NORMAL_STATE=1e3,this.OPEN_INVENTORY="OPEN_INVENTORY",this.openedChangelogs={},this.log=e("websocketMessagingService")}return e.prototype.initialize=function(e){var t=this,n=this.webSocketService.createWebSocket(e);if(!n)return null;var i=!1;return n.onmessage=function(e){var n=angular.fromJson(e.data);t.handleReceivedMessage(n,n.type)},n.onopen=function(){i=!0},n.onclose=function(n){t.$log.debug("Web socket on "+e+" was closed"),i&&t.handelCloseEvent(n,e)},n},e.prototype.initializeLiveUpdates=function(){return this.initializeLiveUpdatesFunction&&this.liveUpdatesSocket&&this.liveUpdatesSocket.readyState!==t.CLOSED&&this.liveUpdatesSocket.readyState!==t.CLOSING||(this.initializeLiveUpdatesFunction=_.memoize(this.initializeLiveUpdatesSocket)),this.initializeLiveUpdatesFunction()},e.prototype.send=function(e){return this.liveUpdatesSocket?this.liveUpdatesSocket.readyState!==t.OPEN?void this.log.error("Trying to send on non-ready websocket, state: ",this.liveUpdatesSocket.readyState):void this.liveUpdatesSocket.send(e):void this.log.error("Trying to send on non-initialized websocket")},e.prototype.reOpenChangeLogs=function(){for(var e=_.keys(this.openedChangelogs),t=0,n=e;t<n.length;t++){var i=n[t];this.openedChangelogs[i]&&(this.openedChangelogs[i]=!1,this.openInventory(i))}},e.prototype.openInventory=function(e){var t=this;this.openedChangelogs[e]||(this.openedChangelogs[e]=!0,this.initializeLiveUpdates().then(function(){t.$log.debug("Sending "+t.OPEN_INVENTORY),t.send(t.OPEN_INVENTORY+":"+e)}))},e.prototype.initializeLiveUpdatesSocket=function(){var e=this,t=this.$q.defer(),n="wss://"+window.location.host+"/ui/live-updates",i=!1;return this.$log.debug("Initializing live updates socket on "+n),this.liveUpdatesSocket=this.webSocketService.createWebSocket(n),this.liveUpdatesSocket?(this.liveUpdatesSocket.onmessage=function(t){var n=angular.fromJson(t.data);if(n.payload&&n.payload.destination){var i=n.payload.destination.substring("/topic/".length);e.handleReceivedMessage(n,i)}},this.liveUpdatesSocket.onopen=function(){e.$log.debug("Opened live updates socket."),i=!0,t.resolve(function(t){e.liveUpdatesSocket.send("SUBSCRIBE\n destination:"+t)})},this.liveUpdatesSocket.onerror=function(){e.$log.debug("Error detected for live update socket "+n),t.reject()},this.liveUpdatesSocket.onclose=function(t){e.$log.debug("Live updates socket "+n+" was closed."),i&&e.handelCloseEvent(t,n)},t.promise):(t.reject(),t.promise)},e.prototype.handleReceivedMessage=function(e,t){this.$rootScope.$broadcast(t,e.payload)},e.prototype.handelCloseEvent=function(e,t){e&&e.code&&e.code!==this.WEB_SOCKET_CLOSE_NORMAL_STATE&&(this.$log.debug("Web socket was closed with status code "+e.code),this.webSocketPingService.startPing(t))},e.$inject=["logService","$rootScope","$q","webSocketPingService","vxZoneService","webSocketService","$log"],e}();e.WebsocketMessagingService=n,angular.module("com.vmware.platform.ui").service("websocketMessagingService",n)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e,t,n,i,r){var o=this;this.$rootScope=e,this.vxZoneService=t,this.webSocketService=n,this.userSessionService=i,this.$log=r,this.UNAUTHORIZED_HTTP_STATUS_CODE=401,this.BAD_REQUEST_HTTP_STATUS_CODE=400,this.NO_RESPONSE_STATUS_CODE=0,this.PING_INTERVAL_SEC=1e4,this.timerId=null,this.$rootScope.$on("$destroy",function(){o.stopPing()})}return e.prototype.openWebSocket=function(){var e=this;this.userSessionService.ping().then(function(t){if(e.$log.debug("Received status code "+t+" from url "+e.socketUrl),t===e.UNAUTHORIZED_HTTP_STATUS_CODE)return void e.stopPing();if(!(t>=e.BAD_REQUEST_HTTP_STATUS_CODE)){t===e.NO_RESPONSE_STATUS_CODE&&e.reload(window),e.$log.debug("Recreating web socket on "+e.socketUrl);var n=e.webSocketService.createWebSocket(e.socketUrl);return n?void(n.onopen=function(){n.close(),null!==e.timerId&&(e.stopPing(),e.vxZoneService.runInsideAngular(function(){e.$log.debug("Broadcasting socket reopen and data refresh invocation events."),e.$rootScope.$broadcast("reOpenWebSocketsEvent"),e.$rootScope.$broadcast("dataRefreshInvocationEvent",null)}))}):void e.stopPing()}})},e.prototype.reload=function(e){e.location.reload()},e.prototype.startPing=function(e){var t=this;this.$log.debug("Start web socket ping on "+e);var n=this.openWebSocket.bind(this);this.vxZoneService.runOutsideAngular(function(){t.timerId||(t.socketUrl=e,t.timerId=setInterval(n,t.PING_INTERVAL_SEC))})},e.prototype.stopPing=function(){var e=this;this.$log.debug("Stop web socket ping on "+this.socketUrl),null!==this.timerId&&this.vxZoneService.runOutsideAngular(function(){null!==e.timerId&&(clearInterval(e.timerId),e.timerId=null)})},e.$inject=["$rootScope","vxZoneService","webSocketService","userSessionService","$log"],e}();e.WebSocketPingService=t,angular.module("com.vmware.platform.ui").service("webSocketPingService",t)}(platform||(platform={}));var platform;!function(e){var t=function(){function e(e){this.log=e("webSocketService")}return e.$inject=["logService"],e.prototype.createWebSocket=function(e){var t=window.WebSocket||window.MozWebSocket;return t?new t(e):(this.log.error("Error: WebSocket is not supported by this browser."),null)},e}();e.WebSocketService=t,angular.module("com.vmware.platform.ui").service("webSocketService",t)}(platform||(platform={}));
//# sourceMappingURL=jsUiLib.min.js.map
